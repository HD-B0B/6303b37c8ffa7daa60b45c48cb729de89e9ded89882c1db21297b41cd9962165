---


Title: SaaS Webinar Platform With AI Sales Agents - Nextjs 15, Vapi AI, Hostinger, Clerk, Stream, Neon

---

() [Music] today you'll be building an army of sales reps that never sleep witnessing the most disruptive piece of software in the marketing space You'll turn your vision into reality by crafting a platform that brings in customers for life And with the power of AI agents we will revolutionize webinars forever See this isn't just another portfolio project It just might be your way out of your 9 to 5 job Spotlight empowers marketers and () business owners who want to leverage voice AI agents and AI sales reps on their webinars They can host webinars and create breakout rooms powered by the AI agents who can then speak to their customers book meetings and even close leads on one-on-one sales calls just like this How is the lack of automation and quality leads affecting your business right now Like what's the impact dayto-day Yeah so the impact is that first people are just not motivated to change their current situation which is very hard of course And so I think that's that's the first thing we need which is just a qualification uh kind of step in between That makes total sense and actually that's exactly what our software is built to do How would having that kind of system in place change things for you Oh my god that would mean the world man I mean cuz we've been looking for it's the last investment you'll ever make Are you ready to secure your spot and make the payment today Uh no I usually like to think about it So let me ask if you're confident this is exactly what you need what's holding you back from taking action now and starting the transformation today I mean that's a good point I mean I am confident that this is going to help me but uh I'm just scared that the price is going to be crazy and something that I can't afford I mean yeah I I just think maybe I can't afford it So I hear you and I appreciate your honesty Just to clarify when you filled out the form before the webinar the program was within the budget range you selected right If the price is the only thing holding you back would fixing that help you move forward today Yeah man That sounds good Yeah that sounds fine to me Awesome You're going to love this Go ahead and scroll down to the bottom of the page You'll see the buy now button Okay sure So I just clicked on it and let me go ahead and make the payment Just a moment If that doesn't excite you enough then here's funny a client from Prodigy's University who used the same SAS business model and with the help of the mentorship and courses got his first client for $30,000 in less than one month of implementing these strategies And in this course you will learn how to build an application just like this And when you're ready to take it to the next level and learn the business side of starting launching and growing a profitable SAS online then you might be a perfect fit to join Prodigy's University Enrollment is only open for six SAS entrepreneurs So if you're ready to take your skills to the next level see if you qualify with the link in the description down below Now moving on to the project demo The first thing we will build is authentication Without strong off your application is prone to security vulnerabilities And for that reason we will be using Clerk to secure our app When the user enters the dashboard they are given step-by-step instructions on what to do next The first step is to connect their Stripe account But wait why do we need Stripe Connect inside Spotlight Well I guess you need to wait to find out Let's go ahead and connect our Stripe account And in few minutes you can see our Stripe account is connected Next let's create our first AI agent The AI agent is built using Vappy AI under the hood a powerful humanlike voice AI that can handle our sales calls during our webinar Don't forget to use the link in the description to get a ton of free minutes every single month And if you use code web prodigies at checkout you also get 500 additional free minutes And it does not stop just there By using our link you also get our sales prompt that has a 92% close rate Now let's give it all the information it needs to create this AI agent And there we go Now we have an AI agent ready to take on our sales calls Spotlight uses a hard payw wall which means users need to pay to create their first webinar We do this because our target market is a very specific person who faces a very specific problem and they are willing to pay top dollar to have the problem solved Now let's look at the different webinar flows Spotlight has Spotlight has two different CTAs that marketers usually push The first one for sales calls and the second is for a hard sell where marketers usually drop discounts on products that require customers to buy at the end of the webinar To accommodate these situations we will have two options buy now CTA and book a call CTA We will look into these flows in more detail later on For now let's create our first webinar and select the buy now CTA Remember when we connected Stripe into the app The user can now attach a product to the webinar so they can collect payments directly on the webinar itself After creating the webinar the host receives a link that they can then take and share with their viewers Let's copy this link and let's open it in a different tab This page is the funnel page for this webinar It shows a timer and information about the upcoming webinar This view is what attendees see right now And if they wish to attend the webinar they can sign up on this page One of Spotlight's standout features is that it allows marketers to track each lead's current stage in the pipeline So when the user signs up on this webinar they can see who signed up inside the leads page They can also track every single stage inside the pipeline When the webinar begins all attendees will receive an email notification And when they join the webinar they are redirected to the waiting room This is where they will wait for the host to go live Our application integrates OBS a tool that most marketers use to build custom streaming experiences And all they have to do to grab the OBS credentials is by clicking the button at the bottom of the webinar copying the credentials and pasting them inside OBS When ready hosts simply click go live to begin broadcasting instantly to all attendees This seamless production-grade streaming experience is powered by stream a highly scalable solution with realtime events and global infrastructure fully integrated into Spotlight Don't forget to use the link in the description because that link gives you a free maker account That means stream is free for you because you're a new business The webinar also has a chat menu where users can chat ask questions and this application is built in such a way that you can expand on these features like lock chat hostly mode recorded mode and more All powered by none other than stream When the webinar host is ready to drop their offer all they have to do is click the CTA button on the webinar and all attendees will see a modal that looks like this Now since we selected the buy now CTA the user is redirected to a Stripe checkout page to make the payment Imagine if you added features like live view count or add to cart count This would drastically increase the conversion rates Now this is part of () a secret feature list for your team so that you can plan future iterations on this product to make it as sticky as possible Not just that there's also nine other bonuses that you will get when you purchase the codebase during our launch period Once the launch discount ends these bonuses will no longer be available And the best part is you get all of this at just 55 bucks Now keep in mind this offer is only for the launch period So if you want to stand out and save a ton of time and money and at the same time have a bug-free smooth coding experience then I highly recommend you grab the codebase from the description down below at its lowest price And for those of you who choose not to grab the codebase the boilerplate code will be provided in the Discord down below or you can just simply watch this video When the user creates a webinar with a book a call CTA they can also add an AI agent into the webinar The AI agent will follow all the instructions given inside the prompt So the possibilities are limitless When the webinar host is ready to send attendees to a breakout room they can click the CTA button at the bottom This modal will show up and when they click the CTA they are redirected into a private breakout room with the AI agent The AI agents can then filter leads who qualify for the offer encourage a sale by pushing them forward in the pipeline ask attendees to reschedu if needed and perform all the tasks you give it inside the prompt Once the webinar is completed the host can end the webinar for all attendees and can also access past webinar recordings inside their dashboard And finally we will deploy our SAS on a custom VPS That means no more surprises when it comes to billing and full route access into our server This way we can accept customers and make money on day one And we will use HostingerVPS in combination with Coolifi to make deployment seamless and very affordable And Hostinger was nice enough to give the Prodigy's community a huge discount if you use the link in the description down below And if you use code web prodigies at checkout you can get an additional discount on top of the heavily discounted KVM2 plans which makes deployment very affordable for people around the world With that being said let's jump straight right into this project Before we get started go ahead () and click the Discord link in the description down below You can access all of the boilerplate code along with the CSS files and the assets that we'll be using in this video Click on YouTube kit click on spotlight and you can download all of the files that are required Even if there are files in the description that you cannot access in this course I will show you every single thing You can essentially get the codebase or whatever we are discussing by just watching this video But if you're looking for all of the code files along with the implementation done for you so that you don't have to waste any of your time and pretty much just grab the codebase there's going to be a link in the description This is a launch discount So if you're looking to grab this codebase anyway I would suggest grabbing it right now because it is on a discount and you also get a bonus license that we typically charge $100 for completely for free I highly highly recommend you grab the codebase because if you face bugs when you code or if you are lost you can just look at the codebase and you will pretty much have no errors because you're going to be using exactly what we used in the code Now in this project I will be using npm You can choose whatever CLI tool you like but npm works best Now when you're building using npm if you see a dependency issue which is actually quite common right now all you have to do is add the flag legacy dash legacy dash pier-eps And this will essentially help you install any packages with the legacy key and it's essentially going to install it without any uh problems in your code Next go ahead and open up your folder structure and create a folder with the exact naming convention web prodigies-spotlight Go ahead and grab that and drop it into your cursor IDE Now I'm using cursor You can use Visual Studio Code if you like It doesn't matter It's all This video is sponsored by Hostinger If you're looking for () reliable affordable and developerfriendly VPS solutions then Hostinger is one of the best options available Their VPS plans are powered by fast NVMe SSD storage and AMD processors that give your application top tier performance With KVM virtualization your resources are fully isolated so you never have to worry about shared limitations Hostinger also gives you full route access that lets you customize your server exactly the way you need so you can deploy with different operating systems like Ubuntu Koolifi and more This makes it perfect for a modern SAS and web application They've also introduced an AI assistant named Kodi who's designed to help you manage your server Hostinger also has one-click templates which make it easy to launch popular apps like Node.js JS and N8N using HostingerVPS The best part is Hostinger's pricing is transparent and extremely affordable There is no surprise charges and no hidden fees Use the link in the description and don't forget to use code web prodigies at checkout to claim a limited time discount on top of the already discounted KVM2 plans Next go ahead and () type nvxcreate next app at and then you want to go into the the codebase and you want to open up the package.json and you're going to find the next version that I use So please keep the codebase open You're going to need it It's going to make things so much easier So go ahead and put a space after this and hit enter and put a period sign and that's going to ask you to proceed Hit yes Hit enter Yes for this you want yes for eslint for tailwind source directory app router turbopac no and then hit enter again and that's going to install everything so while that's happening we're going to open up another tab and go into shhatsenui let's open up installation nexjs and you're going to find the npm command in here go ahead and copy this command and you want to paste it inside your terminal and hit enter and that should actually install that as well there we go so click on neutral And it's asking for the pure dependencies again So we're going to use use legacy pure deps And let's give this a second Okay there we go And our dependencies and chats is also installed into our application Next go ahead and copy this up till the word add Don't copy the button And you want to paste it into your terminal Hit enter And it's going to give you all of the components And now click on A and then hit enter And this just helps us speed up the process so we don't have to install every single component again and again Right And also make sure you click on use legacy pure dependencies and that should install everything for us Now if everything is installed correctly you should see a components.json file You should see a components folder inside your source folder along with all the UI components from Shatsian UI Once that's done go ahead and say npm rundev Hit enter and then open up localhost 3000 And if everything is installed correctly you shouldn't see any errors And make sure you obviously refresh this page A lot of you guys asked me that question last time and it was very silly Uh you need to make a call in order to get the file So go ahead and call localhost 3000 and that should load up this file for you The next thing we're going to do is we're going to get next theme So go into Shatsene UI click on themes and actually not this one It should be dark mode Uh not this one as well All right this one right here So click on dark mode click on next.js and then it's going to give you this command copy that and then paste it into your terminal So I'm going to open another terminal paste it hit enter and okay so I see the pure dependency issue So go ahead and you want to say d- legacy-ps and hit enter And that's going to install next themes for us And in the meantime I'm going to copy this code here And it says I have to create a provider So that's the first thing we're going to do Inside the source directory you're going to create a folder in here So I'm going to say plus like this And I'm going to call this providers And once that's done inside this you want to create another file And this file should be called theme-provider.tsx And then I'm just going to paste whatever I got from here So copy this paste it inside this component Let's actually shrink that so you can see clearly And then all we have to do is it says we have to wrap our component inside this So I'm going to go ahead copy this line Go into my layout which is inside this file And at the top of the file first we got to import this So I'm just going to quickly import the theme provider from this specific component Okay So the file of course is in in our providers folder So let's go ahead and grab it from there And then once that's done we're going to scroll down here And it's telling us to first add suppress hydration warning So I'm going to copy that and I'm going to add it to the HTML tag And I I think you also have to do it on the body tag as well So I'm just going to put it in here for now And then we got to wrap our theme provider So down here we're going to essentially say theme provider and we're going to put the attri attribute class default system enable system as well and disable transition on change Next I'm going to change the font that we're using So go ahead and remove these fonts And we're going to remove this one as well We're going to use the font manroppe from Google fonts And then down here we're going to change this to manroppe variable And we also have to establish that So down here I'm going to say manroppe like this Latin And then this has to be font manroppe Okay And obviously just refresh your browser to make sure that all the fonts are loading And awesome Great stuff Now the next () thing we have to set up is authentication Now I hate spending time on authentication and building this unnecessary system and most of the time it has a lot of security vulnerabilities because it takes a long time to get authentication right and most of you guys are probably you know beginner developers so you probably don't know um and so as a SAS developer my goal here is to make money as fast as possible and to get my product in front of my users yesterday right and so I want to focus on getting feedback from my users so I can help build a better product and obviously I will not want to build and waste a lot of time on authentication and that's why I will be using Clerk in this project Now Clerk is the sponsor of this video So thank you so much to Clerk Now I don't have to even say this I think you guys already know I've been using Clerk in all of my production grade apps as well um just because they are honestly the best in the industry right Their pricing tier is awesome It's completely free to use Clerk Okay And even if you need to pay for it honestly I don't even think you're going to get there right It's 10,000 monthly active users until you need to pay Now one awesome thing about Clerk is it's not just a user uh it's it's I mean it's not just authentication Clerk is unique because it's a user management platform A lot of you guys don't know this right So it's not just signin signout Clerk is more than that You can do so many more things For example you can do security based stuff right You can give the user the ability to log out of multiple devices to look at how many devices they're connected into two-factor authentication and all these components are built for you So it would be an absolute no-brainer for you to I mean to take to opt into Clerk right They made it a no-brainer for us and that's why I'm using Clerk in this project Okay So go ahead use the link in the description Obviously you get a free account and uh once you're done you'll be navigated into the dashboard and then we'll go from there Okay So I already have million applications in here but I think you can essentially create unlimited applications So that's awesome So first thing I'm going to do in here is change this to web prodigies-spotlight And then you want to turn off email and only keep Google Okay And go ahead and create the application And in just a second you're going to have all of the details that you need to essentially wire this up into your app So first thing we're going to do is we're going to scroll down here and we're going to copy this command We're going to open up the terminal paste it and let that install Then also go ahead and create a environment file in your root right here So I'm going to say env And this should be ignored So please make sure that this is turned on And now go ahead and copy these variables and paste the variables inside your environment uh environment file Next we need a middleware Now I actually have a custom middleware but don't worry I'll actually show you what the code looks like But inside this source you have to create a middle Sorry this is wrong I'm I'm actually using Mac shortcuts This is the first time I'm on Windows guys and I don't know if I actually like it but I wanted to see if I can build everything in different you know systems Okay so middleware.typescript And inside this here's all we're going to do So this is the exact same thing that they have typed So just copy and paste this into your code Okay And the only thing you want to change is where it says export middleware So you're going to open this up You're going to pass in an arrow function and you're going to say if is public route And so how do we do that We're going to create this object up here and we're going to use the create route matcher Okay And it shows that something is wrong here Let me just take a quick look Okay So it turns out that it did not install because of the dependency issue So go ahead and say legacy-pier-seps and hit enter And then once that's done obviously you should see this update Okay awesome So I just copied the code pasted it in here And now I'm just going to do this manually so you guys can see what I'm doing I'm going to scroll up here and I'm going to say const is public route is public route just like this And actually uh I'm using cursor so it's going to do it for me in a second And for now we are just going to pass in all of these values So pause the screen and type this out Okay So once you're done the next thing we have to do in here is we have to get this async function callback function and if it is not a public route then we're going to protect that route Next if you scroll down here it says you have to go into your layout file So I'm going to open up app go into layout.tsx and you want to put the clerk provider right here So I'm going to hit enter here and I'm going to move all the all of the code inside this And now we have our clerk provider And obviously we also have to import this So I'm going to go up top and import our clerk provider And that's all you have to do That's why Clerk is awesome You now have production authentication set up inside your application and you don't have to do anything And Clerk has a lot of cool features Now if you take a look at their documentation you can actually have your own sign-in pages as well I've actually created a video on this If you look at my uh one of my videos I think this one is Drupal which is the learning management system I actually show you guys how to create create a custom flow So if you don't want the clerk you know branding you can also use that But again it beats the whole purpose right Don't waste your time Like use things that are already built for you There are full stack engineers that are spending hours and hours of their time millions of dollars a month just to get this stuff out for you Okay cool Now the next thing we need to do is you want to go into your environment file and I'm going to create these three variables here So first is next public clerk signin force redirect and it's going to take us to the callback route and same for signup And for our next public base URL I'm going to set localhost 3000 And also guys this file will be available inside the discord as well So also if you're not able to access the discord you can just pause the screen and type Okay I'll be showing you every single thing I know that in the past there has been some issues We're getting rate limited limited cuz so many people are trying to join the discord and so some of you guys may not be able to join right And so if that's the case first just pause the screen and type it I'm going to show you everything even scroll pause all that kind of stuff right So make sure you pause and type these out Now the next thing that you'll notice is if you have your environment spun up and if you look at the application you're going to see this page here right And the reason why we see this random page here is because we don't have any of the routes set up So that's the next step So inside your app folder so click into app You want to create another folder And this is a route group called O And the reason why we're doing this is because we want to wrap a layout around the sign-in and signup routes Okay so let's first go ahead and do that So I'm going to say layout.tsx and inside this I'm going to use tsfce and I'm going to change this to layout just like this And this file is going to need the children prop of course So I'm just going to render the ch children prop But the main thing here is the styling So I'm going to set this to with full And please go ahead and actually just pause the screen and type these out So now that we're done with our layout let's go ahead and create sign-in And then we also have to create our sign dash up Okay And this is where we're going to use all of our providers Now inside the sign dashin we want you want to create another folder So new folder And this one is going to be all routes So it's going to say sign-in like this And inside that you want to create a page.tsx So go ahead and do the same thing but for the sign up I actually made a spelling error here but just go ahead and do the same for the signup route as well All right hopefully you got that correct If not this is exactly what it should look like You should have a sign-in route and ignore this callback route for now I'll show you what we're going to do in there but you want to have a sign-in route just like this You want to have signin a page.tsx and same thing for signup as well Now inside the sign-in component essentially the sign-in page.ts tsx you're going to just render out the sign-in component from clerk next.js and you want to do the same thing for signup as well So go ahead pause this video and take it up as a challenge and try to render out the signup page as well Now one more thing we need to add inside our code is the default root layout So the root page So inside the middleware.typescript go ahead and put this backslash like this And now you'll be able to access the localhost 3000 Now if you try to access signin you should see our sign-in component Great job Now here's another awesome component that I just came to know about that I'm actually using myself which is the weight list component Now when you first start this SAS if you decide to start this as a SAS you want to have a weight list because your first goal is to promote And so the best way to do this is through getting emails That's how you sell the outcome And so what you want to do is essentially just open up clerk weight list right just open up another tab and look for that You're going to find this and all you have to do is copy this code and I'm just going to paste this in here So I'm going to say weight list from clerk next.js and we're going to say weight list inside this And now if you access the landing page it's a weight list component ready to go So this will accept real details from your customers and then you can reach out to them or pretty much set up automations and uh build your email list before you even launch your SAS The next thing that we have to consider is what happens when the user is done signing into our application We need to route them to the right page And the best way to do this is through an entry point file or entry point route And the entry point in my application is called callback Now how do we set up this logic Clerk actually does everything for you All you have to do is just tell it which page That's it And we already did this inside the environment variables So if you have the file from the Discord or you just type this out make sure it says call back without any spelling errors I want you to take this up as a challenge because I've already showed you how to create routes and folders and pages So go ahead and create a route called callback and you want to make sure that inside that obviously you need a page.tsx and just render out a component for now and then I'll show you what to do next Hopefully you got it right This is all you have to do So you want to create callback a page.tsx tsx and then you want to say export const dynamic force dynamic You don't have to do this but it just makes it a dynamic page That way we get we always get up-to-date data and there's no cache data And then this is the page We're just returning something in here So I'm just going to return a div and say call back page for now I also put a to-do on top here because we have to do some redirection logic like checking in the database and all that kind of stuff So for now just go ahead and put a to-do in here and then we'll get back to this in a second Now that we're done setting up the basic stuff for our application the next thing that we can focus on is our UI system and UI colors Now our team () has spent a lot of money designing this beautiful minimal design and it has pretty much all the components that you need It's a Figma file that you can grab from the description down below Okay And this file comes with everything It comes with how we came up with the mood board how we research stuff uh you know components from other libraries as well So if you are looking to actually make this a SAS application you'll also get all of the third party tools that we used inside here And this project also comes bundled up uh bundled up with Shad CN UI right So you get every single thing inside Chats CN UI Now here's the cool part in this project right So this essentially uses variables Now it's a very advanced um you know Figma design setup and if you don't know anything about Figma that's totally fine But I just want to show you the power of this specific design Take a look at this So we use variables with primitives inside our inside this Figma design And so all you have to do is select the container and if you change it to dark mode all the elements inside that will also switch to dark mode So this way you can use this Figma design to prototype and sort of like sell the outcome of your of your SAS application whether it's this or anything else and uh that way you get customers early on and uh you get some feedback from them and this pretty much has everything like you see we have checkbox we have all the comp components we have command components table switcher I mean it's every single thing inside chats UI so I would highly highly recommend you grab this file if you want to learn more industry level practices and essentially maybe even get this file so you can start it as a SAS Okay it comes with all the designs that we're going to be looking at So what we're going to focus on is essentially converting all of these styles right So getting all of these CSS files for our application Now typically what I would ask you to do is essentially open up this file go into variables and literally you need to convert all of these into Shatsian's colors But I know that that's going to take you forever and I don't want that for you So that's why I've gone above and beyond and done this for you as well Okay So inside the Discord you will get access to all of this So just download it copy it and paste it into your application And I'm going to show you exactly what that looks like All right So I just grabbed it If you're not able to grab it it doesn't matter Okay Nothing matters when it comes to this design stuff because it's already done We just tweaked the colors to follow a theme And if you want to stand out I'm going to show you a secret way that you can actually tweak all of these themes So I found a tool online called Tweak CN I think this is this is what it's called I I actually don't find it used a lot Like I don't see a lot of people talking about it And uh free shout out to them They're not sponsoring this for anything I don't even know who these people are So they pretty much created a theme creator And just to show you so I just open this file You can select any theme you want right And there's so many different themes that you can pick from Just copy it put it into your app and so you can have a unique looking design and uh maybe share this inside the Prodigies community or tag me on Twitter Uh let me know what you guys built so I can take a look at your themes as well So depending on what theme you decide go ahead copy the code and paste it inside your global CSS file Now this is using Tailwind V4 So I'm also going to go ahead and copy the file that I've already created that also comes with some additional styles Okay And so the additional styles first of all are these after the base So I'm just going to scroll through these so you guys can take a look at it And uh this is needed for our application because when we're building the chat and the you know the AI voice the voice AI stuff We're going to need all of these classes to create those styling Okay So it just has a key frame here for ping and pulse It has some animations to essentially you know add that class onto those elements And uh we have a few more things in here This is just some before before and after pseudo selectors So go ahead pause the screen type this out or again you can copy it but just in case you can't join you can you know obviously just type This video is sponsored by Vappy Vapy AI lets you () build real time conversational voice agents powered by AI From customer support to sales calls Vappy handles it all They offer dozens of pre-built human-like voice agents and make it developer friendly to integrate into your applications You don't need to stitch together speech to text and LLM yourself anymore They handle the full stack so you can focus on what matters most building personalized experiences Don't forget to use a link in the description to get 1,000 free minutes every single month No credit card required Now the next thing we need in () our application is a way to essentially communicate with the database and our front-end code This way we have type intellisense and typically we use something called an OM in order to do this Now you can look all this stuff up but we're going to be using Prisma Prisma is industry stuff and so we're going to be using Prisma inside this application So go ahead and I'm going to quit my terminal and copy this right here So Prisma copy this version which is 6.3.1 and then you want to say npmi and you want to say Prisma at and you want to paste that version and hit enter And then if you scroll up here you're going to find Prisma client as well So go ahead and copy that Oh obviously it's going to scream because we need the legacy pure dependencies right So legacy pure deps Hit enter and that's going to install Prisma for us And the next one we need is this Prisma client So I'm going to say npmi at prisma /client and then we have to put that version number And also don't forget to put d-leacy- pure depths Okay And hit enter And that's going to install Prisma client for us Okay Awesome There we go Now Prisma is successfully installed So let's go ahead and shrink everything here Let's go into source libs And then we're going to create a file in here called prisma.typescript Or actually I'm going to rename this guys So let me just rename it to make sure we have the same names So I'm going to say client.typescript like this And inside this file all I'm going to do is essentially create a global disc.prisma And this essentially helps preventing uh prevent turboropac sorry prevent the you know the hot reload from creating too many clients So this is exactly what it looks like I did not invent this This is you know pretty normal So all you have to do is declare this global variable and say var prisma and then if it exists we'll essentially use the same client If not we'll use the uh the new client right here The next thing that we're going to do is we're going to say npx prisma in it Go ahead and hit enter And that's going to generate some files for us So let's just take a look and make sure it's in here So inside inside your environment it should paste this database URL string Okay If it did not paste this it means something probably went wrong So just do this once more and make sure you get this file Now sometimes of course I mean in the future it might change but the most important thing is you need to you need to have this file right here which is a schema.prisma Okay So even if the environment thing changes make sure that you have your schema file somewhere inside your application Now with the help of Prisma we can essentially create models inside our application which is kind of like a table It's kind of like a table in the database and it has a structure that you can follow right And this way you get type IntelliSense because you can refer to this inside your code and it's going to know exactly what it's going to give you the same TypeScript intellisense that you need Okay so the first thing we're going to do is we're going to create some data in here So I'm going to say model user just like this And I mean it's it's giving me the AI is just giving me some stuff but uh we're going to actually change this So just give me one second So the first modal that we need is the user modal and we're going to have the following properties on the user modal and you can also grab this file from the discord If not you can obviously pause the screen and type it as well Okay so make sure you type exactly what you see with no spelling errors at all Okay even the cap you know capital letters every single thing Okay so now that we have this user we have to also connect this to another model called webinars because each user in our application can host multiple webinars And so in order to do that I'm going to create a property here called webinars and set it to this model here called webinar which is an array obviously and we're going to have a relation into that Okay called presenter webinars Now let's go ahead and create that webinar model as well So it's going to be this massive thing Just give me one second Okay So every webinar obviously is going to have some details right But we also have some enum related stuff That means this is sort of like a type It's called an enum Okay So the webinar status can be of type maybe created scheduled coming soon that kind of stuff right So we're going to store that inside each webinar as well So we get some data regarding that webinar Next every webinar also has attendees So we probably would need a modal to represent the data for an attendee as well right So the attendance is going to be in here which is an array Finally we're going to have the CTA type Now if you watch the starting of this video and you did not skip everything will make sense Okay So please pause go watch the demo from start to finish Do not skip the demo at all because it helps you understand what you're building Okay So our application is going to have two different type of CTAs Now I I want to build this in such a way that you guys can expand on this But the two main CTAs that marketers use is buy now obviously right immediate discount whatever whatever and book a call This is usually the high ticket stuff And so that's going to be another enum that we can create so that you guys can expand on this in the future And obviously we have the other basic stuff right u if you want to add a coupon code in the future I've added that in here as well Coupon enabled So the schema is pretty much scalable Okay we also have the CTA URL So what happens when the user needs to buy now Where do they go to All that kind of stuff And then finally we have the attendee Okay so this is another modal that we have to create And this is attendance and this is attendee Don't get confused Okay attendance is more like who is who has attended the webinar itself and the attendees uh the attendee information right here is so that we can link this to obviously the attendance itself and we can also link it to the webinar and the call status so we can see if they're currently in a call or not First let's go ahead and just create these enums So I'm going to scroll all the way up top here and I'm going to create the webinar status enum which is scheduled waiting room live ended and cancelled Okay And then the next one we need is a CTA type enum So going to paste that one as well And this is buy now and book a call And then we also have the attendance So the attended type enum and this is slightly different Of course we haven't spoken about this but this is a way for us to essentially track the progress Okay So did they register Did they attend the call or attend the webinar Sorry Did they add stuff to the cart Um and you know exactly which stage are they in Right And uh finally we're going to have one more type here And this one is called call status enum So pending in progress and completed Okay And now if you scroll down here you shouldn't have any more enum related errors But we do have the attendance and the attendee So let's go ahead and build that out So really quick I'm going to create the attendance model It's going to look like this It's going to have ID email name the call status enum and the attendance which is another uh model that I have to create and also the webinar for this attendee So attendees can be can attend a specific webinar Think about it that way Okay So now for the attendance we're going to have the following So same data When did they join When did they leave The user which is who's the attendee We're going to have the webinar itself and what type right What did they attend And basically all the other info that we need And that's pretty much it That's all you need to do in order to create a a scalable schema system Okay Now you can go above and beyond and expand on this in the future but this is all we need just to get started Now the next thing we need is a real database so we can () push the schema and also store all of our users and our application information so that we can use it in our app right And we'll be using Neon for this application Now Neon is also the sponsor of today's video So thank you Neon Thank you for making this happen for the Prodigies community And guys they are one of the best I've already mentioned this before You can take a look at what they have to offer And the main reason why I really want to support them is because of the generous free tier right And they recently just expanded on the number of projects you can have completely for free inside Neon Now don't forget to use the link in the description and open up your free account And that's going to take you into Neon uh Neon's dashboard So the first thing we need to do is create a new project So I'm going to go ahead and click on new project here and just put the details So I'm going to say web prodigies dash spotlight and then you can leave everything else as is Just go ahead and click on create And that's pretty much it right That's all you need And now click on connect here Let's let's expand this so we can see So uh go ahead and copy the snippet here And then you want to go into your environment variables So I'm going to scroll down here inside env and you're going to replace this database URL with this new URL that that uh Neon just gave us Also I think Neon has some really nice features that just got released I think they also have some sort of login systems or authentication Uh you guys can feel free to take a look at it They also have I think CI/CD I mean there's so many things inside this right They also have branching for database and that's pretty cool because now you can create different branches different versions of your data and you can test it against your schemas right So really cool stuff and uh yeah thank you so much to Neon for making this work for the Prodigies community Okay so let's move on to the next part now So now that we have Prisma set up the next thing is we have to migrate our schema And I actually need to grab this command So just give me a second And the command is npx prisma migrate dev And you want to put the d-name So this is whatever name you want to give it I just put name for now That's totally fine And I'm going to say in it right here Okay And now that that's done we also have to generate the Prisma file so we can use it inside our types So next you want to go ahead and say npx prisma generate And that should generate your Prisma file And just to make sure that we have it let's see Okay I got it So this is uh like I said it's not the latest version of Prisma and so we don't have this generate folder that it spits out right And I actually prefer this because when I was trying to build my file I was getting a lot of ESLint errors and that was happening because the latest version of Prisma essentially creates this output folder called generated or generator I think it's generator or something like that And essentially it gives you all of the generated files and all of the type intellisense but the issue is it gets it's since it's inside your source directory it's going to run when you when you build your folder right when you build your application sorry and as a result eslint will fire on that it's going to create so many errors for you and it's just not a pleasant experience and I actually prefer this much much better So feel free to use this version in your other projects as well Now just to confirm that everything is successfully pushed all you have to do is inside this you want to click on the tables right here And then you should see all of your tables in here Okay If you don't see this please go ahead pause this video watch the previous sections and make sure you can push and create your database scheme Now the first thing I want to get out the way is our () authentication So essentially inside of callback route remember we had this to-do right And the way I found this is by just looking this inside the file looking it up And all we have to do in here is we have to look inside the database and we have to check if the user even has access to anything right And so if they do have access to the stuff that they're requesting then we can redirect them to that page All right So all we have to do is inside your source folder go ahead and create another folder We're going to call this actions And inside that we're going to create o.typescript Typescript I keep using the shortcuts in Mac So o.typescript And inside this we're going to change this to a use server file And the first thing we're going to do is create the unauthenticated user And essentially this is just checking So it's wow it already did it for me I didn't even have to do anything So try catch block And we're going to move this stuff in here And essentially we're going to say await current user from clerk next server next.js XJS server And if there is no user we're essentially going to return a status code of 403 And you can also return a message if you'd like And then uh I'm actually going to remove this cuz we're not going to be handling that anyway And then if the user exists we're essentially going to go into Prisma client Now this Prisma client comes from Prisma from our libs folder So I'm going to bring that Prisma client in and I'm going to say Prisma client user.findique for this specific clerk user ID Now our database has this So I'm going to say clerk ID for email uh sorry for a user do ID Okay So if this person exists in our database so if the user exists then we're going to return status of 200 And if the user does not exist then we're going to create the user inside our database So we're going to say new user 08 Prisma client user.create create data for this user ID and a specific email address as well And for the user's name we're actually going to change this to first name And we're going to say plus the user's last name And then finally the user's image And then down here we're going to say if the there is no user well return 500 Um and if so if everything else is good then we're just going to return 200 and say everything is good to go Now in the error block all I'm going to do is I'm going to return a 500 error in here as well And I'm going to return and just put something in the console Now let's go back to our page.tsx and we have to import this call So I'm going to say const status and on authenticated user We're going to bring in that server action and we're going to check the status So right here instead of doing it this way I'm just going to say off right And then down here I'm going to say if status is equal to 200 then we're going to redirect the user to the homepage Okay And redirect comes from next navigation Now there's also 201 user So let's put 2011 in here And let's make sure we're actually returning that So let's go in here And we have 2011 here So this should be 2011 And let's go back Awesome There we go Now else if So else this did not work Um what we're going to do here is we're going to check for the status If it is 403 or the status is 500 or the status is 400 like this then we're going to return the user to this specific page So we're going to redirect them to this root page Okay that's pretty much it Now inside our page.tsx which is in the root file right here we're going to create a link element right here And that's going to send us to the /home route So now then when the user clicks on the login page it's going to take them to the login route Okay looks like I put the I guess it's the wrong address here And so let's go ahead and fix this Okay there we go Now I changed it to sign in And now if I click on login it's going to take me into the sign-in route Now once I'm done logging in I want to make sure it redirects me to the right page So let's go ahead and test that out So you want to continue here Awesome It sent me to the callback route Boom There we go So it created the user in the database and it redirected us to the homepage Great job You can also open up your Prisma Studio by typing npx prisma studio and that's going to open up a database image where you can essentially see all of the entries inside your database So this way you don't have to go into neon You can just access it directly from here Okay So just to confirm our user has been successfully created So nice everything is working Next let's go ahead and create a better folder structure here So I'm going to open up source open up app and inside this I'm going to create a route called protected routes like this And inside the protected routes first obviously we need a layout.tsx so we can create some designs Now I do want to point something out in here So how the layout.tsx page works is essentially it only renders once So when the bundle is being requested it renders out the layout.tsx It bundles it in and caches that file So the layout is never rendered on every call So keep this in mind because what we're going to be doing in here can potentially lead to a lot of you know authentication problems Okay The last thing you want is a security breach So I'm just letting you know right now What we got to do in here is we're going to authenticate the user inside this layout page But because the layout page does not re rerender when it's called again even if the user signs out it's still going to hold the same context okay The same data because it's all cached So keep this in mind What you need to do is even though we're doing the check in here you also have to do the check inside every single page.tsx Okay that's just one drawback here It just sucks I get it Okay the other way to go around this is to create a provider You can create a provider like a clerk provider and inside that you can use client states which I think is called clerk client I'm not entirely sure or use user I think that's what it's called and essentially it gives you the state of the user So inside the provider you can check the state and based on that when the state updates you can send the user back to the sign-in page Okay so just keep this in mind Now you don't have to worry about it for now We're just learning and we're getting the app pretty much sorted to a good you know to a good place where you can uh launch and at the same time um I'm giving you instructions for what you need to do as the app is in your hand Right So for now I'm just going to build this So what I'm going to do is I'm going to say user exists So const user exists like this And we have to go ahead and import this first So let's import the statement So we're going to say on authenticated user which we already created and in here we don't need this We can just check for the user itself So if user do user does not exist then we're going to redirect the user to the sign-in page just like this Now if the user exists then we can essentially render out the page that they're expecting to look for So since we're creating a layout in here I'm going to create a class name And this class name is going to have the following styles So please pause this video and type this out Actually it's pretty small I could have typed it but it's basically flex with full and minimum height of screen Okay And inside this we're going to have the sidebar in here So I'm going to say sidebar And then after that we're going to have essentially the main content but the children are going to be wrapped inside a div Okay And that div is going to look just like this So I'm going to say div And this div is going to have all the children items inside that Okay Or actually guys not in here We're going to have something else in here But after this element you want to essentially or we can just put this in here That's fine So we'll have this in here And then in here we're going to have a header component Okay this is like a header in here So let's first go ahead and build out the sidebar So go ahead and create this component here called sidebar You want to copy this title and you're going to open up your folder structure And you're going to click into components And now inside this you're going to create another folder in here Okay And this folder is going to be reusable component And inside this we can also create the folders that we need So I'm going to create one more folder And this is the layout components And inside this we're going to have another one called the sidebar.tsx And notice how we're using a different naming structure here Right This is the traditional React naming structure where all routes are going to be lowercase kebab skew actually and all components are going to be like this Now the first thing we need to do in here is we're going to use use path name So let's go ahead and import use path name And then we're going to have a div inside this So let's remove this here And we're going to have a div like this And we're just going to say something in here for now So we can go back and quickly import that component So inside our layout page let's go ahead and import the sidebar Make sure you you import it from the right folder Okay And let's click into this And now obviously we can't see anything right So we're going to go back into the protected routes We're going to create another folder in here called home And this is going to have page.tsx And this is going to return tsc And we're just going to set this to set it to page And I'm going just going to change it to home Okay This way we can kind of see something in here And now let's refresh this Okay so because we're using use path name inside our sidebar this sidebar now has to become a use client component So let's go ahead and add that as well And just like that you should now see SS or whatever you put in there render out into the sidebar Okay Now the next thing is I'm going to remove this and I'm going to add an icon here Now this icon is a premium asset that is only going to come with the codebase okay So I highly highly recommend you grab it anyway because you're going to need it to build this project So might as well just grab it so you can get access to all these awesome assets that were built for you Okay So what I'm going to do here is I'm going to paste a custom icon pack Okay And these are custom icons that were built And uh we also used another source in order to build these but um this comes directly from the Figma file right So we posted that in here And now you can use these icons instead of the lucid react icons Okay Uh and trust me when I say this I have a lot of user experience um experience okay UIUX experience When you just change the font and the logos the application changes That's the secret Okay Everything else is going to be the same Just change these I dare you to try it out Just try it out right Change some of the icons change the colors of them change the maybe the font here and there and that just becomes a whole new application So these these small little things make a big impact when it comes to user experience overall So the next thing I'm going to do in here is I'm going to create a div and I'm going to put the spotlight icon So let's go ahead and import the spotlight icon in here And then after the spotlight icon itself right sorry after this div I'm going to hit enter and I'm going to create a div in here And this div is essentially going to map over all of our sidebar items and we're going to render them out in here So go ahead and scroll down here You're going to find the libs folder Just create another file in here You want to call this data.typescript And inside this we're going to paste this thing It's just a a constant object So feel free to pause the screen and type this out or you can copy it from the uh from the Discord channel right And so now we need to import all of these icons So let me go ahead and grab that as well Okay there we go I used a couple icons from our custom library and some of them are from Lucid React So sparkle and webcam are from Lucid React Now let's go back into a sidebar component Let's quickly import the sidebar data in here And inside this I'm going to hit enter And I'm going to map over these And for each of them I'm actually going to render something else I'm not going to render this in here So let's do this real quick And I'm just going to remove the link component And I'm going to render a tool tip first So tool tip provider which comes from shot So let's go ahead and grab that as well Okay And just like that you want to put the tool tip provider And inside that you want to put the tool tip You need the tool tip trigger itself And this is going to be a link element that comes from next link Okay And now we're going to remove this from here And what we're going to do actually we can keep this This is fine But I'm going to provide some some styles and some class names on this link itself So go ahead and say the following So make sure you're passing in the href And then down here we're going to render out this item icon Okay but we're going to say the following So we're going to say width height of four And if the path name includes this then we're going to show it as selected Now if you notice this really weird thing here which is the icons are separated That's because we can we probably need to wrap this in another div So I'm going to create another div in here And inside this div I'm going to give it the following styles So go ahead pause the screen and type this out And then inside this div I'm going to move the sidebar itself And if everything is correct you should see the icons show up like this Now now you want to scroll down here And after this we're going to use another component from clerk It's called user button component So let's go ahead and grab this from clerk next.js And let's go ahead and render this icon down here So I'm also going to move this to the top right corner So let's move this to top right so we can essentially see our application Okay there we go So now you can see your clerk icon Look at that badge Looks super cool right And so if you click on this you can do a bunch of you know manage access stuff and uh you can essentially control your user profile Next I'm going to go back into my layout.tsx And down here I have my sidebar I want to make sure I have another component that I'm going to create called header component So let's go ahead and just say header for now And I'm going to copy this title Going to copy the name And I'm going to go into the same component that I have uh which is the the layout folder Right And inside this I'm going to create another file Going to call this header.tsx And then inside this let's go ahead and render out tsce And then now this is going to accept the following props Okay Now we don't have some of these props We just need a few of them So just give me one second So for now we only need the user object But in the future we're going to need the Stripe object as well because we're going to show some Stripe uh you know details at the bottom so they can essentially upgrade right So we're going to need Stripe subscriptions and we also need the assistant settings So we're going to say assistant stuff in here Let's remove this We don't need this So now we can get back to this later Right now the next thing I'm going to do in here is I'm going to remove this div and I'm going to paste the following div in here And this is going to have the following class name And then I'm going to say pathname.inccludes and we're going to look at pipeline So let's do this once more And if this is true then we're going to do something in here Else we'll do something in here So in this header we're essentially just kind of using the same component for multiple things right And that's why we're doing this So in here first thing I'm going to do is remove this and I'm going to render out a button component And this button comes from our shatzian button So let's go ahead and import that button as well Now let's also import the arrow left component which comes from lucid react not our not our own folders Okay And uh if this is not true then I'm going to render out the following div that has the path name and obviously the following styles pathname.split at one Okay Now I see this error here So I'm going to go back to our layout.tsx tsx and let's quickly import the header component and now let's go back actually I imported the wrong header let's import header from the right folder and let's pass in the user data as well now this is using use param so this has to be a client component so I'm going to change this to use client up top here and now the next thing I'm going to do is down here I'm going to create another div and this div is going to have the following class names Okay And inside this div we're going to have an icon This is the purple icon that we created So let's bring that in And also the lightning icon So looks like there's an arrow here All right So what I'm going to do here is I'm actually going to create a custom component for this So inside reusable component create another folder And we're going to call this purple icon just like this And inside that we're going to create an index.ts tsx And now inside this component we're just going to render out a purple icon component with the following props And it's going to have the special class that we created inside our global CSS file So if you remember those classes are going to come in handy now right So we can re reuse that stuff And then we're just going to pass in class name and children inside this element Now let's go back and let's import the purple icon And now I'm also going to install sorry import this lightning icon that I already created So let's go ahead and refresh And there you go This awesome icon shows up up here And it looks really nice This actually took a very long time U it was hard to get the design right So that's it So that's what that special class does And now the next thing is below this we're going to have a button Okay Now obviously we don't have that feature built yet but this is the the button that's going to help the user create the webinar And if they don't have a Stripe subscription then it's going to essentially replace that with a Stripe modal Okay So that way they can first get a subscription and then only then create a webinar So this is a hard payw wall application Okay Based on your business logic feel free to switch this around and uh make sure maybe if you have a different onboarding process make sure you do that as well So go ahead right here we want to say to-do build sorry build stripe subscription and create webinar button and there you go So that's exactly what we just built right this home section right here and the button and this stuff is going to come in just a moment but let's go ahead and finish up the last the rest of this page Now go ahead open up your folder structure Inside this homepage in here we're going to essentially create those components Okay so first thing is I'm going to remove this and I'm going to return a new div here with the following class names And that's going to have another div inside that with these class names in here And inside this place we're going to have a div And this div is going to have two components Okay first an H2 that says get maximum conversions right very similar to what you see right here And we also want to have the other stuff right The create process So let's go ahead and do that So first thing I'm going to do is I'm going to say div space Y6 H2 like this And then this is going to be a custom component called on boarding Okay So let's go ahead and build that component So you want to open up the folder structure And inside this you're going to create another folder called underscore Oh what's going on Sorry underscore components Okay And inside this component we're going to create the onboarding.tsx which is because it's not a page route I'm just going to call it this way And then inside this we're going to do the following So all we're going to do in here is render out a div with the following styles and we're going to loop over some onboarding steps so that way we can render out this stuff right And then we're going to render out a link for it So very straightforward stuff nothing too complicated So let's go ahead and grab that variable so we can uh that constant right here So make sure you scroll down here and go into your data.typescript And at the bottom here I'm just going to write the following So feel free to pause and type if you'd like or you can obviously go ahead and copy from the Discord as well Okay so this is just all the onboarding steps And we're going to go back in here And now we're going to import this And there we go Okay So let's go back now and let's import our onboarding component And let's render that Okay Awesome And there you go Now we have these components showing up Now after this div we have to render out a card right All those cards that we saw So the next thing I'm going to do in here is create another div just like this It's a grid layout And this is going to have two feature cards which are custom components that we're going to create So I'm just going to name them for now which is feature card feature card like this And these are going to pass in an icon So let's go ahead and bring in the Lucid React icon Okay let's bring out bring in the Lucid React icon for this one as well All right awesome And we also have to pass in these props right So we're just going to pass it in for now Now go ahead and copy this name and you're going to open up your folder structure and inside the components folder you're going to create a new file and you're going to name it feature car.tsx and you're going to return tsfce and change this up Okay now let's go ahead and accept the icon which is a react node We need the header or heading sorry and we also need the link And now let's go in here and let's dstructure these values And now we can use them inside this component Now this component is just going to be a link component Okay So we're going to have a link like this And this link is going to have the href that's passed from here and the following class name So please pause and type this out And then we're going to have the icon with the paragraph that states the heading for them So essentially what we're building is icon and the header just like this Okay At least it's going to look very similar Now let's go back here and let's import the feature card and let's render this out And there you go Now you can see those feature cards show up Great job Now the next thing we need is the feature section layout So let's just take a look at what that looks like It's just going to show some stuff in here right That's pretty much it So let's go ahead and shrink this And now after this two divs you want to hit enter We're going to create another div in here And this is going to have that feature section layout which is a custom component So I'm just going to bring this in for now Okay Just like this And now let's go ahead and copy this title And you're going to open up the folder structure in here And in here you're going to create this file and call it tsx And let's go ahead and render out the file Also guys if this is a little too fast I need to go fast because this is a massive project Okay So please pause and watch if you don't understand Watch the same section again or pause and type with me Okay Um I also suggest that if you're if it's too slow for you then play this video on 2x speed Okay Okay that's what I do for most YouTube videos So now let's go ahead and bring in those props that we're passing in So this needs all of these props right The image or whatever that is right Maybe not image but it needs the title and uh some links and stuff like that So let's go ahead and grab those So why are we in here Okay so now let's import the feature section layout And now for the props in here I'm going to set the following props And let's also go ahead and dstructure those values from here Okay Now inside the return statement I'm going to return another div and also pass in the class names that were passed in from the props And then inside this I'm going to render out the children elements So okay it looks like cursor wants to give me the answer really badly So we're going to render out the children elements and then inside that we're going to render out a div So right below this a div with an h3 and a link element Okay So let's bring this in next link Awesome And let's also bring in the right icon from our custom icons folder and let's take a look at this There we go Awesome Now obviously we don't see this this image here And the reason why we don't see this image is because we have we're not passing in those children elements right And so that's the next thing we need to do So let's go ahead and go back to this component And now we can pass in those children elements So inside this feature section layout I'm going to create a div just like this And inside this div we're going to create another div with a paragraph Okay So I'm going to say div with the following styles Paragraph with conversions And I'm just going to put another paragraph with 50 And then after this div right here I'm going to create another div Okay And this div is going to have the following So what we're going to do is we're going to create an array of three items And we're going to render out a feature card Okay Kind of like this these feature cards right here So let's go ahead and we're going to say array from length of three dot map So we're dynamically generating this And then for each of these elements we're going to grab the f I mean this we don't need the first uh value here So we're just going to put an underscore We're going to grab the index here Let's bring in the image element from next image And now we're going to have well we're not going to have any image in here for now But I'm going to show you how to get that as well But we're also going to set some alt values and all the other properties that this element needs Okay Now inside the Discord you're going to get access to this right Obviously Now if you can't access the Discord for some reason that's totally fine Just use something online okay Just use any placeholder image or just leave it blank for now It's totally fine The whole purpose here is you need to get this app in your hand so you can launch it and make money online Okay That's the whole point of all of this That's why I'm going through this pain and suffering Okay So first thing I'm going to do is I'm going to go ahead and grab the feature card So let me get that So I just copied it and I'm going to paste it into my public folder Okay And now because I just pasted my entire public folder I want to make sure that my next bundle here actually uses the new files and not the cached versions So go ahead and delete the next folder Be careful Don't delete anything else Okay I've done this before And uh let me just go ahead and delete this Okay I've actually never seen this before So I don't want to just hide it And I want to show you what this is because even I don't know what it is So it's just showing me this trace file that apparently can't be read right So I think this next folder needs to be there but we're going to obviously build it again So go ahead and open up your terminal Go into your folder structure right here Sorry Go into the uh the terminal right here and you're going to refresh the browser Okay So it looks like it created all of my static files and it also still has that trace file which is really odd I've never seen that before Um and go ahead and spin up this file Okay it's loading I don't even know what what that is I can't even delete it But you shouldn't have any problems And uh it's probably because this is a brand new computer Um and I got this computer because of you guys So thank you so much Okay So uh there we go So now we're able to see this image Take a look at it Looks awesome right Okay Let's move on to the next part We're almost done with this page So great job if you've come so far Okay So the next thing is we're going to create another feature layout So after this feature layout section we're going to use the same feature layout section in here as well And this one is going to need another title So I'm going to say heading see the see the list of your current customers And it's going to link to the pipelines page And then inside this we're going to create another div And this div is going to have the following class names And inside this we're going to essentially find another uh item So let me go ahead and grab that as well And this is just boilerplate stuff Obviously you can grab it from the Discord and uh it's uh and even if you can't it's fine I'm going to show you what it looks like Just go into the data.typescript and it's just this okay It's just some fake data It's just mock data So you can copy one then copy this paste it into chat GBT and tell it to give you like 10 15 whatever you want right We only need three So just get three That's all you need Please don't get more You're going to render crazy cards in there Okay And now let's go ahead and import this enum from Prisma client And let's go back here And now we can use that in here Okay So what we're going to do is we're going to loop over the potential customer cards And we're going to render that out in here So I'm going to say potential customers Let's bring that in from lib data.slice02.mapc customers.index And we're going to render out this card here called the user info card Okay So let's go ahead and grab this component So you want to open up your folders So let me shrink this actually So I'm going to go into source components and then you're going to find another folder Actually let's create another folder here So I'm going to create one more folder in here And we're going to call this user info card And inside that we're going to create an index.tsx And in here all we're going to do it's a very simple component right We're just going to render out another div with the following class names and we're going to get some data from here So let's just grab that right now while we can We need the class name tags and the attendee Okay And we're going to dstructure that so we can use it in here So pass in the class name and make sure you're using CN for this obviously and then a header paragraph a div that shows all all of the tags that we have And because we're using mock data it's just going to plug those tags in there Okay So let's go back and let's import this user card And let's spin that up And there you go Now we have these beautiful cards right in here Now the next thing you're going to do is you're going to hit enter under this And you're going to create an image component Okay And this image component is going to have the following props So go ahead pause this video and type this out with me Also sorry guys this has to be after this right here Okay So put this after this curly bracket And this is going to have the other asset which is the glow card Okay So if you downloaded the full public folder just paste that and do exactly what I did Okay Refresh everything And uh that way you're going to have this card in here Okay So now it's going to show like this And there you go Looks awesome Obviously it maybe just a little more design upgrade here and you're good to go Okay So it's uh just some width related stuff but I'm not going to tweak it cuz uh I think you guys get the point right So maybe spend some time mess with it make it look better do whatever you got to do This video is sponsored by Stream Stream makes it a breeze if you're building an () application with chat social or video streaming capabilities Building such features in your application from scratch can be very complex and timeconuming But stream gives you a production ready API and all of the components that you need for chats feeds and video streaming features It's fast reliable and built to scale and it's completely free for new businesses We will dive into the implementation and how to use Stream later on in this course but in the meantime don't forget to grab your free Maker account using the link in the description Moving on to the course now The next component that () we're going to be working on is the create webinar component And this is needed right now because we need to show some data on this page right So we're going to try our best to get this design as close as possible to this right Cuz this looks so good So let's go ahead and get that set up But before that go into your sidebar and make sure you add the tool tip content We totally forgot to do that So apologies uh from my side And now if you hover over this you can see the tool tip content Next you want to go into the header page And then after this after the purple icon you want to essentially just put another to-do here so you can get back to it or even if you forget you know you can use some sort of flag and you can figure this out before you push it right And typically I mean technically what we're supposed to do in here is we're supposed to see if the user has a subscription If they do only then are we going to give them the ability to create a webinar Remember this is a hard payw wall right But for now because we don't have Stripe wired up we're going to go ahead and just build the button itself So you want to essentially call this create webinar button It's going to look like this And let's go ahead and create this component And now make sure you copy the title And you want to open up your folder structure And then you want to shrink everything in here And inside your reusable components you're going to create a folder And you're going to call this create webinar button And inside that you're going to create an index.tsx And now go ahead and say ts rfce And that's going to use this format for us And I'm just going to paste that title that I just copied Okay And some of you actually someone asked me in the comments "How am I doing that?" Guys there is a lot of plugins that help with this Okay Uh maybe that's another video for another day I don't know Uh but make sure you have all of your environment stuff set up I'm using snippets and that's the only way I'm able to do this Okay So u this just helps me code faster All right So the next thing we want to do in here is we are essentially going to grab some props So let's go ahead and grab the assistant props So I'm going to say like this And let's import this assistant Or actually we don't need the assistant right now So I'm just going to remove that And down in here I'm going to remove this div And I'm going to render out a component called dialogue So go ahead and say dialogue like this comes from component UI So please don't make that error And then go ahead and close this component like such And then this component is going to need some states Now what we can do is we can essentially create a use state up here and we can store the value and render out those states inside this So we can say open and we can set it to that state But I want to make this global That means I want to set up an architecture around my application So that way I can share a data layer between all my components in my application Now there are so many different libraries that can help you with this We're going to be using Zustand because it's so easy to set up Okay so the first thing you want to do is inside my package.json from my GitHub Uh obviously you won't have access to this but if you got the codebase from the description you will right But anyway you don't need it I'm just saying um it's easier to copy Just go ahead and copy this And the version number is 5.0 0.3 for those who are wondering Okay And then open up a different terminal here And I'm just going to click plus here And I'm going to say npm I And I'm going to paste Zustand first So Zustand at and paste that version And then you want to say space legacy pure depths and hit enter Awesome And you should have no errors in the console If you do please do that once more And then what you're going to do is you're going to open up your folder structure Shrink everything And inside source you're going to create another folder in here And you're going to call it store And then inside the store you're going to create another file and you're going to call it use webinar store.typescript And inside here we're essentially going to create our store And notice how easy it is So all I have to do is say export const use webinar store This is equal to create which comes from zooan So let's go ahead and import that And now we need to pass a type to the store And so all I'm going to do is copy this Going to go up top and I'm going to say interface or actually I'm going to use type here So I'm going to say type webinar store just like this And please please pause and type all of this with me Okay So the variables that we're going to have in here are first is modal open is complete is submitting Okay And then down here we just need to pass those down here So all you're going to do is you're going to remove this It looks like it added something in here for me Actually don't want that but I'm just going to remove this for now And what I'm going to do is first create the functions here So I'm going to say set set complete and set submitting These are three different helper functions that help us change this value And then all we're going to do right now is initialize those val uh those variables So I'm going to say is modal is false is complete is false is submitting is false as well And then I'm also going to create these handlers as well So now let's go back in here and we can now import this hook So what I'm going to do is I'm going to say const is modal Okay And we need only a few things here So let's grab the is modal open and set modal open for now And then inside this we essentially have to pass this also Let me just quickly import this And now I can say open equal to is modal open And then we have the open on change And we're going to set that to this handler right here Okay Awesome Now we need a trigger So I'm going to say dialog trigger just like this And let's just import all of this And uh inside the trigger we're going to have a button here But obviously I'm going to set something else in here So please follow with me So I'm going to remove this button and I'm going to set a regular button component And this button component is going to have the following styles So please pause and type that out as well And then I'm also going to have an on click that's going to set this modal to show up on the screen And then inside this button we need to show something So I'm going to use the plus icon And this comes from our components right Our icons not the lucid icons And then I'm just going to say create a webinar Just like this Now let's go back and just quickly import this component so it doesn't scream at us And now hopefully we can see it There we go Great job Now the next thing we need to do is we need to change this to a client component So I'm going to go up top I'm going to say use client Now if you try to click on the webinar button you're going to notice that it is firing off the states and it's actually working but nothing's actually happening That means the dialogue itself is not showing up And that's because we haven't put the dialogue content So let's go ahead and say dialog content just like this And you can create a title whatever you'd like Let me go ahead and just style this up a little bit more So what I'm going to do is for the dialog content I'm going to give it the following styles And then inside this right here we can show a title Uh yeah no need of a header You can put a header if you'd like but just to show you There you go This also works right Nice Now you might see this error here If you refresh and the error is actually not a hydration error but you cannot have a button as a descendant descendant And the reason why we see that is because you need to add the word the prop as child in here Okay And that should solve that problem So now the next thing we need is like I said we're going to essentially check if the user has completed these steps And if they have we'll show a different component If they not we'll show something else Okay And that's actually coming from the store as well Is complete So let's grab that And now what I'm going to do is I'm just going to remove this for now just to keep it simple I'm going to say is complete If this is true then do something in here If not do something in here So the first thing I'm going to do is I'm going to remove this and I'm going to put a div in here And this div is going to have the following styles And inside this I'm going to put the title So I'm going to say dialogue title And I'm going to say screen reader only webinar created like this And then after that down here we're going to create another component called the success step And this success success step is going to look just like this But obviously we actually don't have this component So I'm just going to comment this out and we'll get to that in just a second But if the user has not completed then I'm going to remove this And I'm going to return a React fragment And I'm going to say dialogue title like this And I'm going to say create webinar screen reader only And we're going to import this new component that we're going to create called a multi-step form So go ahead and copy this title Open up your folder structure and you want to go into the create webinar right in here and you're going to create another file Paste this and say tsx And then in here go ahead and just use the the uh snippet and change the name Now the next thing is this is going to need a couple things So the first thing we need is the steps itself And this what is a step Well a step is going to be of the following type So it's going to be the ID title description and whatever component that step needs to render Okay that way we can dynamically create this And in here we're going to need steps which is an array of these which I'll show you where we're going to get that from And then we also need an uncomplete which is going to return void but this will give us a string Okay then let's go in here and let's dstructure all of these values And let's grab that in here Okay so now we need to go ahead and pass in all these values right So let's go ahead and go back to the previous component which is our index.tsx and let's just import this multi-step form And obviously we also have to pass in these props Now where do we get these props from Well these props are going to come from this component right So let's go ahead and create those states So scroll up top and I'm essentially just going to copy paste this right here and I'm going to break it down obviously So let's just go piece by piece So we're going to do the first step So this step is called basic info step as the first step the user will see Okay And they essentially just need to fill up the webinars information And this renders out a component called the basic info step So now we can take this and we can pass it in here So I can say steps just like this And then the other prop is the onmplete handler So what I'm going to do is I'm going to remove this I'm going to scroll up top up here I'm going to say const handle complete equal to this And all we're going to do in here is first we're going to set complete to true And set complete actually comes from here So I'm going to go ahead and grab that from the hook and I'm going to invoke set complete and I'm going to pass in true And the next one is another state called webinar link Now essentially when the user is done filling up the form and they complete the form we're going to get that webinar link and we're just going to store that in here Okay so up here I'm just going to say const webinar webinar link and set webinar link is going to be equal to use state Let's import this and it's going to be a string Okay you actually don't have to state it as a string Typescript knows it's going to be a string anyway right And now obviously let's copy this handle complete Let's scroll down here and let's paste the handle complete in here And then after this step we have to set the webinar link to whatever we get from there Okay so this is going to look just like this So please pause and type with me So it's going to say set webinar link to the next public base URL live webinar and the webinar ID Now this webinar ID comes from here Okay that's pretty much it Now you might ask what are we going to do with this webinar link Well we're going to send that into the success component and that's why we need it Okay but for now we don't have to care about all of that Let's just first finish the basic info step Okay so go ahead and copy that name and you're going to open up your folder structure And inside the create webinar you're going to create another component Paste this And you're going to say t actually sorry guys I'm still still using the same snippets So you want to say tsx and then in here you want to say tsfce and rename this component And now just to complete these errors just to sort this out I'm going to go back to this component and I'm going to import this basic info step And let's just refresh real quick Okay there we go And now we can see the multi-step form component right And uh let's go ahead and complete the rest of this now Now scroll down here and you want to click into the multi-step form so we can go ahead and complete the form itself And the logic that's happening in here is first we need to get access to a couple things right We need the form data and we also need a way to validate the current step and obviously we need the other functions that we already created And now all of this is going to be inside the store and that's why we created it in the first place right So let's go ahead and completely wire up the store with the things that we need and then we'll proceed So you're going to scroll up here and under this you're going to create another value and this value is called VA form data actually and it's going to be of this type and this webinar form state is going to be up here So you're going to hit enter and let me just grab this real quick and this is going to look just like this Okay so it's going to be basic info the CTA and the additional info Okay And so essentially we're creating states for for this specific form This is what it looks like And if you're curious to see what that looks like in the design this is exactly what it looks like Okay you see we have the webinar Let's go ahead and take a look at this So webinar name description date and time format right We have all the stuff in here And then you know more data as we keep going The CTA stuff and this is step number two So we're essentially creating the type for the entire form Okay so let's go ahead and shrink this now And the next thing we need is this create type enum So let's go ahead and import that one as well And now inside this store we have to actually return this validation So I'm going to say validation Actually did I even put it Sorry guys it's not validation it's form data And the form data is going to be an initial state that we need to create So up here I'm going to scroll up top or actually it's fine You can do it in here itself And uh we're going to need to create that initial state So what I'm going to do is I'm going to say const initial state is that webinar form state And it's going to have just undefined and empty values That's literally it Nothing else Okay So go ahead pause the screen and type this out real quick And then once you're done with that all I'm going to do right here is pass in the initial state And that should solve all of our errors Next we're going to need another value here which is the is validated right So uh what I'm going to do here now is let's just scroll here and I'm going to say validation and actually sorry guys we have to put it inside here So inside the webinar store and this is going to have another another type So I'm going to scroll here and I'm going to create validation state and for each of these pages we're going to have some specific type of validations So the first one is going to be for the basic validations So what I'm going to do is inside your libs file you want to create another file and you want to call this type.typescript And inside this we're going to export that validation errors as a record with string string Okay And now let's go back here and let's quickly import this type And that should solve this error here Okay Nice And now let's go ahead and grab the validation initial data And this is going to need another state in here So I'm going to go ahead and create this one as well And it's going to look just like this which is initial validation is the validation state And I'm just going to set some default values for all of this Now the next thing we need to do is on the store we're going to need some form field updater functions right Or mutator functions And so let's go ahead and create some for each of those So the first one is called update basic info fields Okay Now if you don't know all this crazy TypeScript stuff it's fine Don't worry about it Uh even I myself had to get some help from chatbt and AI and stuff and so it's totally fine Okay This is going to look overwhelming for maybe someone who's a beginner and like I said that's okay Just keep pushing through Okay So essentially this is going to update a basic info field which is this one Okay And uh this is a type that we're assigning on the type and later we'll create the type here Obviously it's going to throw errors Okay So you want to scroll up here and now we need to create the next one The next helper is to update the CTA field So I'm going to say CTA field is going to take this generic type key off the specific CTA types here Okay the webinar form CTA And that's pretty much it Now the same thing for uh additional info field So down here I'm going to say additional info And that's pretty much it Now we're also going to need another function here called validate step So let's go ahead and grab that And this one is going to look like this So validate step which needs a step ID and it returns boolean Okay And then finally we need one more helper which gets the steps validation errors Okay is if if there's any errors it's going to give that to us and that way we can render that out So it's going to look just like this Okay And finally we're going to have another helper here called form reset And this is going to essentially reset all of the form values Now let's go ahead and complete each each of these So down here first we're going to say update basic info is going to give us the field and the value And I'm going to do this in here And then I'm going to call this set because this is how we can set um set any of the values from our store Right So we're going to call set here And it's my AI is doing a bunch of stuff here So let me just go ahead and quickly fix this So I'm essentially going to say set and a callback function And this callback function inside this you want to hit enter And we're going to say const new basic info is equal to everything that is inside the state So state.format data.basic info and we're going to add that new field and the value So this is how we add new stuff to update it Okay U sorry this is how we essentially it's like rewriting what's already inside the state That's why I combine add and update Sorry about that So once that's done next we have to validate this information So I'm going to say const validation result equal to and this is called uh this is a function called validate basic info And obviously we need to go ahead and create this So what I'm going to do is I'm going to open up my folder structure and I'm going to scroll down into types and in here I'm going to say the following So please just pause and type with me Okay So this is a function called export const validate basic info and what this does is in here we're going to get all of the data that the user passed in and for each of that we're just manually validating it Okay Now there are so many ways you can do this You can also use zod react hook forms There's so many Okay This was just the easiest way um for you know for AI Okay Because I was getting some assistance from AI and also I posted some really cool videos and looks like you guys really liked it So maybe I'll post more on that soon But u this is just what AI gave me and so I just went with it Okay So once you accept these values we're also saying that it's going to return this validation result So what is this type looks like uh look like Now this is going to be another type up here that's going to have the following So we're going to say export type validation result boolean and it's going to it's going to return valid whether that's valid or not And it's also going to return any of the errors Okay So essentially what we're doing is we're saying const errors validation errors which is this right And if you don't know what validation errors is it's just a uh like an object with records Okay And so if there's nothing in here all we're doing is setting an error for that state and we're doing the same exact thing for description for data for trim for everything else Okay Only time is slightly different And this is going to look a little bit like this So please bear with me Just pause the screen and type this out Okay it's going to validate in this specific format And if it's not you know validated we're essentially going to return an error for this And then finally we're going to return the validation for that specific value Now let's go back here and let's import info And now we can proceed So after this go ahead and hit enter You want to return everything that's inside form data So I'm going to say form data like this dot dot dot And then we're essentially going to say state.format form data So everything that's already in there but the basic info is going to be set to this new stuff Okay And then for validation we're essentially going to say everything in state of validation And then the basic info is going to be as such Now this obviously looks like there's a lot of things that we wrote wrong or incorrectly Just keep pushing through Nothing is wrong here Okay In fact let me show you So if you save this it formats it It's just TypeScript And I honestly wish they fix this cuz it just looks crazy right I wish I don't know maybe there's something they can do or maybe it's something I can do I don't know So what I'm going to do next is work on the update CTA field So first thing is I'm going to say update CTA field and the value and we're going to call state like this So set state and we're going to create this const new CTA And then inside this we're going to pass everything inside state form data docta Okay And we're going to pass in that new field After this down here you're going to say const validation result is equal to validate CTA which is another helper function that we have to create So go ahead open up the types file Scroll down here and I'm going to say export const validate CTA And this is going to get data but we also need a couple values So let's go ahead and grab those So we need CTA label which is optional tags which is this array of strings CTA type which is going to be this Okay Or actually for now I'm just going to set it to string Okay And then AI agent We don't need the price ID for now Okay So we're going to put this in here And then this is going to need this validation result in here And I think we already created this Why is it bugging out validation results Oh because it it's not returning Sorry about that So it has to actually return that data right And now all we're going to do is first create the errors So const errors validation errors And then in here we're going to say if there's no data CTA labeltrim then we're going to return we're going to add this onto that errors object And for the CTA type we're going to do the following And finally we're going to return all of these values Okay And now you we won't see any more errors in here Now let's go back and import this Okay And that should solve your bug Now the next thing is we have to return all of this data So I'm going to say return And we're going to return the form data with everything inside state.form data And the CTA is going to be the new CTA Next validation is state validation And then CTA is going to be those validation results Okay So now go ahead hit enter Now next is the update additional info field Now I want you to try to take this up as a challenge This is not easy I understand But just try to take it up as a challenge and try to build this function Okay It's the same exact structure but try to validate the data in the exact same format that I just taught you Okay Pause this video and if you don't know how to do it I'll show you exactly how to do it Okay welcome back Hopefully you got the right answer If you didn't no worries This is exactly what you need to do So I'm going to say update additional info field We need the field and value And then later we're going to say set with a state in here And then inside the curly bracket we're going to say const add additional info data The exact same process that we did before We're going to add the new field And then we're going to create this new validate additional info function So this might be the ch this is basically the challenge Okay nothing else is the challenge here And let's take a look at what that looks like So there's only three values that we have to validate We have the lock chat coupon code and coupon enabled Now not all of these are going to be in this project It's just built so that you can expand on it Okay so the first thing is we're creating the validation errors And then after that we're essentially just checking if this exists If not we're going to trim it also and uh we're going to make sure it actually does exist If not we're going to say coupon is required And then finally you can return this Okay that's all you have to do And now if you import this here that should solve this bug Now of obviously there's still more here And that's exactly why you're still seeing a lot of red squiggly lines So let's go ahead and complete that And also the state is exactly the same thing So form data state form data additional and the validation as well So down here the next one is we're going to create the validate step helper function So I'm going to say validate step This needs the step ID Okay And in here I'm going to create an object like this And actually instead of this guys what I'm this is not an object Sorry This is just the curly brackets And inside the scope I'm going to say const form or dstructure this and say form data equal to get We want to invoke this and this is going to give us that state Okay Now where are we getting this get from Well this get comes from uh actually where are we getting it from Oh okay It was supposed to come from up here It was just not there Okay there we go So now we can get the value that's stored inside our state Okay And we're going to first just create a value a variable in here called validation results And I'm just going to set it to nothing for now And then in here we're going to create some cases So switch step ID If it's basic info I'm going to say validation results equal to validation basic info form data.basic info Okay And uh we don't need this So let's remove this and that should solve this error for us And then after break now we have to create the other cases as well What seems to be the issue here Let me just take a quick Okay so validation result Huh Give me one second Okay never mind It's just because it was not used That's why So next I'm going to do the same thing for CTA Okay we're going to set it just like this And for additional info as well we're going to set it just like this And finally you want a break down here Then down here after the curly bracket we're going to set state and we're going to return the following data So what I'm going to return here is everything inside validation So validation is everything inside state of validation and we're going to set the step ID to this specific validation results So basically we're seeing the validation results for every step if that makes sense Okay that's pretty much it for now We'll get back to this in just a second but uh I think everything looks good I also see an error here Okay that's because I actually have to return this So after this set you want to hit enter and you want to return the validation So validation results So where is this validation result dot valid just like this And I'm actually seeing more TypeScript errors So let me see if I can solve this guys Just give me one second Okay so I totally forgot We also have one more to complete which is get step validation errors So all we need to do in here is we're going to say get step validation errors step ID key off this specific form state And all we need to do in here is we're going to say the following So const or actually let me do this in a much simpler way with fewer lines of code So return get we're going to invoke get dovalidation.step step ID dot errors That's it Okay And then after this we finally need to create the reset form So reset form equal to set And in here we're going to set is completed Set it to false And everything should be set just like this Okay there's one more thing the modal So for the modal I'm just going to remove this And that's pretty much it Now I'm going to go back to my create webinar component and I'm going to click into my multi-step form and inside the multi-step form now I can import the use webinar store So let's go ahead and import this Okay And now typically you're supposed to change this to a use client component but I already know that it's inside a use client tree So I don't need to do this Okay So what I'm going to do now instead is I'm going to build out this component So let's go down here and I'm going to remove this div and I'm going to return another div in here so that it looks like this And now you can sort of see something but not really We'll get to that in just a second And inside this div please go ahead pause and type these colors out Okay And then inside this div I'm going to create another div that's going to have the following styles And inside this another div kind of like a container And this is going to have one final div inside it So where is this div here Okay let's hit enter And then inside this I'm going to say div So this one is supposed to be inside this guys That's why I was having that error And inside this we're going to map over the steps And for each step we're going to render out some components So in here you want to say steps.m map And for each of these we're going to render something So let's go ahead and grab the step data And we also need the index I'm going to grab that as well And now inside this let's also shrink this So you so we can all see clearly And u inside this essentially we need to return something So but before that I'm going to just get those states right So const is completed equal to completed step and this is actually another state that I need to create guys So let's go ahead and grab that So scroll up top and you want to say const completed step equal to this use state So just create one state here And while we're already at it I'm going to create a bunch of other states as well So let me go ahead and just paste this in here So we need this current step index completed step and validation error And these are going to have the following default values So go ahead pause the screen and type those out And then I'm also going to create some values in here that's going to help us Now typically you would probably want to put like a use memo right and memoize all of these but it should be fine because we're not doing anything too complex Okay So now that we're now that we finished this we can go in here and I'm going to say if completed step includes the step ID it's completed right So we're going to assign it in there Next is the is current is equal to index If it's equal to the current step index then we're going to set that as well And then finally in here we're going to say if past index is less than the current index So this way we know it's the previous one Okay And then finally we have to return something here So let's just return a React fragment so that we don't see any errors Okay That's fixed everything So I'm going to render a div Okay And inside this div first we need to give it the class name and the ID Sorry the key So let's go ahead and pass those in And then inside this div I'm going to have another div just like this Okay looks like it does not want to create my closing tags But I need AI It's not going to come for me Okay And then inside this we're going to have another div just like this And this div is going to have the following class names And now we're going to be using uh an element called motion And motion comes from framer motion So I'm going to copy this frame motion value and I'm going to say npmi framer dash motion And then in here we're going to put at and we're going to paste 12.6.3 And I don't think we're going to need legacy dependencies Let's just Okay we do Never mind So we're going to say legacy pure depths and hit enter And that should install frame motion for you Now the next thing we're going to do is we're going to scroll down here And inside this we can essentially render out the motion And essentially motion Is how you can create an animated create an animated element Okay So first thing you have to do is say motion.d just like this And you need to import this So go ahead and import this from frame motion And so I'm going to scroll up top and I'm going to just hit tab like this And then down here now we can complete this So the first thing is on initial I'm just going to set this to false For animate I'm going to set it to the following animation So I want background to be if it's the current we're going to set this color here Right So very similar to this design Okay And scale and transition And then finally some class names So I'm going to say class names just like this And let's also go back to our code And I see something is happening here Attach timeline does not exist on target module What does this mean Okay Uh just give me a second guys All right I'm glad I was able to figure it out pretty early but all you had to do was update the framework motion library to use 11.0.3 So you want to say npmi frame motion on uh frame motion at 11.0.3 and the leg legacy uh you know depths that we just used And uh yeah this is why cursor is really helpful And that's pretty much it That's solved our bug And now if you open this everything is working as expected And now inside this div inside the motion You essentially want to render this which is an animate presence And I also see something wrong with the class name here Let me take a quick look at this as well Okay I think this shouldn't be a problem It actually should not be a problem because we're using Tailwind CSS And so I mean this is just JSX so class name should exist but it says class name does not exist which is very strange And if I click on this I do see this actually work because I see with end height of eight Yep So this is working So what I will do is I'm just going to add slash if it'll let me Okay it's fine You're not going to be able to add the TypeScript ignorant here Uh you're going to need to do a lot of stuff just for that But it's okay for now Let's just quick quick quickly push through this And so the next thing is we're going to need to check if is completed is checked and if it is we're going to render this check icon here Okay So we're going to render the check icon that is required So what I'm going to do is I'm going to say the following So inside the animated presence we're going to say motion key check like this And then we're going to just pass in some animations And I'm going to say check of Y color And then right here I'm going to say another motion div So this means it's not checked is not completed And I'm going to pass in the following colors Okay So the same thing except this one is uh slightly different style Okay So just go ahead and pass that in as well Okay And then the next thing you need to do is after the animate presence after the motion Hit enter And now we have to look at the steps Okay So which exact index are we at And the steps length minus one And that way we can render out another icon in here Okay So I'm going to say if index less than steps.length minus one then I'm going to render this div And this div is going to have a motion.d inside that And inside this we're just going to have some more styles in here Okay And that's pretty much it You can also have the class name This should not really throw any problems So you're good to keep that in there Now after this down here we're going to render out another div Okay And this div is going to have the following styles So I'm going to say div class name like this And this is going to have motion.h3 And we're going to pass in the following u you know animate props and the class name as well And then down here the steps title So you see it shows right here And all of the other information that's required Next we're going to return a separator component and this comes from components UI separator and we're going to set it to vertical Okay And obviously you can't really see it right now Oh okay Something looks a little off Let me just fix this real quick guys Give me a second Okay I just checked to make sure we are still on the right track It's because we don't have the elements on the right side right So that's why it just looks like this So the first thing we're going to do is we're going to create a div here And I'm going to say div like this And now that should solve that error And now if you also click outside and click into this you should see everything show up U actually we still need to pass in some elements So let's first go ahead and pass in this stuff Okay And then we'll get back to that So I'm going to say animate presence mode weight And then inside this we're going to have another motion And this is going to render out the current step itself Okay So I'm going to say the following So I'm going to say motion.d inside this animate presence And then we're going to have the following you know designs all the sorry the following props This is for the animation And then down here we're going to have the title and the paragraph which is the current step.cription So if you click on it now you can see that info Okay And then down here we're going to need the current steps component But now if you click on this you're going to see basic info step because remember we didn't completely finish that component yet right But this is working This is exactly what we were looking for right So if you click on this it has this beautiful animation and it also shows all of the components that we need to see Now let's proceed from here So after the component itself we're going to also show the validation errors So right here I'm going to import this alert circle And if there is a validation error we're going to show that at the bottom of the uh at the bottom right here Okay awesome Now after this animate presence you're going to find a div here One more div here And you want to hit enter after this div And now we're going to have the navigation buttons itself Okay so this is going to look sort of like this It's just a div that has buttons inside it And I'm just going to copy this for now and I'm going to break it down piece by piece Okay so we're going to have the first button and this button is the cancel or back button Okay so first thing is it's going to have outline and let's import this button from our components library And then in here we're going to say handle back And this is another uh helper function that we have to create up top So what I'm going to do is I'm going to scroll up top Okay Right up here And this is what we're going to do We're going to say handle back If it's the first element first component sorry first step then we're going to close the modal itself If not we're going to set it set the modal's next step Okay So current step equal the current step minus one And we're going to set validation errors to null Okay And now let's go down here Okay Awesome And then finally we're also having this disabled prop because this is submitting is submitting that's going to be inside our store It's going to help us keep track of the states of this form Okay Next down here we're also using CN And CN function is just wrapping up some styles Okay That's pretty much it So here if it is a first step we're saying cancel and then we're changing it to back So now if you click into it okay the reason why we don't see anything is because handle next for the next component actually does not exist And so let's just go ahead and finish that one as well So for this button we're going to need to first have the handle next function And so let's scroll up top And this is going to be some real uh database stuff okay So just bear with me So what we're going to do in here is first I'm going to say const handle next and I'm going to remove this in here and I'm going to change this to an async component Let's remove this again Yeah it just takes five steps man Okay And then first thing is we're going to set the validation errors to false And then we have to check if it is valid So is valid equal validate step So we're going to validate this step with all of this data Okay And then down here we're going to check if it is not valid then we're going to set the validation error data to please fill in all required fields And we're going to return Okay let's return Let's actually remove this We don't need this right now Next we're going to check if the if it's not completed steps If the completed steps does not include this that is the current step ID then we're going to set the completed steps to everything that's already there And we're going to pass an R ID in here Okay so this essentially marks the current step as completed That's what this does Now if it's the last step then what do we do Well then we're going to do this So what we're going to do in here is we're going to say try catch And inside the try catch first we're going to set submitting to true So now we get that that state right that the loading state Then next we're going to create this error function sorry this server action called create webinar and to do that we're going to open up our folder structure We're going to go into actions We're going to create a file in here called webinar.typescript And in here we're going to change this to use server And we're going to paste this right here So const create webinar is going to be the following So let's go ahead and remove all the stuff We don't need it And what we're going to do here is this form data is going to be this webinar state Okay let's bring that in as well And then inside this function we're first going to check if the user is authenticated inside a try catch block Hello please help me Why is this not working Try There we go Okay much better So we're going to say on user authenticated we're going to invoke this We're going to import it Sorry We're going to check if the user is not authenticated Then we're going to return a status of 44 like this Okay And the message is unauthorized Next if the user user subscription does not exist we'll also set subscription required Okay So for now of course you know what we're going to do To-do check if user has a subscription And let's just comment this out Okay Next down here we're going to say const present presenter ID is user user ID And uh just to make sure everything is working you can also have a console message here So you can take a look at it And then next we have to validate the required fields So I'm going to going to say the following just like this So we need basic info We need the date time So I'm going to validate those And if not I'm going to send a uh response back And then next I'm going to validate if the date is in the past or not Okay So I'm going to say combine date is going to be this function here And this combine date is actually a helper function that's going to come from uh from here itself So what I'm going to do okay I'm just going to put it in here for now So I'm just going to scroll up top and I'm going to say combine date and it's going to take the date and the time string the time format and it's going to essentially convert it to a 24-hour format Okay and uh it's going to check PM whatever it needs to do and it's going to add the time that it needs to It's just it's just a way to combine it to make it look nice Okay that's pretty much it So let's go down here and now we can use this in here Okay so just keep pushing through Don't focus on all that stuff that's not needed Um you'll debug it later Okay But uh right now I'm going to hit enter here so I can get the next step which is to create a new date So now I can check the old date Okay So I'm going to say if the date that was entered was an old date then we're going to return 404 saying the date and time cannot be in the past Finally we need to create this entry Okay So we're going to say Prisma client and let's import that create and we're going to pass in all this data So data with the title description start time whatever is in here Pause the screen and type it Okay And uh we're just going to pass this data in here And finally we have to revalidate that path So revalidating that path will help us see the new webinar So let's go ahead and import revalidate And that's pretty much it Now don't forget we have to return some data here So return 200 and we're going to return this data Okay And obviously we need this webinar link and the ID Okay This is important So make sure you export uh you return this as well Now finally inside the try catch I'm going to first console the error and I'm going to return a 500 because an error took place on the server Okay Now let's go back and import our server action And now we can check the result So I'm going to say if the result is as such then we're going to essentially actually no guys we we can't do this right here So if the result is 200 we can't complete it yet We're first going to show a toast message and you can use sonar for this if you'd like Uh okay Looks like I deleted one of the brackets There we go So toast this comes from Sonar So let's import that Toast out Your webinar is successfully created And then we're going to pass in on complete Okay And then if this is not completed if this is not 200 then we're going to show a toast error message And we're going to set the validation error as such Finally I don't think we have to do this because I'm already refreshing the states using the revalidate path but uh I'm just going to I guess might as well just do it right So we need to get router I want to make sure that we're actually refreshing everything So I'm going to get uh use router from next navigation I think it's time nextJS just removes the other one Or maybe I don't even know why how to use it Um okay And then down here after this validation error down here I'm going to say router not push sorry router.refresh and we're going to invoke that And if there were any errors what are we going to do Well first we're going to console the error Then we have to show the toast message And we have to set the validation errors And then there's also a finally block we can use to essentially set submitting to false Okay awesome We finally wrote a pretty big function So now let's go ahead scroll down Wow if this was Mac I could scroll down as fast as possible Okay so down here we're going to have the second button So we're passing in the handle next disabled as well Awesome Is last step If not we want to check if it's sub submitting If it is submitting we're going to load this component loader 2 And we're going to put the animate spin And then we are going to show complete here And if it's not the last step we'll show next And then finally we're also going to render the chevron right icon So you can essentially go to the next step Okay Awesome So right now obviously we only see one step here and that's why it shows complete If I click on this it's going to get messed up So let's go ahead and fix all of that Or actually before I do that if we wrote code correctly right then we should be able to complete and see an error There we go Nice Great job So you always want to test your code u not like a developer but as a user right So now let's go back one page I see all these errors here I think it's coming from the class name Okay that's fine Let's just go back to the multistep and we have this basic info step So just click into this component And then inside this component first we need to import our magical hook So let's go ahead and import this hook And we're going to need to grab a couple things because inside this we're going to need to do some form related stuff right So let's go ahead and grab that as well Next down here I'm going to remove this And I'm going to render a div And inside this div I'm going to have another div Okay And this div is going to have a label and an input field So let's go ahead and grab those as well So I'm going to say label like this So label input and then errors Okay Now let's go ahead and one by one just import this So label component import it from our components folder Um what's this Okay import label and input as well And I see this error here Okay there we go And then we also have to pass in the errors themselves And these errors are going to be another state that u is I mean it's just going to use our getstep validation errors function and it's going to validate all of this Okay so this one right here So I'm going to say const errors equal getstep validation errors and it's just going to validate the basic info Okay so that should solve that error Next down here we are going to need to dstructure some values from the form data So let's go ahead and just say the following which is webinar name description date time and let's just dstructure this And I think this is already inside a use client tree but I'm just going to put that in here anyway handle change is not defined Obviously it's not defined I know that's okay So what we're going to do next is now create that handle change So scroll up here and I'm going to say handle change is going to get the event which is going to be of this type and essentially we're going to call update basic info Pass in the name and the value Okay this is just some TypeScript stuff so doesn't matter too much but just go ahead and pass this and that should solve your TypeScript error And now if you open this up in full screen mode you can actually see that webinar name Okay so if you hit complete boom it's going to throw the error and it's going to show an error right here Now the reason why you see this flash here is because blur can can actually not be faded in Okay that means it can't be transparent And motion.divs animation that we've set right now does that So you don't even have to do this fade animation You could or you don't even have to do the transparent background You can just use the solid you know whatever design you like I'm just following this cuz this is what my design says Okay so that's what I'm going to be doing But uh just wanted to point that out If you want to improve it feel free to All right we got to keep pushing through We have so much more So let's not waste any more time So after this down here after the errors we're going to need to show the next field This is the description field Now I'd like for you to take this up as a challenge So pause this video and try to build this next description field the exact same way we built this one Hey welcome back Hopefully you got the right answer If you didn't no worries This is exactly what you should have done So you have to have a div in here the exact same way that we had the previous one with space Y like this a label and a text area because this is a description So great job if you made this architectural decision Okay So the most important part here is these values So please pause and make sure you type the exact same values Okay And obviously we're also rendering the errors at the bottom there Now next I'm going to create two divs within each other So after this you want to hit enter and you're going to create two divs within each other So I'm going to close this div and I'm going to close this div as well And inside this div I'm going to hit enter And we're going to have another label that's going to have the webinar date And this is going to need a popover component So let's go ahead and import that So after this hit enter and say pop over and import it And then inside this we need the popover trigger And let's import this one as well And then we need a button component So I'm going to say button like this And this is going to have the following styles and the variant And then here I'm going to pass in this calendar icon And then we also need this format helper And this format helper comes from date fn Okay date fns I think that's what it's called So let me see if I already have this installed Okay we do Awesome Let's just bring that in Nice And I see some errors on top That's just this That's totally fine So now after the popover trigger we can essentially pass these uh pass in the content So after the trigger hit enter And you want to say pop over pop over content And then you're gonna have the calendar And this is uh a different component This is not from is not from Lucid React Okay This is from uh Shatian UI That would be hilarious Imagine we just see a calendar icon there So I'm going to import this And then this is going to need the following props Okay Everything else is pretty standard So pause the screen and type this But we need this handle date change Okay So here's what we're going to do We're going to scroll up top Okay And I'm going to hit enter here And first I'm going to say const handle date change equal to an arrow function like this that takes in the new date And this is going to be of type date or it's also going to be undefined So I'm going to say undefined like this And then inside this we're going to essentially update the basic info field So I'm going to update this like this and pass in the date Next I also need to check if date And don't worry I'm going to explain this in just a second So if the new date exists then we're going to create a new date in here We're going to set its hours And then we're going to check again if this date is less than today then obviously we need to throw an error right So you can show a toast message whatever you want I'm just going to just show a console error like this You can also set the validation error right You could do that if you'd like as well And so uh that's pretty much it So what we're doing here is first we're just validating the data to make sure that it's not in the past That's literally all we're doing Okay And if it is in the past we just going to we're just going to show some sort of an error So maybe we should show validation error And let's bring this in uh like that Let's go up here and say set um where do we get this validation error Okay so it looks like uh we haven't created that So sorry about it but uh sorry about that But you could or I thought I thought we actually did at one point but uh that's okay All you have to do is just show a toast message Okay that will work as well So I'm going to say toast And I'm just going to show this toast message right here Now go ahead and scroll down here right after the calendar component and then after this you also want to show the errors right so we have the popover content we're showing the stuff but we also have to show the errors so after the popover content after the popover hit enter and type in the errors now after this you want to hit enter after this div and we're going to create a div in here and this is going to have a label for the webinar time and we're going to have a div in here as well So please please pause the screen and type this with me So inside this div you want to give it the following class names And then you want to create another div inside that And this is going to have relative flex like this We're going to have a clock and an input Okay And if I click on it we're going to see an error actually That's because we have a handler function And so you're not going to be able to see it Or actually maybe we can see it Let me just turn this off And uh let's open it up and let's take a look There we go So now you can see that AM timer and even this timer Okay So let's go ahead and close this And now I'm going to uncomment this as well And all we're doing here is for the input we're just going to pass in some properties And then inside the select component we're going to have the value set to the time format and then an on value change as well We'll get to this in a second But then we need the select trigger for the amm And that's pretty much it Next we also need the errors So let's go ahead and hit enter after this div right here Hit enter and paste the errors And then finally we're going to need to finish up this function here So I'm going to scroll up top and in here I'm going to say const handle time format change is going to be equal to this specific value and it's going to update the info field Okay Now let's scroll down here All right And then after the error we have to show another field So I'm going to hit enter here and I'm going to copy this and paste it here And it's just a way to upload some data Okay So I'm going to have a div It's going to have the following class names So please pause and type Another div inside this for the upload button and the upload video And then a button here for the file itself And I'm just going to say this for now Okay Now technically let me just see Yep I don't really think we will be working with this Uh but you can upload a bunch of stuff if you want Okay So definitely work on it Make it look better You You guys know what I mean right Awesome Now the next thing I'm going to do is I'm going to open up my folder structure I'm going to click into the index.tsx and we're going to build the next component here which is a CTA itself Okay So hit enter And we're going to create another object here And for this we're going to need to pass in the ID CTA title CTA description and another component And for this one we're going to need some other data that technically is needed for this We'll see how far we can get without this Okay so just go ahead pause the screen and type this out So go ahead and copy this Copy the component name You're going to open up your folder structure and inside this you're going to create that file You're going to paste it and say tsx And then you're going to use the snippet and you're going to paste this component name Okay Now inside this component the first thing I'm going to do is I'm going to use our use webinar store And let's bring this in Awesome And then the next thing we're going to do here is we're also going to dstructure some data from the form data Cool And then finally we're going to go down here and start building this component But before that I want to solve this error So I'm going to go in here and import this And we also need these uh assistants and the Stripe products which is going to come from our props So for now I think we're going to need to just put in an array here and an array here as well because obviously this data should probably be an array right So this should be fine for now We'll get to this in just a second And now obviously if you try to try to see the component itself you won't be able to right because all of this is required So what I'm going to do is I'm going to go into our component here and I'm just going to comment this out Okay And that should if I'm not wrong it should render the second CTA Okay There we go So this is how you can kind of hack your way through Okay So what I'm going to do next is inside this div I'm going to actually first change this and I'm going to create another div with some better styles And then inside that I'm going to create another div in here And inside this div we're going to have the first form field Okay so this is going to be a label with the paragraph and the errors Very similar to what we did previously but this time it's for the CTA label So here's what I'm going to do guys I'm just going to speed up this process of installing and importing all of this and then we'll continue So next we need the errors and the errors are going to come from the get validation errors helper function So up here I'm just going to say const errors equal get validation errors like this and that's going to give us all the errors we need Now this input field is going to need a handle change And this is a very very simple handler as well So I'm just going to hit enter here and all we're going to do is invoke the update CGA field So we're going to So we're going to just say update CTA field pass a name and a value Okay this is pretty much uh the exact same thing that we did in the last component right So once that's done the next thing is down here We're going to create another div And this div is for the tags Okay so after this one hit enter And we're going to say the following So we're going to say div like this label input And this is going to need some values as well So we'll get this in just a second But then um we also have the placeholder and class name And then in here we are essentially rendering out the tags And we'll get to this in just a second But essentially every customer that signs up onto this form for this webinar gets attached gets a tag attached to them So this way it's easier to filter out leads that come in through your funnels or you know where they're come wherever they're signing up from right It's much easier So this way you can also see in the future for uh you can search and filter out for leads for email marketing So the next thing we're going to do is just fill this in So the first one is the tag input This is going to be a state itself So I'm going to scroll up top I'm going to say tag input and I'm going to import this And then the next one is the handler So the handle add tag And all that's going to do is we're going to say handle add tag We're going to get an event If it's enter then and the tag input has something then we're going to prevent default We're going to add the tag and we're going to set the tag input to nothing Okay So this way we can kind of like save it essentially That's what we're trying to do here Okay Awesome Now let's scroll down here And for the tags here we're just going to render out the tags by rendering a div inside that map a div right here and the tag itself and then a button Okay And this uses the X icon from Lucid React So let's grab that as well And if you click on this it essentially removes the tag And the remove tag function has to come from our use webinar store So now is a good time to go into our use webinar store And now we can create that add tag and remove tag functions So in here I'm going to scroll down into our types first There's so many things in this file Okay right here And then we're going to need to store this So at the bottom right around here I'm just going to say add tag and remove tag And now we have to obviously build those in here as well So I'm going to go all the way to the bottom and I'm going to hit enter And for the ad tag it's going to be like this And going to put this bracket in here And inside this we're essentially going to set We're going to invoke this Something looks incorrect here We have the tag Okay set is already called here Sorry about that guys So we're going to say con new CTA is everything inside the form data.CTATA and this is tags Okay we're going to grab that and then after this after this we're going to say tags like this and then inside this after we put the tags if there is nothing in here then we're going to essentially put an empty array and we're also going to need to pass this in So what I'm going to do guys is I'm going to wrap this in this bracket like this And then I'm going to say tag Okay Then down here we don't need validation data All we're going to do is we're going to return all of the form data But h okay so it looks like I'm missing something here Okay So let's just break this down piece by piece because there's so many things happening in here So the first thing I want to do is create new tags So con new tags is equal to this Then we're going to create the new CTA So new CTA is going to be everything inside the form data but the tags are going to be the new tags Okay so this is much more easier to read So sometimes as developers you might think you're writing good code You might feel nice writing really complex code when in reality it's not good code because no one else can read it Right So I think I don't know who I'm quoting but um anyone can actually I don't even know what it's the right quote but uh essentially anyone can write uh you know code It's only someone who can write code good developers can write code that other people can read Um and so that's what you need to focus on Okay If something looks complex and you feel nice about it it's probably not good code almost every time So focus on breaking it up Okay All right next we need the remove tag So I'm going to get that one as well And this one is going to do the following So I'm just going to copy this because we've already done the add tag And this is going to look just like this Very similar to the previous one except if uh we're going to say in here we're going to filter it for that specific tag Okay And then we're going to create the new CTA and return that data So now we can go back here and we can use that remove tag and add tag Okay So there we go We're using the remove tag After this you want to go down here and you want to hit enter after this div And now we have to create the CTA type Okay So in here I'm going to create another div And I'm going to just import all of this together And then I'm going to have a label for this the tabs for this and we're going to have tabs trigger This triggers book a call CTA and the buy now CTA Okay And obviously this is going to need a handle change So what I'm going to do is I'm going to scroll up here and I'm going to say const handle select CTA type It's just going to call that CTA function Pass in the CTA type and the value Okay Now let's scroll down to our tag to our tags Okay And the next thing we need is our agent based on the type the CTA type that was selected or um if we need we can just show Stripe products Also just to show you what it looks like when you're trying to create these tags you can put a tag in here just say test tag and hit enter And that's going to create a tag for you And you can clear the tag by clicking on the X So I just took a look at this guys inside our types for the validate CTA It looks like the AI agent and any of the CTA related information is actually not required here Right So I think we're good to go We don't need to build out the the CTA stuff right now And obviously if we do need to we'll get that Uh but just want to let you know that we're good And the reason is because we built it in such a way that it doesn't block us Next go ahead and inside this folder structure right here we're going to create the additional information step Okay so first let's go into our index page And inside the index page now we need to provide this info in here as well So I'm going to quickly copy this one And after this object we're going to pay place this third object which is additional info step Okay And obviously just like usual I'm going to just comment this out so we can see this for now Okay And now copy this title and inside the folder structure I'm going to create another file and call it tsx And then let's just use a snippet And let's rename this title Now I'm going to go back and just import this component Okay And that shouldn't throw any errors And now if I click on it I can see additional info Awesome So now inside this additional info component first thing we need to do is we need to get all our information from the store So I'm going to grab that right here and I'm going to import this And I'm also going to mark this component as a use client component And then down here first thing I'm going to do is I'm going to remove this and I'm going to have another div And this div is going to have the following styles Okay So you want to put this div like this And inside that you're going to have one more div And this div is going to have this style as well And inside this we're going to have a label right And this is just called lock chat for now And I'm going to import this label as well It has a paragraph to just show what it is right Something like that And after this we're going to have a switch component And this switch component comes from chassis UI So I'm just going to bring it in Actually it's going to be after this div guys Okay And then let's go ahead and import switch from components And then we have to pass in these values Okay So the lock chat essentially comes from our form data So we need to extract that data here So I'm going to extract all of the information that we require And then let's go down here and that should solve that error The next one is we need to pass in a handler So let's go ahead and build that handler This is also very straightforward So I'd like for you to take this up as a challenge So I've showed you how to build the handlers for all of our other values right The other form fields So go ahead and build the handler for the handle toggle lock chat just as such Okay Pause this video and do it if you don't know how to do it I'm going to show you exactly how to do it Okay so hopefully you got the right answer If you did not get this then I'm sorry you didn't understand what we were doing Okay it's all it's very straightforward You just have to call the update handler and just pass in the type Next you're going to scroll down and after this div you're going to hit enter and you're going to create another div here And this is a container for another element right So we're going to need another label So a div first another div inside it label and paragraph and then we're going to have a switch component And obviously let's also go ahead and create the toggle handler for the for this coupon enabled So I'm going to scroll up top here and I'm going to paste this Same exact thing We're just going to pass in the value And this is the most important part Okay So let's scroll back down And now after this div you're going to hit enter and you're going to check if the coupon is enabled And if it is then we're going to just render out an input field for them to put it Okay so that's going to look like this Coupon enabled true return a div with an input field with all of these props So the value the onchange and some styles and placeholder and then the errors And then finally we're going to show an info at the bottom here that says "This coupon code can be used to promote a sale." Okay so where do we get these errors from We're going to go ahead and create a validation state just like what we did previously So we want to go in here and you want to say errors equal to get validation errors You want to invoke that and pass in additional info Now you could also like I said pass this inside AU's memo memoize the values so that every time the value changes uh you can essentially invoke that right but this will fire on every render so it's still going to but I think the best way is to pass these inside a use effect or a use memo and then cache those values okay so there we go now this page is also completed it looks sort of like this if you lock chat nice if you open coupon code Okay so a handle coupon code is not actually not created So we have to obviously create that one as well So let's scroll up top here And after this one I'm going to say coupon code just like this Pass in the value and the title So now if you turn this on CN is undefined We forgot to import CN as well It's just hiding in there Let's make sure I don't have to do that once more Okay And now if we turn this on there we go Now we see the coupon code We see the message here And you can put the coupon code inside Okay great job So next you want to go back to our component the index component in here And I'm just going to uncomment all of this and just see what we can do right So let's go in here Uncomment And uh this one needs an array That's okay Okay So we need to accept these values or actually because we're not rendering that it shouldn't be an issue So let's see how it works first of all So this is the modal and let's go ahead and just say mochi Okay And for a description now the these are firing on change because remember we had those values uh we had the validation handler in inside the file So it's going to invoke every single render right Uh which is fine A lot of you guys like it to fire on on change Some like to do it on on complete So up to you You can also fire this when the button is clicked So what I'm going to do next is description So the best course coming soon And just so you guys know our first ever premium course is under construction Okay It is the best SAS course you will ever find on the internet with a project so good that it's almost unbelievable Okay And um even we are having a hard time building it because of how many features are inside this application So if you are a SAS business owner or a SAS developer and you're ready to essentially build something on a whole different level then there is a weight list inside the description If you click on that link you'll it'll take us to our website or you can just go to web prodigies.com You're going to find the wait list You can sign up and then when it launches there's going to be a launch bonus discount Okay Or maybe some sort of a launch period bonus And only those who are part of the weight list can access that because you'll be sent an email Okay So make sure that you join the weight list So that way you at least have the option the opportunity to grab that when it comes Okay Awesome So now let's go ahead and select a date I'm just going to select tomorrow's date and a time as well So I'm just going to set this to 11 and or 10 That's fine And I'm going to set it to 10:00 a.m And let's hit next Boom There we go It took us to the next page And I'm just going to put a CTA label So I'm just going to say maybe book a call with our team And for tags I'm just going to add something in here for now So I added mochi Now if I hit next hopefully this error handler Okay there we go Nice And now you can also check this off Right So what I'm going to do is I'm just going to leave these as is and click on complete And let's see if it fires that Okay So it did save it in the database and uh we can actually just verify that obviously So let's just go ahead and take a look at it So I opened up the terminal and you can see the basic form data CTA data and additional data in here So this looks good so far and it also created this ID for me So I think it is working And now let's also go into Prisma Studio and take a look at that as well There we go So now you see the call being made and the data being saved inside the database Now that we have created () webinars let's go ahead and try to render those webinars out So open up your folder structure and you want to scroll up here I'm just going to shrink everything for now and I'm going to go into app and inside this we have our protected routes and inside the protected routes we're going to create that that webinars page So create a new folder We're going to call this webinars like this And inside that you want to have a page.tsx And inside this I'm going to render a snippet And I'm just going to change the title Next we're also going to need a layout page So inside this webinars page we actually this layout is good enough cuz I think we're already doing a bunch of stuff in here Yeah So this should be fine So what we can do now is you want to essentially wrap these children items inside another div Okay So just put it inside a div like this And that way it kind of has a much better layout Now go into your webinars page.tsx and just please please follow through with me We're going to essentially be building the webinar section and just for info this is pretty much what it looks like So it's going to have all the webinars load like this Okay So let's go ahead and build this out So the first thing you want to do is we're going to remove this We're going to render tabs And I'm going to import tabs And this is also going to have a page header And this page header is another custom component that we need to create So I'm just going to pass it in for now It's called page header just like this And this also requires some props like left main right icon stuff like that So I'm just going to import these icons Okay And let's go ahead and import this one as well Okay It's not Uh the lead icon is from our folder Sorry about that That's why it's not installing And uh there you go So just to just to cross check this one webcam should be from Lucid React Home icon should be from the uh Lucid actually home icon Let's grab it from our new F custom icons folder Okay there we go And then we have the lead icon which comes from the icons folder as well There we go Okay nice So now we can copy this title and let's go ahead and quickly just create this page header So inside components inside reusable inside layouts you or actually inside reusable itself it's fine You want to create another folder in here And you're going to call this page header And inside that you want an index.tsx And let's return a snippet like this And inside this component first we're going to have a div So I'm going to quickly remove this div and pass in this div like this Nice And before this also we need to import it so it doesn't throw any errors So let's go back and let's import this page header component And obviously the props are not accepting right now and that's why we're seeing these errors But if you click on the webinars page this should render out the webinars page just like this Okay And now you should be able to move back and forth between these pages So inside the page header uh header itself first thing we're going to do is we're going to accept those props So let's go ahead and grab the heading the main icon the left and all of these props So pause the screen and type these out And then obviously we need to dstructure and grab all of those values So I'm going to dstructure it just like this And now inside this div we're going to have another div And this div is going to have a paragraph to show the heading itself Okay So I'm going to show the heading and boom there you go It shows on the screen And then we're going to render out the icon itself So after this paragraph hit enter And you're going to say div And this is the purple icon And this purple icon comes from our custom purple icon folder remember So we're just going to go up top and import the purple icon component And let's actually move this on top here It looks like there is no module Let me make sure I have this guys Okay I just needed to change the folder and uh folder is all I needed to change and that's pretty much it So I need to import it from our purple icon folder And then let's scroll down here and just like this now we have this beautiful icon on the right side Right take a look at this We spent so much time perfecting this design So uh there you go So now you have that icon Next after the purple icon you're going to find two divs Hit enter And then you finally want to say div like this And this div is going to have another div inside it and another div below it And these are the following class names for that as well And in the second div we're going to render out the children elements And inside the first div we're going to render out a search and an input This is just a placeholder for now It doesn't really matter You pretty much don't even need it but uh I just put it in there so it looks nicer Okay Okay So you can maybe in the future search for webinars and there is a component if you go inside shots UI Let me show you this So there is a component called command Now even though this isn't the way to use it cuz this is this is a command component That means you can put a command here right This is an optimized search feature that has a really nice algorithm already built for you And so I'm doing this in my own SAS companies as well Of course they're all in stealth mode but uh you can essentially look search for something and it does client side rendering and fetches those and you know pretty much gets you uh the data instantly with the algorithm So you could use that component to improve the search functionality here Okay so now that we're done with this let's go ahead and close this page header and let's go back to our webinars page in page.tsx And then next we have to show the tabs list So after the inside the page header sorry you're going to hit enter And you're going to put the tabs list like this And this tabs list is going to have the following class names It's going to have a trigger first So I'm going to put trigger And it's going to say all There you go You can see it in here Obviously because I'm on Windows it shows this ugly scroll thing but that's fine You can remove it with uh some CSS Okay And then we're going to have the tabs trigger itself Upcoming and then ended So you can use these values to essentially tweak them as well So based on what user clicks you can show relevant data Okay So after the tabs list now we need to show custom tab content So after page header you want to hit enter And then we're going to create the first tab content And this one is for all So I'm going to say all And now we have to render the webinars So where do we get the webinars themselves So we're going to scroll up top all the way to the top of the file And this is going to become an async component So I'm just going to say async Okay And we essentially first need to authenticate the user Right Remember I told you you need to authenticate on every page Even if I don't do it you have to So you want to call on authenticated user and you want to check if there's no user redirect them to the signin or the uh the landing page Okay And down here I'm also going to quickly import table content We'll get to this in just a second guys Don't worry about it So let's scroll back up And now that we're done with the search the next one is to get the webinar based on the users's ID Okay so that is that's going to look like this Webinars equal08 get webinars by presenter ID with this ID itself Now let's go ahead open up actions and go into webinars And we only have the create webinar So I'm going to scroll down here And then we're going to create this export get webinar by ID is going to be an async error function And this is going to need the presenter ID So let's bring that in as well And in here we're going to have a try catch block And in here we're going to say prisma.webinar.find many for this specific person And we're going to include the presenter And actually for this presenter I want more from this as well So I'm going to get select And I want the name I want not image This is ID And we also want the subscription So we can re leave out the email We don't need this I'm just going to say Stripe connect ID Okay And if you don't know what this is guys don't worry about it Essentially in the future we are going to have the ability to connect Stripe products in here okay Or to connect Stripe links And so for that we're going to need Stripe Connect in the future not right now Okay And so that's why we need to essentially bring this value So based on that we can render out elements Next um in here this should be good to go And now we can go back here and quickly import this Okay And next let's scroll down here And so essentially what we're doing is refreshing the webinars And it looks like this It's an array of all these responses And then we're just looping over them and rendering them out Okay So make sure you pause the screen and type these styles for these uh properties So essentially for the tabs content for all we have this class name And we're checking if the webinar's length is greater than zero And if it is we're going to render a custom component called webinar card If not we're going to render a div saying no content Very straightforward So let's go ahead and copy this webinar name Open up our folder structure You want to scroll down to components Actually this is a component native to this route So I'm going to create an underscore if it would let me underscore components folder in here And inside that I'm going to create the tsx file for this component and just change the title as well Now inside this this has to accept the webinar itself And this comes from Prisma client So let's bring that in as well And down here I'm going to dstructure and grab this value Now let's go back and let's import the webinar card so it doesn't scream at me anymore And we also have to import the type for our webinar right here So now we have one webinar and it's rendering that one webinar Okay nice So I think you already see where this going right If you watch this channel for quite some time you're probably already 10 steps ahead and you probably already rendered this And in fact I'd probably tell you to take that up as a challenge Or if you use AI just ask AI to build something for you right Speed it up Like I recommend you do this stuff I want you guys to do this I want you to get better I don't want you to still type everything So all right But unfortunately I know that not everybody's there Some of you guys are just web developers who just want to learn coding Some of you guys genuinely serious about making money and you're in the next stage I understand that And so I'm trying to address to all of you Okay So let's create this div And then inside this div we're going to have a link And this link is essentially going to take the user to a specific image called thumbnail So let's go ahead and say link like it's not going to take the user to that It's just it has a link around it that takes them to the live webinar and it shows an image inside it Okay that's what I meant So just like this And now let's import the next image as well And it shows a dark thumbnail So you can get all of this from the Discord obviously It's just a thumbnail to show something like this Now obviously you can just build this right So you can get a very crisp image but I'm trying to save some time here So once that's done we're going to have another div after this link So hit enter We're going to render out a div in here And this div is going to have another link element So let's render out a link for this as well And this is it's going to have live webinar inside this Okay this is the link That's what I meant And then the class name for it as well Now this is going to have the title and the description So let's bring in title and description So emoji the best course coming soon Nice And then we're going to have a div which is a wrapper So I'm going to copy this And after this div hit enter We're going to say div like this And inside this you're going to render another div with a calendar component to show the date So I'm going to say div with the class name Another div inside Like I said you're going to have the calendar and this is not from Lucid React This is from our components And you're going to have this format function from date FNS Okay And uh this oh sorry guys this calendar is actually it's not a selection calendar It's the icon So let's go down here And the calendar comes from Lucid React So let's go ahead and import Lucid React And that should solve our bug And now you should see this calendar here Okay great job And obviously if you click onto it it's going to take you into a different page Uh that's fine for now But there we go That's all we have to do Okay Next So after this link hit enter And now we're going to show a pipeline icon Okay So to make it easier for them to access the pipeline which is essentially a way to keep track of their leads we're just going to show an icon here Okay And uh obviously you can create another page but I just put it in here because every pipeline falls under a specific webinar You get what I'm saying So unless you have a webinar details page unless you have something like that um you need to essentially put it in here because it falls under this Okay So that's it We're done with this webinar card And now as many cards as many webinars that you create uh they're just going to render out in here right Very straightforward So let's go back And I would like for you to take this up as a challenge So I just showed you how to create all webinars and render them inside the tabs content inside the page.tsx So your challenge is going to be to create the upcoming and ended webinars as well Now you will not have the solution not even in the premium version because it is just a waste of time Okay You honestly don't even need that section If I were you I would just remove this and move forward with this And so go ahead and just remove this if you choose not to you know render the upcoming and ended webinars because the date already says here Okay this is how you decide what's MVP and what's not All right and that wraps up the webinars page as well So now let's move on to the () next section So the first thing you're going to do is inside your folder structure you're going to create another route This is a dynamic route and inside this you're going to say webinar id and inside this webinar ID you're going to put a page.tsx So this way when we click on this component we can see something So if I click on this it should take me into actually sorry guys this is the live webinar and this is the pipelines page So if you click on this one it's going to take you into this specific pipeline page Okay So inside this page itself what we're going to do is or let's do this instead So because there's no clear understanding as to what this is uh in this page all we're going to do is I'm going to remove this and I'm going to redirect the user to the pipelines uh to the webinars itself Okay So I'm going to say redirect like this and we're just going to send them to the webinars page Okay so let's remove these props so we don't get any TypeScript errors and we don't need React anymore Okay awesome So now if you try to access the webinars page itself like this it is going to let's see what's going on Okay so the error is right here So this should be webinars Okay and this is fine So that's why it was not sending us to the right page So now if you click on the webinars it's going to take you into the correct page But if you remove this pipeline it's going to send you back to the webinars page Okay let's just see that in action There we go Awesome So let's go back into the webinar page.tsx And inside this folder inside the dynamic folder you're going to create another route in here called pipeline Okay And inside this obviously you need a page.tsx tsx Now let's go ahead and let's use tsfce And I'm just going to leave this as page That's fine Now here's something that was new newly added to uh to Nex.js which is all props are now essentially a promise Okay So that means this has to be awaited So keep that in mind All right So I'm going to remove this stuff right here We'll do this piece by piece And so now that you have the props you have to await these props So what I'm going to do is I'm going to say webinar ID is await params And then after that we have to essentially get all of the attendance for this because this is the pipeline section right So this way we can show some uh data for all of the all of the attendees of the webinar And the next thing I'm going to do down here is I'm going to return a div like this And I think we have to put a bracket but it just does not want to do that for me Okay there we go And inside this div we're going to use our page header component So I'm going to say page header I'm going to use the lead icon this one and the home icon as well Okay And now you should see this component show up here Awesome And then after the page header we're going to hit enter And then inside here we're going to have a div And this div is going to essentially loop over pipeline data which we're going to get in just a second And it's going to render out a pipeline layout Okay this is going to have all of the column related data the users tags whatever data it needs to render out those those swim lanes and the cards Okay so let's go ahead and grab that So go ahead and scroll up top here and I'm going to create a server action And this is called get webinar attendance Okay And in order to create this I'm going to open up my folder Inside here I'm going to create attendance.typescript And inside this I'm going to change this to use server And then I'm going to essentially create the server action in here Okay So I'm going to say const get webinar attendance is equal to an async function And this requires a couple props So let's first like pretty much remove this And let's pass in those props These are not props guys Sorry The I'm so tired of uh I'm so used to saying props but uh these are not props These are arguments Okay And so uh essentially we're going to grab these values here webinar ID and the options And down here we're going to have a try catch Okay And then inside this we're going to have a call made to Prisma or to a database to get the webinars attendees Okay So all we're going to do is say Prismaclient.webinar.findique for this webinar Select all of this info So pause the screen and type this and return it to me That's what we're doing Okay Now if there's no webinar we're going to say hey there is no webinar So return 44 Okay And if everything exists then we're going to get the attendance count by uh by the type okay in one single query And so how do we do that Well we're going to say attendance counts equal await Prisma client attendance group by this type Okay And then we're going to group it by this specific webinar ID And we're going to say count that type That's it And you'll see where we're going to be using that data Next we're going to initialize the results structure So I'm going to say const result like this is equal to this attendance type enum And we have this thing called attendance data here And this is a custom type that we need to create And so what I'm going to do is I'm going to scroll down here into types And at the bottom of this file I'm just going to say attendance data is going to be of this type with user And we're going to say attendee like this And this attendee comes from Prisma So import that Okay Now let's go back up here And now we can import this type here And that should solve that error Okay Nice So after this we're going to essentially create a for loop Okay And uh this process counts I mean it's essentially a way to um I I'll show you what we're doing because I think it's easier that way and that way we can just follow through with it Right Okay So essentially what we're doing here guys is we're getting all this data back Right So this one right here and we need to process all of the data that we're receiving and we need to store it inside result And so that's what we're going to be doing right now Okay So we're going to process all of these results So the first thing is I'm going to say const type of object valvalues attendance type like this And inside this actually we're not going to type this It's just auto type for me Sorry about that Inside this curly bracket down here we're going to say the following So if the type is attendance type dot add to cart and the webinar CTA is equal to the CTA enum book a call Right Then we're going to continue So we're going to skip these uh skip the add to cardart uh for book a call webinars Okay And then after that down here we're just formatting it All right That's pretty much it Nothing too crazy So if the attendance type data is like breakout room and the webinar CTA is not equal to book a call then we're going to continue here as well But we're going to find the count for a specific type which is this So we're going to say count item equal to attendance type attendance count.find And inside this we're going to say if the webinar if the webinar CTA type is book a call and the attendance is breakout room room room and the attendance is also add to cart then we're going to return true So we're essentially creating all those tickets and that that whole structure that whole data structure Okay And finally after this we're going to return the attendance uh a boolean here Okay Now at the bottom here we're going to initialize this data So we're going to say initialize uh with the count but empty users array Right So result at type equal to this object We're just going to pass in all the count and the users Now after this curly bracket hit enter And now we're going to fetch the user We're going to fetch the user data only if it was requested Okay So if options dot So if this was passed in through the through the um through the parameters right here then down here what we're going to do is we're going to first have another for loop And now we're going to say if the attendance type is add to cart and CTA is book a call or attendance is breakout room and their CTA is not equal to book a call then we're going to continue and then next we're going to create something called query type and this helps to get the attendance type so we can query okay and we're essentially going to map over the breakout room u so map breakout room to add to cart for our database Okay so just keep pushing through This is just accumulating data It doesn't really matter So here we're just going to say if it's equal to book a call and type is attendance type dot breakout room then we're going to return add to cardart Okay if not we'll return the type that we already have stored Now the next thing is if this result at the type count is greater than zero So that means we're only going to fetch those users if they have or if they have an attendance of this type right So for that we have to check first if the results count is greater than zero And if so then we're going to get that their attendance data So attendances equal to Prismaclient doattendance.find many for this specific webinar ID and the attendance type We're going to include the users and we're going to take um we're going to essentially limit the number of users that are returned and we're also going to get them in descending order Okay Then finally right here so after this bracket you want to say results at type do users equal attendance.map and in here I'm just going to close up this bracket So just give me a moment Okay And in here we're going to return the following data So I'm going to say ID attendance username just like this And then finally we need the Stripe connected ID as well So I'm going to grab that too And then we also need the call status So let's grab that as well Okay Awesome Cool Next we need to revalidate the path So I'm going to call revalidate after this purple bracket So revalidate path webinars slash this webinar id/pipelines Okay awesome And then finally we're going to return all of the data Phew that was a lot of stuff right Don't worry about it It's just part of the game Okay and uh this is the only way we could accumulate all of the pipeline related data in the shortest way Okay next If there's an error I'm just going to return error Say success false and return uh console a message as well So now let's go back and let's import our attendance Get webinar attendance It looks like it did not Let me type this Okay we forgot to export it Okay great So export get webinar attendance So now we can import that one in here Okay So now we have the data So pipeline data now can potentially be empty So if there's no pipeline data we're going to essentially return no pipelines found And if there is obviously we're going to render that out I also see some errors here Let's see what this is Okay So this says that you can't have this call happen here Okay which is the revalidate path It cannot happen on a render This can only happen if you are I mean it has to be outside of the render So if you comment this out that should work Let's just refresh So it says pipelines layout is not defined Let's go back real quick And obviously it's not defined But if you comment this out and if you render this ECMAScript error Okay we're just getting a bunch Give me a second Okay so now you're not going to see that error anymore Okay and I think these the fetch here anyway is not cached or anything Uh so because I think it fetches new data every time That's the new Next.js 15 pattern I believe So right So we're good to go So now I just commented this out So you can see that we're not seeing that error And now obviously we need to go ahead and create the pipeline layouts Now for just a few moments we can't see any data on the screen okay Because we don't have anything but just to give you an idea it's going to look something like this okay With all the pipeline data and a few tickets inside Maybe we might not have the background colors cuz I think I didn't actually put that in but u it's going to look very similar to something like this So let's go ahead and let's shrink this Let's grab our cursor Okay And now let's build out this component So copy this title You want to go into the components folder under the pipelines folder And I'm going to create this Okay there we go That's our components folder And then we're going to have the pipeline layout.tsx And let's return a file in here And now inside this we're going to have all of the values from our props So let's bring that in And we need the following So let's grab that And this is attendee So let's bring in our Prisma client type And then let's go ahead and let's dstructure all these values And then in here we're going to have a div Actually first solve this error Let's go back here Let's import this Okay So now that doesn't throw those errors And we also have to complete this So let's not jump too far Let's just complete this real quick So for the enum let's import it from Prisma client And for this format column title we're going to create a helper function Okay And this is going to be inside our utils file Or you can also put it in here That's fine too And I think this was uh supposed to be utils Okay So I spelled it incorrect Okay there you go So now we have this type here and we just imported it And then this is just going to format the column titles itself So let's copy this Let's go in here And now we can import all of the pipelines So now we have a couple pipeline stages right But it's going to render like this because we don't have the components themselves So let's go ahead and grab that as well So inside the pipeline layout itself you're going to first have a div And this div is going to have the following styles And we're going to have another div inside this with a title and the count that we received So I'm going to say badge like this from components UI badge just to put some design here And there you go So it says zero So that's why we're doing all of that accumulation stuff right And we have the title as well Now down here we need to render out the cars themselves right So what I'm going to do is I'm going to hit enter and I'm going to say div with this style And then the users we're going to map over them And we're going to render out a component called user info card Okay And this comes from our reusable components So let's shrink all of this Open source components reusable And let's create another folder I totally messed up Let me do this once more Okay And now we're going to put in the user user info card in here So let's do user info card And okay so it looks like it already exists Huh Okay it does exist And the reason why it does is because we built this on the homepage So totally sorry I forgot about that So let's import the user info card And now obviously we don't see anything right We can't see some data So let me see if I can figure out a way to put some data in here Okay there we go So your boy always has something up his sleeve man So I just created some mock data You don't need this It's fine But I just went ahead and create some mock data and I can now render them right in here Awesome Right So we have the structure good to go Just a few more improvements Obviously you can take a look at the design right You can uh maybe make the tags smaller give some background color here Uh maybe change a couple things but that's very simple I don't think you guys are you know such newbies Okay I think you're better So you guys can probably improve that design as well So that's it So now we can render out all of this data from our components So I'm going to redo this So undo whatever I just pasted And that pretty much brings us to the end of the pipelines page as well So now we're going to be working on the leads page () And the leads page is essentially going to show us all the people who registered for our webinar So inside your protected routes go ahead and create another page And you want to call this lead And then inside this you want to create another page Call it page.tsx And then let's go ahead and return a snippet Now inside this it's a very very simple component actually We're just going to have a div Okay And then we're going to need our page header So let's bring that in as well Now let's import all of these Okay And then after the page header we're going to have the table elements So first we need table So let's bring in the table And this comes from our our components folder right Let's make sure where why do I not see it Okay that's because it's coming from Lucid React So glad I took a look at that This has to come from our components UI Next we're going to have the table header These are all the essentially the column headers right The titles So we have header we have a row we have a head and then we have name email phone number tags That's it Very straightforward And then for the table body down here under table head we're essentially going to render out all of the table body elements So hit enter after table header And this is going to have table head table body sorry And we're going to get this lead data right And we're going to map over them And for each of them we're going to render out a table cell with all of these So email phone and a badge icon Okay And this badge actually comes from components And that's it Now where do we get this lead data from So right now obviously we don't have any lead data So what I'm going to do is I'm going to create a test folder And inside this just like how we did previously going to create a data.typescript And I can essentially put all of the mock data for these leads inside this Okay so you don't need this because it's very straightforward You can just see what it looks like in the browser Um so let's go ahead and go right here Let's click on leads page And now we need to import leads data So let's go ahead and import that And there you go So now you can see all of your lead information And that pretty much brings us to the end of the leads page So let's take a look at the next section now Now let's go ahead and build a settings page So inside your app folder inside protected routes go ahead and create another page in here called settings And inside this you want to create a page.tsx And let's go ahead and return a component like this And now let's begin constructing this page So first let's click on the settings page to make sure it loads correctly Awesome And now let's change this to show a div And inside this div we're going to have an H1 tag And essentially all we need in here for now is the ability for the user to connect their Stripe account So I'm going to put a header called payment integrations Now you can also use our payment header Uh sorry guys our uh pretty much the header that we built right The section header You can use that one if you'd like but I'm just going to use a H1 right here Next I'm going to have a div like this And this div is going to have another div inside of it And this is going to have one more final div inside this as well And this is going to have the following colors inside this to kind of show an icon like this And then we're going to have an SVG Okay So um you can essentially do I mean you can make your own if you'd like but I'm just going to go ahead and paste an SVG that I found here And this is going to show a star So feel free to just show star icon Okay you can get that from lucid react U now the next thing is after this SVG we have a div You want to hit enter And then now you want to put another div in here that has an h2 called stripe connect And then after that we're essentially showing a paragraph that says connect your stripe and stuff like this So now if you expand this there you go Okay Awesome Next you want to go down here and after this div you want to hit enter So second div hit enter And then you want to provide another div below this And this div is going to have one more container div inside it So let's get that as well And then finally we're going to check if the user has already connected their data Now this is something we're going to get from our database and we'll get that in just a second but let's go ahead and just render out that state first So we're going to say is connected if it's true render out the lucid alert the lucid check circle if not show the alert circle Now where do we get these states from let's scroll up top and let's make the call here So first we have to see if the user exists So I'm going to say unauthenticated user get the user itself If the user doesn't exist I'm just going to redirect them to the sign-in page for now And then after this is connected is a state I'm just going to store by saying if user do user.stripe connected ID and that's going to be stored inside this Finally if you scroll down here this should not throw any errors Okay the reason why it's throwing errors is because this needs to become an async component So there we go And now you can see that component right here Next right below this icon that we just created we're going to have another div So hit enter And you're going to say if it is created or connected show this data If not show this other paragraph Okay So there you go It says your Stripe account is not connected yet Connect your Stripe to start processing payments Next after the third div here you want to hit enter And you're going to create another div just like this And this div is going to have another div inside here saying is connected And we're just going to say like some information in here saying you can uh you know connect anytime and you'll be redirected to Stripe And then once that's done we're going to have a link right below this div So hit enter and we're going to create a link component And this link comes from next link And obviously we need to pass in the stripe link which we don't have for now but I'm just going to comment this out And then let's go ahead and bring in the lucid arrow right icon Now this needs an href And so what I'm going to do is I'm just going to reimpport this And I'm just going to put a hashtag And there we go So now we can see the connect Stripe button And so what we need to do on this page is essentially establish a connection with Stripe so that when the user clicks on that button it takes them to the Stripe Connect hosted page And then we will essentially get a web hook or some sort of way to connect that into our application which again we'll focus on later on So go ahead and put a note here And I'm going to say to-do add the Stripe link Awesome Now after this div you want to hit enter And we're going to first check if the user has connected And if they have connected then we're going to render out the following So looks like there are some typing errors Let me just fix this real quick Okay there we go And so we're going to first render out a div here So let's render that div Awesome And now inside this div we're going to render out an H3 tag that says Y connect stripe And then I'm just going to provide some data in here just to sugarcoat our design That's pretty much it Okay So you can you know feel free to stop right here You don't have to go past this but I'm just going to create a little more just to make it look nicer Now go ahead and scroll up top here And by the way just for your information Stripe will always change their documentation Okay This is just how Stripe is because they're always building a better product And so at the time you're watching this video yes it might have changed And so it's your responsibility to always look at what Stripe is doing okay They change their endpoints they change a bunch of stuff which is kind of breaking a lot of applications right now And so please make sure to update your other SAS companies if you need to you know all the other code bases as well But um just for your info that if you're building this with us and the thing you know everything looks different well then take a look at the documentation and build alongside So in order to create the stripe link I'm going to use a helper function called getst stripe oath link and this comes from our libs folder So I'm going to scroll down here and inside libs I'm going to open this up I'm going to find utils and inside this compon inside actually what I'm going to do guys is I'm going to create another folder called a stripe and inside this I'm going to have utils and then in here I'm going to paste this link Now please pause the screen and type this out At the moment this is the current Stripe Connect link And so all you have to do is pass this link and then a couple more credentials which we're going to grab in just a second And then once that's done you can now import this into your component So let's go back here and let's bring the get stripe lot link And that's pretty much it Now finally let's scroll down here and we need to replace this stripe link with the Stripe link that we just created And obviously if you click on this you're going to see some errors And that's because we don't have a client ID And so let's go ahead and set up Stripe into our application Right now go ahead and create an account on stripe.com Log in and then click on the () developer tab at the bottom Now these are pretty much production keys So I want you to be very careful with this In fact I will be deleting this myself Okay So the first thing you want to do is click into API click on publishable key and you're going to open up your environment file And inside this if you already copied the code from the Discord you will essentially have this done for you But all you have to do is just paste the key for now And then you're going to set a value here So I'm going to say next public try publishable key And please do not make any errors with this I'm going to say this once more If you make errors it's going to be almost impossible to debug Okay So please type this as is And once you have the Stripe publishable key we also need the Stripe secret key So inside API keys you have to click on create secret key And that's going to give you something like this Now this is a slightly newer approach So click on build your own And obviously be very careful with this And it's going to give you a key Make sure you copy that And then the next thing we need is the Stripe client ID Now to access this is pretty much a maze So please follow through The first thing you want to do is look up connect And I want to show you how to route to this page And then you want to click on this OOTH So onboarding options So look for connect You find this onboarding options Click on that And then you're going to find OOTH So click on this as well And then we find a client ID here Right now I'm not entirely sure if this is the one because like I said Stripe changed a lot of their stuff So I'm going to copy this for now and then paste it here And if obviously things don't work and we get that unauthorized error or whatever we saw we'll know exactly what to do Now go ahead open up the terminal quit your application and we're going to redo So refresh the page and go ahead and run npm rundev once more and recall refresh this page So go ahead and click on connect with stripe And that takes us here It says standard OOTH is disabled for this Stripe Connect Okay so looks like we probably made an error Let's go ahead and grab the right value All right guys So it turns out that that account was just blocked from accepting Stripe Connect stuff And this is the option that you need turned on Okay if you don't have this option turned on then essentially it's uh pretty much not going to work for you Okay so please make sure that you have this option turned on And then the next thing I'm going to do is also add our endpoints in here http localhost 3000/ API/stripe connect And this way we can I guess I mean it requires it in here Now if you're not in test mode you won't be able to do this Okay So just keep this in mind Uh you you will have to add an HTTPS endpoint But because we are in test mode and I see this here which for some reason I didn't see in the other account I'm able to turn on test mode All right So now all we need to do is click on this button and it should take us to into like a stripe oath flow and this is exactly what we need Now obviously when the data comes back through the redirect URL we're not actually accepting that So let's go ahead and build that out as well So shrink all of your folder structures and then you want to click into source into app and you want to create another folder in here called API Okay So let me just quickly grab this as well So you want to say API like this And then inside this API you're going to create Stripe-connect because this is the redirect URL And how do we know this Well first we already stated it inside Stripe dashboard And also inside our Stripe utils we're mentioning this URL in here And this URL is coming from the settings page We're passing it in as an argument Okay Okay And then we're accepting it here from the parameter So let's go back into our API folder And inside the stripe connect route you want to create a route.typescript So I'm going to say route.typescript And inside this route.typescript we have to have a get endpoint And this essentially handles the ooth callback from stripe connect Okay So go ahead and say the following So you want to say export async function get And for the request you want to say next request just like this And now inside this we're going to have a try catch So I'm going to create a try catch like this And inside the try catch first we're going to get the request of search params So I'm going to say request next URL search params We're going to store that in here And then next we have to retrieve and get only what we need from this So we need code and state Okay Now how are we getting this I think let's go into our libs We're also passing in uh the code in here So we're telling it give me this data Okay response type code So that's how we're going to get that from there And the state is also useful because we can pass some metadata into it So that will so stripe will accordingly send that back to us Now if there's no code no state I'm just going to return u actually not this I'm going to return first Let me just print a error in my console And then I want to return a next response And I want to say redirect to settings And I'm going to put this message in here And feel free to control the error handling and whatever you'd like But u the next step is after this part I'm just going to put another message so I know what's going on I'm just saying that I'm processing the stripe call And then I'm going to create another try catch inside this So try catch Okay like this And for this try catch we're essentially going to say await stripe And this stripe comes from the stripe package right So let's go ahead and install stripe now So inside your your terminal you're going to say npm I and you're going to say stripe at and I'm going to grab this from our codebase so we do not make this error And we have to install this specific version of stripe And I think we might also have to add legacy pure depths So let's go ahead and add that as well The next package that we're going to need is npmi stripe react-stripe So stripe/react-stripe-js We're going to say at and we're going to provide the specific version type So we need this one Okay I actually have to put legacy pure depths in here Okay and hit enter And then finally we're going to need another package called stripe stripejs So let's go ahead and say npmi atstripe/stripejs And the version number is going to be as follows Okay And let's go ahead and put the pure depths and hit enter for this as well And just like that Stripe is installed into our application So now let's go in here into our route and we need to essentially create what we call a stripe client That's the only way for us to get the oath token from here So you want to scroll down into your libs folder And inside your libs folder you're going to essentially create a file inside stripe called index.typescript And in this we're just going to import stripe and we're going to create a new client and please please pass in these specific values Okay And so we're passing in the Stripe secret key which we received from the Stripe dashboard and we're also passing in the other information in here as well Okay which is the API version and uh the app info as well Okay this is incorrect This would be or it's fine for now I don't know if that's going to cause any issues so I'm just going to leave it as is Okay but you can just change that and uh make it look like your application So now the next thing we need to do is inside here I'm going to import this stripe and that should solve our error Awesome So we're essentially saying grant grant type authorization code and that's going to give us that code So first we need to make sure that the Stripe user ID is present So if there's no Stripe user ID then we're going to throw an error and that's what we're going to handle inside our catch block Okay Finally if we got everything then after this we're going to say Prisma client like this And let's import Prisma client Prismaclient do user.update Something looks wrong here What seems to be the issue Okay there we go And let's make sure Prisma client is coming from the right folder That's right So where the ID is like of type state and the data we're just going to pass in that stripe connect ID for that user That's how we're saving it in our database And obviously you can print a console message here so you can keep track of the process especially for debugging It's going to help And now we have to return a next response and say redirect to this new URL And we're going to we're going to show successfully Okay And then finally we're going to have inside this catch block if anything took place we're just going to say stripe error and we're going to put the stripe error from here So this is stripe error Let's bring that in here Okay I'm on insert mode I don't know why I'm on insert mode Okay there we go Wow Windows is horrible All right and then the next thing we need to do is we need to return another response here saying failed Right So please pause the screen and type these as is Okay don't make any spelling errors here We physically cannot afford to do this and this will not be as part of the boilerplate code So please pause the screen and type it Okay so next down here for a catch block we don't need this I don't know why I did this in here So inside the catch block we're going to say console log the error and we're going to redirect So after the error just say X response redirect settings with false And we're just going to pass this in here So now comes the challenging part So right here we're going to try our best to test this out and see if it works Okay so you want to click continue And it might ask me for info Okay so it is asking me for info We can't fill this up So I'm going to return to Karina AI And obviously it says Karina here because we use the same setup the same account for Karina Okay now it connected the account I think it's because we were using the test flow But let's just take a quick look to see if this is actually real Okay that did work because it was in test mode So you see we have the Stripe Connect ID in here and we're pretty much set We're good to go Right There's something called Stripe customer ID but this is for our payment Stripe connect ID is for connecting Stripe So now we essentially have Stripe into our application So now we can fetch products and pretty much do whatever we want for on behalf of our customer And now that we have Stripe Connect let's go ahead and set up the other stuff that we set as to-do So first is inside the CTA step component which is in here We're essentially going to complete the stripe part right here And this stripe data comes from the props And if it's coming from the props that means it's coming from the index page And so on the index page let's go ahead and grab our Stripe products first Okay So up here what we're going to do is we're going to accept the Stripe props from here too So we're going to say stripe products equal to stripe uh stripe.product And this type comes from stripe itself So let's import that And now I'm going to go ahead and dstructure that in here And now we essentially have the stripe products But this also is coming from another prop So let's go ahead and bring this in too So you want to open up your folder structure and you want to click into the header.tsx And in this component we are rendering out the create webinar button Right So now we should accept this prop in here We should pass in this prop prop in here and uh that way it can get access to all of this data And this is coming from serverside data guys So u the challenge here is or kind of like I guess a drawback or well not really a drawback because we already have the stripe products right Um if you create a provider and do this it's better Okay Now just for the sake of this video I'm going to again pass this in from another component Okay Um and this way we get instant serverside feedback That means the server is going to pre-render get the data and pass it to the client component And that way there's no you know there's no space where the client component needs to load It instantly shows up So what I'm going to do now is I'm going to dstructure and grab the stripe products And this is the header component which comes from our layout.tsx in here And so let's go and scroll into our layout.tsx component And inside this we have to pass in all the stripe products So what I'm going to do in here is I'm going to create a server action called get all stripes uh get all products from stripe And this is going to be inside the stripe folder So open up your actions folder create stripe.typescript and then we need to change this to use server And then in here first we're going to say export const get all products from stripe just like this And this is going to have a try catch So let's go ahead and create the try catch And first we have to authenticate the user So let's go ahead and authenticate the user for uh right here And if there is no user we're going to return a 401 message But I'm going to tweak this message to look like this Okay forget about this AI is just doing it for me but we just have to return a 401 Now if there's no Stripe Connect ID we also have to return a 401 So if user.subscription connect ID if this does not exist then return that Next I'm going to complete this So I'm going to say products equals stripe and this stripe comes from our libstripe So let's bring that in products.list pass in an empty object here And we have to pass an object here saying stripe account is current user user.stripe connect ID So now we're going to get the products for this user Now let's go ahead and return all of those products And that's literally it And finally if there is an error show a console message or return the following status Now let's go back here and let's import this stripe products from stripe And now we can pass down this prop So I'm going to say stripe products equal to stripe products And I see some Typescript errors here And that's because this could potentially I mean this has multiple things in it So I have to say products And if this does not exist then I'm going to pass in an empty array like this Okay awesome Now let's go into header And now let's consume this and use it in here So I'm going to copy the stripe products and I'm going to scroll down here And you see where we're passing in this create button right We're going to pass in these stripe products in here as well And now into the create button component we're also getting the stripe products And what we're going to do with this is we're going to pass that into our CTA step So you see this is prop drilling It's not really the best thing to do But in this kit in this scenario I know that I'm not going to use this anywhere else So it's okay But if you're passing real information like user data and uh you're kind of wedging it down too much into it then you probably need to create a provider and pass it into the provider and then access that state inside the component Okay Now the next thing we need to do inside this component which is our CTA component right here is we need to render out the stripe stuff Right So all we have here is we're accepting the prop but we're not actually rendering it out So let's go ahead and complete that really quick So in here what you want to do is hit enter And I'm going to create the following div And this div is going to have the following styles And inside that we're going to create a label And this label is going to have a div after that And inside this div first pass in relative with the following styles And then we're going to have another div and another div inside it Then we're going to have a search icon So let's import this And the select icon So I'm just going to import this Just give me one second guys Okay So now let's slowly break this down So inside this attach a product we're going to just have an input field in here just to show something And then inside this we're going to have a select Okay And so how this works is the user gets to select from the available Stripe products That's it So let's go up here and inside the CTA step Now we can accept the Stripe products So I'm going to bring that in and I'm going to dstructure them in here Okay And now I scroll to the bottom and in here now we can loop over it If there's more items we're going to render them down here But we also need the on value change That means when the user changes and selects something we need to show that So that's something we'll create in just a second But all we're doing in here is we're showing a select item And then after that so if this exists show a select item And if not just show an empty value called create product in stripe Okay Uh or you can just show no product selected Create something in stripe first Now let's go ahead and create this product change So it's a very simple one Let's scroll up top and at the bottom here I'm going to say handle product change Just like this And I also see this type error So let's import this from Stripe And we don't need the item content So let's remove that And I also need a couple things here So we'll get this in just a second So now let's go ahead and click on next to go to the CTA page And now you can select these products that are coming directly from Stripe How awesome is this right So what you should do guys is if you don't see anything in there is you want to go into your Stripe settings into your dashboard and you want to create a product in here And if you don't know how to do that just click on this and create a product And now obviously we also have to remove the to-do here So to-do agents and I'm going to look for other parts in my application And I'm going to do that as well So just give me one second Okay So I went ahead and removed the things that I should for the stripe products Now the next thing we need to work on is Stripe subscription for our platform So first thing is click on the header.tsx and we also have a to-do here So we need to complete this So right here what we need to do is hit enter And remember we use this right So I'm just going to use this And then inside this block I'm going to copy this into this component Okay So now if you refresh you should no longer see the button because the user does not have a paid plan But this obviously is not good We need to show something And so now we're going to create this awesome stripe element Okay So first go ahead and you're going to say stripe elements like this And these stripe uh the stripe element here comes from our folder that we need to create inside this reusable components So in here go ahead and create a folder and you're going to call this stripe And inside this you're going to create another file And you're going to call this element.tsx Okay And let's go ahead and return this just like this Now to solve this error we're going to go back here and we're going to import the stripe elements itself And obviously because my naming convention is different I need to scroll up top and I'm going to say import stripe elements from the stripe element And let me copy this Go into this file and I'm just going to change this Awesome And obviously you also have to change the export from a default to an default export to something like this So change that as well And now uh I also just quickly accepted children props and the children in here And I'm returning the children components in here Now subscription modal does not exist So let's go back here and uh let's see what this is So inside this stripe element we have something called a subscription model And this model is just a dialogue that shows a card component Okay So first I'm just going to comment this out Let's complete the stripe elements themselves And then we'll go into that part Okay So all we're going to do in here is first we're going to create a hook here called use stripe elements So that way we can create a stripe promise So I'm going to say use Stripe elements and we're going to strip the Stripe promise from here And this is going to be inside our hooks folder So open up your folder structure You want to actually maybe because it's Stripe let's put it inside this lib folder So I'm going to create Stripe dash client Sorry guys I am using the wrong There we go stripe-client.typescript and then inside this I'm going to render the following function So in here we're going to say export const use stripe elements just like this and this stripe element needs this load stripe from this library that we installed Next I'm going to see actually I see this error here So let's go back and let's quickly import that Okay there we go And now inside this component we're going to have if the user has a connected account then we're going to create the stripe promise by saying 08 load stripe process dot our publishable key which we already got And let me just confirm Okay there we go And we're going to pass in the connected account And then finally down and also we're going to return that promise Now if that's not the case then down here we're just going to do the same thing And we're not going to pass in the connected account Okay So let's go back here now And inside this component after we get the promise let's go ahead and invoke this promise And then after that we have to return the promise along with the elements that we're going to get from Stripe.js and we're going to put all our children elements into that Okay so if you don't know what that looks like go ahead and say return elements And these elements are going to come from React StripeJS Okay Boom Awesome Now obviously we can't see this stuff So let's go ahead and solve this problem So in order to do this go back into your layout components header compo uh header file And in here we're going to uncomment the modal com Uh then go ahead and copy the name itself And then you're going to open up another folder inside reusable components called subscription modal And inside this you want to create an index.tsx Now you'll see this format in so many applications Essentially they give you a sneak peek into what everything looks like and then when you try to access it it's going to show up show a modal on the page and ask you to pay That's called a hard payw wall or it's going to ask you to sign up right And so this is the best way to increase a conversion And we have seen the data actually show this too This type of a login or signup works so much better where you give the user a little bit of time to put to commit to what they're trying to do and then you you show a payw wall or payw wall or a signin whatever you'd like that increases conversions Okay So inside this component let's go ahead and quickly render out this stuff and we have so much to work on So um and inside the props I'm going to obviously get the user and this user comes from Prisma client And now I'm also going to go ahead and dstructure this in here Now this needs three hooks We need use router And let's go ahead and import uh use stripe as well And we need to use elements And all of these hooks are imported from these uh from these packages Okay So now that we're doing this probably also change this to a used client component I already know it's in the same client tree but uh I'm going to do that right now And then let's also solve this bug So let's go back and import the subscription model And that should remove this Okay Awesome Okay And I see this error And the reason is because I'm importing router from the wrong package I assume it's next navigation Okay Not next router Next I'm going to create a loading state So loading state just like this and we're going to store the loading values inside that Now let's go ahead and create our dialogue So I'm going to say dialogue like this and this is going to have first the dialog trigger So let's import that as well And inside this we are going to render a regular button because I have some custom styles So please pause the screen and type these styles Okay And inside this we're going to show a plus icon and say create webinar So this is the exact same button It just looks functions differently So if I click on this now technically it is showing the modal right Awesome Then inside uh sorry after the trigger we're going to need to render out the content So I'm going to render out dialog content like this And inside this I'm going to have the dialogue header And let's import the dialogue header and the dialogue title And inside the dialogue title I'm going to say spotlight subscription just to give it some some design I'm actually not going to focus on the design for this component right now but uh I think you understand You can go ahead and knock yourself out Okay So now after the header I'm going to create the design uh the dialogue footer and dialogue footer Okay just like this And I think it's supposed to be after the content if I'm not if I'm not wrong Right We'll see what that looks like And inside this footer I'm gonna have the following class names So to give it some style And then we're going to have a dialogue close And some of you guys asked me inside the discord how do you fire an on click for this dialogue from the server So technically speaking you can't right But there is this is a client component And so if as long as you have this dialogue provider that wraps that the parentmost element you can fire this from any page you want any page Okay So this can if this dialogue was all the way in the homepage just giving you an example you can use dialog trigger and you can invoke this all the way in a different component a nested component You don't even need to create anything else Just put dialog trigger and obviously you need the content right and that will show up So this is how you can create a global architecture as well Okay just giving you some tips and tricks uh because somebody asked me that question So for dialog close I'm also going to pass in the disabled prop And I'm going to say uh loading in here and this has the following styles as well And now we see this cancel button show up here And that's because it's outside There we go Totally missed that So this has to be inside the content like that Okay Now after this we're going to have another button where the user can confirm their payment So after close hit enter And we're going to use the button from Shatsian UI And in here we're going to have a loader to icon Forget about this stuff Let's just look at this So type submit class names on click disabled That's it And then down here if it's loading show the loading icon If not show confirm So let's go ahead and create the handle confirm handler as well So scroll up top here and I'm going to say const handle confirm And this is going to do a bunch of stuff here So let's just quickly remove this AI wants to do everything for me Let's go in here I don't need your help Okay there we go So first we need a try catch So try catch like this We're going to set is loading to true And then next if we don't have stripe or we don't have the elements we're going to return a toast error saying something went wrong Right But if everything is successful we're going to create an intent And if you don't know what an intent is this is how Stripe works Okay You create those intents and then based on the intent you can accept a payment So let's go ahead and create the Stripe intent And then let's go ahead and also open up our folder structure because now this is a server action right So open your folder structure Go into stripe at the bottom I'm going to say export onget client secret And this essentially needs a user email and the user ID And in here we're going to have a try catch block And this is incorrect So catch like this and inside the try block first we're going to create a stripe customer So check if the customer already exists right and this comes from stripe So let's just quickly import this stripe Uh which package should I get this from So this comes from this one Okay guys the the other stripe because it's a stripe type So after this I'm going to say await stripe.c customers.list with this email Okay And next if the customer exists then all we're going to do is store it in here So if customers dodata.length greater than zero that means a customer exists We're going to essentially pull that out and store it in here Okay If not we're going to create a new customer if that does not exist Also guys just a quick one If you did grab the codebase from the description you essentially get a ton more code comments Okay So if you need help understanding or just debugging or using that side by side the codebase in the description is going to help you a ton Okay So thank you for purchasing and at the same time I hope I was able to provide a ton of value This course is completely free Like I said you can just watch this course You don't need the codebase and technically you're still getting the codebase right But you got to keep this in mind There is a license Okay guys this is intellectual property So there is a license and as a result just grab the codebase because you get the license for free If you don't buy it right now you have to spend more than $200 or $300 or how muchever it is in the future plus the license I don't want that for you So right now grab the codebase and also get the license comes for free if you buy it during the launch period If you missed the launch period I'm really sorry Just feel free to subscribe and the next time the video comes out you're going to have a crazy bonus again Okay so now we get to assign this user So it says is assigned but it's never used So let's go ahead and use this So down here after this curly bracket I'm going to say oh waitrisclient user.update for this user I'm going to pass in the stripe customer ID because they're purchasing a plan right And for the subscriptions now let's create and update the subscription on our end So subscription stripe.subscriptions.create create for this customer and we're going to say for this subscription price ID Now this is going to be a variable you can store pretty much wherever you'd like I'm just going to go into wherever I've already stored it which is inside my Stripe file or I think yeah so I'm just going to put it in here guys So inside data.typescript scroll to the bottom and I'm just going to create a price ID Now this is a real price ID The way you get this is from the product itself Okay So make sure you copy the price ID of that product and paste it in here That's the only way you can charge for that Charge that customer for that product So um just to give you an example let me just open one of these And here we have two products So you can rightclick here and copy price ID And it should have the same format Okay It should have price in front of it just like this So this is the price that I've already created So I'm just leveraging this So let's go back in here And now let's import this price ID It probably makes more sense to put it in your environment variable guys because you might want to change this in the future right So put it inside your environment variables Okay Now let's go ahead and create that payment intent So I'm going to say payment intent subscription Invoices And we're going to invoke we're going to actually get the payment intent from this And we're also going to type type cast it And then after that we're going to return this to the front end So return 200 And we're going to send this data Now if something went wrong you guys know the drill Just return a 400 error And in here we need to get the error so we can print it out Awesome Now I'm going to go back to my component and I'm going to import this And after I get the intent I'm going to make sure that we have the secret because if we don't then we're going to throw an error Okay So throw an error like this and then after this we're going to essentially say card element Okay So const card element equal to elements.getelement and we have to pass in this card element Now this is an awesome component that comes from this stripe uh stripe package which is this one right here react stripejs And this is a super minimal checkout component This took me forever okay You I promise you not a single YouTuber will teach you about this component okay Because it genuinely takes such a long time to find it And this component is a minimal single line input field with credit card the you know credit card based information and nothing else So this is not going to look anything like what you've seen in the past Okay And we've also used this in our past videos So uh feel free to take a look at that if you think you might find some value from it Okay So the next thing we're going to do down here is if there is no card element we're going to throw an error saying card not found And then next we're going to get the error here And and we also need the payment intent So I'm going to say stripe.confirm card payments Pass in the secret And then I'm going to pass in the card element as well And then after that down here if there's an error throw an error And let's also console this so that we know that everything is successful And then finally we're going to do router.refresh Okay so we're going to do router.refresh so we can get all the states up and running And then if there is an error we're going to console and show a toast Okay like this And after this finally we're going to set is loading to false That's pretty much it Now the next thing we need to do is if we're using this toast I want to make sure that I'm actually putting the toast inside my layout page because we're not going to see any messages right So down here ah there we go So that's probably why we don't see any toast anyway So you want to import this toast from Sonar And now if you go in here and if you try to sign in and try to confirm this should throw an error Fail to update subscription Well that's because we don't actually have the card element being rendered out So we don't have any card information So the next thing we're going to do right here is just that So after this card header you want to hit enter And all you're going to do is render out that card element There you go Take a look at this This is so beautiful It is so minimal And it well obviously you need to improve the UI of this component itself but this is all you need from the customer right And the error checking is perfect too Like if you put an incorrect number the error checking works really well So just to show you And it has this animation There we go And you can put CBC whatever you want Take a look at that So much better than having six lines on the page and then so much information that is not needed So that's why I prefer using this So I would suggest you guys use this Now there are some caveats to using this method Um I think there are only certain type types of payment intents that you can accept through this It's not a very complex component So the intent is going to be uh like you can't really create a complex intent Okay So just keep that in mind But that's pretty much it So now let's go ahead and test this out to see if we can get the subscription to work Now obviously it will work in the sense that the card information is present the payment will go through but nothing is going to happen on our end Now I want you to think like a real SAS developer Why do you think this is happening So pause this video and try to think even after this gets confirmed how do we essentially connect that into our database Awesome Welcome back Hopefully you got the right answer And if you didn't no worries This is exactly the answer So stripe uses web hooks Now just make a onetoone connection Some action is performed on the right side We need to show a reflection on the left side So either one thing is we store this in the database in some way manually or we use some sort of an event That means payment confirmed on Stripe's end and Stripe somehow lets us know through a callback URL through a web hook or some different way for us to get that feedback that the payment is successful Now because we are in a development environment we can't use the local host URL as the redirect URL And in a production environment usually you you don't want to just use a redirect URL because what if a popup was blocked or what if they had a Chrome extension right It's not going to work So what we need is a web hook and that's exactly what we need to create So go ahead and open up your API folder and inside this create another folder And you're going to call this stripe- web hook And inside the stripe web hook you want to create a route.typescript And now inside this route.typescript we're going to accept all of those payments Okay so let's go ahead and refresh our page Something happened I just wanted to make sure nothing went crazy So let's go ahead and accept a post request So export async function post request just like this And inside this this is going to be next request from next server And inside this component we're essentially going to accept that web hook request So first let's create our subscription event types So please pause the screen and type this with me Okay these are all the types that we're going to be listening for So created finalized paid completed created updated and deleted So this is important because based on this when you are actually launching this as a SAS or when you're looking to maybe you're just a developer you want to improve on this code you have to accommodate all events okay all events that are required so even chargebacks and stuff like that now that's going way above and beyond what the scope of this video is So the purpose purpose is to get this product in front of your customer as fast as possible and then when you're first starting this SAS do some things manually and then we'll figure it all out later Okay So what's next When this end when this endpoint is hit I'm just going to show a message in the console so I know everything's working and then I'm going to await and extract the request body Okay Next we're going to get something called as a Stripe signature So Stripe returns this to us to let us know that this is an actual web hook request right Then we're going to create a try catch and we're going to create getstripe event And this get stripe event is a helper function that we're going to create inside our libs folder So let's go ahead Actually we don't have to do that in the libs folder Let's just do that right here So I'm going to say stripe event is an async function that requires body and signature and it returns a promise of a stripe.event and it requires this thing called web hook secret Now we don't have this and so nothing's going to work right now So please just keep pushing through We'll get there eventually Now if there is no signature and there's no web hook secret throw an error and if not we're going to essentially return this stripe object So stripe dot stripe that basically comes from lib right So let's go ahead and import this So stripe.webhooks.construct event and we're going to return that So now we have that event right here And I also see uh this error here We need to import headers and the headers come from next next uh headers So let's import that And now we have this stripe event Next let's process this So process only the relevant subscription events So if it's not in this we're not going to right So essentially if it's an event that we were not taking care of like maybe some error or they filed a chargeback whatever that is then you can handle that by just showing a message So you can look at the logs Okay Next if uh we're also going to just return 200 right here And then or maybe you want to return something else but uh probably return a different status but I think I'm going to just set it to 200 for now And then after that right here we're going to say const event stripe stripe event.dat data.object We're going to create this event and we're also going to grab some metadata from the event itself Now we're going to check um and we're going to skip all of the connected account events Now I did not know this but in production Stripe just changes a bunch of stuff Okay that means your web hooks are no longer one endpoint When you're in a test environment you have one endpoint Okay so your web hook this web hook right here is the only web hook you need to set up for both connected account events and regular payment events But in production they actually just they just change it I they don't even give you kind of like a heads up They just remove it and say okay two different endpoints and now you're like what I got to change everything but uh essentially that's what the testing environment does Okay So there's no other way to bypass this We have to build it with one endpoint right here But I'm going to build it in such a way that in the future you can just strip it out and uh you know I mean you don't even have to like it's not going to fire this endpoint Now again don't take my word on this because Stripe changes everything But right now Stripe will not fire this endpoint uh in production for connected accounts because it's going to fire something else And so if it does fire something else and you do have to accept connected account-based stuff then create another web hook to do to another web hook endpoint to accept the Stripe connectbased payments And that way you can maybe have uh more pipelines inside this right Maybe you can have a pipeline to keep track if a customer paid right So there's so many different things you can do here So what I'm going to do now is check and make sure that it's not a connect account So if it is a connect account payment or a connect account subscription then we're just going to skip over it That's what we're going to do here Okay So skip by just showing a console message and return a next response Now we're going to use a switch case This way we can look at the stripe event types and based on that we can do perform the necessary actions So we have completed created and updated These are three different type of actions and they all essentially fire this update subscription inside our database So all we have to do is open this folder go into your actions folder inside Stripe and at the bottom here we're going to say update subscription is an async function that requires a stripe subscription and we're going to try and catch the following get the metadata first and get the user ID go into Prisma update our database for the subscription and set it to whatever the status is that's it okay so now let's go back and let's quickly import the server action Awesome Now if this was if this was done successfully we're going to just print out a message with a nice credit card emoji cuz it's very you know very important And then we're just going to say return next response.json Okay And by default we're going to just say unhandled event It's not going to return here because we already have this but just in case Now if this threw an error we're catching the error here Let's go ahead and also print the error out console.log error And we're going to return this message So this has to be of type any Uh actually yeah I think unknown Okay we need any I really hope they fix this guys Like this is something this error type here is always any and it just causes so many errors Uh so many Typescript errors But anyway so we're just going to return status 500 and just say it's some sort of server side error That's it Awesome right Phew A lot of code I know We're getting there Okay Good things take time So now we are done with this uh with the with this payment section Let's take a look Let's make sure Subscription created Awesome So we're done with this Now we have to register this Stripe uh this essentially this web hook inside the Stripe dashboard Okay Now we're going to essentially set up the web hooks And I want you to please just bear with me okay Because Stripe changed a bunch of stuff and I want to make sure that I'm actually using the right stuff okay So there might be some back and forth Just hang in there Just keep watching Um I promise you it's all going to pay off in the end We haven't even gotten to the core of this application There's so many exciting things coming up in this project Okay so first thing is inside the sidebar click on developers And please do this with me Okay click on this and then you're going to find web hooks Click on this next and then you're going to find this test in local environment I think this is what we need But if we do this we also have to create um a web hook endpoint and maybe I mean we have to serve our local host through Enro Okay so click on this right here And there's different ways to set this up The first one is it says download the CLI and log into Stripe account Now because this is a brand new computer I'm also going to be doing this with you Okay so let's do this together Okay you guys are going to see how brand new this is because I think I already know what what errors I'm going to face because I just tested it out But essentially this is how we install the CLI You need brew for this right So you can use brew Actually they have a curl command or something in here Oh no never mind That's going to take forever So I'm going to get brew installed So with homebrew let's open this in a different page And it says "Hey install homebrew this way." So let's go ahead and read this documentation I just realized this is a Windows computer And Homebrew is not for Windows This is very sad I really wish I love Mac man I I I've been using Mac so much that I just forgot how Windows works Okay just give me one second guys Okay so it says install this from GitHub So let's just go ahead and open this I clicked on Windows here by the way If you're on Mac you're already sorted man You just have to pretty much just uh you can get homebrew and you're all set Okay so what I'm going to do is I'm going to go in here and I'm going to find this I think it's this one cuz they they didn't even give me any instructions right They just said download it Okay cool Thank you There's 500 files here So I'm going to click on this one This might just be the one And let's just give this a second Okay And it tells me to unzip the file So if I right click I think I can extract it Okay so there is a path here So I'm going to copy this path This is the unzipped path Okay so copy this And it's telling us to update the environment variables Wow this is such a Windows thing Okay so what you're going to do is you're going to open this and you're going to search for environment variables and you're going to open this and you're going to look up edit the system environment variables And that's going to show something like this And then inside this you're going to find a couple options Click on environment variables right here And I think this is a system variable This is probably not a not a user variable And the reason why I know that is because I've already created for something similar for NVM right This is a new computer So I was just setting it up So go ahead and click on path here And you're going to open this up And the next thing you want to do guys is first when you install this right when you install Stripe uh you want to go into the downloads folder and when you extract that it's going to extract it into a folder right click on that and then copy this link so just copy this link and then you can close out of this but make sure you have this stripe and also you cannot just execute this file okay so copy this and you can just keep this open for now that's fine and then the next thing we're going to do is inside system variables You're going to click on path You want to click on edit And then in here I already did this but click on new and enter that Okay Then click on okay And then once you're done there click on okay right here And uh you can close this out And make sure you click okay on here or it'll not work Now for some of you who are looking at the environment variables you might see a screen like this and it does not let you edit it And the reason is because you have to go through this link which is edit the system variables first and then go from here Okay So make sure uh hopefully that helps Now some other tutorials online will teach you to directly execute it as a command prompt file That is a simpler option So if this does not work for you I don't want you to get stuck All you have to do is go into that Stripe file and if I'm not wrong I think you can run this inside command prompt but I'm not sure how to do that because I haven't done it before But uh you can essentially run this using command prompt Okay so that's one other option And that will instantly uh use the stripe CLI So now because this is global if I type Stripe here I don't think it's going to run because this is not reinitialized The terminal has to uh be a new terminal right So I don't know if this will work too Let me just try this Might as well Okay it's not going to work here But if I open command prompt and if I type Stripe it's going to give me the CLI tools Okay awesome So if you see this great job Uh you can move forward If not just spend some time get this just you know set this up or if you want you can even just ignore it for now because I promise you it's going to work Okay It's going to invoke your web hook so you can proceed to the next stage Okay So first things first I'm going to close all windows for cursor And that also means that our our application is also going to you know uh it's not no longer going to be online So now go ahead and open up cursor and open up that folder And now if you type Stripe you should see the Stripe CLI Okay awesome So let's move on to the next part which is testing out this web hook So the next thing you need to do is once you've completed downloading this you have to log into Stripe Okay So go ahead open up the terminal and using the CLI you want to say Stripe login and just proceed through this Okay So it gave me this error but right here it says completed So I think we're good to go Not entirely sure Again let's just keep pushing through Okay So the next one is forward the events to your web hook So you have to tell it where to listen to So our end our endpoint is actually not this one We need to update it So we're going to say localhost 3000 and we need to put back slash API/stripe-web hook Okay And let's also quickly just verify this So open up uh how do I open up my folder structure here Okay This is not the one Okay There we go And just to make sure we have Stripe web hook API/Stripe web hook Okay so let's go ahead and hit enter here Let's just see what happens Okay so it requires a pairing code and it gave me the code So go ahead and click on this and open it inside the browser And that's going to show you like an authentication page Make sure it's the same thing Awesome And allow access And that should do something in here Okay So now you can close this and return here So I tried this multiple times but I kept getting this error saying the header or the live key did not match the key I provided So what I did was I quickly made sure I ensured that I was using the right API keys and something was off So I just changed that really quick and then after this I tried a different mode So I did stripe login-inactive and that essentially took me to something like this and then it prompted for my API key Now I don't really know what this API key means because there's so many different varieties in here right Because we have secret key we have publishable we have client ID Uh but then I found this secret hidden configuration documentation and I think they accidentally leaked my API key Like take a look at this secret key and then down here they just showed the full value So I was like "Oh nice." So I just copied it and I pasted it in here because it prompted for the API key And actually you can't paste it You have to type this out manually Okay that was really annoying And so I typed it out And then now it's asking me for this configuration saying do you want to set this And now I'm kind of lost So I'm going to hit enter Okay CLI is configured So it says CLI is configured Doesn't do anything else Hello Um okay So I'm going to copy this Oh I think I know what this is Okay I sort of understand but not completely So I'm going to say API slashstripe-web hook And I think this is correct Let me make sure Okay that's correct Let's go ahead and hit enter And let's see what it does now Okay Boom It's redirecting It's doing something Let's just give this a second Okay Nice That was crazy Okay So it's an expired key Great So now what Okay Nice This worked So it turns out you can paste in the terminal So I'm going to do this once more So essentially I was using an incorrect that that was just a fake key guys I I just got trolled So sorry I didn't mean to on Stripe Like they're they they did a fabulous job Okay Uh that was a fake key here and essentially I had to get this stripe key stripe test which is this one and I thought I couldn't paste it All you have to do is do com control shiftv not controlv and so the first command is you have to login So you have to do login/interactive okay not let me show you So stripe login-inactive and then once that's done it's going to ask you for the API key So copy it from here and paste it Control shift V It's going to paste it in there Hit enter and that's going to connect that for you So and it's going to ask you if you want to connect this computer whatever Just hit enter and it's going to give you your account ID Okay So u I think this just essentially confirms the first stage Then comes the second stage So then you're going to put the same command change it to 3000 API stripe web hook and you're going to hit enter And now because the new Stripe key is is in place it's going to use that one and it's going to spit out this uh this Stripe web hook secret for you Oh I just made a Let me just restart this Just give me one second So make sure you copy this but don't hit C too many times It's just going to quit the terminal And that's it So now you're listening I think this web hook is listening And we can try to see if we can test some stuff out So make sure you have this running Make sure you have your application running And then in here go ahead and copy this command to trigger the web hook You want to put this in here and hit enter And it's saying it's doing something Let's go ahead and take a look in here And now we see a 500 So charge succeeded Payment intent Okay And we got a 500 request here That's because obviously it's not a real it's not real data right That's it Awesome So our web hook is now set in the local environment So let's go ahead and try to test this out And by the way just to show you here you can also see the signature does not exist right The secret is missing So if you open your terminal you can see the error in here as well So go ahead and open up the your localhost 3000/home Click on create webinar And I'm just going to put the default credit card detail So just put 4242 And you want to spam that as much as you can And then once you're done it's going to show you this beautiful animation and you can also save it with link so you can pay in the future Your customers can pay using the same payment details right And now go ahead and click on confirm Okay subscription failed Let's take a look at what happened Okay so the problem here is I don't have a price that is this specific ID Uh I put a placeholder price remember So I got to go ahead and create that So go ahead and open up Stripe I'm going to go into product catalog And in here I'm just going to create a new product And I'm going to call this spotlight like this And I'm just going to say monthly subscription or test subscription Okay And then once that's done I'm just going to set some amount for now So so it it's showing in AED because this account was opened up in that that country right So uh because I was on a small little vacation So now I'm going to just put $99 subscription Um actually by the way for pricing so this product is a very specific product that helps a very specific person for a very specific problem Okay It's marketers that have high ticket products and services and need setters to close so many leads And so you don't have to charge $97 You don't And this is how one of my students use the exact same business model that I just showed him The same exact thing just with a slightly different offer that obviously I can't share Um but pretty much the same thing right He was able to make $30,000 per customer So you can charge $4.97 You can there is value in this because the people you are selling to have the funds Okay So that's the most important part here There's more on this We'll I'll probably create another course on this sometime in the future But once this is done go ahead and add this product and it's going to create the product for us And now we have Spotlight in here I'm going to click on the product Click on this Copy the price ID And now I'm going to go into my price ID which is inside my data.typescript in here And let's replace this with the right price Okay Boom Done Now we're going to go back into our payment right here And we're going to try to confirm once more Okay And it says there is no signature Signature is missing So let me go ahead and see what's going on Okay So I think this is probably why this was happening H Okay So we're seeing 500 in here And I made sure I also refresh the page which is super strange It says there's no signature Ah okay There we go So essentially we need to create the web hook secret And we totally forgot about that So go into your environment variables and you're going to create this variable in here you're going to call it stripe web hook secret And remember when you turn this on essentially when you turned on the listener it's going to give you the secret here So copy this like I said and you want to paste that in here And I think I actually pasted it somewhere I just lost it which is crazy but just go ahead and assign it in here And now let's go ahead and re uh restart our application Okay so that should have the correct web hook secret in here Now let's go ahead open this up and let's try this once more And now for the moment of truth So I'm going to click on confirm And hey there we go Let's go So confirmation Uh we received the confirmation and it also says payment intent succeeded and so you're good to go So guys this code will work Okay it will work So even if you're not able to do the Stripe stuff you're stuck or for some reason you don't know how to move forward just keep pushing through write the code and you'll figure out everything else later Now to really make sure that everything is working the way we expected to if I click on create webinar now I should see the new button right which is I should be able to create a webinar Let's go man That was awesome Okay and that pretty much I guess that pretty much wraps up Stripe for us right Maybe we'll have a couple more sections in here and uh I think we might be rendering some buttons and stuff like that So we'll definitely come to that again But that pretty much wraps up the Stripe section So the next thing you're going to do is you're going to open up your folder structure and inside the app routes you're going to create another folder here This is a route group and you're going to call this public routes Now feel free to move this page.tsx into this But the reason why I'm not doing that is because I want to create another layout inside this page Okay inside this folder So I'm going to create a layout.tsx And inside this layout.tsx tsx I'm going to give it some styling that we can share across this uh this specific route And all we're doing here is we're saying with full container MX auto and min screen of height and we're going to pass in all the children elements just like this Now why do we need these public routes So inside our SAS we're essentially going to have the live webinar section right This is where users can show up on a page to sign up for the webinar Now this needs to be a public page because if it's be behind our protected routes then users will have to go through the o flow and we don't want that right and so that's why we need to have this specific structure in here So inside this public routes go ahead and create another folder and call it live-ash webinar and inside that you want to create another file call it page.tsx tsx and then in here all we're going to do is redirect the user to the sign-in page if they try to access this because they don't have an ID Okay Because in here we're going to create another route which is a dynamic route called live webinar ID So please don't make any spelling errors Follow exactly what I have on the screen Okay And now inside this we're going to have a page.tsx tsx and this component is uh going to render out that webinar itself So quickly just go ahead and return tsfce and I'm just going to call this a page No problem And let's change this to an async component We're going to remove this We don't need it And then in here we're going to accept those params and search params as well So let's go ahead and grab that So in here I'm going to hit enter And remember I told you it's now a promise So the type here should be a promise Okay So it's going to say params and search params and each of these are a promise that return those ids and any other params specifically the error Okay Now let's go in here and just quickly dstructure these so we can use it inside our application Awesome And now let's await the params Next we also need to await search params as well And then once that's done we need to get the webinar by this ID So I'm going to say get webinar by ID And this is a server action that we need to create So let's go ahead and copy this title Open up the folder structure You're going to go into actions and you're going to go into webinar and you're going to scroll down here and you're going to do the following It's a very very straightforward simple server action So we're going to say get webinar by ID We need the ID the ID itself We're going to go into our database for the webinar table inside the webinar table and where it's this ID we're going to return that and include the presenter's information as well Okay including Stripe connect profile info and all this stuff And then we're simply just going to return that to the front end Now let's go ahead and let's import the server action And the next thing we need to do is we need to check if there is a webinar or not So if no webinar detail just show a basic component for now saying webinar not found and next we need to authenticate the user So down here I'm going to say check unauthenticated user and let's import this and then once this is done So why are we authenticating the user here Well if we get a user back and the user is signed in and they're trying to access this page then we can determine if they actually own this account right So there's a lot of things that you can do You can also check if they own that webinar itself So there's so many things that you can do in here And so for that reason um I think it's better to authenticate in here Okay So the next stage is down here I'm going to replace this div with another div And this div is going to have a component called render webinar Okay So let me go ahead and just type out the component in here And then we're also going to need to create some keys up here So what I'm going to do is just put a to-do and I'm going to say create API keys Okay And we're going to pass that in So what I'm going to do for now is I'm just going to set all of these to strings And I'm going to comment this out in just a second Actually we can copy this name And let's hit enter here Okay Let's bring this in And now I'm going to copy the name like I said and I'm going to open up my folder structure And inside this component I'm going to create the underscore components route Uh not route guys Sorry It's just a folder in here This will not render Okay This will not render inside the browser So then I'm going to create this component And let's go ahead and return a component in here Now this is going to need a couple props So let's go ahead and grab those Awesome And also let's go back one step and let's import this component as well And now we're also passing in the check user And okay so if the user does not exist we also have to render out null right So what we're going to do is first let's just change this So this is user check user dot user if not null and then error like this and webinar And by the way these are the API keys I'm just going to create them as standalone standalone keys for now And we're going to get these stream keys in just a second And now that we have created this page if you try to access this page so let's just go into a webinar and let's go ahead and click on this There we go Now we see this Now the other thing is you might ask well how do we get this link And this link actually comes through the creation process And if you remember we did not finish the final stage And the final stage basically gives the user whatever information they need for the webinar right So you can put a page on there on that section to showcase whatever you need to the user So let's go ahead and complete that section before we proceed So go ahead and open up your folder structure and you're going to look for components reusable and you're going to look for the create webinar go into index inside the index.tsx tsx and then down here you see we have this this success step right so let's go ahead and remove this and now I'm going to return a new component called success component like this okay it's called success step and it takes in the webinar link it also takes in a handler and we also have the on close in here so now let's go ahead and create the the handler for this and all this handler is going to do is it's going to reset our form data calling the reset form which comes from our hook right here So let's go ahead and grab the reset form Boom There we go And that's it So now scrolling down here you should not see any errors apart from this one So copy this title open up your folder structure and in here I'm going to create a new file We're going to paste that And we're going to say tsx And then let's go ahead and return this Now inside this component all we're going to do is first create a state So I'm going to create a state up here And let's import the state And this also needs some those props right So let's go ahead and grab those props And let's dstructure all of them in here so we can use them And then inside the return we're going to remove this And I'm going to return a div And I'm going to return a div inside this with a check icon just like this Okay to show that it's completed And then after that I'm going to have an H2 So after the second div hit enter An H2 that says your webinar is created And then we're going to give them that link So I'm going to say you can share the link this link with your friends whatever you want And then at the bottom here we're also going to add the input fields And inside this this is also going to be read only And then in here we're going to bring in the components button And we're also going to bring in the lucid react icons So essentially we have an input field that is read only And we have a button where they can copy the icon Now when the user clicks on this handle copy link what do we do Well this is all we have to do So I'm going to go up top here and I'm going to say handlecopy link navigator.clipipboard.right text And we're going to paste that webinar link inside And then we're going to set copy to true And then obviously set timeout to uh we're going to create a set timeout to to change this Okay Awesome Now let's go back down And if you don't know what this looks like it's just like a timer right So when you click it shows checked Boom Done And then in two seconds or I think this is uh not two or is this two Yeah I think this is two seconds So in 2 seconds it's going to reset because they're setting it back to false Now down here I'm going to render a div that shows the link itself So after the div here hit enter And you're going to say div with a link component with a webinar link and underscore blank and then the button And then we're going to say external link And this is a an icon that comes from lucid react And obviously we're going to say preview webinar And then after this on created uh based on this state the on created new we're going to essentially show this right here So under this div paste this we're going to say on create onreate new we're going to show a div and just like this Okay And this is the function that's being passed in So we're going to invoke that one as well Also this on close is optional So because we don't need it right now I'm just going to remove it and also not pass it in here So remove on close Awesome So now let's go ahead and try to create the webinar and let's try to access that page Okay Now let's go ahead and click on complete And there you go Now you have the link You can also create another webinar or you can copy this and you can open it somewhere else And there you go It's going to take us to the render webinar page Great job Now go back into your render webinar component And now we can import all of these and pretty much update this So we have the user and we have the webinar type So let's go ahead and import those types from Prisma client And then down here I'm going to essentially dstructure and grab all of these Next return a React fragment here instead of this div like this And if you don't know what this is it's basically the same thing as this but just with some names So you can add stuff to it right Like keys and stuff So now inside this fragment we're going to look at the webinar dot webinar status And if this is equal to webinar status enum dots scheduled then we're going to do something here If not we'll do something else in here Okay So based on the different states we're just going to render out different client side components That's all we're doing in here Okay So let's first go ahead and do the scheduled link and then we can do the rest And now just to make sure that this is working Obviously this webinar is scheduled There you go So it's true So it's going to render this one in here Okay So let's first go ahead and build this out And I'm also going to put a to-do in here And the to-do is going to say build waiting room and live Okay So now in here we're going to remove these double quotes and we're going to render out a component called webinar upcoming state Okay So go ahead and say the following just like this And it needs a webinar So I'm just going to pass it in here And the user as well Next go ahead and open up your folder structure And inside the components folder in here you're going to create another component And this one is called upcoming webinar right And then inside this you're going to create this webinar upcoming state So I'm going to create another page say.tsx And in here I can now render this component and change the name Okay there we go Now inside this component obviously we need to accept those two props So I'm going to accept them and also dstructure them right here Now let's go back and import this component so it doesn't throw this error anymore There we go And now we can see the webinar upcoming state Now the next thing is first we're going to need to create a state in here to hold a loading state So I'm just going to quickly create this like this And let's import use state And then down here we're going to need to create a div first So I'm going to create a div just like this And then inside this div I'm going to create another div And this is going to render out a paragraph tag So I'm going to say div like this And inside that a paragraph tag And I'm going to say seems a little early And we also have to change this to use client component Okay And let's refresh this page There we go Awesome And then once that's done we're also going to render out a component called countdown timer So copy this And this is what it looks like I'm just going to also pass in the props that it already needs So let's pass these props in Copy the name And then inside the same folder structure that we have in here we're going to create another file And this one is tsx So countdown timer.tsx And let's go ahead and render out this component Okay Now in here obviously we need to accept those props as well So let's go ahead and bring that in And let's change this Let's go back and let's import the component Now going back into this component all we're going to do is essentially render something very similar to kind of like a timer right So I don't know if you've seen like before an offer ends there's like this timer right That's what we're trying to render out And just to give you another idea of what this looks like something like this Okay so we can show some image here and we can show you know the the timer itself So this is what we're trying to render So let's go ahead and shrink this And so the first thing we need to do this is actually a pretty complex component It looks really simple but there's a lot of uh you know event handlers and things that are working right here So first thing you want to do is go ahead and replace this with a div And we're going to import CN right here And we're also going to pass in the class name from the props And then finally in here we're going to make a check Okay so we're going to check if this is expired or not Now how do we do that Well we're going to create a state to essentially store that value for us Right So go up top to the top of the file and right here I'm going to say const is expired and set is expired And now I can use that to check in here So as long as this is not expired So if not expired then we want to do something in here right So I'm going to first render out a div like this Okay And AI is going crazy once more Just give me one second There we go And inside this div we're going to create another variable that's essentially going to check how much time we have left Okay And this is obviously use state again So I'm going to create another state called time left Time left and set time left It's an object that's going to store days hours minutes seconds and milliseconds Now you can go even further and do months years whatever But I think this is more than enough Okay I don't think you need no one's going to no one's going to create a webinar 3 years into the future It sounds stupid but um maybe months probably Okay So the next thing to do now is down here we're going to check and say if time left dot days exist then you're going to render this variable Okay So you're going to show the number of days and you're going to show the days That's it That's all we're trying to do So now where do we get these days from Well we're going to need to create another state but uh with the help of a helper function called split digits So what I'm going to do is I'm going to copy this and I'm going to paste this in here And it does the same thing for days hours minutes and seconds So I'm just going to give it the variable name So please pause the screen and type these out And for the split digits helper function this is all it's going to do So it's a helper function right here And we're going to say format number And this format number comes from uh actually it's another helper function Sorry about that So I'm going to copy this and paste it in here And this format number is going to format whatever we have to string And it's just going to use some helper functions to essentially get us what we want Okay So now this is going to be a day Now this helper function essentially did the same thing for hours minutes and seconds So all I have to do now is after this div right here you see we have the curly bracket hit enter And we're going to do the same thing for hours So I'm going to say how many of her hours are left So like this hours and then let's move on to the next one Now you might wonder well why isn't the time actually showing the right way And so the reason is because when we load up this component we have to do that calculation and the way to do that is through a use effect So go ahead and create a use effect just like this and import it And you essentially want to say the following So you want to say target date as the dependency array is expired webinar ID and all of this just pass it in here And all we're doing in here guys is we have a couple functions Okay I'm going to break this down step by step First is calculate the time left and we're going to invoke this based on a set timer right here So I'm going to say set timer left this variable and we're going to invoke that and pass in whatever is returned from this Okay So what does this do First we're creating a date and then we're checking the difference between the current date and that date That's it Now if the difference is less than zero then obviously it means uh something well there is a date And so we're going to check if it's expired If it is expired we're going to set is expired to true Okay And then after that if the webinar status is equal to scheduled then we're going to say update the status of this and accordingly we're going to change this here So this way we're essentially updating this so we can show some data saying that hey now the webinar has started and so it should be uh you know we essentially going to the next stage Now this is also a very simple server action So let's go ahead and open up our server actions folder inside webinar And at the bottom all we're going to do is this So I'm going to say uh create change webinar status And we're going to have the webinar ID and the status that's required to change to And we're just going to go into the database for the webinar updated for this webinar ID And we're going to pass in the status in here And then we're just going to return a 200 response with these So please pause and type Okay pause and type Same thing for the error Now let's go back here and let's quickly import this And then finally down here since this was inside a try catch and inside a function we'll now call that function down here Okay Next we're going to return this object here So that way we can set it inside here Right So we're going to return this for this specific section Now if this wasn't the case so if the difference is less than zero then here's what we're going to do So please pause and type this and this will essentially set the date to a specific number Okay And then finally we're going to set the time left which is a state to the calculated time left So we're going to invoke this function and whatever is returned we're going to store it in here And then finally we also have this uh interval And then obviously I'm just going to put some time in here and it's going to invoke the set time left uh after that that interval ends Okay Then the next thing is the clear interval So here I'm just going to clear this interval and that's pretty much it So now we have this component set So let's move on to the next part The next one is the minutes So after this div So three divs 1 2 3 Hit enter And now I'm going to render out the minutes Okay So it's going to show minutes in here And just the same exact styling Copy paste Copy paste That's it Okay And same exact thing for seconds as well So let me go ahead and copy this And after three divs hit enter paste and this one is 4 seconds And now we have this really cool timer on this page Looks really nice right So now we can show the user that hey you still have eight more days until the webinar starts So that way they can come back and then when they do show up we're going to have a different experience for them Okay So now that we're done with this component let me just quickly make sure we have included everything we need to Okay this looks good Let's go ahead and cancel out right there And now inside our webinar upcoming status I'm just going to import this stuff So user and then the webinar itself Let's go ahead and import this And then we also have this right here which is a state that we were storing in here right So we're going to render that stuff next Actually we still have something else to paste right here So uh let's go ahead and build that out So this is just this is just a reminder component So I'm going to say div like this And inside this div I'm going to have an image So div inside this div and then an image component from next image And I'm going to use this icon Now you can use whatever you want This doesn't look quite nice okay But just do whatever you want Okay I'm just putting an image in here Maybe you can give the user the ability to attach an image And if you remember I also built that functionality for you so that you can add to that in the future Right So we're going to have that image in here And then after this we're going to check the webinar status So after this div hit enter If the webinar status is scheduled let's import this as well So if it is scheduled then we're going to show a weight list component So go ahead and remove this and I'm going to put this here If not I'm going to put this in here Okay that should solve this problem Just like that And this also needs the weightless status So now we can render out this component right here So let's copy this weight list And because this is true it is a scheduled uh you know webinar we need to create that So inside this page go ahead and create the component And I'm going to call this weight list component tsx And let's go ahead and rename this And inside this let's go ahead and grab all of those props really quick And let's go ahead and dstructure this And let's import the webinar status enum And then and then next we're going to remove this And I'm going to create a dialogue in here And I'm going to also import this And this needs a state called open and set open And for this I'm just going to use some local states in here And let's not forget to change this to a client component So I'm going to say use client And let's also import this Right And so once that's done we also need the dialog trigger And this is going to be a button So we've done this a million times so I'm not going to explain all of this but it's just a button And all we're doing in here is we we have some styles on this right And if the webinar status is equal to live then we're going to show something else right And in here maybe you can show live or something Uh but then if not I'm going to have this button text Now what is this button text This is the button that the user essentially sees based on the status So it's going to look like this So button text is a switch case And based on the different type of scenarios which is scheduled waiting room and live we're going to show a different button Okay And we're just going to render out that button here That's literally it Now I see there's an error here So let's go ahead and import this component And there we go Now we can see this Okay So if we click on it obviously nothing's going to work because we haven't set the states yet So let's go ahead and complete that So the next thing we have to do is render out a dialog content So after the trigger you're going to render out this component And let's import the dialogue content And there's going to be this prop here Not sure if it can take it or not but I'm just going to pass it in for now Or actually let's go into the dialogue content component And then in here I'm going to create this and set it to false Okay let's put a comma here And then after this I also have to extend on this type as well So let's see the type that they're using here content Okay And I also have to expand like I said So I'm going to say and I'm going to create this type and say this is optional and it's going to be of type boolean like this Okay Awesome And uh let's see This is still screaming at me Okay That's because this needs to be optional or I mean it is optional right now What's the issue Oh it's not being used Sorry about that guys So we have to actually use it in here right So what I'm going to do is I'm going to copy this And then down here we have this uh this dialogue right here I think we can keep it as is but I do want to wrap this inside this new thing that I just created So up till here wrap it like this and just like that Okay So this will show based on what's what's passed in here So let's go back to our components now And inside this make sure you're passing this prop And then first thing we're going to have is the dialogue header So I'm going to say dialogue head header like this And it's going to have an H1 tag that says join the weight list And then inside this header um actually we do not need an H1 tag here I'm going to use the dialogue title Okay sorry about that guys So I'm going to use a dialogue title and I'm going to put the webinar status in there So if the webinar status is live show it as live So join the webinar or join the wait list Next I'm going to create a form So after the title go ahead and say form like this And this requires a handle submit which we'll definitely do right away cuz I don't want to forget that So let's go up top and in here I'm going to create const handles just like this And this is going to be a diff different type So react.form event This is enough And then inside this first we're going to do e.revent default We're going to set is submitting to true and then we're going to do try catch Now is submitting is going to be another state obviously So let's go ahead and create those states So we also have a couple more states So we'll might as well just go ahead and create these So I have is open uh which I already created Sorry So we need is open We need this is submitting set submitting Submitted and set submitted Okay Then down here after we are setting it to true we're going to create a try catch And inside the try catch we're going to first register the attendee Okay So I'm going to say register attendee And we need this email And the email actually comes from this So another state here called name and email Okay And now let's go ahead and change this to an async error function And let's copy this And we're going to open up our folder structure We're going to scroll up here And inside attendance we're going to create the following So all we're going to do in here it's actually a pretty big function So let's just go piece by piece So go ahead and say const export constre register attendee And then this is going to be an async error function And this is going to accept the following Okay so we're going to accept webinar email and the name And then first in here we're also going to dstructure this so we can use it inside Okay now inside this function itself we're going to have a try catch block So try and catch And inside the try catch we're going to have an if statement like this So let's just quickly shrink all of this So first I'm going to say if there is no webinar or no email return 400 Then we're going to go into the database and we're going to save it So we're going to say webinar.findique for this We're going to get the webinar But before we save we have to make sure that the webinar exists Okay If it doesn't we're just going to say webinar not found Then down here we're going to find and create the attendee by the email Okay Attendee.findique for this If there's no attendee then only we'll create it Next we're going to check for existing attendance So prismaclient.attendance.find first for this ID And then we're going to include this And if their attendance exists then we're going to return 200 saying you are already registered for the webinar Okay Because if you have to take this to a whole different level you'll have to use cookies and all that unnecessary stuff that you don't need especially if you're building your MVP But if you're using AI definitely I would say make AI do all this crazy stuff for you Okay you don't sit and code all of this All right what's next So now we have to create the record uh for the attendance obviously So I'm going to say for the attendance.create and I'm going to say this person registered Okay next we're going to revalidate this path and I'm going to return 200 along with the the attendance And if there's any errors we'll return that back So now let's go back and let's import this massive server action that's actually very simple but it's just long right It's just it's like your exam papers It's always simple but it's super super long Okay so now in here if there's no success response then we're going to throw an error And if we have the user data then we're going to set the attendee Now this set attendee comes from another store Okay we need this store in here So let's go ahead and create the store So first because we can we'll just do this right here and just kind of dstructure it and grab that data right now And then let's go ahead and copy this title And I want you to open up the folder structure and you're going to scroll down into your store and inside this you're going to create that new store So I'm going to say use attendance store okay dot typescript and then inside here we're going to create a very simple store So this store is going to have attendee the set to the setter and the clearer Okay clearer Hello What is that word Okay And now we're going to create the zoo stand We're going to use this thing called persist Okay And persist is essentially a way to store all the values inside the local storage Okay that way it'll automatically pull this up and it will use this So now we're going to say set and in here we're going to get all of these uh get all the set all of these values and create the set attendee the helper function and the clear attendee as well So we're just going to change its value to null and set it to the following number uh following attendee Now this attendee storage is just the key that is used inside local storage to store this So if you want to fetch for this you just have to look for this value Okay now that we have this let's go ahead and import this Okay there we go And now we are setting the attendee right here So after setting the attendee we're going to obviously show them some sort of a UI So I'm just going to say toast.uccess success and show a toast message And then we're going to set the email to empty name and is submitted to true Finally I'm going to have a set timeout that helps us close the dialogue after successful registration Okay And what I'm going to do for that is hit enter And I'm going to say set timeout like this And we're going to set it to false And this happens after about I think 1.5 seconds Okay And if the webinar status is live then we're going to do router.reesfresh And for this you guys know what we need You're going to scroll up top and you're going to import router from use navigation And now you have router.refresh Okay Awesome So after this this try block we're going to put the catch block to show the error and the toast error And for finally we're going to say set is submitting to false That's pretty much it Okay nice that we already created the handler So we don't have to come back to that So inside the form now let's go ahead and quickly finish this section So the first thing we need is if the user has already submitted then we're going to show their name and their email I mean if they haven't submitted sorry So if they haven't submitted return an input field for name and for the email And we're just going to pass in these values in here Okay just like this Next we're going to use a button to help them submit So after this we're going to say button type submit class as follows and disabled is is submitting or submitted Then if they are submitting we're going to show a loading state saying registering And if they have submitted we'll say you have joined you're all set you're successfully joined whatever whatever And then down here saying join the weight list now Now go ahead and open up your webinar upcoming state component And at the bottom here we can continue through this process So instead of this guys right here I'm going to remove this and I'm going to put another if condition And based on this we're going to do two different events right here Okay this is uh kind of starting to get a little bit too nested So please just pause and type with me and go slowly Okay so the first thing we're going to do here for the truth condition is we're going to render out a button Actually let's render out a React fragment to wrap this button first Okay like this And so if this is the waiting room then in here we're going to check again for the ID So the current users if their ID is equal to the webinars presenter so the presenters presenter presenters ID then we're going to do something here If not we'll do something else in here Okay So let's also just bring this in There we go And so in here for the truth condition we're going to render a button Okay So remove this and render a button Now let's go ahead and import the button And I want to having a logo uh sorry an icon And so all we're doing here is we have a button here that has a loading state just saying starting Okay So when they click to start the webinar it's going to show like this So essentially if this is the actual host themselves then we're showing a slightly different experience So that's how we're doing this Okay So next we have to create this So might as well create it right now So first thing I'm going to do is I'm going to scroll up here and I'm going to hit enter and I'm going to say const handle start webinar is going to be equal to this right here But first we need to set loading to true And then we have to make a call So I'm going to put that inside try catch and this is a server action called change webinar status So I'm going to copy that name and then I'm going to open up the folder structure go into webinar and have I already created this Okay we have already created this So just import the server action and then next we're going to check if there's no response So if no response.success success throw an error message and if everything looks good then we're going to return a toast Okay so I'm going to say toast like this from sonar and this is going to need use router So let's import use router Okay and this needs to become an async component So we can make this call here And then finally for the error space the error part right here we're going to say console.logtoast And then finally we also have to set loading to false So I'm going to say finally it will not do finally for me Okay there we go Okay set it to false And now let's scroll down here And now after this we have this part here So loading icon if they clicked on it and it's starting the webinar and then start webinar if they haven't clicked on it yet Okay nice Now after this button you have one more condition right here Instead of this we're going to change this component Same thing same weight list component but instead of passing in scheduled we're going to pass in waiting room Okay And inside this we need to I think uh we will take a look if we have to change some stuff in here Okay So we're going to pass in waiting room inside this component Now down here you're going to find this if condition So you're going to change this to another if condition So this remove this truthy value and you're going to return something else So let's change this to okay I need to remove this one first And so I'm going to say if this if webinar is equal to this do something in here else do something in here Okay so if this is true that means if it is live So if the status is live then we're going to render out the same weight list component but this time it's going to have live as a status Okay next we have this one more if condition here right So we have one more thing to enter So I'm going to remove this put the curly bracket and I'm going to say if this is true do something here If false do something here Okay And it looks like I made an some sort of error Let's see what this is Okay I think we're good So all I had to do was say webinar.st status If it is cancelled then I'm going to render out a paragraph And inside this paragraph I'm going to pass in the following styles And I'm going to say webinar is canceled Okay that's it Next at the bottom we're going to have a button that just says ended So just like this Okay that's pretty much it Now scroll down here and this is the description So I'm going to hit enter and now I'm just going to copy this so we don't waste any time on creating descriptions and stuff Right So it's a H3 with a paragraph and a button here So first things first go ahead you know please pause and type these styles But the other thing is we're rendering out the description in here Then we're rendering out a calendar This is a calendar icon So from Lucid React and this is going to have the format function that comes from date FN So let's bring that in And then we have the clock icon as well Let's import that one as well So now we're just essentially changing this uh just reformatting the date and we're showing it down here as well So now if you refresh this there you go You can see the description I mean of course I haven't created something that looks really nice but you get the point Now there's a few more things we need to do inside this render webinar component So let's go ahead and finish this up as well So inside this page obviously we have all the props here It says to-do build waiting room and live room Okay got it So first thing I'm going to do is I'm going to grab this hook here called use router and I'm also going to get use path name And then remember we created that attendee store We need to get that one as well So I'm going to bring that in and I'm going to import this Okay And let's go back here And then after this we're going to have a use effect And this use effect is going to check for any errors that are coming in from here Okay So if there are any errors then we're going to show a toast message and we're going to push them to a different page Okay So I see this here This needs to be a client component So I'm going to change this to use client Okay Awesome There we go And then inside this component after we render the upcoming state we're going to render another one for the waiting room Okay So in here please follow through with me and type this with me Okay So the first thing we're going to do is we're going to say webinar if it's equal to something return this and then return this Okay So if it's the waiting room then we're going to render the same component but this time we're going to render the status So let me make sure I'm putting the right Okay So if it's waiting room we're going to just pass in these props and uh it's going to do it accordingly Also a better way to represent this page guys would be through a uh through a switch statement Okay we've done that we've done that in the past So you can follow the same design So uh after this in here we're going to need to render another if statement here So I'm going to remove this and I'm going to say this is true do something here If not do something here Okay So if it's live then we're going to render out a different component called the live component But obviously we don't have that So I'm going to say to-do add live stream component and webinar stuff Okay And essentially in place of this so I'm just going to put a comment here and in place of the string itself I'm going to remove it and I'm going to render out a React fragment And I'm going to check if the user is the presenter If so I'm going to render that live stream component that I was talking about Okay If they're an attendee I'm going to uh pretty much send the participant version And then down here we're going to render out this webinar upcoming state So obviously this is also to-do So let's say to-do in here And then we'll just comment this out Okay Actually uh yeah we'll comment it out so it doesn't throw errors We'll just return a string here like this Okay And same thing here as well So we're going to render this out And let's quickly comment this return a string And for this I'm going to say live stream for presenter and then down here for participant Okay Now once this is done the other if condition is going to render this right So we're going to render this webinar upcoming state and then after that down here after this react fragment we have this if block So in here we want to make sure it's not cancelled So remove this We're going to check if it's canceled then in that case we're going to render another component Okay So we're just going to show that the webinar has uh been cancelled So I'm going to replace this and I'm just going to say div like this with another div with H3 and paragraph And I'm just going to say this webinar is canceled Very straightforward And then down here we're going to render out that webinar upcoming state We're just going to pass in all the values that it's uh that it needs Now I'm just taking a look at all the to-dos that we that we already have And I see one in here under source actions webinar.typescript where we have to check if the user has a subscription before creating the webinar And now we can actually turn that on and remove this because now we have subscriptions uh turned on inside our application Now I just want to show you that this actually works and you can reach this page if you are a pres if you are not a presenter So I'm going to copy this and in here I'm going to open this up Just open a new incognito tab and I'm going to paste this in here And there you go () What's up Prodigies Just as a quick heads up we're working on our first ever premium SAS course called Mochi Now I'm sure most of you have already seen the project or you know what it is or you've heard about it And if you haven't obviously take a look at my Twitter or look through my YouTube page You'll find more about Mochi Okay Now we're still working on this This is not completed because this project has been in the working for 10 months Okay for 10 months our team has been working so hard ideating designing and building this project to make it production grade so that you can learn the best practices and build the best project on the internet Now I know you're going to love this because I have launched a weight list and this weight list gives you an exclusive opportunity to get the launch bonuses and the launch discounts which we always do when we first launch something and you will have the option to have that in front of you before other people This way you can make the decision to join or not Okay And I know for a fact you're going to and so I would say just join the wait list anyway so you can put your name on it so that when these go out you have the option to grab these first Okay Um and I don't want you to miss out on this because I'm super super passionate about building projects like this and I can guarantee you that I've put my heart and soul into this and you will love this project Okay And uh more more about this on my Twitter You guys can take a little sneak peek here to see to see what it's about But u this is the best project and that's what I'm hoping to build Okay So go ahead join the wait list and I'll see you on the other side Now the next feature that we're going to be working on is the live streaming capabilities () inside our application Now before we move forward we need to make some architectural and uh direction decisions so we know how to move forward in this app Okay So we got to keep in mind that building an infrastructure from scratch for streaming especially to tens and thousands or hundred thou I have seen I have seen marketers with 100,000 people on that stream that's insane right and so I I don't know if you guys know about WebRTC turn stern these are all just protocols and different things that are created to make communication over the internet possible okay and building these are going to be very expensive especially if you're doing it from scratch Okay Now I'm not saying these things are expensive are cheap if you got a third party service That's not what I'm trying to say It is still going to be uh expensive obviously because there is a lot of infrastructure because if this is expensive someone else is doing this for you right So whatever you do whether you're building it on your own or you're getting a third party service you will pay the exact same amount Now here is why I believe doing everything from scratch is the worst decision you can make in your SAS especially if you're just starting out First if you are watching this channel you are probably not just a web developer who wants a job You probably want to start your own SAS help people out there and become a SAS entrepreneur And so if that's the case then you are definitely going to have this question which is should I do things on my own because I don't have the funding right now or maybe I do have the funding but I don't know if I should put it into a thirdparty service or if I should just build everything myself First thing you can't even do it yourself I'll tell you that right now You cannot build all of these from scratch host it maintain it Over time it's going to be very expensive And I'm not talking about just the infrastructure What I'm talking about is labor costs Okay Nobody has the skill And so what that means is if a skill is very rare you're going to need to pay top dollar Okay So if you do choose to build everything from scratch you got to keep in mind that you have to understand all of the underlying network challenges that can take place as as you know as you're building your application Okay You're going to find you're going to face so many challenges and it's going to block you And let me ask you this question right If your goal here is to help someone So let's just take let's take this person right here who needs your help They're saying help me parent Okay please help me And you your SAS application essentially can help this person Are you going to help them right now or are you going to sit and code What are you going to do Try to just answer this question right Pause this video and try to answer this question Hopefully you got it right But if I was you my job or my priority would be to help this person as fast as possible with as much resources as I have Right If I have zero I'm not going to go crazy and uh buy some infrastructure that's cost me $50,000 to help this person That's not what I'm saying What I'm saying here is to the capabilities I have I'm going to help this person as fast as possible Now that's how entrepreneurship should work Okay Your goal is to help someone as fast as possible Now let's also take the financial aspects of it As a saspreneur as a SAS entrepreneur is your goal to code and make your application feel nicer just for yourself That means the code looks nice or do you want to focus on building the app so that you can get it out there as fast as possible Because getting it out there means you make money faster right This is how an application called Calai was able to make $2 million in I think under 6 months They bootstrapped all of this just using AI And quite frankly speaking the app probably did not even work when they first started Okay And they implement a strategy that I call the illusion funnel this I mean so many comp companies have been using the illusion funnel to essentially launch different features and uh different parts of you know different probably new companies itself and if you want to learn more about this obviously you can take a look in the description but that's not the focus of this point here is if you're trying to help someone and if you're trying to make money online you need to get your stuff out there as fast as possible so here's another question right would you rather just pay maybe $1,000 $2,000 whatever that is just to get the infrastructure set up for yourself That means it's all customuilt so you have complete control over it and potentially you you might save long-term but this is only infrastructure Keep that in mind Only infrastructure You have to still hire labor like I said right And maybe you have the ability to customize specific you know requirements designs all that kind of stuff And obviously there's no dependency on an external service so you can quit at any time So would you rather do this or would you rather just opt for a third party tool that is completely free to get started You don't have to pay money for it It's free and essentially you pay later in the future when you make money Okay This is this is a no-brainer offer to me Okay Like in my mind someone's telling me "Hey man I'll handle all of this for you and I will essentially make it so affordable that you can scale to not just the 100 users 200 users that you would get with this system but I'm talking about a million users right Would you rather opt for that That essentially checks all of these things that you need to consider when you're building uh such a system like this And not to forget there's also going to be real time events right you might need to show things on the inside the chat So you're going to need something for this And maybe you need more capabilities like sharing the screen I don't know There's so many different things right And so you need to figure out a way to combine this That means use some free tools and maybe use some paid tools as well but it has to be as cheap as possible so that when you're first starting your your main goal should be like I said here to help this person get what they want And obviously at no cost if possible or at very least cost and that's exactly what we need to do We will be using get stream for application and uh stream essentially has so many different products that you can leverage They have chat messaging they have video and audio and uh they also have an activity feed So if you want to build something that looks kind of like uh I guess this looks like Twitter right You can build something like this They give you all of these components and it's completely free to get started for all of the products that we'll be using inside this project So that means they're going to give you all of this infrastructure for free so that you can start and you can make a ton of money Now here's why I really want to support this company So there's a link in the description and if you click on that link you're going to get a maker account Now essentially if you are making less than $10,000 per month in revenue and you have taken less than $100,000 in funding Stream is free It's literally free And this is insane because they are taking on the costs And you can take a look at whatever you know what all they have in here Uh you're getting a lot of stuff but this is more than what we need for you know our application right You can also just go ahead and create the account but I just found this that uh you know they're pretty much telling you that they will give you all the things that you need to get started And with that being said Stream is also the sponsor of today's video So thank you so much to Stream not just for you know sponsoring this video but also for providing such a service to the web development community That way we can actually build real products using some amazing tools like Getstream.io So go ahead and click the link in the description It's going to take you to this page where you can create your Maker account completely for free Okay And then the other thing you need to do is go ahead and sign in right here So provide all the information that you need and then go ahead and sign into the application And it's going to give you a second page where you can select all of this data So make sure at the bottom you just select web technologies That way your experience looks the same And then click on chat messaging and video and audio Okay Then next go ahead and click on complete sign up and that's going to take you in here Now for the organization name just create small letters only Okay So lowerase So I'm going to say prodigies testing Okay Just make it very simple And then I'm going to copy this and go ahead and put all of the other details And then you can click on submit Okay there we go And you should see this ID right here So this is your username Okay So don't put any spaces in this Next you should probably already have an application built for you but I'm going to go ahead and create an app from scratch in case some of you guys don't have this built for you Okay so click on create app And in here I'm going to say web prodigies dash spotlight Okay please type it this exact same way And then in here you're going to select US East And I'm just going to select something in here And make sure you click on development Okay Then next go ahead and create the app And it's going to take you into the overviews tab Now this is where you can access all of the products Okay So it's a very systemized um I guess it's a it's a very systemized UI right You have chat moderation stuff activity video Very straightforward Now at the at this moment we're we only need the video and audio stuff So uh first thing you're going to do is click on overview It's going to take you in here And then inside your environment file we're going to need to populate these values Okay So the first one we need is the stream user ID itself And this is this word right here So mine is Prodigy's testing So I'm going to say Prodigy's testing Do not use the same keys guys Use your own keys Okay Please do not A lot of you guys are just using my uh my API keys Please don't do this or from next time I'm just not going to ever show an env file Okay Next Here you need the stream API key So in order to get this if you scroll down here let me expand this a little bit more You're going to find a key here Copy this key and paste it in here Okay Next you're going to find the secret key Copy this one and paste the secret in here as well And now we need the stream token and the stream caller ID So let's go ahead and grab that So go ahead and all the way up top scroll way all the way up top you're going to find this button create live stream Click on this and it's going to take you into this page Okay so the first thing we need is this RTMP stream key Okay so copy this and you're going to paste that as a stream token Okay And then finally you also need this call ID And this call ID is going to be this one right here the live stream ID Okay So copy that and paste it into your folder into your environment file Now there are different ways to stream Most marketers are not going to use your phone okay They do not want to just use your phone They probably have a nice setup or maybe a nice microphone or maybe some different screen sizes right or maybe they even have like an avatar icon or maybe like a circle where they can show their face and they're they want to also screen share And so there's so many different things that they might require and you will not be able to build all of this obviously So there's two ways One is you can give camera settings directly inside the app But the second way is what everybody prefers even myself which is to use OBS So we'll be using OBS essentially to stream through getstream Okay And getstream is the infrastructure They're going to handle all of the traffic Um they're going to handle all of the scaling So you don't have to do anything It's going to autoscale and all you have to do is just sell more right How how much more simple is that Okay Awesome So now let's move on to the next stage and get this set up inside our application So now that we have these values we want to go into the page.tsx tsx under the live webinar ID the dynamic ID in here And then we have these IDs right Let's just quickly go ahead and remove all of these strings Okay there we go That was pretty quick And so now we're just going to store these in here And now we can pass these values down Okay so just as a quick side note I also made a ton of performance enhancements for the uh for the premium uh codebase Okay so with just just a couple more enhancements such as uh the endpoints and maybe a slightly better user experience as well Uh so if you do grab the codebase you're going to get all of that as a bonus Okay Uh but I do want to add those changes in here as well So some of them we're going to add like the main structural changes cuz I did make a few more structural changes but all other design upgrades all of that stuff is going to be in the um in the codebase in the description only Okay So the first first thing is go into Prisma and in here I want you to scroll down to where you find the attendance or uh sorry I mean the the attendee itself and then down here we're going to essentially create two more values Okay this one is created at and uh the updated at as well Now once you make a change I want to show you what you need to do inside your app right So I'm going to create another shell here And I'm going to say the I'm going to essentially type the migrate uh command And you want to say npx prisma migrate dev And I'm going to put a name So for this name I'm just going to call actually we need to put dash name And then we need to put the name So for now I'm And also guys please make sure this is kebabs skew or you put underscores Don't put spaces So I'm just going to say adding schema changes Okay And then go ahead and hit enter And if everything is correct you should see a migration script created for you Okay There we go Our migration script is created Now let's also go ahead and generate the client So at the bottom you want to say npx prisma generate and hit enter And that should give you all the types So I see some error here Let me see what's going on guys Just give me a second All right guys So all I had to do was delete my node module So I just deleted it and I did the npm install once more like this And now when I did npx prisma generate that worked I usually hate errors like this because there's no information All right it doesn't tell you what's going on You just have to wing it and you have to try different things And uh typically if there's anything that I see that's really strange it's probably your environment right The coding environment So delete no modules delete next Try that first If that doesn't work then you can get deeper into it But usually the error will tell you what's going on But this was a horrible error So uh but I I noticed this node modules So because I noticed node modules in here I knew for a fact that it's happening in here So I just deleted it and then reinstalled Now from this page.tsx let's just continue So we were essentially passing down the API keys uh into this Right So now go ahead and click into also let me make sure that we actually have these values Okay So you want to change the API key here to next public stream API key Okay And that should solve that error Now I'm going to go into our render webinar And in here we need to essentially use all of these keys right So let's scroll down here And we have our first to-do which is to build the live stream component So I'm going to go ahead and uncomment this Awesome And let's remove this string from here And now we're essentially passing down the values that we need But obviously we need more inside this So I'm just going to pass in the remaining as well So we need the webinar itself and the user in here Now technically both of these components are exactly the same It's just wrapped in a different higher order component So it has some different uh you know like a different user interface That's the only difference Okay So go ahead quickly copy this title and now open up your folder structure And inside components you're going to create another folder in here And you're going to call this component It's a folder actually It's called live stream state Okay So uh actually it's called live webinar not live stream state Okay And inside this we're going to create that page.tsx that we need And let's go ahead and use react snippets Now inside this we need to accept all those props right So let's go ahead and bring those in And let's just quickly import webinar with presenter Uh actually we got to get this custom type So just one moment Let's just go ahead and dstructure these values from here Okay Awesome And now we can create this type So in to create this I'm going to scroll into the types folder which is inside libs types And at the bottom I'm just going to create the webinar type like this which needs webinar and presenter is going to be user Now let's go back here and let's quickly import this one Okay Now inside this component the first thing we're going to do is we're going to create a stream user Okay So up here I'm going to say stream user and this stream user is uh from let me just import this actually Give me one second guys So yeah this stream user is going to come from the SDK right So we're going to go ahead and grab that SDK right now So open up your terminal and inside if it will let me today Okay there we go And you essentially want to put npmi you're going to paste this which is let me shrink this so you guys can see clearly So stream IO node- SDK Please don't make any spelling errors Okay And we're going to install a specific version of this like I mentioned So I'm going to go ahead put the version number and I might need legacy depths Let's just see Let's hit enter and then see what happens Okay so we do need this obviously So I'm going to bring this in and say legacy pure depths and hit enter And then once that's done I'm going to get the second package that I need which is the React SDK Okay so go ahead and you want to say npmi You want to paste stream io/react So video react SDK and then in here we're going to put at symbol We're going to paste this and say legacy pure depths and hit enter Now we're going to need two more packages for the live streaming Uh this is not actually part of the live stream feature itself This is for the chat and the uh essentially the chat section inside the live stream And the coolest part is Getstream also gives you all of this right So they have a product here called chat messaging and you can build real time chat capabilities right So they're essentially giving you everything You don't have to go outside of getstream So what I'm going to do is I'm going to also install that right away So that way I just you know make my life easier Okay So go in here You want to say npmi uh stream chat And you want to put at right like this And then I'm going to use this specific version And then after that I'm going to put a space and I'm going to put the stream chat react like this And this also requires a specific version So let's bring that in And then I'm going to say legacy pure depths Okay And let's go ahead and hit enter Awesome And now we can proceed further So the first thing we need here is the stream user So what I'm going to do is on top of this file I'm going to import user as stream user and then we also need these two components called stream video and the stream video client Okay And now down in here I'm going to remove this or actually first let's hit enter here because we need to create the new client with the API keys and the host user right the token So I'm going to say conclient equal stream video client just like this And I'm essentially going to pass in those values And then we have to create the stream video So I'm going to say stream video And inside this we're going to pass in I mean we're also going to pass in the client itself And then we need another component called custom live stream player Okay Now this is just a wrapper component So go ahead and copy this title You want to open up your folder structure and inside the live webinar folder you want to create the custom live stream player.tsx And let's go ahead and return this component like this Now like I said this is a wrapper So it's just going to wrap another component that we need to create in common So first go ahead and bring in all the types that we need And in here I'm going to dstructure this And then inside the return first let's create a client Okay Now this requires uh a hook So you can use the same client So I'm going to say const use stream video client like this And this comes from our video react SDK So let's scroll up top and I'm going to import the following So now I have this hook right here Awesome And then the next one is I'm going to create a state called call and set call And let's import this one as well And the type for call here also comes from this stream IO Okay So I'm going to get call Awesome And then after this we have show chat So for this one I'm going to create another state in here so we can show the chat as well Now this has to become a client component So I'm going to say use client up top Awesome And then the next thing we need is a use effect So let's go ahead and create a use effect like this Okay And inside the use effect we're going to check if the client exists or not And if it doesn't we have to return Now obviously we're going to need to pass in the client in here And I'm also going to pass in some values that we get from here which is the call ID and the call type Okay So next we're going to create the client call So I'm going to say my call client call and we're going to pass in these values Next let's go ahead and set the state So we're going to set the call itself So I can save that and then I'm going to essentially invoke this So this is just like syntax Okay So we're going to we need to say my call.join.catch Okay So this way we can join this call And uh if there is an error here we're just going to say fail to join it And then finally we're going to also return a cleanup function So I'm going to say return my call Catch And if you cannot leave we're just going to show a message And we're also going to set the call to undefined Okay Awesome Now before we render this out since this this has a lot of client side stuff uh it requires the DOM and all that kind of stuff So what we're going to do is we need to make sure we actually have the call Okay if we don't have the call then we're going to return null And now down here we have to return a component called stream call So I'm going to say stream call And this comes from the same package Okay so let's import it from the video react SDK And then we have to pass in the call right here Next we need to create that main component that I was talking about which is the live webinar component Okay And for now what I'm going to do is I'm just going to leave it like this I'm going to go one step behind and I'm going to import our custom live stream player so I don't see that error anymore Okay And in here I also have to import the live stream state inside our render component And I see an error in here Let me quickly fix this one as well Okay so we're going to use the new type here guys We're going to use the webinar with presenter And let's import this like this And that should solve that problem Okay sorry Sorry about that And now let's go into the live stream into custom live stream And now we're inside this component Now this component is a custom component But first let's just go ahead and pass in all the props it needs Okay so the first one is we're going to pass in a state called show chat and set show chat So let's go ahead and do that Then we're going to need an is host and obviously since this is the host right We're creating the host view So we're going to say is host and set it to true Then we're going to need username So I'm going to pass in username user ID and the user token like this And then we're also going to need uh one more value called webinar So I'm going to pass this in as well Okay Now this stream user ID is basically from our account So I don't think it should matter because essentially we are doing it for them Right Uh but I think you don't need to dynamically pull this So that should be fine Now go ahead and quickly copy this So let's create this component itself And this is a huge component Actually this is not a big component This is more inside this And that's why it becomes a big component So please bear with me Stay with me Keep coding and eventually you're going to get there Okay So inside the components folder I'm going to create another folder Call it and call it common And inside that you want to create a file This file is live webinar view.tsx Okay And now let's go ahead and return this component like such And let's also go back one stage and import this component as well And now we need to accept all of these props So let's go ahead and pass this in And let's also import this one So these are the props that we need So please pause and type And I don't see any errors here Awesome The next one is I need to dstructure So I'm going to grab and dstructure all of those And finally I need to work on this component So what I'm going to do now guys is I'm going to see if I can try to open something So just give me one second So I just went ahead and changed the time to start right now And if you refresh the page the timer essentially resets that And uh just for a temporary state what we're doing is based on the timer if it if it is expired we're just going to change it to waiting room So right now all of the users that stop on this page are stuck on the waiting room section This is a waiting room for them Okay But because I am in the webinar perspective for the the creator the host itself I see start webinar and now as the host when I click on start webinar it's going to fire this handle start webinar which is going to change the status to live Okay Now inside this uh throughout this you know as we keep progressing I'll also show you how to use events So I expect you to use events to create real time functions inside the app and kind of expand on it Okay Uh but for now this is all we need which is just to change the status to live and then essentially you know show these these messages whatever this is And uh so I'm going to just go ahead and try to click on this and once I click on this let's see what happens Okay so I just clicked on it and it said webinar started successfully Obviously we're going to see a bunch of errors and it says user token is not set Either the client.connect user wasn't called or the client.connect wasn't called Okay so yes there's a bunch of things that we need to do but this is the live webinar view So essentially once we connect OBS we're going to be inside this lobby and you can start the webinar anytime you want And just to show you if I open this in incognito it's going to show join webinar And if I try to click on it obviously I need to make sure that I'm already you know inside and registered So you need to put the same email that you used previously And once you do all it's going to render for us let's just take a look at what it's rendering right So going back to this component it's just going to show live stream for participant because this person is an attendee Okay so that's the flow right now So let's go ahead and close this out and let's focus on the live stream state So the first thing I'm going to do is I'm going to remove this and I'm going to return a div in here And after that I'm going to put another div and this div is going to have the following styles as well Inside this we need one more div just like this So let's go ahead and bring that in And then after that I'm going to create one final div inside this Okay Man web development is so weird It's just a bunch of It's just a bunch of divs Okay And then after that I'm going to have some spans So inside this we're going to have a span here that just says live Just like that Look at that Looks awesome right And then uh we're also going to use an animate pulse on it We actually created this manually so you can use that I think uh Tailwind also already created something for us but uh this is from the CSS that we created Okay So it shows that the user is live Then next we are going to create another div So after this one two hit enter And here you're going to create another div like this And you're going to show one div inside there and then a button at the bottom Okay And first we're going to show a user icon here And inside this we're going to show the view count So let's go ahead and grab that view count So the view count is a hook that comes from our get stream package So let's go ahead and import that manually cuz it's not letting me import that Uh so this comes from the video react SDK Okay And this makes it super easy for us to get all of the all of these values Actually sorry guys I think I have to import this from another function Just give me a second So this use participant count actually comes from another hook here called state hooks Okay And that gives you this hook And then you can invoke that to get the view count And this has to be a client component obviously That's why we're seeing all these errors I assume So I'm just going to change this to use client like this Actually no we have some div errors here And that should update that So now we can see this And I'm also going to import this message square component And let's refresh this real quick Okay there we go And we're pretty much all set And now we have the users icon showing the number of view count And we also have a button here So awesome Now let's proceed uh further right below the button And so after the button now we're going to create the main content So for this one I'm going to create a div So after the button 1 2 hit enter and then create a div here And this div is going to have the video section first So I'm going to say div like this with the following styles And this is going to have another div inside this Okay And based on if this is the host or the participant we're going to show the participant view because they're going to have a couple more actions to perform right And this UI looks super slick Like take a look at this Right So we're going to actually bring that component here So hit enter And inside this first let's look to make sure if this is the host or not So what I'm going to do is I'm going to go up top and I'm going to and I'm going to say host participant is equal to participants And this participant comes from another hook called participants which comes from here Okay So we're going to say participants.length length greater than zero If not we're going to just grab the first one and we're going to say uh null Okay And then after that I'm also going to create some states guys So let's just go ahead and do it right now So I'm going to say const we need the client the chat client the channel and dialogue open So through this channel we can also fire those events that I was talking about right So now I'm going to import the stream chat as well And the stream chat component comes from the second product that they have which is the stream chat Okay So now we have that state in here and we also have the channels Awesome So we're just storing that So we can now use them Now let's scroll down here and inside this we can check that new state Right So we can say if host participant like this if this is true do something here If not do something in here So if it is the host participant then we're going to show a div here and we're going to show the participant view Okay Now this participant view component is a builtout component already done for us from stream io package Okay from the video react SDK So it makes our life super super easy And we also have to pass in the host participant And let's refresh this page And okay we still see this error but now we see only one error instead of two which is the host token is not set Client.Connect Okay we see two now So something is wrong with the user ID guys I think I'm messing up the user ID That's fine As long as I can see something here I'm happy Okay So what's next Next we're going to use another div here So I'm going to say div like this And I'm going to say waiting for stream to start Okay And there you go You can take a look at that Looks awesome Now um also we're super super zoomed out So let's zoom in a little bit more Actually on this screen it's going to look really bad So let's just keep it really far away Okay Now the next one is if this is the host right Then we're going to render out another component here and we're just going to show that it's the host So now I know I'm the host here Okay Next I'm going to create another div after this So after this div hit enter We're going to create a div just like this And inside this we're going to create another div Okay And here we're going to show the webinar title So this is mochi and the webinar started So it's called mochi And I'm just putting that at the bottom Next I'm going to check if it is the host once more So after this div you're going to find one more div Hit enter And then in here you're going to say if this is a host then we're going to render a button that allows them uh this is essentially a CTA thing right So they can launch the CTA through this So first thing we're going to do is let's import this book a call CTA thing right here So if it is book a call we're going to show book a call If not buy now And this handler is going to do the following So let's scroll up top And this is where we're going to use this channel So remember I told you that the channel can help you send uh send an event right And so we're going to need to first establish and connect the channel So let's go ahead and do that So then we can invoke it inside the handle connect So first thing you need to do here is if there's no chat client or there's no channel make sure you return null Okay And then the next thing or actually that's going to show something not going to show us anything because we have some errors but uh that's fine for now And then after that in here we're going to create a use effect and we're going to say use effect if the client and the channel exist then channel.on this is an event type we're going to have this event here So if the event is open CTA dialogue and it's not the host then we're going to set the dialogue to open Okay So this is how we can trigger that event to fire on their side and that way we can essentially show uh you know on all our participants side so we can show modals on the page Okay super cool stuff Now the next use effect we're going to need here is essentially to create the chat client So what I'm going to do now is up here I'm going to create another use effect This is a little huger but I mean larger but it's fine We're going to go through it So we're going to pass in all of these in the dependency And also don't forget to pass this dependency array in here So we're going to pass all these values in here And this needs the user ID all this kind of stuff right And then in here I'm going to say const initial chat Okay this is an async function And then I'm going to invoke the chat So just create the function invoke it And then once it's done we're going to check if chat client exists also disconnect the user from the chat client Okay Now in here I'm going to create the stream chat client So I'm going to say client just like this And I'm going to pass in process environment and I'm going to pass in the API key And then I'm going to say client.connect this user So connect this user with this specific user token And I'm going to pass in a user ID and the username Okay I see a bunch of errors So user token does not have a user ID I see user token is not set Okay we'll get to this but it doesn't sound too bad And then after that we're going to create the channel So client channel and we're going to say live stream We're going to pass in the webinar ID and the webinar title So this is some metadata Next we're going to do watch So you can watch the channel and we can also listen to changes And then we're going to set our client and set our channel And finally we're going to initialize the state here Okay that's pretty much it So these use effects are going to help us accomplish this And now we can go ahead and create the handle click So up here I'm going to hit enter and I'm going to say handle CTA button click If there's no channel return but if there is we're going to show the button here And we're going to say oh wait channel.ende event type open CTA dialogue That's literally all you have to do So here's a challenge for you that you can look forward to in the future Not right now but in the future put it down in a note Okay So when the live stream starts instead of I mean instead of the user still needing to click and get in maybe if they're already on the webinar page and if you're using cookies you can use this channel You don't even need cookies You can just use like a local storage right But if they're using incognito then that's going to be a problem But you could use a cookie or a session that will never end right And what you could do is essentially you can fire this event to let people in and in a fraction of a second everyone can join that page Super cool right Okay Awesome So just for now I'm also going to just push forward because this looks like a simple error It's just some user ID stuff So I'm going to hide this and I'm just going to uh hide this part and I'm going to proceed further Okay So after this section where we're showing the buy now CTA the button here you see I can trigger this book a call CTA because the CTA that was added to this specific webinar was book a call Okay And then the next one is now I'm going to show the chat panel So this is a very simple component and all I'm going to do is hit enter first after these two divs So 1 2 hit enter and I'm going to say show chat And now we're going to import the chat component from stream chat And we need this channel So let's go up top and let's import all of this stuff Right So I'm going to scroll up top here And first we need the chat channel message list and a couple more things So we need channel messaging list and message input So go ahead and import that And if you scroll down here okay I see some errors here This can potentially be null That's what it's saying Okay let's look at our props here Okay so this is going to throw an error because we don't have that client here cuz we're not checking right And so if there's no client you probably need to show another UI saying error or something like that Uh and that's why this is actually crashing Okay but we're almost done We're pretty much done So the next thing is just the dialogue So what I'm going to do is after this div here I'm going to hit enter and I'm going to say dialog open If it's true we're going to show this custom dialogue box Okay Now this dialogue box isn't that simple to build So first let's go ahead and solve this error so we can get this client to show up and then we can proceed further And so I'm not going to forget here So I'm going to add a to-do list and I'm going to say add this in here And that's pretty much it So I took a look at this guys and I think it's fine now And the the reason was probably because our environment variables weren't set up right But then there's this other error But I think this isn't too bad This should be solvable It's just something about get user media So it might just be something with the components and how they're being uh nested But regardless we can see our chat we can see our host but this chat does not look good And so the reason why it doesn't look good is you have to import the CSS that they have given us inside here Okay Now in the premium codebase which is inside the description if you purchase that codebase I will fix this up I'll make it look really nice Uh what I mean by is this design here cuz it's white right here and doesn't look nice I'm not going to waste too much time But in that codebase I will fix this and use the same themes Okay Feel free to spend some time and make it look nice if you'd like But I'm going to proceed forward And I think there could be one more reason as to why we're seeing this error And you might notice two users being here And this is because of React strict mode Because if I refresh this you're going to see the use effect is going to fire twice And inside development environments React strict mode purposely does this Okay The good thing is it's not creating this infinity loop and it's not going back and forth and like how we had before because turns out before this we were essentially creating 50 or 30 different connections and so it blocked us and that's why we were seeing that error Okay Uh now it fixed it and I think it was because of the environment variable So please turn off turn off your server and then start it once more Okay So now that this is done let's go ahead and scroll down here and at the bottom we're going to have this dialogue component So we're going to say if dialog open is true we're going to render out the dialogue component itself So go ahead and copy this title copy the name of the component Open up your folder structure and inside common you're going to create this file.tsx And then in here I'm going to go ahead and render this out Okay Now inside this we're going to need to accept some props So let's go ahead and do that as well And then finally let's go ahead and dstructure in here So just like this And now let's go back one step and let's import this component Okay And I also see another error here Okay It's just any So we're good to go And now let's click into the dialog uh box component And the first thing we're going to do is I'm going to use use router inside this component So I'm going to bring it in And I don't need to make this a client component because I know it's already inside the client tree Okay So let's bring that in And then I'm going to create another state here called loading And now let's scroll down here and actually right here And first thing is I'm going to return a dialogue component So I'm going to say dialogue like this And we're going to import this dialog component as well And if there is a trigger that's being passed in from here I'm going to essentially render out the trigger inside this And once that's done go ahead and hit enter And now we need dialog content So let's bring that in And let's also import it And the header as well And the title as well So dialog content header and title Now for the dialog content I'm going to give it some styles here So just give me one second So in here I'm going to say the following styles Uh what is this Hello Okay there we go And I'm also going to give the dialogue title some styles as well Okay And then inside the title instead of saying title here I'm going to actually check the CTA type Okay which uh the CTA comes from here And so we're going to check that and accordingly return the right uh text in there And then we're going to return a paragraph So after the dialogue title hit enter And you're going to render a paragraph tag in here And then after the dialogue header now inside the content we're going to render out the uh the webinar title and the description Okay so essentially we're going to import this And if you don't know what this is it's just a modal that's going to show up on the screen with the CTA that the user selected So whether that's book a call or purchase a product this is what we need Okay just to show some info Then finally we're going to have the dialogue footer and this is the button so that they can take action right So after this div hit enter And then I'm going to say dialog footer and that's going to have a button inside it And this button is going to have cancel button And we're also going to have uh so this should be dialogue close guys not cancel here So you can remove this and you can use dialogue close Something like this Okay And then for the button here you're going to have handle click and we're going to pass in the is loading prop in here and then some styles And then if it's loading we're going to render a loader and say loading If not we'll check what type the user has whether it is book a call or buy now CTA And based on that we'll render out some text And then I'm also going to show a chevron right And let me see if I can kind of manually trigger this So let's go to dialog open up top here And let's set this to true Let's just see what it does Okay And handle click obviously is not uh you know initialized So let's go down here and I'm going to click into this And now let's go ahead and create the handle click So up top here I'm going to say actually after the hooks guys so right before the return statement So I'm going to say handle click like this And if the type is book a call like this then we're going to actually first let's just put this in a try catch here itself So that way we don't have to do it inside this So if it's book a call first we're going to route the user to the call page Now this is something we haven't built yet obviously but let's just go ahead and put it in Okay So we have live webinar So slive webinar the ID slash call and the attendees ID Okay And then if not we're going to push the user to checkout page Then the next thing is if so sorry guys in here we're going to remove this and inside the else block I'm going to say if the webinar.pric ID exist and uh it does not exist and there's no Stripe subscription then we have to first throw an error Okay But if that does uh and everything looks good here then after this if statement we're going to create a session here Okay So how do we create this checkout link So copy this title and first make sure you change this to async And then go into your actions and you want to go into the stripe.typescript and at the bottom we're going to create the following server action So I'm going to say export const create checkout link and that needs the price ID and the stripe ID as well So I'm going to get that which is going to be a string And then in actually guys sorry we need more stuff in here Uh instead of stripe connect I'm going to call this stripe ID And then we need user ID or actually let's do this So here's what I'm going to do Price ID Stripe ID attendee webinar ID and book a call Okay And inside this also I see this error here Okay It's because these are not being used yet right So that's why it's throwing this error So the next thing is I'm going to put a try catch and inside the try block we're going to create that session Okay So we're going to need stripe for this And we're going to say session So checkout.create create and the line items is the price ID that that we have to essentially put in Okay So whatever price ID was attached to this webinar we're going to add that in here And then for the mode I'm just going to say payment and successful URL is going to be whatever we have here And cancel URL is going to be like this as well Okay And then after that we're going to put this met Also guys instead of doing this again I want you to expand on this This is just a boiler plate okay to get started I want you to maybe have a better success flow better notifications you know maybe emails all that kind of stuff And actually I'll show you how to send emails inside this app as well Okay And the next thing is for metadata we're going to pass in the attendees ID and the webinar ID This is important Okay Awesome Finally we have to pass in the Stripe account Why If you don't pass this you are going to get the money You don't want that right So this Stripe ID right here is required so you can create the Stripe account connected payment Next you're going to check if they wanted to book a call Then you're going to change the attendance type like here So let me go ahead and first see what the error is here Okay so Oh it's supposed to be after this guy Sorry about that So let's go ahead and grab the change attendance type And essentially what we're doing here is we're telling them we're uh letting us know that the user added this to the cart So this is how you can keep track of the progress of the customer as well So open up your folder structure I'm going to go into attendance and all the way at the bottom I'm going to create a quick server action And this server action is going to get the attendee ID webinar and the attendee type Okay All we're doing is we're updating the attendance So saying for this attendee ID attendee ID webinar id we're going to update the uh data by setting attendant type to whatever is passed in here Okay And it can only be one of these Next we're going to return 200 once this is done and send a message If not we'll return 400 Uh return 500 So now let's uh also see an error here guys What is this error Okay so this is for get webinar attendance Okay well we should put a to-do in here and say fix this and we'll get back to this Now let's go back to our component Uh sorry let's go back to our server action and let's import that Now obviously we have to send this response So I'm going to send a response here and then finally at the bottom I'm going to console the error and send a 500 response instead Now I can import the server action Okay So import the server action to create the checkout link And if there's no session so if there's no session URL then we have to essentially throw an error So I'm going to throw an error like this But if everything else looks good we're going to say window.loation Actually we can just say window.open this session_lank So it goes into a different page Okay Now if there's any errors here obviously we need to show that and so you can do this and since we're passing new error you can also pass the error message in here Okay and then for the finally we're going to set loading to false That's all we have to do in here Now let's scroll down and let's make sure we have completed this So we have the chevron right by now Awesome So there you go So now it shows uh that this was a book a call CTA So it's telling us to join a break room right But obviously we're not going to do that but I just wanted to show you And now you can close this as well So let's refresh this page And now if you're wondering how does this show up essentially when we're firing the event so since I'm the host I can click the CTA and a modal is going to show up on the page so that the user can buy And so if I click on this it's going to take me to a different page which is something we haven't created yet Okay And that's something we'll get to in just a second Now another thing I want to test out is the chat feature So right now I'm able to chat as the host right Obviously but in the future maybe you could add to this You could provide a bunch of functionality inside this component and so that you can lock the chat you can essentially uh limit who can text There's so many things that you can do in here right Maybe you could have host and team members So different people administrators who can control this So obviously right now the design is not like you know uh not what we want and like I promised I will fix this design inside the premium codebase But just to show you that this works if I say hey this is awesome and I hit enter There you go And if I refresh this it's almost instantaneous Okay It's going to show instantly because it's serverside rendered Take a look at that Right Okay Uh oh sorry It's not server side rendered It's uh pre-rendered Okay Just keep that in mind All right And that's pretty much it So now let's see what else we have to build inside this to pretty much complete this section So if I land on this page as a public viewer and if I click on join now it's going to take me right into the participants view Right So I successfully joined the webinar and it takes me right in here But I want to make sure we're actually storing this data So let's just take a quick look Okay there we go So it stores the data for people who are joining as part of uh whoever are newer uh attendees It's going to add it in here Now I'll also update this design and maybe put some uh something maybe put a little more design into the cards just to make it look similar to the uh to this one right here Okay and I'll put this inside the codebase the premium codebase from the description Okay so now that we have this section let's go ahead and build out this part So I'm going to close this out Actually we probably need this cuz we can't access that And uh let's go ahead and find that page So inside your render webinar component which is right on top of this page.tsx you're going to find this re render webinar If you go inside this component you're gonna find this section right here participants view And right now we're not showing anything So this is what we need to build now So what I'm going to do is I'm going to create another component And this component is called participant So let's turn this on and let's remove this And this is not defined So we have to define this Obviously we have to create this component But we don't we only need uh okay API webinar So what we're going to do here is we're going to remove the token and we're going to say webinar We're going to pass this in here So copy this component and open up your folder structure and inside participant which is another folder I'm going to create one in here I'm going to call this participant And inside that we're going to create the participant.tsx Okay And then let's go ahead and return a component from here And and let's also import this component Okay There we go No more errors And now inside this this is also a wrapper Okay Actually uh it is a wrapper towards the end But before that we have to show some states right We have to show from the perspective of participant what they're going to see because they're technically inside the waiting room And so we need to also show states if they are waiting for the webinar to start Okay So first thing I'm going to do is I'm going to input I'm going to get all of those props So let's grab that real quick Okay And let's also go ahead and dstructure them from here Let's zoom in a little bit more so you guys can see clearly And then I'm going to get the attendee hook So I'm going to use the use attend attendee store to get the attendee information from the store And if you remember we already built this right So I can get the attendee from here And then after that I'm going to create a couple states Okay So I'm going to create one for the show chat like this And let's go ahead and import use state And we also creating one for the client the call and the token in here Okay And this stream video client comes from the video react library So let's import that one as well And this is supposed to be a use client component but I know it's already inside the tree and that's why it's not throwing this error So I know I'm good to go but I'm just going to add that anyway Then the next thing is I'm going to create a connection status Okay so this is another state called connection status and it can only be of these types So connecting failed reconnecting connected and the default type is connecting Okay Finally I'm going to have one more state here for error message So I'm going to say error message and set error message And then we have to create a ref And this ref is going to help us store the initialized client So I'm going to say use ref And we're going to say client initialized Okay please follow with me So pause the video and type if you need to Okay so now let's create a use effect And let's import the use effect as well And inside this use effect we're going to pass in all of these values All that's coming in from the props So I'm going to say the following Okay API call ID attendee call and client And now let's refresh Okay no error Awesome And now inside this use effect we're going to do the following So first we're going to check if there's anything stored in here So is there any initialized client already If there is then we're just going to proceed That means return from here Okay But if not then we're going to create a function here called initialize client and we're going to invoke this function Okay And then after invoking we can also leave this later on But first let's go ahead and finish the implementation of this init function So please make sure this is an async function because we cannot make the call if it's not right And so the next thing I'm going to do is I'm going to set a try catch And inside the try catch I'm going to first set the connection string and set it to to continue or to connecting sorry And then I'm going to create a user object Okay So down here I'm going to create a user object And this user is not our Prisma user This is coming from get stream Okay So type user Where is this user Right here So what I'm going to do is I'm going to change this to type user like this Okay And now we can use that in here This is fine as well So now we're essentially checking if it's the attendee ID If it is the attendee we're going to put attendee ID If not we're going to just going to send guest And then for name the attendees name or we'll just put guest if there's nothing Okay And same thing for the image as well Uh this way we can show stuff in the chat Okay So after that down here we're going to create a get stream io token Okay We need this token so that we can assign it to the attendee and that way we can use that user token to create the stream video client and we can render that in here Okay So first thing we need to do is we're going to say user token equal get stream io token which is a serve action So let's go ahead and create the server action as well So open up your folder structure and in here I'm going to create stream stream io.typescript and this has to be a use server component file sorry And in here here's all we're going to do So get stream io token is an async function that requires the attendee So let's go ahead and bring this in We don't need this So let's remove this Okay And then inside this component sorry inside the server action we're going to have a try catch And inside the try block we're going to create that user request in here And I see this error here It says role is not needed H So I'm not quite sure why we are not supposed to pass the user role in here because it's kind of important right And it says it no longer exists on this user request And I looked at this as well and this does not have the user request stuff in here Uh the user role in here So what I'm going to do is I'm just going to remove it We'll see what we need to do Okay we'll see And I'm going to put a add role in here so I can get back to this if I need to And now we need to create this client So I'm going to essentially import this from stream client and or uh let me see if I actually have that Okay obviously we don't have it So I'm going to create a folder inside my libs folder I'm going to call this stream and inside that we're going to create this specific value So let's change this to stream as well Okay let's copy this And in here I'm going to create this typescript And now we can create that client So in here I'm going to say new stream client and this comes from node SDK and I'm going to pass in my API key and the stream secret Okay So now we have uh there we go So now we have oh I made a small error here This is stream like such And inside our folder structure this should also be named as stream Okay there we go Much better And that should solve this error for us What seems to be the issue here All right it was just TypeScript and I had to actually kind of delete the folder So something was wrong with that folder and I had just had to delete it and that fixed the error So now we have the stream client in here So what we're going to do now is we're going to upsert user That means if it does exist then update their status and if it does not if this user does not exist then we're going to create the user itself Okay So next we're just going to create this I think uh this So by default the token is valid for 1 hour So we're just going to create a 1 hour token I don't even know how the stream is still running Okay And then down here we're going to say get stream client Actually it's going to regenerate cuz we keep regenerating it Right So get streamclient generate user token And then now we have the token So we're going to pass in this data in order to create that token And then obviously we have to return that to the front end That's how that's the whole purpose of this get stream.io token And then here we're just going to console or return an error throw an error Now let's go back here and let's import this server action And now we have the user token ready to go So once we have the token I'm going to save it here So I'm going to create this call and I'm going to save the token in here After this is done we have to create that stream video client right So I'm going to say stream client new stream video client which comes from our video react SDK Um what seems to be the issue here Okay not entirely sure but I think it was just TypeScript So we have to create that client here and then we have to set up the connection status for all our listeners So I'm going to say dot on streamclient.on connection.changed changed and if it's online we're going to set the connection status to connected and reconnecting Now down here we're going to need to await streamclient dot connect user passing in the user token and then we have to start the call So I'm going to say call live stream and we're going to pass in the call ID and then finally I'm going to join this user to this call So I'm going to say 08 stream call.join join create true Next I have to set our client set the call and set the connection status So just update our states So I'm just going to do this And now I'm going to change it to connected instead And I also have to change our client initialized value to true Okay And why is this down here This should be up here There we go And that's pretty much it Now if there's an error down here I'm going to first console the error Then I'm going to set the connection status to failed and set the error message based on whatever error is in there Okay awesome We're almost done Now we have to call this So in init client is going to call that And the most important part is to return a cleanup function So inside the cleanup function we're going to return just like this And then inside here we're going to set const current call to call const client to client And then if these exist then we're going to say current call Then we're going to show a message here saying it's connected I mean it disconnected And then we're going to catch any errors from here Okay that's pretty much it Awesome Now down here we have to make sure that the attendee actually exists right So if there's no attendee then we're not going to show something So no attendee then then essentially we're going to show a message to register So I'm going to remove this and first make sure that the user is an attendee So no attendee Then I'm going to show a div And this div is going to have a div inside this with the following class names And then we're going to have an H2 paragraph and a button So guys the best way to type this out is just to watch the video So watch this video and watch it for a good chunk So maybe like 30 seconds at a time and then stop and then type it out Okay that's what I would do Actually I prefer that too I prefer watching a tutorial if I'm if I'm ever watching some sort of tutorial online And I like to gather information and then test my knowledge test my memory by pausing after a certain time And up until then all the knowledge that I have I need to apply it somewhere right So I'm going to apply it that way So I'm going to try to see if I can remember what I what I was trying to remember and I'm just what I just learned and I'm going to put it um all at once Also this is blocking thirdparty cookies That can cause an issue but okay that's fine No problem Next we're going to enhance the connection UI So down here after this div after this curly bracket hit enter And so I'm going to say if there's no client there's no call there's no token then we have to show something right So I'm going to return And in here we're going to return a div like this And this div is going to have the following class names And then inside this div we're going to have another div with the following class names And then we're going to check the connection status If this status is of type connecting then I'm going to return a React fragment with this design in here Okay So just give me one second So first to show you what it looks like if I refresh this it shows this awesome loading state right And that's pretty much it You can also add an animation on this We probably don't need this one Let's see Let's see what this looks like Okay that's better Or you could just have a straightforward uh animate on this as well I'm going to put both in here so it's easier for you to decide what you want Right So this is all we need to do So we're going to return a React fragment Okay And this React fragment is going to have a div That div is going to have another div and it's going to have animate spin on it right And then down we're going to have another div here And this is going to have a loader So if you don't want this you can remove this to have a minimal design and you can pass that into this So now if you refresh uh animate pulse animate spin We need animate spin There we go Very minimal right Much better Okay Then once that's done we have a paragraph here that just says connecting and a header on top of that And then down here we're going to show the span Okay So it's going to have some animations So I'm going to say animation delay like this And it's just essentially that loading stuff You don't really need it but I just added it in there so it looks nicer Right There you go So now after this section you're going to hit enter After where is this Oh so I removed I think I removed something guys Sorry about that So we have to check the connection status right So I removed it when I was putting this in here So remove this I'm going to put all of this Sorry put all of it into this if statement So this uh statement here that says if connection string is connecting then render this Okay So now if I refresh it's going to show and we're done Now what's next If it's reconnecting then we're going to show a different status a different icon So here I'm going to show a React fragment with div header paragraph div right And this div is going to have this design here that says reconnecting Kind of looks like a Wi-Fi right like a Wi-Fi icon And here I have the Wi-Fi off icon So obviously we're not going to see that But if something happens for some reason then we can show this next for failing If something failed right here we're going to show failed Okay And this uses the alert circle And so now if you refresh this obviously you're not going to be able to see that but it's just going to show the exact same thing but we're just going to show an error circle like an error icon And this looks like this And the message and a button for them to refresh the page Okay awesome Now if everything is successful this means they're going to watch the actual stream So down here we're going to render that component So I'm going to say render So return this stream video component with a client I'm going to return the stream call And this stream call comes from this file which is uh let me see if I can show you that right here Video React SDK not Node SDK Let me confirm guys Give me one second Yeah So make sure you're getting that from React SDK And then after that we need this live webinar view So we're going to grab that as well And there you go Awesome So I am a user I'm a viewer And I can see the count here Obviously this breakout room is set to true So that's why it's popping up on my screen and this is a really uh I'm really zoomed out right now but now you can see the text message and I can chat in here as well So just to show you the two-way connection if I put something in the chat box here it's almost instantaneous right And I can say "Where can I get Mochi?" And there's a two-way connection a two-way sync And it also shows the user that is connected and the user that's texting And this took us no time right We're already set with something that can scale to millions of users And we didn't even write any logic And it comes with the streaming functionality as well And I think there are so many other products that they have too Now the other important thing to keep in mind here is this book a call Okay I can't click on book a call here from the participants view only from the host view And don't worry if you see these four people here in production you're not going to see that because like I said strict mode is not going to fire and it's not going to create this weird error Okay but u this is real time So if I refresh it's still going to it's going to connect me and we're going to hold that status Okay All right guys Now this is the fun part So () the next thing you're going to do is you're going to open up OBS So just look up OBS And this is just a broadcasting software And the reason why you need this I think I already mentioned this is because if you were just streaming from your phone you can't create cutscenes transitions you can't maybe you I mean you probably can't even put your face here if you're doing it on your phone right You might want to have a different layout Imagine a presenter is presenting their screen and they want to have their face on the side and not block the you know presentation And so this makes it complicated if you're doing it through the phone right Because then you have to have a whiteboard So this is why OBS is a it's a completely free tool You can just go and install it for Windows And all you need is the settings to put in here So please pay attention because you might see some errors And if you do see some errors I'm going to show you how to fix that Okay So the first thing you want to do is download OBS and launch it Once you're done launching you want to go to the stream Now hopefully you did not close the stream itself Okay if you close the stream then uh you you might have lost access to this and so the way to get it is to click on explorer and then you can find the streams that you created in here Okay So you can click on the calls and you can click on the streams and you can access all of the information directly from here Okay Now if you did delete the stream or cancel it for some reason then I would suggest just go and create another live stream Okay this is how you can create kind of like a booth It's like a u it's a way to essentially start live streaming right It's the serverside uh SDK that allows you to send video send your stream data to Okay so create the live stream and then that should take you into this page and then you're going to get some keys Okay the two things you need is RTMP URL and RTMP stream key Now keep this in mind If you share this with someone else anyone can stream through your OBS okay So please be careful If you leak this RTMP URL anybody can stream using this So they can stream from any other platform and it'll appear as you So please be careful So you're going to copy this and you're going to paste it into your OBS And I'm going to show you exactly what you're going to do And by the way um if you're creating this for multiple different clients right maybe a slightly different use case uh slightly different architecture you'll have to just create a new URL for every user That's literally it Okay but for now let's just look at how to do this So click on settings You want to go to stream and in here you're going to paste the RTMP URL So I'm going to paste it in here And then for the stream key you're going to copy the RTMP stream key and you're going to paste it in here and click on okay All right Once you're done make sure obviously you have the same variables inside your environment file If you don't first spin up the server So spin up everything and then you're going to load up the page You might see a blank page at first Okay You might see a blank page So first spin that up refresh everything and then once you're done then you can go ahead and try to click start uh start streaming Okay so let's go ahead and click on start streaming And there we go Let's go So I just had to refresh the page and then the stream came And so that's u another challenge for you but I'm going to show you how you can do it Okay so I've already done the end stream functionality So you just have to wire up the start stream So to give you an example So if I click on stop streaming here boom done There's an event that fires But for the start streaming I haven't wired that up right So go ahead and maybe spend a few minutes and do this yourself Just uh try to see what I've done for stop streaming And that way you can start the stream So the cool part now is that you can have any any screen you want here right You can share your own desktop as well Let me see if I can show you that So imagine you have two screens here right One is to show your desktop and one is to show I mean there's no desktop in here yet but imagine you have one for your desktop and one for your stream If you click through them it will also update in here So we are streaming in real time and whatever you do in here will reflect in here as well So this way the marketer can communicate with their customers in the way they expect And also you can tweak the audio right You can right now there's Oh okay I'm hearing double voices So I'm going to turn that off But uh you have all the audio settings in here a mixer in here So there's a ton of stuff that you can do But there we go We're so close to the end of this application I'm super excited to see you guys take this and you know take this forward and build something awesome with this Okay so I'm going to make some quick changes here So please just pause and follow through step by step Okay so inside the attendance.typescript () where we're saying get webinar attendance in here we're going to hit enter and we're going to say presenter like this and just set this to true Okay so that's the first change and the next one was this to-do that we had here So I see this result type users equal attendances map and for each of them Okay So what we're going to do guys is created at can stay as well or attended at sorry not created at There we go Okay So we're going to add the stripe connect ID That's fine And then the call status is set to attendance user.all status That's fine And then we also have to pass in the created at which is going to be uh the values that what do we put here Okay there we go So just create it at put attendance user.created at and updated at as well Okay Uh now let's move on to the next changes So this revalidate path was not needed So we can just go ahead and remove that And down here we're also going to return the presenter So webinar.presenter like this And that should not impact our front end I assume So and if it does we'll fix that as well The next one is this server action guys So we're already taking in the attendee ID webinar ID and attended type Okay this is correct So we have a a try in here H Okay So just make sure you have the same thing that I have Okay So you want to have this same values here This is the server action for this attendee webinar ID And then this is a success response and the error response Next inside the webinar.typescript for the get webinar by presenter presenter ID We're getting the presenters ID as a string here But we also also need the webinar status Okay which is optional which is going to be a string So we have to I'm just going to quickly put a to-do to update front end as well Okay so I don't want to I don't want to mess this up And then down here we have a try catch Okay and we're directly making the server action to find many So what we're going to do here so after the try catch guys actually you're going to create a variable called let status filter and this is going to be of type the webinar status enum or undefined And then after this down here we're going to say we're going to use a switch case Okay and you're going to check the status if it's upcoming ended or by default We're going to do the following You're just essentially setting the value inside the status filter And then once that's done down here we have to also add the webinar status equal to status filter like this And this should be fine You don't have to change anything in here And now the next thing we're going to do is we're going to go into your webinars page.tsx right in here And inside this page we're actually going to accept some props Okay So I'm going to say type props equal to And this is going to give us a search param And the search param that we need in here is the webinar status So I'm just going to go ahead and say search param And this should return webinar status which is a string And this has to be a promise So I'm going to say p promise like this Okay And then we can end this right here So there we go Now we have the search params as well And then the next thing we need to do is we have to pass this in So down here after this I'm just going to say the webinar status that essentially comes from here So obviously we have to dstructure this and I've already taught you guys how to do this So after this we're going to hit enter and we're going to say const search sorry webinar status equal to search params Okay So we're just going to dstructure it from here and we need to say oh wait So now we'll get that value And this also needs to be imported And I know I told you guys this was a challenge but I'm also going to just go ahead and do this for you So right here for the all tabs we're actually going to change these So all upcoming and ended right We're just going to wrap this in that link so we can send that webinar status as a param Okay So I'm going to wrap this in a link the all text and I'm going to actually you might need to put this on top of this That's fine I'm going to leave that up to you okay But because I think this is going to get underlined but uh this needs the most important part is we need to send them to webinars with the search param webinar status set to all Same thing here This is going to be upcoming and this one is going to be ended Okay awesome Now down here we need to render out that content right So for each different tab what are we going to show here And next I'm going to create tab content for the upcoming tab So please do the same thing as well And for each of them we're going to check the webinars We're going to check the length And then we're going to render these down here Okay And then we also have to do the same thing for ended So let's go ahead and do that as well So after this tabs hit enter And this is for value ended Okay So you're just going to show the same things in here And obviously you can do more filtering and check the date and time and all that kind of stuff I'm just going to leave that up to you And then the other thing that we're going to add here guys is this button here called ED endstream So inside the live webinar page this one right here live webinar view.tsx Right here you're going to create a button and you're going to create a handle end stream The reason is I want to show you how to end a stream using a button in here Okay And maybe later on I know I said I'm going to put this as part of the premium codebase only but if we have some time maybe I'll focus on uh improving this or maybe add adding some more features right But for now I just want to show you this is how you can end the stream here So pass in a loading state and show end stream here So now the button shows up at the bottom Okay And if you look at this all we're doing here is we're changing the webinar status passing in the ID and we're passing in ended And then everything else is straightforward If there's no response throw error router refresh show success console toast set loading false That's it Okay So that's the other thing that you can change on this page And one more thing we can do in here is when the user's subscription comes through or their payment comes through we can essentially update their status But we got to keep in mind that when this web hook is coming through it has to come through only for connected accounts So keep that in mind So what I'm going to do in here guys is I'm just going to put something in here Now I haven't tested this obviously so I don't know if this works but I'm just looking at it and I can tell that this is where the Stripe connected account events are going to come through Now remember I told you that in production you might need to use a different web hook Okay so that's up to you But in here you can listen to the metadata So you can essentially check okay is this a connected account payment or a subscription If so you can do whatever you want in here And so since the payment is coming through a subscription uh sorry a payment from their essentially from the host right it's a connected account payment we can look at the checkout session so we can look at this event and if it says checkout session completed or I don't know what other type of okay so it says huh interesting okay never mind sorry about that so what I did was I forgot to put this curly bracket and ah all right so all I'm going to do here is first check if event metadata exists if it does then I'll first check if there's an attendee ID and if there is an attendee ID then I'm going to move this switch statement inside this uh this if statement okay so now it's going to update their attendance type to convert it cool right so this is a nice way to keep track of the leads as well now obviously this was supposed to be part of the premium codebase but I want to help you guys out and hopefully this teaches you how to expand on the application in the future Okay And I'm also going to make a few changes to the user info card And there you go Now it looks slightly better Okay You can also extend this and uh maybe I'll extend it inside the premium codebase So there is one architectural flaw inside this application and I came to know about this as I was speaking and so I want for you to try to pause this video and try to guess what mistake did we make and is there anything that we can do to fix it Okay hopefully you get the right answer If not no worries I'm going to explain Obviously there's so many things that could go wrong and could go right but I just want for you to slowly think like a SAS developer and that way you debug better Okay welcome back Hopefully you got the right answer Well the problem right now is that the way we're using get stream is that a user would have to open up a stream inside get stream and then they would need to get all of the variables and then they would need to go into their OBS and paste it in there And so you see the problem here right That does not sound right It doesn't sound like a smooth workflow Now marketers are they do have some technical expertise and so they're okay with all this stuff but we don't want to do that because the whole purpose of it is so that it's easier for them We we're here to help them Right So I know I said that I will add this as a bonus for you guys or probably in the pro premium uh premium codebase but I'm actually going to do it right now So this is what we need to address Okay So how are we going to fix this So what we need to do is to find a way to automatically create these webinars That's step number one And then step number two is we have to use the users ID or their attendee ID itself in order to connect into this live stream to get them to get the attendees their keys to watch the live stream And the other thing that we need to do is we need to use the user's ID that means the uh the host's ID to put that into getstream so that getstream knows what to do with that ID That means how do I redirect this user Are they a the creator themselves the host themselves or they're just a guest So that's the challenge that we got to solve right now Okay And so let's go ahead and make those changes It's going to take some time Just please bear with me and follow through pause this video and just keep going through with me step by step So the first thing that I'm going to be doing in here which is actually not part of this feature update is you're going to go into your config file next.typescript and we're going to add this compiler thing here Okay so it's called compiler and you're going to say remove console So in production environments we usually hide the console So this is important So go ahead and turn this on Now this is an important skill because I'm going to show you how to track back up the tree That way you can see where you need to make changes across the app So I think we can start from the live webinar view because that is the root of the app That means it's the most nested And so if there's any types or any props that we need to pass into it that way we can catch that because now we can throw an error Okay a TypeScript error So first thing you're going to do is you're going to open up app protected routes You're going to go into webinar Actually let's go into the live route So public live webinar live webinar ID And then you want to go into the page And here we have this I'm just going to click into this And then I'm going to scroll down here Okay I see the live stream state So I'm going to click into this component as well And now I have the custom live stream player So I'm going to click on this one too And this component here live webinar view This is what our hosts are going to essentially see right Or I mean either one Both are the same but we're just going to change it based on who's watching So the first thing that I'm going to do in here is I'm going to bring in another prop And this one is called call Okay And its type is call as well And this type actually comes from hello There we go And this type is going to come from stream chat Okay So go ahead and import the call Sorry guys this does not come from stream chat I don't know why it actually gave me that So what we're going to do is we're going to scroll up here and you're going to find the React SDK Okay Import type call from here All right Awesome So now you have this call prop being passed in here Next go ahead and just dstructure this And now we can get the call from here And then we're going to search for our end stream Okay So one of the other bugs that we were also facing is that when the user essentially tries to end the stream from the UI right What's happening is the call is actually not stopping on get stream and so that's going to continue to run So we need to turn that off as well So the first thing we're going to do is now that we have the call object here inside this try catch we're going to say calls stop live and we're going to in invoke that and inside it we're going to pass in some options and we're going to say continue recording We're going to set that to false Okay like this Awesome So this will stop the live call and then we have to end the call itself So callend call So we're making a ton of improvements here which is going to drastically in improve the user experience Okay So please keep keep pushing through So let's go ahead and save this And then after that we're going to have this change webinar status So let's just take a look if we need to do something in here Okay So once this is done we're going to show a success message right here And instead of doing router.refresh refresh We could just send the user to a different page right So what I'm going to do here is I'm going to remove router.refresh and I'm going to say router.push after this Okay So first we'll show the message and then we'll push the user Then the next thing we need to do is inside this use effect So we have a use effect in here that essentially fires right So we have to make sure that we're also handling the stream start using that RT MP stuff that we got right all those credentials So we have to set that up as well So what I'm going to do in here actually I'm going to create another use effect here cuz this one is doing something else So let's just separate the logic So use effect like this And I'm just going to open this for now and then delete everything inside here And now inside this use effect I'm going to set the following stuff So please follow with me So first we need the call as a dependency So let's go ahead and grab that And then inside this we're going to say call dot on We're going to invoke this And here are some different events that we have How awesome is this Right So now you can do whatever you want So I'm going to listen for the call RTMP broadcast started So let me search for this So make sure you select this one And then you're going to pass in a callback function like this And inside the callback function we're going to first just show a message saying stream started or webinar started whatever you like And we also have to do router.refresh So now previously there was this error where when the user tried to uh when the user essentially started the stream the viewers the participants will have to refresh the screen which is so stupid we don't want that instead we can listen to this event and we can fire that okay awesome so the next one is if something failed what do we do so something failed I'm just going to say call dot on and for this one please pause and type okay so on and we're handling the stream failure I'm going to say call.rtmp broadcast failed Okay And then I'm going to just show an error message a toast message like this All right Awesome Okay So now I completed this use effect Now what I'm going to do here is I'm going to hit enter and I'm going to create another use effect And this one is going to help us start the recording Now this is actually a bonus feature So I'm not going to put it in here but I'm just going to create this use effect And I'm going to put a note in here So start recording Okay So I'm just going to call this bonus feature start recording So this will only be available for people who purchase the code based in the description Okay Now regardless it doesn't really matter All you have to do is invoke the recording for the call and then you also have to handle that So you have to also fetch that details Fetch those details and show it inside here Okay So for now I'm just going to skip over this but it's just a bonus feature So those of you who purchase the codebase you'll also get this a part of that Next at the bottom here we have this is host right We also want to have a button where now they can get all of those R&TP details directly from stream uh directly from uh from spotlight So now they don't have to go into obviously into uh into get stream and then get all those details This is com This is amazing because now we have a very I guess unique It's not I mean it is a unique product but now it's more like a unique experience So no one has to hop back and forth between too many platforms Okay So what we're going to do in here is after this section we have this div here Right So I'm going to hit enter and I'm going to create another button So I'm going to say button like this And we're going to open up this button And inside this button I'm going to essentially pass in on click And I'm going to set actually sorry I clicked something on accident So I'm going to say on click And sorry this is not handle So this is just going to be an error function that essentially sets OBS dialogue open This is another uh helper function we're going to create in just a second And then in here we're going to need to also pass in some variants I'm just going to say variant equal outline like this and class like this And now here I'm going to say get OBS credentials Okay So when the user clicks on this button we're going to show that dialogue Now if you try to open the webinar you are going to see a ton of errors because we're not passing this stuff in right And we also have to strip out some of the API keys So that way we're giving the user their own keys because right now what we're doing is we're using one key which is stupid right We're using one key here which doesn't really work And so now we're going to give the user the ability to create these keys so they can get the stream key and the RMTP URL and paste that into their application right into their OBS They can use anything they want by the way You just need the stream key That's pretty much it So what's next Let me take a look at any other changes that are due on this page Okay So the next thing that I'm going to add in here is text primary on this Okay So I'm going to say text primary like this And now we have some chat some colors for the chat as well Now go ahead and scroll down here Notice we have this dialogue right we have to have another dialogue now so that we can open up the uh the OBS dialogue Okay So what I'm going to do is I'm going to hit enter here and I'm going to say OBS dialogue if this is true And obviously this is going to be a state We're going to create that in just a second And we also have some values in here So I'm just going to shrink this so you don't get overwhelmed And we're going to get to this in just a second So copy this uh copy this value here and scroll up top all the way to the top of the file And in here I'm going to create Whoops sorry guys And in here I'm going to create this state So I'm going to say set just like this and a state like this And now let's go back down And now we can complete this component So this is very similar to this dialog box that we just created So what you're going to do is go ahead and open up your folder structure Copy this title And inside this common folder you're going to create another folder You're going to call this OBS dialog box.tsx And then inside this you're going to create a tsrefce And you're going to change this And we're also going to need to pass in these props Okay So go ahead and accept these props You need the open on open the RT It's Oh it's RTMP I've been calling it the other way around So RTMP URL and the stream key Okay And then let's go back here and quickly import this Okay And set OBS dialogue box Okay that's fine No worries So the next thing we need to do is inside this we're going to click into this component and let's go ahead and just set this up right now Okay so don't worry if you can't see anything in the browser It's fine This happens sometimes You just got to keep building because we know what's going to happen right We just need to go up the chart up the tree so that way we solve all the bugs and we don't leave any loopholes So the first thing we're going to do is I'm just going to render out a dialogue So in here go ahead and say dialogue like this And I'm going to open up this dialogue And I'm going to import it as well And then we're going to have the dialog content with a dial dialog header You guys know the drill So I'm just going to bring this and import all of these in Okay And inside this header I'm going to have the title called OB OBS streaming credentials And then after this we're going to need to have a div So hit enter after header I'm going to create a div like this And inside this div we're going to create another div that looks like this And inside this div I'm going to have a label and a button Okay So go ahead pause the screen and type the following So you need the label here and you're going to have an input field And this input field is going to have the value set to that URL but it's going to be a read only string Okay And then we're going to have some class names and and the button down here to copy this string So now let's go ahead and create this copy to clipboard You guys have already done this a million times so uh this copy to clipboard stuff shouldn't be too new Just scroll up top and you're going to say copy to clipboard It's an async function And we're also going to get this toast here So go ahead and import toast And all we have to do in here is we're going to do a 08 navigator.clipboard.ext And we're going to pass in the text and just show a toast and an error That's it Make it very simple Now let's go back down So one two hit enter You're going to create a div here and hit enter inside this Next you need a you need a label So the label we're going to use obviously is a shadian label So make sure I use the same label here too Okay there we go And you're going to say stream key Okay And after this you're going to bring in the div for you're going to bring in the button and you're going to say variant size class name and the on click And now we're going to pass in stream key with this key Okay And the same copy button Nothing nothing different here Then after this button after this div hit enter We're going to create a paragraph And this also needs one more class which is margin top of one Uh foreground margin top of one like this And inside this paragraph I'm just going to say this is your personal stream key Keep it safe and do not share it with anyone Awesome Hey AI is doing everything for me Love this So that's it That's all we have to do So this is the dialogue that's going to show up It's going to look very straightforward It's just going to have two fields that so that they can copy and paste it into their OBS Now I believe that the component above the live webinar view is the custom live view right This custom live stream So click on this component and let's go ahead and make the changes that are required inside this component now So right here you notice we're creating this call right And we're storing a state here And we have something called my call.join join here So what you're going to do guys is you're going to remove all of this Remove this because we're using a new structure now And just keep the set call here Okay And uh this if statement you can remove this one as well So let me go ahead and remove this curly bracket for now And then we'll get back to that in a second So if this is cool set call Next we're going to say my call Now where does this come from This is the same my call that we're creating Uh actually okay Do I I hope we don't need another use effect Okay this should be fine So we're going to say my call And inside this we're going to say dot uh sorry guys inside the join we're going to pass in some values We're going to say create and set this to true And then after this we're going to say catch and uh maybe a dot thin first So thin and if this is successful then I'm going to pass in another call back So let's remove this here Going to pass in another call back that sets the call to my call And then down here we're also going to have another function So after set call we're going to have another call back So put a comma here You can pass in one more callback function So this will fire in a row And then that's pretty much it Okay And then down here we're going to have the return statement And I think you don't have to leave this here This should be fine I'm just going to comment it out in here guys Okay If you need it you can put it in there And I'm just going to have the set call and set this to undefined Awesome Now remember down here you were actually setting the user ID to our variables right But that's not the case because it's going to be different for the presenter and for the person who's watching the attendee So we're going to remove this now and we're going to call this webinar presenter ID Okay just like this Awesome And now finally we have to pass in our call So let's go ahead and do that as well And this should solve all your errors on this page Great job Now you're still going to see some errors That's fine No worries cuz we still have to make some changes So the next thing you're going to do is you're going to open up your folder structure or actually we could go into directly from here So live stream uh live stream state open up this component and we're going to go up here and the first thing we're going to do is we're going to remove this token because we no longer need it Okay And the token is going to be replaced with a host token That's the new change here Okay So in order to do that I'm going to say const and I'm going to say host token and set host token like this and let's import the state as well And for now it can be string or null I'm just going to set it to null Okay nice Now in here we need to establish and set the host token So this is a very very important part So I'm just going to do something in here so I can get this and let's go ahead and import use effect So let's remove the dependency here We only need API key API key and we need the webinar itself So let's go ahead and bring those two And now inside this the first thing we're going to do is we're going to create a function called init Okay So I'm going to say const init equal to an arrow function like this And here I'm just going to set this to an async function And let's remove this for a second And then down here we need to invoke this function Let me zoom in a little bit more so you guys can see clearly Okay So after this this is going to need to be inside a try catch obviously So all the stuff inside here So I'm going to say try catch And inside this try catch the first thing we need to do is get a token for the host So I'm going to say const token equal to await get token for host And this is a new server action So let's go ahead and create that So copy this name open up your folder structure and click on your stream.io file And we also have to do a bunch of stuff in here We'll get to that in just a second But the first thing we're going to do is we're going to create this And I'm going to remove whatever is in here And from the params we actually need uh from the parameters we need three values So I'm going to grab that as well And inside this we're going to do a simple try catch Okay So inside this go ahead and say try catch like this So try and inside the try block let me also make sure I close this bracket here Okay Inside the try block we're going to essentially create the new user request It's going to have these values Okay So just go ahead and put these values Now I know rule is screaming here So I'm just going to keep it We'll see if we need to change this And then I'm also going to have the image here And then I'm going to create the getstreamclient.upsert user We're going to push this new user Create a validity token And then we're going to establish that token itself So generate the token And this time we're going to pass in the user's ID Okay So pass in the user's ID And down here I'm also returning the token Okay And next inside the catch block I'm going to say console error and throw an error if anything anything took place here Okay awesome Now this one right here the get stream IO token we're going to need to make some changes inside this So first of all we have this add rule I see this to-do here So okay I found out the reason why this is from the wrong SDK I should not make these errors man So in here we're going to import this from node SDK Okay And now it's going to ask for ro So now we can say ro equal user Sorry about that guys So thank god we came back to this So now we're going to keep this as is Okay But we need to change this value here And attendee.name Actually I think this is fine too Okay So go ahead pause the screen and make sure you have exactly what I have in the screen Okay so once you're done with this make sure you're returning the token So I think this is good to go So now we got to add this roller uh this ro as well And let me cross check the errors as well Okay and this looks good to go Now I'm also going to create some other function serve actions in here just to make our life easier because we're going to need to come to this file again and I don't want to miss out anything So first I'm going to say const So export const create and start stream equal to an async error function And I'm going to do this as well And inside this try catch first I'm going to say const check webinar equal to await prisma client webeinarfind many We're going to invoke this And essentially what we're doing in here guys is we're now giving the user the ability to create the webinar itself directly into stream and they can also start the stream from here Okay So two different things that we did not have in the past which is going to make a huge improvement to the SAS So first thing is I don't want webinar ID in here I'm just going to get the webinar itself So I'm going to say webinar from Prisma client And down here we're going to essentially get this webinar where it is this ID and where it is live Okay Then after that you want to hit enter and you want to check the length of this I'm going to check if the webinar So I made a spelling error here So webinar.length is greater than zero We're gonna throw an error Okay That means you only have one live stream that can run at a time So this is another feature that we're adding in here So this was supposed to be a premium feature only for um you know only for people who purchase the codebase but it's also going to be in here Okay So you're pretty much getting all of this So this is essentially preventing the user from only creating one webinar at a time What's next So the next thing is after this hit enter here And now we're going to create that call So I'm going to say const call equal get stream client Okay getstreamclient dot video call We're going to pass in a different key here So I'm going to say live stream and we're going to pass in the webinar ID Okay And now this call.st start needs to go I think that was added but automatically now after this I'm going to say await call.get or create We're going to invoke this and in here we're going to pass in all the important data So please pause the screen and type this out Okay So we're going to pass in the data created by the webinar presenter ID presenter ID and the members are going to be first obviously the host themselves So this is how get stream is going to know what to do with the with the with the key when we're essentially passing in the key for that host Okay It'll automatically detect it They do all of this under the hood So what's next after this You want to hit enter You're going to say call.go live You're going to invoke this Boom We're done here And now we need to obviously start recording And this is another premium feature So we will not be adding that in here Okay Now the next thing that I'm going to do in here is I'm going to we don't need this return call Actually uh we can remove this I'm just going to do console.log And I'm just going to say stream is successfully started And we're going to show an error message in here as well and throw this error Great job Now the next one is the bonus that I was talking about which is the recording feature So now you need to fetch these videos right So I'm going to put a to-do for you So I'm going to say premium feature Okay So you can essentially go in here and add it yourself Or if you grab the codebase not only is it going to support us it's also going to give you all these awesome new features Okay So in here you need to make a call to get the recording Okay this is not needed for this application Like it's not in scope of the application and that's the only reason why it's a premium feature Okay so technically speaking with what you're watching on this with whatever you're watching right now this is more than enough just with this itself you can start Okay this is just additional stuff to help that extra 1% of the people who are you know also supporting us and at the same time they want to be one step ahead of the game Okay that's pretty much it So that's it We're done with these the server actions that we need in here So I'm going to go back into this component which is a live stream state and let's go ahead and import the get token for the host serve action So this is going to need first obviously the presenter's ID the name and their image So I'm just going to pass it in here And then after this down here I'm going to pass in the host user So I'm going to create the host user So I'm going to say const host user is of this type stream user And these are the properties on it So I'm going to create that as well And now we need to create that stream video client So I'm going to say stream video client like this Pass in the API key And notice this API key is coming from the props But obviously we're going to change this So I'll show you what you need to do with this Okay just give me one second And also please delete this host user We don't need this host user anymore Okay Um and I see it's screaming at me in here as well So let me fix this too So change this one here And you're just going to change it to a new client because we're creating a new client for this specific user Okay And token is not needed like I said So let's go ahead and remove that as well Okay No more errors Nice Let's go down here So now we're saying stream client equal to this new client here And now we have to set the client and we have to set the host token But first I'm going to set the host token and then I'm going to set the client Okay that's pretty much it Now let's see what else So we have to consume this So we're going to go ahead and consume this too So down here we have to check So I'm going to say if there is no client or no host token return null Okay show an error message if you'd like but this is good to go And now I'm going to replace this with a host token That's pretty much it So now this is created with this new token here Now the next thing we need to do is click on the render webinar component right here And inside this first thing was we're going to go up top here and we're going to remove these because now we're using the new keys and the new tokens Right So let's remove that And instead you're going to provide another value here another prop here called recording which needs the stream uh stream calling Where is this coming from Okay we got to create this So just give me one second So copy this name and you're going to go into your libs type and at the bottom you're essentially going to say the following So we're going to say stream call recording like this needs file name URL uh start time end time and session ID So when you're building the recording feature please make sure to use this type here Okay Next go ahead and scroll down here You're going to find a use effect Just keep going past that And now you're going to find So we have this webinar component And now we're going to make some big changes here So please please just follow through with me So I know you're going to hate me but just go ahead and delete this okay Cuz there's so many things that we need to add in here Um and it's going to cause a lot of problems for you and I don't want that So let's go step by step okay And the new version is much much simpler So just delete whatever you find in the return statement and let's go ahead and build this once more So the first thing you're going to do is once you remove everything from here is you're going to create so let's remove this and you're going to create a react fragment Okay So let's create this react fragment like this And inside this react fragment we're going to make some checks Okay So first we're going to say if the webinar status is live then we'll do something in here Else we'll do something else in here Okay this is the easiest way to do this Just first build this out and then change everything So now if this is true what are we going to do So let's remove this state here and we're going to say return a React fragment Oh it does not want me Okay Hello react dot Okay like this It just keeps tabbing It doesn't let me even hit enter Uh now it put it in there Okay that's why it wasn't let me letting me do that So if this is true then inside this first we're going to check if the user if the user is the presenter Okay So if it's live check if they are presenter live check if they are presenter So I'm going to say if it is true then we're going to do something here Else we'll do something else in here Okay just like this Now what are we going to do if this is true So if it is the presenter themselves then we're going to say live stream state We're going to pass an API key webinar call ID this time and the user Okay so make sure you add that Now what if it's not this case Then we have to check if it is attendee So is it the attendee If it is then we'll do something else here If not we'll do something else in here So if it's the attendee you guys know which component we have to render It's the participant component but this time we're passing in these new keys Okay what are these errors Okay that's fine And after that we're uh also yeah we also need to make some changes to participant So we'll get to that in just a second But this is all you need to pass in for now Okay And then next if this is false right So if it's not an attendee then we're going to just return the webinar state like this And uh obviously we're passing in the current user in here Now after this react fragment we have the this section here So let's go ahead and complete this part So now what if it is canled Well if it is canceled we're going to make a check first So we're going to say hey if this is canled here right then I want you to do something here If not something here So what do we do if it's canled I'm just going to return a div that says the webinar is canled like this Okay So div div H3 paragraph So please pause and type this out Next at the bottom here our final if statement is if this is essentially ended So if the webinar itself has ended then we're going to render out that recording URL So this is up to you right So if you guys purchase the codebase it will be a part of it But like I said it doesn't matter right It absolutely does not matter So just to make your life easier I'm also going to show you what this looks like right So if it's ended here then you're going to essentially do something here or do something else in here So if this is ended then you're going to essentially wrap this section So all of this you're going to wrap it inside an aspect ratio Okay If you don't know what that is look it up on Shatsen Okay Uh create an aspect ratio and then just render out a simple video component and pass in the links And same thing for this part too So here I'm just going to say here's the recording Okay So you have to also make a check to see if the URL exists All right Or else you're going to or else you're going to have an error on that page And then here I'm just going to say the webinar has ended like this Okay That's pretty much it for this page And at the bottom here so what you want to do here guys is right here we're checking for this right So if you're checking for uh so this would be incorrect So what I'm going to do here actually give me one second Right So in here we're going to change this part So let's remove this Or that's fine We can keep that in there So what we're going to do here instead is we're going to check recording dot URL Okay So if this exist So if this does exist then do something here Let's do something here So this makes more sense to me Okay And this has to be wrapped inside the curly bracket because it's JavaScript And let's remove this And let's remove this part as well Okay Okay There we go So sorry I made a small er error there So I'm just going to render this out Right So if the recording URL exists here So please be careful as you're typing this Don't remove any of these brackets Then you're going to have a lot of trouble Okay So if it's ended do this Right So if it's ended we're going to check is this true If this is true then do something here Else do something here That's all I'm doing And I already rendered out this video component You can go ahead and tweak it out if you want as much as you need Okay And uh or for now actually because I don't have all the other stuff set up I don't want any errors I'm just going to say this is the video Okay That's pretty much it And then after that down here I'm going to also just show the title and say this webinar has ended Now at the bottom here we have one more final if statement Right So if everything has uh is not true then we're going to render out the webinar upcoming state with the webinar and the current user inside this That's pretty much it Okay So this is actually much simpler than the previous one cuz that was just nested and nested It was just really ugly So this is so much better Now the next thing that we're going to do is click on participant.tsx and we're going to make some changes in here as well So just go ahead and scroll up top Okay so this is why we made the er the changes from the from the inside out because now you can see all the errors and you can go ahead and tweak all of them right If you did it the other way you wouldn't know where to pass what So the first thing I want to do in here is remove call ID Okay So if you remove it from here you also have to remove it from here So always remove the type first Okay So now we should have this uh call Actually we could use the actually sorry guys Let's keep the call ID in here Sorry for that mistake And then we're going to scroll down here to the first use effect Okay Scroll down till you find its dependency array And I'm going to replace its dependency array with a couple more values Okay Okay So please change this to whatever you see on the screen It's a pretty much the same thing We're just adding some newer values So pause and type this out Then you're going to scroll down here to live webinar view and you're going to add the call here Okay So you're going to hit enter and you're going to pass in that call Awesome So this is done Now let's move on to the next one Now go ahead open up your folder structure and you're going to click on the webinar upcoming state and let's just make sure that there's no more changes needed in here as well Okay so there's one thing we need to do in here So when the user starts the stream we have to create and start the stream remember So what we're going to do here is inside this try catch I'm going to essentially say if there is no current user So if no current user that's coming in from here then there's no ID then throw an error Okay And if everything looks good then we're going to await create and start stream We're going to invoke this and pass in the webinar itself And then finally we can show an error message here All right And now we're going to scroll down to the bottom to make sure everything else looks good All right just a few more changes We're almost there So sorry for this architectural flaw It was just my bad I probably should have thought about this So I mean this is I guess the closest you'll get to see me do everything you know manually right And this this happens all the time This is not just uh I'm I'm not special okay like sometimes I have to go through this and I'll fix it now and sometimes I won't and that's totally fine This is just part of the game You want to be a developer you got to go through all the man I promise you It's the worst thing ever but it's also awesome once you're completed So first thing we're going to do is we're going to go to the page.tsx So live webinar Let's shrink all of this So live webinar page.tsx right here And inside this obviously the error is pretty obvious right You know exactly what you need to do So you're going to go in here and now we don't need the stream token and stream call ID because we're using the users information in order to do all this stuff right So let's go ahead and remove this And now for this part we can remove the token because we're creating a host token And we can remove the call ID as well And we have to provide the recording data if it exists Okay And this is incorrect Let me go ahead and fix this So I'm going to say recording dot data or null like this And obviously we have to get this data as well So I'm going to show you where we can get that from So scroll up here and you're going to say let this is not a client component This is a server component So we can create variables like this right So we're going to say recording equal to and this is going to be null for now like this And then down here we're going to say if webinar webinar status is equal to ended So let's bring this in Okay So if this is ended then we're going to get the stream recording Okay So this is the that other server action that I was talking about So you would essentially have to get the ser get the data from here So get the stream recording and then you'll have to pass it in And now we also need to get this webinar ID So what I'm going to do right here guys is I'm just going to comment this out for now And in here we also need to get that webinar data So I'm going to say const webinar data equal to08 get webinar by ID We're going to invoke this Okay And in here we need to pass in the live webinar ID And this is coming from this place right here And now we have this data So the webinar ID like this And it's saying it's block scoped Oh we were doing this already down here So we just needed to move this up here Sorry about that And let me close this Awesome And now down here I'm just going to remove this for now But when you do that that recording feature you can essentially pass that in here Okay awesome Now let me go ahead and take a quick look at everything else that we need to complete And let's complete that one as well So go into your libs folder and you want to open up the stream video client Where is this So it should be in here So stream video client And make sure that you have the same thing that I'm about to paste Okay So make sure you have this exact same thing as well because I want to make sure that you're passing in the right values in here All right And now for the moment of truth Let's go ahead and click on one of these webinars And there you go It shows my face Damn that's a that's a crazy display picture man I've never changed this I've used the same picture guys Okay I'm going to shrink this real quick And let's also zoom out a little bit more Okay And now you can see the button here right You can see the get OBS uh credential button Let me expand this Right you can see this button right here And when you click on this button it's going to show this popup with all the data Looks like I missed one part here I want to make that stream key a password key So let me go into the dialogue and change that real quick Okay there we go So just go into the OBS dialog component and just change this to type password That's all you need to do And now you can copy this and you can directly paste it inside your OBS We just small I mean small changes made such a big impact right So that's why I wanted to do this for you guys I didn't want to just put that as part of you know premium uh stuff So the stuff that's in the premium uh codebase is not a requirement but it's just one step ahead of the game That's pretty much it Okay And you'll also get some extra code comments and obviously the license That's very important And you also get you know everything else that's coming with it right So let's let's quickly try test this out and let's see what happens Okay And before I do that I also want to paste some custom styles in here Okay This took me a long time So I just pasted some styles in there And uh this is going to help us pretty much redesign the uh the chat bots uh the chat box Okay So now you can see me there and let's go ahead and test this out and see what happens All right so everything is working as expected There's just one problem The refresh is not working So I'm going to go ahead and see what I can do to fix that refresh cuz it's pretty important Okay you need you need all of your users to uh Well I think let me uh let me give this a shot Just give me one second guys All right So now we have two different type of uh windows open This one is me the host and this is someone who's visiting this page So it's the same page same exact thing And the webinar has just started cuz I just reset the timer and all that kind of stuff So the webinar has just started and I also have my stream turned off Okay So let's go ahead and start the webinar Now I am the host right So if I start the webinar let's see what happens here Okay so it takes me in here And the reason why this didn't take the user in here is because this person is not registered already Okay so that is one challenger So let's see what I can do Okay so I'm going to go ahead and register for the webinar And boom Now I'm directly inside this right But technically speaking if this person just entered then uh we probably we'll probably have to put them in the waiting room right I mean they were they should be in the waiting room but uh because we already started it Okay let me do this once more Give me one second Okay so the webinar just started I'm going to start the webinar Okay so this refresh is the only thing that's not firing right So that is one problem But we got it I want to show you one thing right Take a look at this So if I try to join uh let's refresh this page Boom It takes me in there because we're right now this is technically the waiting room right So that user uh will need a refresh on their end but that's that's fine because I've already done the refresh for ending the stream So I'm going to show you what that looks like But first let's test this out right Let's see what this actually looks like So I'm going to click on get OBS credentials We're going to copy this stuff I'm going to go into settings here and we're going to click on stream We're going to paste this in here And then we also need this ID So I'm going to paste this ID in here as well Click on okay And then I'm going to close this And now I'm going to start streaming Okay And let's take a look All right Let's just give that a second Okay Okay So it looks like it's not it's not spinning up that event because I I know it is streaming So if I refresh the page it's going to work 100% Guaranteed right Yeah Guaranteed it's going to work And the messaging message yo this works too right So that's the one thing we got to fix And the endstream works perfectly well Like let me show you right or before that if I click on book a call you see boom the CTA also shows and if I click on end stream it ends everywhere So this does work it's just that I have to figure out what I need to put to essentially solve that problem And also one more thing if the user tries to visit this page when the thing is done we're just going to show webinar has ended Okay so that's a challenge I'm going to go ahead take a break right now and then I'll get back to solving that uh shortly All right guys So after countless hours of debugging I finally found a solution Okay so it turns out that because we're using OBS So let me first show you something here right So we had this section Oh my god I wrote so much debugging code So in here we have this section here where we had this use effect And I was assuming that this event would fire but this RTMP event is for something else and not for this one Okay So it's not firing here So there's two options One is we can manually fire the event which means we can essentially create a channel uh sorry not channel there's another event here It's called call.custom event Okay So you can send a custom event directly on the call itself which is another option Now I did that method and obviously when you listen so you do call.on and you listen to that custom type it's going to show up in here But the problem is because this could lead to some performance issues Instead we're going to use the chat window to fire the event This is much better and much more performant because this is using uh you know less of a strain compared to the call events Okay So what I did was inside this use effect So first of all go ahead and delete this We don't we don't need this use effect anymore It's pretty much useless So get out of my face Awesome And you can use this one to put your recording if you like Okay So here I'm going to say if event type is equal to start live This is a custom event that I'm going to fire just like this one Okay So anything that comes through channel.on is coming through the messaging API the messaging channel uh the web hooks I guess So what I did here was I said if this is like this then reload Okay And this only fires once So it's really really efficient And you can tell it only fires once because when you click on the modal here to to book a call CTA it shows once right It doesn't spam Um and I also checked that and it's pretty good here So that works Now all we have to do to fire the event is first I scroll down here So please do this with me okay Scroll down here and you're going to find a button here okay Called get OBS right And so what you need to do is you just need to create one more button Just create one more button and call it go live And then on click you're just going to say await channel.endevent send event type and just send this event That's all you have to do So you have real-time connection You could literally use this and do real-time connections as well right Real time socket uh connections messaging You can do so many things with this channel event handler So that's pretty much it So that's all we had to do So let me go ahead and show you that this actually refreshes when the user starts Okay So now we have this two format way So first the user has to turn on the stream inside OBS and that's something we just can't control They have to do that right So turn on the stream in OBS and when they're prepared they're ready to go They go here and just click on go live That's the process So just to show you what this looks like right now this is the host and this is a attendee Okay So I'm going to turn on my stream here I've already put all the stream keys and stuff like that So I'm going to turn on the stream And now obviously because stream IO get stream.io is not going to send us that event We can't fire any web hook to refresh But what we can do is we what we can do is we can fire this So if the host is ready to go they're prepared They're set They have to click on go live And once they do that it's going to refresh and everybody is going to connect to the live stream Awesome Okay And if you're wondering how I made this design upgrade if you look inside the codebase you actually have to import the stylesheet and we totally forgot about that So let me show you where to do that right So right here import this stylesheet inside your live webinar view component Okay that's it So that's pretty much it guys Now the cool thing here is we don't have to care about stopping the stream because when you stop the stream inside OBS it automatically shuts down the stream And this is because uh stream io getstream io does it under the hood Okay it does it under the hood So we don't have to handle it But when it comes to creating the stream we can't actually you know do that unfortunately Now the next thing is u what happens when this user stops the stream So if they end the stream it's going to do this Boom Done And it's going to show this message So for this uh viewer here it's just going to show like a waiting room like hey the stream has ended right And if they refresh it's going to show this message because we have updated it inside the database Okay awesome Super cool I'm glad I was able to solve that And again guys if you have any questions we have a free Discord server Just hop in the Discord server and ask around There are more than 7,000 to 10 I think seven or 8,000 uh SAS SAS developers and SAS business owners around the world who are doing exactly what you're doing Okay so if you have any questions you get stuck just show up in there ask around People are going to help you So I'm also going to be adding a premium feature inside the codebase when you purchase it from the description down below Now this feature is sending an email to a attendee before the webinar starts So this is going to be massive in this field because marketers love email marketing And so the best way to get someone to show up on the webinar is to send them an email to remind them that the email that the webinar has started And so that feature is going to be a part of that premium codebase So go ahead and grab it guys because right now this codebase is on a launch discount It's on a launch bonus And so not only are you getting the codebase at a massive discount you're also getting a free license that you would have to pay $100 for just so that you can monetize this stuff right And so you get that for free So go ahead and grab it right now so you can get all of the bonuses and the code comments and obviously the codebase and everything that we created inside this project Okay So u we'll be using Resend and Resend is an email marketing platform that I came across and I am not sponsored affiliated I just want to support this company because they have an insane free tier So I put a link in the description So just feel free you know to just take a look around to see what they have to offer They have a generous free tier which I think is awesome and I just want to support this company Okay so uh that's pretty much it and let's move on to the next fun part of this application All right guys So I'm going to be testing out the payment flow as well So I just started this webinar and it actually just expired Uh so let's go ahead and first join this webinar There we go And this is just to test the product flow And now I'm going to go ahead and start the webinar so I can get into the waiting room And I haven't refreshed this page or anything So I'm not going to see any updated states but I can essentially join the webinar because it's already live Okay Okay And I just sent a message in here to show that it's actually working And now let's say that the webinar was going on and the host got to the end of the webinar where they can pitch the product right So all they have to do now is click on buy now and that's going to show up right here And maybe you could put an icon here or you could even use Stripe images right for the product and you can rent for the product and you can render that out in here So I just have the product description and what the CTA title CTA description and it says buy now and you'll be redirected to checkout So if we click on buy now it should take us into a Stripe type checkout page So let's go let's go ahead and give this a shot Hey there we go So it says $3,000 and now you can go ahead and make a payment here Awesome And I'm going to go ahead and click on page just to make sure this is working Awesome There we go Everything has checked out and uh the payment is also successful Now one thing I want to point out is obviously because we did not have our web hook running the Stripe web hook is not going to come through Okay But the payment went through cuz I just looked at Stripe But because we don't have this running our web hook won't fire and the ticket will not push or push itself to the next stage which is a customer purchased Okay So just keep that in mind And so just as we expected it says add to cart because the user did add the product to the cart but they also did pay but because our web hook wasn't on it didn't go through Okay but the user status will essentially be pushed right here into the next pipeline I also have this follow-up stage because uh remember I told you the premium feature that I'm going to add is maybe some uh maybe some email marketing just to show you how to send an email before the event starts So similarly or when the event starts So similarly right here uh maybe you could do a follow-up sequence right You could use AI tools AI automations N8N Like there's so many things you can do and maybe you can send an email to the customer uh to follow up on this product saying "Hey you put added this to cart you forgot to purchase." So that's another way to increase uh your pipeline value Okay awesome So let's move on to the next part And uh we're going to first go ahead and set up the agents Okay so let's go ahead and do that So most of you have probably already heard of AI () agents I mean it's all over the news but uh today's the day you're actually going to put this knowledge to use and build something real world So whatever I'm about to share with you right now is super important because this is the exact tool that one of my students used to make $30,000 from one single client And he was also able to upsell on every single credit Okay And obviously he's now making monthly recurring revenue through his SAS And I'm sure that you guys are watching this video because you want to do the exact same thing So I'm here to help you guys I'm here to give you the knowledge I hope you're willing to take everything I'm about to give you So Vappy essentially offers insanely realistic voice AI agents that you can leverage and scale to more than millions of AI agents if you'd like And they can handle calls for you They can also close leads on behalf of you And obviously they can also set calls Okay And that's the main reason why we are using Vap Insider application Now Spotlight is is specifically made for marketers right So people who have webinars and usually all marketers they have a sales process and because their products are probably in the high ticket range they need to qualify leads before they hop on sales calls because they physically cannot handle that many people And so the best way to automate this process is to put AI agents in place And AI agents can essentially set calls and they're we basically call them setters and they can essentially be those little minion setters for them and you can scale that to millions and millions of setters Now the awesome part here is I've managed to speak to Vappy and if you use my link in the description you will get 1,000 free credits every single month Okay So you can essentially start your SAS There is absolutely no excuse whatsoever I went above and beyond and I also got you guys a template that you can use for your sales calls or for your setters that we use right now that has a 92% close rate Okay so if you use that link you're going to get all of this bonus stuff And obviously it's also going to support me and it's going to let them know that the Prodigy's community is the best And most importantly we want to support these companies so they can keep pushing out better products and better free tiers and offer the developer community uh you know some better leverage Okay so thank you so much to Bappy for making this happen and let's get started guys All right guys So make sure you open up an account with the link in the description so you can grab these thousand free minutes and you also get the template that we're going to be using inside this project Okay So the first thing is if it's uh it's actually going to create an organization for you If it doesn't make sure you create an org Okay And the first thing you want to do is click into you want to click into organization settings click on API keys and make sure you copy your private key like this And you want to paste the Vappy private key in here And then you're going to copy the public key as well So let's go ahead and click on public and then copy this key here And then paste the public Vappy key right here And then we need the organization ID And so all you need to do for that is you want to click on or settings And you're going to find the organization ID here Okay So just copy this and then just paste it in here And the next thing you want to do is open up your terminal and you're going to type npmi vapy-addvapy-ai server-d.4 This is the version that I use So I want you guys to have the same version as me And then next we're going to use atvappy-appi/web and we're going to say at 2.2.7 and go ahead and hit enter and let that install Okay I totally forgot We also have to add the legacy pure depths So make sure you add that and then go ahead and hit enter Now the next thing we're going to do is if you go into this tab right here and go into assistance you'll see an assistant already created for you Okay Vappy does this from scratch and this is a pretty good assistant that has everything you need pretty much It's just like a good tester Now if you click on create assistant I'm actually working with Vappy to get my template inside here Okay So if you use my link in the description you can directly grab this sales script and the uh assistant already built with the perfect settings And so it's going to set up the assistant for you here And then you can grab that Okay So if you don't find it right now that's totally fine That's okay just what you need to do is make sure you click on lead qualification specialist because that's I guess sort of like I mean it's a decent uh you know template It does the job but obviously ours is you know realistic right Come on So uh but it's fine for now You can use this one So make sure you install that one So I'm going to click on this I'm going to click on lead qualified specialist and go ahead and click on create assistant Next go ahead and open up your folder structure and you want to shrink everything go into source app protected routes layout.tsx and it's going to take you into this page Now in this page we're getting all of our products from Stripe and we're passing it into the header component right But we also have to pass in our assistance So what we need to do here is I'm going to hit enter I'm going to say const assistance equal await get all get all assistance We're going to invoke the server action and obviously this is another server action that we need to create So what I'm going to do is I'm going to open up my folder structure and I'm going to go into my actions and I'm going to create a file in here called vappy.typescript Okay that is the wrong spelling That's fine Let me just rename that And inside this file change it to a use server file And this is all we're going to do We're going to say get all assistance is equal to an async function try catch And inside the try block we're going to fetch from Vappy and we're going to get all the assistants Now this Vappy server comes from our new client that we need to create So open up your libs folder And inside the libs folder you're going to create a file or a folder for vapy So you're going to say vapy like this And first you're going to create the server So you're going to say vappy server.typescript So this way this client can be used on the server side Okay So first thing you need is I'm going to create a payload So I'm just going to say const pay payload and I'm going to pass in the vapy organization ID And uh this is also a scope for the token So I'm just going to say private and then next I need to get my private environment variable key as well So private key grab that as well and then I'm going to create the options So for now I'm just going to say options and this token that it's going to generate is going to expire in this uh in 1 hour Okay And then the next thing we need to do is generate u generate the token using the JWT library Now if you don't know what JWT is uh that's totally fine Don't worry about it It's just like a a way for us to um kind of like create a JSON web token If you don't know what a JSON web token is just do some research online uh research online Okay it's uh it's basically like h like keeping a secret key Okay that's pretty much it in simple terms I'm not here to complicate things for you So go ahead and install JWT from JSON web token And I'm going to open up the terminal so I can install a specific version of JWT And okay it's not letting me shrink my Okay so give me one second Let me just shrink this Okay and so I'm going to say npmi JSON web token like this And you're going to say at the specific version- legacy pure depths like this and hit enter And now that this token is created we're going to create our Vappy client So I'm going to say const vappy client Vappy server equal new Vappy client like this and pass in the token Now let's also go ahead and import Vappy uh client from the Vappy AI server SDK Now let's go back here And now we can import this Vappy server just like this Okay awesome So this server action is created and all this is going to do is return all of our assistants So let's quickly go ahead and import the get all assistance as well Awesome And then now we can take this assistance and we'll have to pass it down into the header prop So I'm going to say assistance like this and I'm going to pass in the assistance data or an empty array Now obviously we need to accept this right So go into the header and in here we're going to pass in an extra type called assistance which is going to be of type assistant and this assistant type actually comes from vapy server uh server SDK API So go ahead and import it from the following folder and now we have this in here and now we can dstructure and use assistance inside this component Now we're going to scroll down here guys where you see the create webinar button And inside this you're going to need to pass in assistance equal to assistance like this Okay And so now if you go in here obviously you're going to need to accept that Now why do we need it in here So when the user is creating the work uh when the user is creating the webinar we're going to give them the opportunity to select between book a call or buy now CTA And so we also want to give them the opportunity to select an assistant before that Okay So I'm also importing this from here And I'm also going to dstructure and grab assistance from here as well And now this assistance is going to essentially go into our CTA step And now inside the CTA step I'm going to import the assistant type and also grab it from the props And now we can render this out in here Okay So let me go ahead and see where we have to put this So down here where we have the select for the book a call CTA Okay So we have there we go So to-do agents Uh there's a to-do here for the agents itself and we have add a product Okay So right above this I'm going to put it in here So I'm going to hit enter first So I'm going to remove this to-do And in here I'm going to say CTA type If this is equal to the book a call CTA then we're going to render something in here So essentially I'm going to have a label And this is not attach a product This is attach an AI agent Okay Like this And then I'm going to hit enter here And then first I'm going to create a div in here like such and this div and inside this div hit enter and you want to create a div with a search and an input field Okay this is just for you to expand on in the future but uh this is just a search functionality where you can grab that uh grab more AI agents from vapy server Okay and then after that so we have this here after the second div hit enter and now I'm going to return a select component So you want to return select like this and we're going to create this handle select in just a second But first let's get the trigger So I'm going to say trigger select trigger and I'm going to put the select value called select an agent And then I'm going to have the select content So hit enter here And inside this select content I'm going to have the following class names And then this is going to essentially loop over the assistance if it has a length greater than zero and render something If not we're going to render no agent available Okay And inside this all we're doing is again we're mapping over it and we're returning a select item That's it Nothing else crazy Don't forget to pass in value and the key and the assistant name This is the most important part Now for the handle select agents let's scroll up top right here And after this I'm just going to say update the CTA field with the AI agent and the value Okay that's pretty much it And now we can go ahead and test this out to see what that looks like So I'm going to create a webinar I'm just going to pass in some mock data for now This doesn't matter And let's just put some time Actually this time has passed So I'm going to say okay 2 p.m And if I hit next there we go So now I can select the two AI agents that I created inside of Vappy Okay And I want you to also actually Oh this looks like an error here We have to conditionally conditionally render this based on what they selected So what seems to be the issue All right there we go And all I had to do was wrap the the product button inside a buy now CTA check So now if you swap between these it's going to show you the relevant CTAs that you need to select Okay So in here for book a call now I can select a specific uh type of AI agent and its script is going to be added into this Okay Now you may ask parent I don't like to go in there and create all the agents inside Vappy because I want my software to be stand alone And that's exactly what we're what we're going to be doing () right now So the next thing you're going to do is shrink your folder structure You're going to open up app in here and you're going to create another folder inside your protected routes Okay So inside this I'm going to create AI dash agents like this Okay And inside the AI agents I'm going to create a page.tsx like this And now let's go ahead and render out why did it jump all the way there Okay Let's render out a button uh a template like this Okay And inside this the first thing I'm going to do is I'm going to grab all of my AI agents so I can show to the user So let's do that And let's also change this to an async component to make that request So now that we have this let's remove this And we're going to provide the following styles for this div So I'm going to say I'm going to say class name like this And inside this section we're going to have the left sidebar and the main content Okay the left sidebar is going to be the AI agent sidebar and it's going to look very similar to what AI uh what what Vappy already has So it just feels a little more familiar for users who have already used Vappy Okay So the first thing I'm going to do here is I'm going to create a div like this And inside this div I'm going to create uh a component called modal selection which we're going to come to in just a second So here I'm going to say to-do todo just like this And then after that up top here we're going to essentially show the AI agent sidebar So this is another component that we need to create And obviously we need to pass in all of our AI agents into that So don't forget to pass that component those components in here I'm sorry the AI agents themselves in here And I'm also returning an empty array in case I didn't get any response Now open up the folder structure And inside this you're going to create a folder called components And inside this you're going to create this AI agent sidebar.tsx and we're going to return this AI agent sidebar Okay Now first thing we need to do here is grab the AI agents So let's import it and let's also make sure we dstructure it right here So first create a state guys We're going to create this state called is modal open because this way uh we can we can show this component on the screen and um we can show a modal on the screen so they can create that specific AI assistant Okay so this has to be a use client component So I'm going to just change it to use client Okay like this And now in here I'm going to create my use state to store the modal And I'm also going to create an AI agent store Okay And this AI agent store is essentially going to keep track of the assistant that is selected uh the set assistant and a way to clear that as well So first thing I'm going to do is I'm just going to create it in here so I can get some errors and that way I can solve the errors and copy this Copy this name It's called a use AI agent store So copy this name and you're going to open up your folder structure You're going to scroll down to store and inside this you're going to create the use AI agent store.typescript And this is a very very simple store I'm sure you guys probably already did it But all we're going to do is we're going to say the type is going to be of type assistant And this assistant comes from um from Vappy okay Not from our not from Prisma schemas So make sure you import this from the right folder And then once that's done make sure we have assistant set assistant clear AI assistant Okay technically we could just use this to clear it but uh we're we're also going to have a clear AI assistant in here Now let's go ahead and create the store So export export const use AI agent store equal to and we're going to say create like this And all we're going to do in here is make sure we import this from from Zustand And in here we're going to say set AI assistant null Set the assistant the assistant here to whatever they're giving And clear AI assistant And set this assistant to null Okay awesome Now I'm going to go back to my AI agent sidebar component and let's import this really quick And once we're done with that now let's start building this out So go back to your page.tsx and import the AI agent sidebar so we can see something in here Okay So I'm going to refresh this And there we go So we can see some data inside this component So now we can build alongside So first create a div that looks like this with the following styles And then I'm going to create a container type div with padding four And inside this I'm going to have a button that says create AI assistance Okay assistant Sorry not assistance And then here we're going to have the setter to essentially turn on the modal So if I click this technically it's turning on the modal right So um okay I see an error here guys Let me take a look This might just be this is something to do with server side stuff But I actually think if I quit the server and I restart it this will go away cuz I've seen this error before Hey look at that Okay all my user experience are finally coming in handy So yeah you just have to reset your server if you see that Okay I I think that's just something um with hot reload or TurboAC or something like that I'm I'm not too bothered Okay so after this button we're going to have an input field and a search field Again this is just syntactical sugar to I mean like components built just to make this look nice Uh feel free to go in there and change this Okay So I'm going to import these the input component and the search component So you can see it like this here Okay And then after this down here we're going to hit enter after this div And now we're going to use scroll area Okay So this is a scroll area component And inside this we're going to say agents AI agents.m map which is coming from the URL I mean coming from the props map for all of them And we're going to return a div here And we're just going to give it some colors Okay So you can I mean you can pretty much see what that looks like right So we're going to say class like this If the AI assistant is uh the ID is the same as this one here then we'll just render this color here Okay And we're going to show a background So if I click on this now it's going to turn that on Okay that was the whole idea there Now down here I'm going to show the AI assistance name itself That's pretty much it Nothing crazy And now after the scroll area hit enter And we're going to create this component called create assistant modal So copy this name open up your folder structure and you're going to create this component in here Oh sorry guys Create paste.tsx And then in here let's go ahead and return a snippet Okay so first thing we need is those props that were passed in which is is open and on close So I'm going to go ahead and grab those from there And then the next one is I'm going to first change this I don't need to change this to a use client cuz it's already in a client tree So I'm just going to create a state here called name Okay And let's go back and import this so it doesn't scream at me Okay there we go So now we have the create modal assistant So in here I'm going to create a name state We need loading state so we can show some loading states when we're creating all of this And uh once that's done we can also use router So we can do router.refresh right So go up here and let's import router from next navigation not next router Okay awesome Now let's go ahead and build this out So this is uh going to be a new div and it's going to look like this with the following class names Please please pause and type that class name And then we're going to have another div inside this And this is going to have an X button that helps us close the um essentially close the modal Okay So I'm going to say div like this H2 create assistant and a button like this Okay So now there we go So this shows up right here Let me refresh this once more Okay So I'm not going to lie I don't know how we have this modal on the screen How do we have it So we have this here Huh Guys am I a little lost Where where are we getting this from use AI Okay give me one second guys Okay so I was just a little confused Not I wasn't sure what the hell was going on but um this here so essentially what this is we're just building the the modal Okay so you can use a dialogue I think this is because I was in a rush and I was probably building something So guys just use a dialogue component All right sorry about that guys So what I'm going to do in here is I'm going to say if it's not open don't show this Okay So we're just creating our own custom model uh custom modal in here So first things first I'm going to create um a form here So after this button hit enter And then inside this I'm going to create the first div in here And this div is going to have first a label So I'm just going to put a label for now inside this just using the regular label And then I'm going to have the input component show up right here So after this show an input component And let's import this And might as well turn this off right now so we can see it uh building And now we need to create the handle submit for this form So let's just quickly look at what that looks like All right So scroll up top And after this if statement we're going to say const handlesubmit is uh a function here Uh what exactly happened There we go So it's an async function here that gets a form event And inside this we're going to do euprevent defa uh default We're going to say set loading to true We're going to have a try catch finally And inside the try block we're going to say await create assistant which is another server action If there's no response uh if there's something wrong throw an error Refresh set name close This is the basic thing we've been doing for all our you know for the entire app So I'm sure you already know that same structure So what I'm going to do now is I'm going to copy this and I'm going to try to create the assistant So let's go into actions vapy right here And at the bottom here I'm going to say export consistence equal to this And right in here I'm just going to pass in whatever it tells me to just to speed up the process Okay so the first thing we need is name And I'm going to put a first message So the name is what we get from here So I'm going to say first message Hi there This is whatever from customer support guys I'm just putting mock data for now I think you get the point of this This AI assistant can do anything you want And so all you have to do is just tweak the prompt in here Okay So I'm going to say this is my name whatever and then I'm here to help you today and you have to select the model the model you want the the model you want to use right so I'm going to be using GPT40 cuz that's so far that's the best and that's performed pretty well so I'm going to say modal GPT40 provider open AAI and the messages right here are going to be this AI prompt this AI agent prompt okay so I've already created that prompt that I told you guys right So if you cannot get if you did if you fail to use my link for some reason or you just do not want to use it that's fine as well Um I will essentially put this inside the Discord for you Okay So in here all the way at the bottom inside data.typescript inside this I'm going to essentially create this prompt It's huge Okay It has so many things instructions step-by-step methods to follow all that kind of fun stuff So now let's go back into this and I'm going to import this Awesome And now we have this all set up and ready to go Cool All right man We're getting closer to the end of this So after that make sure you show a true 200 response here and uh pass in the data created as a created assistant And if there is an error obviously show a 500 error response So I'm going to say false 500 failed to create assistant Now let's go back one step and let's quickly import this create assistant from our server actions And that's it We're done here Okay Now let's scroll down and after this part where we have this input right this uh we have the assistant sorry guys we have the assistant name and we have an input right here we're going to uh essentially this set name is going to change the name right here okay and then when we fire this we're passing that state in there that's that's how we're getting the name if you're wondering now after this input I'm just going to put a paragraph that says this name will be used to identify your assistant okay awesome and then we're going to have a div after this to submit so after this div create a div like this And then inside this div I'm going to have a button component So I'm going to say button like this And let's go ahead and import button And make sure to pass Sorry guys let's pass it's importing it from the wrong folder There we go And make sure you pass in the right props So on close is the main thing here It's going to change the value And button it says button is not defined It is defined Okay And inside this we're going to essentially show a loading state if we're actually uh building it Or guys let's make this the close This is the cancel button right So I'm going to say cancel like this And then down here I'm going to create another button And this button is going to show the loading state So this button type is submit So I'm going to remove this I'm going to say submit like this And then I'm going to say name.trim And I'm going to put the disabled loading Okay And then in here we're going to say if it is loading then show the loader 2 icon with the animate spin saying creating And if not we're just going to say create assistant Okay Awesome Let's go So now to truly test this go up here and you want to uncomment this if is open And now in here let's expand this and let's try to create something There we go So you can close it click out I would highly highly recommend you do not use this And please please use the dialog component I just made a mistake here Please forgive me Okay So here I'm just going to put a name It also holds a state And if I hit create assistant it's going to create it Router Refresh Boom There we go Now we have the assistant actually created inside Vappy And if you go into Vap's dashboard and you refresh in here you're going to find your PU assistant in here Okay awesome Now let's go back to our application Not this one this And let's continue the next process which is showing the settings and stuff like that So now go back into your page.tsx under AI agents And then in here we have this to-do So let's go ahead and first remove this And then I'm just going to uncomment this And make sure you copy the title So copy the name like this Open up your folder structure And inside components I'm going to paste this Okay And now let's go ahead and fill this in Awesome And all we're going to do in here is first I'm going to render out a div with the following class And it says not imported So let's go back and import Guys that's a shortcut If you don't know someone asked me how are you doing this so fast So if you're in one file here and you came from a different file if you close the current file it's going to take you one step back So instead of you opening this and then going back just close the file It'll take you one step back easier right So if I go back it's going to take me to the modal thing right The create modal create assistance So that's the secret here Okay And obviously we use the uh shortcuts like tsfce and that is called react snippets I think I already told you guys So React snippets This one Okay I think ES7 use this one Typescript react snippets I think this is the uh I'm not sure which one it is Okay I have this one installed So you install this one as well Okay So that's how I'm able to type really quick and it helps me speed up my workflow So after we render this div inside this div I'm going to show another div like this So div like this here with another span and in that span I'm going to show a settings icon So let's go ahead and refresh There we go So it just shows this thing saying modal Now sorry model modal Now down here I'm going to have a scroll area so I can show the configuration of that AI agent So I'm going to say scroll area and inside that I'm going to have a model uh model configuration component So open up your folder structure Inside this we're going to create that model configuration Okay And then I'm going to paste it in here Now first thing we need to do is grab the assistant that is set from the store Right Oh sorry guys Let's go ahead and import this There we go And now click on this It takes you in So we need to grab what's being selected here right So what we're going to do here is I'm first going to grab that from the store So I'm going to say you uh use AI agent store and grab the assistant that I was selecting Now we have to change this to use client like this So we can use this Now down here I'm going to first check if there's no assistant Then I'm going to render a div that just says no assistant selected like this So it just makes more sense Now if I select one it removes that Okay that's basically what we wanted Now the next thing here is I'm going to have a use effect here that's going to essentially set the uh it's going to check if we have an assistant and it's going to do something for us It's going to set the first message and a system prompt Okay so in here I'm going to say use effect So if this exists so if the assistant exists then here's what we're going to do So if assistant exist then we're going to set some states inside our application And so let's go ahead and create those states first obviously So I'm going to say first uh first message and system prompt Okay And now we're going to go ahead and set those values So assistant first message and assistant model at messages at zero Um let's see what's the error here Potentially undefined So we have to put a check here as well like this Okay And it'll check this And if this is true then it's going to render that out Okay So now if I click this the state is technically going to hold that value because this assistant this assistant updated Okay Now going down here first thing I'm going to do is I'm going to build out this component So I'm going to remove this I'm going to return a div in here And inside this div I'm going to have another div just as such And then inside that have a header tag and a button that says update so that they can update the assistant setting So first we need a loading state so we can disable the button So let's go up top here create loading scroll down here and now we need a handle update We'll get to that in just a second But all we're doing is if it's loading show loader If not show update assistant Okay so now we're going to see this error because this does not exist So let's go ahead and build that function So scroll up here hit enter I'm going to say handle update assistant And this is going to Oh okay All right Awesome That was great So we're going to have async in here We're going to say set loading to true Try catch We're going to have this update function here So first I'm going to say const response equal to this await update assistant which is another server action Okay But if there's no uh no success error I mean there's no success message throw an error Okay And then if it is uh updated we'll just show this down here And you can also do router.refresh which will also need router in here So I'm going to bring that in Okay Technically you do not need router.refresh refresh because it's it's already updated right on the page So you don't need it Only if the user refreshes and if they refresh they're going to see new data So and that's it for console error console the error And for finally just set the loading state defaults So copy this title here copy this name go into your vapy agents file the vapy uh typescript file and in here I'm going to say const update async like this and it's going to essentially need the following So we have the assistant ID but we need the first message and we also need the system prompt So this is how your customers can tweak exactly how the AI should respond Okay so this is powerful super super powerful cuz now you can do whatever you want You could give the AI the capability to tell it to open up a link You could tell it hey this is the checkout page This is the product And maybe in the future you can also have a little chat box inside the call which I'm going to show you how to build in just a second where the AI can where the AI agent can also communicate by sending links inside the chat box So you see how this makes you stand out and makes you feel unique right That's it man Just improve this product and you can take it to market So the first thing I'm going to do is I'm going to say try catch uh hello try catch like this and then inside the try block first we're going to say the following so I'm going to say update so vap update assistant is await vapy assistant we're going to say uh update here and we need to invoke this and pass in some settings and inside the settings first we need the assistant ID so which ID are we trying to update and this is not inside here guys this is the first argument ment we need to pass in Okay And then for the settings we're going to say first message is going to be this message And the model here is going to need to be the uh just a default model Now feel free to to fetch all the models they have and then show those models and give the user the ability to select them I'm not going to waste your time right now cuz this is MVP Okay Next once this is done I'm going to just show assistant created updated sorry Okay And then I'm also going to show a message So 200 response like this Um and the system prompt here is a system prompt that's coming in Sorry guys I forgot to mention the system prompt is what's coming in from uh from them Okay All right Now down here if there's an error I'm going to just show console error show 500 failed whatever you got to do Okay And I'm I'm also going to have an error object like this And I'm going to pass in the error Now let's go up here and let's import update assistant What's the name here Update assistant Oh uh my bad It needs to be exported And now you can import this one Okay so we have this If there's an error throw an error Show toast when it's when it's completed Console the errors And also set loading to false Done Awesome So now let's scroll down and after this button we are going to have a small paragraph to describe it So hit enter after this div and I'm going to say configure the behavior of the assistant So just like this So if I click on this configure it whatever whatever right now we need to show a way for them to update that stuff So how can they update the information So first what I'm going to do is I'm going to have a div in here So hit enter after the paragraph I'm going to create a div And I'm going to create an input field Sorry a div like this div here for the label and in and like an info icon And then I'm going to have an input field And this looks sort of like this Okay So they can tweak whatever they want in here And the next thing we need to add in here is after the input field after this div hit enter We're going to create another div with this Like this And then we're going to create one more div inside this to hold another input field Um sorry guys So in here I'm going to say div like this flex item center justify between and margin bottom of two and a div for the label and info Okay And this is going to have this eye icon in here as well Do whatever you want You can use popovers like you can use um I think we have a component in here called tool tip right You can use that one if you like And now I'm going to put a text area So hit enter after two divs here And you're going to render out a text area component You're going to pass in the system prompt Awesome Look at that Looks very similar to what they have right So it's going to feel like they're still communicating with a real AI agent And now they don't have to go to Vappy So you get to keep them in here Okay Now after this div we're going to hit enter And then we're going to create another div here And inside this div we're going to need to create a component called config field And um so what I'm going to do is I'm going to say config field like this And now I'm going to copy config field And this is also a drop-own select component But this is custom dropdown guys This is something that we created So first let's do the config field Open up the folder structure and create the config field And let's go ahead and create this in here Okay And it's going to need three props It needs the label It needs show info and children And I'm going to go in here and I'm going to import uh I'm going to dstructure them from here I don't know why Okay it's not giving it to me There we go And it's doing all this crazy stuff We do not need this So now I'm just going to return a div like this A div here A label and show info If it's true we're going to show the info component like this And this is from Lucid React And then down we're going to render out the children items Now let's go back here and let's import the config field And now the only thing left is the drop-own select component So let's copy this title And in here I'm going to paste drop-down select.tsx And then inside this we're going to need to first create this component like this And now we need to accept those values So we need the value and the placeholder So let's bring that in And let's go here and let's dstructure these And now finally first we're going to say display text equal if value is there show that or placeholder The text class is going to be if the value exists nothing But if not we're going to show text neutral 400 Okay I'll show you what this looks like in just a second And then down here we're just going to have a div Okay a div like this a div inside it a span with the display text and a text class and a chevron dr down icon Okay so now if you click on this oh we need to also update import the component So I'm going to close that page teach you that little trick that I mean that little trick that I taught you And now when you click on this you can see the providers So this is where you can put all of that Okay for now it's just set to this value and they cannot change it But maybe you can use a drop-own component in the future and you can show that or you can like purposely show that this is deactivated Okay awesome guys Great job so far We have some cooler features left to complete and also test But um this is the most main this is the main part of the app So keep pushing through keep watching and I hope you're also enjoying and I'll see you in the next All right Now go ahead and open up your folder structure And essentially what we're () going to be building right now is the public call route once the user has clicked on the book a call CTA So this route is called call Okay this is super super important So please do not miss this part and do not uh skip anything because if I explain something and something doesn't make any sense you're going to get lost Okay so just pay attention watch this in 2x speed and pause Type when you need to So first I'm going to set call in here This is the route that we need And inside this I'm going to create a page.tsx And inside here I'm also going to need the components folder So I might as well just create it right now Okay So in here we're going to just go ahead and return our snippet Let's go ahead and shrink this So this is going to get some params right We're going to get the the webinar ID We're going to get a bunch of other info And we're also going to get the search params If you remember from one of the previous components we were pushing the user to this page And we're also passing a search param called attendee ID So we're going to go ahead and grab this from here So I'm going to say params like this live webinar uh live webinar id and I'm going to pass in grab the search param and these are all promises so you have to await them So first let's go ahead and just await these and let's make sure we dstructure them from here Okay awesome And now we have these values ready to use So this is saying props This is actually incorrect Let's delete this There we go So now if there's nothing here that means there's no live webinar ID You can do whatever you like I'm just going to throw a 404 and uh let's go to next navigation So you can just redirect them to a 404 or redirect them to you know uh maybe a custom 404 page Right So after this now what we're going to do is we're going to get the attendee by this ID So I'm going to say const get attendee by ID And we're going to need to uh I think we already created this Okay So open up your folder structure I thought we already did but let's just go into attendance And what I'm going to do is I'm going to search in here Get attendee Okay Looks like we haven't So scroll to the bottom guys And what you're going to do inside this component is you're going to say export const get attendee by ID is equal to an async arrow function Uh there we go Okay And inside this first we're going to need to grab the ID the ID itself and the webinar ID So let's bring that in And now we're going to have a try catch And inside the try block first we're going to go into our database and find this ID for uh find the user for this ID So I'm going to say attendee equal to prismacclient.attendee.find for this ID Now next we're going to need to find their attendance So I'm going to say attendance.find find first where this is the same attendance ID right and attendee ID and the webinar they attended so that way we can connect both now if none of these exist obviously return a 404 and if they all exist return a 200 that's it very straightforward and now if any error took place I'm going to show a console message and I'm going to also return 500 in here now let's go back and let's import the server action and now I have that those details in here Okay awesome Now after this I'm going to make sure we got some data If there's no data redirect the user to this page and we're going to show this error Now I've already created this right I've created this error component and so it's going to show a custom error on the page If not you can build your own maybe make it look nicer It's up to you Okay Now the next thing I need is to get the webinar by this ID as well So I'm going to say get webinar by ID and let's go ahead and import that server action And now in here we're going to say if there's no webinar redirect 44 Finally if the webinar status is waiting room or it's scheduled we also have to send the user to this page with error saying webinar not started Now let's go ahead and import this enum here Okay awesome And now what's next We want to make sure that the CTA is as follows So I'm going to say right here So if this CTA type is not equal to this book a call and webinar there's uh no or there's no webinar ID or there's no not not this right then we're going to kick the user out of here So cannot book a call So this is important right Because if the CTA is not book a call and it's payment or whatever and they're on this page then we can't keep them here because this is only for the call with the AI agents Now in here we're going to say if data call status equal to completed If it's completed then down here we're going to say you cannot attend this again Now the reason why this is done is just to prevent some sort of a loop Okay Now I want you to improve this functionality obviously So do whatever you want here Maybe you can get info from the AI or maybe you can have a timer I don't know what what you prefer But for me it is once once they cancel out of the call it should be done for right Completed So I'm just going to make sure that that once they start the call we're going to start it And then if they refresh the page they cannot attend it Just to make it simple and easy to understand Okay so that's pretty much it Now down here we're going to return this auto connect call component Okay this is an awesome component that does everything under the hood for us So let's go ahead and return this And I see something wrong here That's because obviously we don't have the component but it should at least save it for us Okay so I see the webinar with pres presenter So I'm going to go ahead and import uh import this one here Um what is it trying to import Import from libs types Okay Awesome All right So now we have this So let's go ahead and copy this component And you want to open up your folder structure And inside components we're going to create that.tsx And then in here I'm going to go ahead and render this out Okay Awesome Now inside this we're going to need to grab those props So in here I'm passing the username assistant webinar and the user ID Right So I'm going to first import this component And now I want to make sure I can pass these into this So for to do this I need to go ahead and import u sorry bring in all of these props So first go ahead and bring in the props and then go ahead and dstructure them down here Okay Now we're going to need a call status object So you can put this inside your constants file I'm going to put it in here so you guys know where things are And this is just connecting active and finished So inside this component first thing is I'm going to change this to a client component So I'm going to say use client like this And at the bottom here we're essentially going to set some default values So username is going to be equal to user by default And why is it grayed out elements that are destructured and unused Okay that's fine Why are you yelling at me So down here we're going to say assistant Okay AI assistant you probably have to disclose And then down here we're going to set 180 So 3 minutes by default So the call limit is going to be uh 3 minutes Now guys no call is 3 minutes long It's way longer than that right But I just want to show you right This is just for demo purpose So and that's why we're specifically doing doing it only for setters We should not do this for uh for sales calls First of all nobody wants to buy from an AI agent Okay But it's going to help us qualify the lead Okay So what's next Now we're going to scroll down here and first thing we're going to do is we're going to return a div So let's return a div like this Okay And this is essentially going to be that Okay so we also need to access this component So give me one second guys So please make these changes with me if you haven't already So first open up two browsers right Obviously So open up two browsers One that has you as a host logged in and one that has a user a present uh an attendee logged in Now the next thing you're going to do is inside your database Prisma schema make sure you update one of your your webinars obviously to start right now and make sure it's uh it's live Okay so this one is live here but it has CTA set to buy now So I'm going to change that to book a call and I want to make sure my AI agents are also attached to it So let's look for that real quick Okay So I think I think this was created without the uh without the AI agent because it was an older older test uh webinar So I'm going to go ahead and just create one more Okay Sorry for this So just create one more and that way you can have the new AI agent as part of that webinar Okay there we go So I just got the webinar with this H Okay I was quite worried there for a second because I was like "Oh wait I think I need to update the create server API uh server request as well because um I thought we're not going to see this AI agent So the AI agent is now attached to this book a call CTA um webinar So let's go ahead and test this out Okay so I'm going to go ahead and start the webinar right here And obviously this person also has to join this webinar So something went wrong I think maybe we are okay It's not at the right time Uh let's go ahead and Okay So something is wrong guys Just give me one second All right guys So the problem is I had a webinar opened on a different tab and so I had to first quit that webinar and then I was able to restart and I just restarted one of the old ones to test to make sure it's working So everything's still working fine It was just because we had multiple webinars turned on So maybe you would want to show a better user experience Uh instead of just saying something went wrong you should probably show an error saying "Hey you cannot run more than one webinar Here's a webinar that you have that's currently running." Right Maybe something like that And I also want to point out one more thing So we do have all these cool you know options here but it looks like on Mac it works way way better So it it will show you a design here to show the person speaking with the microphone icon and it'll also show you a drop-own menu here So this does work but on Windows it just has some compatibility issues So what you should do is probably change the colors for this Uh look at the CSS styling I don't honestly it takes way too long to do that guys So I'm not going to do that for you I'm sure you can do that You guys are experts You're not a developer You're a SAS developer Okay you got to make it work Okay so I just joined this webinar but it says joined failed Let me see what exactly took place guys Give me one second Okay so the issue guys was that we were using an expired an an expired call Okay And so as a result it was trying to join the user to the to this user the attendee to a wrong call Okay So I just created a brand new uh webinar here and now everything works fine Okay So if you saw that error it's because of that So now I'm also going to send a message to make sure this works Hey guys welcome in just a few more minutes Hey look at that And maybe you could lock the chat guys I think that's something you need to do as well right Because this is this webinar is for this person not for this person to do whatever they want So maybe you can lock the chat do a bunch of stuff So let's go ahead and test out the book a call Okay so I just clicked on book a call It says join breakroom And now if you click on this it should take you to the next page Okay and it sent me back with no error Let's try that once more Call Okay Cannot book a call Okay there is an error and that's probably because something is happening here So let's see what our uh what our error states are All right guys So I think I found the reason why this was happening So in here we're saying if there's no price ID as well That's also something we need to add So when we created the webinar I actually forgot to add the price ID and that's why it was throwing me out Okay So if I try now if I go in here huh cannot book a call still What seems am I Let me see if I added the price ID first of all Uh okay there we go So this is the wrong I put it on the wrong place guys I put it on the first one thinking the top one is the most recent It's actually this one So let's put it in here and let's save this change Let's make sure it's the same thing So final AI test Okay this is the one And I'm going to go in here And don't worry I'll give you step-by-step instructions Okay but for now I just want to get this to run so I can see it Okay so book a call Join break room No error Nice Let's go Okay so now we're on the book a call page And so we should be able to send the user back and forth if we get kicked out because we haven't done any logic on this page yet right So if I add something in here let's see what happens It shows Nice Awesome So now we can take a look and build this page So all you have to do guys is create a new webinar add an AI agent and add a price ID and add all the information Fill everything up and make sure it's not an expired one So don't go into Prisma and just try to change it Make sure you create a new webinar okay And make the time set to uh 2 minutes from now or 1 minute from now All right So the first and most important part here is we need to establish the connections Okay And we're going to do this using effects And we also have some other cleanup stuff that has to work inside the use effects as well So let's go ahead and first do that Okay Use effects are important to first set up because that way we can get the connections up and going So go ahead and first create the state so we can use them inside the use effects And I'm just going to import all of these And this should not kick me out Awesome Nice And essentially we're creating the call status assign uh the assistant who is talking And this is like a state to show some sort of UI changes And then user is speaking is mic muted time remaining Okay And then the next one is down here We're going to essentially create the first use effect So this use effect is to start the call and to also stop the call as a cleanup So what I'm going to do now is I'm going to copy this And please post this uh please paste this for now Do not try to skip over stopping the call because it's going to um essentially what's going to happen is it's going to just run infinity loops and you're going to use all of your credits Okay We don't we do not want that So please uh put this here Actually guys let's let's not even put this here for now Okay We'll get to that in a second But I think the first use effect that we can set up is the event listeners for everything else right So when the call starts all that kind of stuff So what we're going to do is we're going to say use effect So go ahead and type this out with me Okay so use effect like this And make sure you put it inside this bracket and make sure you import it as well Okay there we go And inside this use effect what we're going to do is first we're going to create a um we're going to create an on call start function Okay so we're going to say const on call start And this on call here essentially comes from uh let me grab this guys Give me one second Sorry not this one guys I meant the setup audio So this comes from another helper function and I'll we'll build that out later But essentially here we're going to first establish that connection So we're going to set up the audio and then we're going to start the countdown for 3 minutes Okay So we're going to use a ref We're going to check the countdown timer and then for 3 minutes exactly and then we'll stop it Okay So um let's go and first create the setup audio helper function So what this does is it's a simple audio setup for speech detection So go in here and you want to do the following So you're going to say stream equal awaitn navigator.mmedia devices get user media So we're using uh whatever the browser API is giving us And we're going to say audio set to true So you might have a popup that says activate audio or whatever And then after that we're going to need to create this ref And this ref is basically going to hold our timers It's going to hold the audio stream And it's also going to hold the user that is speaking Okay So when the user stops speaking that way we can use that event and we can turn it off in here Guys this is some super super deep stuff that not a lot of people teach you on the internet So please do consider subscribing That way you get such highquality information on your feed Okay so let's go ahead guys So the first thing I'm going to do is I'm going to create this ref that I was talking about and it's going to store the timer the audio stream with this specific type here And you don't have to import these types because these are native types And then we also need the user speaking timeout Okay Then the other thing down here is once we have that stream we're essentially I'm even putting the code comments here so you can see Okay So inside here the next thing we're going to do is we're going to set up simple speech detection using the audio context So this is inside the window So it's the uh the browser API So audio context is new window audio or this audio context We're going to grab this and we're going to uh pretty much invoke it so we can create a version an audio context out of it Next we're going to say analyzer audiocontext.create analyzer and we're essentially going to set this I don't know what this is but uh please do this as well I think this is buffer size I think that's what it is Um but just set it to 256 Okay I've seen this when I was editing uh audio tracks and it just requires this So set it to 256 Next is the microphone So we can grab this from that So I'm going to say audio context So from this context create media stream source And then we're going to pass in the stream we created in here So now we can store this stream inside our audio stream Okay So next we're going to create another function here called check audio levels and we're going to invoke this So what we're going to do in here is we're going to say new unit 8 array analyzer.frequency frequency but don't even care cuz I don't even know what this is I got a lot of help online and we got it to work Okay so we're essentially going to get uh the data array here and then we're going to say analyzer.get byte frequency data and we're going to pass this in here Next we have to next we have to calculate the average volume So average equal data array.reduce We're just using a reduce JavaScript method and we're reducing this to one value here Okay And we're going to to where is this So reduce and we're reducing it to I don't see the second one there Where is this value there I think it's right here Okay So what we're going to do now is we're essentially going to say data array.reduce some value We're going to do this process here This is a formula So please copy this without making any spelling errors Okay And then inside this guys essentially we're going to say uh we're going to say const normalize normalized volume is average divided by 256 And then down here we're going to detect speech based on the volume So if the volume is greater than this and the AI assistant is not talking and the mic is not muted then we're going to set the user as talking Okay So we're essentially using volume or checking how loud it is That means how loud are they speaking And then this I mean I just asked AI and AI told me that this is what the bass volume is going to be So we're going to use this as a base and then based on that we're essentially going to update our timer So we're going to say ref's current user speaking timer which is going to run for 500 milliseconds Okay And essentially we're going to show some u user you know like design like maybe highlight the user speaking and we're going to create this timer that's going to essentially turn that off once the cl once the timer expires So refs.curren user speaking timeout clear timeout after this Okay that means if it already exists and then if it doesn't we're going to reset and create a new one So refs.curren this one equals set timeout set user speaking to false and then we're going to set it to 500 So it's going to repeat And then we're going to set request animate frame And we're going to invoke this and we're going to say check audio level So this will essentially continue monitoring all of this And then next we're going to check audio level right here Okay Awesome So that is essentially to set up the audio and listen to who's speaking Set up the timers That's what we're doing right there Now we have to essentially set up the timer for 3 minutes for the call itself So what I'm actually probably need to change this number to whatever is passed in But um what we're going to do here guys is we're going to say set timer set time remaining to the call time limit Okay And then down here we're going to say refs.curren.countdown timer set interval And then we're going Oh okay Actually no this is this should be fine So we're going to set the time remaining and we're going to say if the previous is less than one then we're going to clear the timeout Okay Okay we're going to clear this interval by passing in what's in that ref And then we're going to stop this call here So what we're going to do here is we're going to scroll up top and all we're going to do in this helper function is we're going to call vapy and stop that call Okay so I'm going to do the following So stop call equal async like this and we're going to need vapy here and this vap comes from our Vappy client which is another thing we need to create inside our Vappy libs folder So go into your Vappy folder right here inside libs and you're going to say vappy client.typescript Sorry guys I made a spelling error Okay actually no spelling error That's fine And then in here we're going to grab and create that Vappy client Okay so it's coming from Vappy AI web Now let's go back here And now we can import this Vappy from that client Okay so make sure you import it from there And now we we're going to say set call status to false So I mean to finished and then we're going to have this cleanup function in here So this cleanup function is essentially going to go into all of the refs and it's just going to remove everything like reset it Okay so let's go ahead and create that one as well So up here or maybe I'll do it up top cuz we might need this again So right here we're going to say cleanup like this function is going to say if refs.currenc timer clear the interval first Then if the user speaking timeout exists clear that timeout and set it to undefined And then if the audio stream exists we're going to get that tracks for each of them We're going to stop that track itself Okay And we're also going to set this locally to null So that's what we're doing right here Okay So once the cleanup process is done the next one is to change the call status inside our database So in order to do this obviously we have to create another server action So go ahead and open up your folder structure You're going to go into action here You're going to go into attendance and at the bottom right here you're going to paste this and you're going to do the following Okay So you're going to say change call status This is a server action And this needs the call status enum which is one of these And inside this we're going to have a very simple try catch You guys know the drill And in the try we're going to say prisma.attendee.update for this attendee ID and we're going to grab the data and say um we want this sorry we're updating the data's call status to call status here and then we're just going to return 200 If there's an error return 500 console the error That's pretty much it Okay Now let's quickly go back and let's import the call status Okay And now we can pass in this call status in here So let's import this call status enum So we can pass it as completed If there's an error show an error If not show a toast So I'm going to import this toaster from sonar Uh there we go And now call ended successfully and whatever right here Okay So this is when the call stops And this fires once the timer expires So that's something to keep in mind So the second the second we invoke this function everything begins So please follow the step-by-step instruction I am giving you right now Do not skip anything in this section Okay So the next one is we're going to create so down here after this guys you want to hit enter and you're going to create a function here called uh essentially this one is called on call end So right here I'm going to say on call end We're just going to console log a message saying call ended and we're going to set our states to say finished And obviously we're going to call an invoke cleanup as well Now we also have the on speech start which is another function and this is going to set our assistant to speaking Now you might be wondering how are we going to invoke these We're actually not going to invoke these oursel We're going to attach this as a listener onto an event that Vappy will fire So it's going to be a callback function that goes into Vappy and Vappy will handle that Okay that's why Vappy is so easy to build with So once you're done starting this so once the speech is started and you're passed in this right So set assistant to speaking to true We're also going to say on end So when the assistant stops speaking we can also set it to false So this way we can show some uh user feedback even for the AI assistant as well Now if there is an error what I'm going to do is I'm going to say console And we're going to show this error and I'm going to say set call status to call status.finish and we're going to also invoke cleanup Okay because the call has ended Now the next step here is to set up those event listeners So this will not fire It's just going to start um essentially it's going to start and mount all of the listeners But don't worry it's actually not going to fire the call itself Okay So in here what I'm going to do is first let's set up the the listeners So the first one is for call start So let's go ahead and say call start Then we have call end speech start speech end everything that we created even on error And we're just going to pass that into its respective uh events So call end speech start speech end and error Please pause and type Okay the next one is the cleanup function This is important because once this call is has ended we have to clean this up Now if I refresh I know for a fact that nothing is going to happen here Why Because we haven't started the call itself Okay So that's why I'm saying please follow my instructions Do not try to skip or try to do whatever you think is right Uh you're going to cause a lot of problems Okay So first thing I'm going to do is pass in the username and the call time limit here These are the only dependencies we need Don't pass in anything else Okay Now the other thing is we have one more use effect and this is a use effect that's going to call and start the call with Vappy Okay So I'm going to say to-do vapy call use effect Okay something like this And after that uh I think we have pretty much created almost everything else Okay Yeah I think we're done creating everything else apart from that use effect obviously and we're going to get to that use effect in just a second It's important but we need to create the design So after this I'm going to right here I'm going to create another div And this div is going to have the following styles And inside this create another div And essentially we're creating something that uh looks very similar to Google Meet Okay just just to kind of resemble uh something similar to that And then in here we're going to have a div with a microphone icon So go ahead and import mic from Lucid React and CN as well And looks like an error had occurred We just refresh that There we go AI assistant Okay So this side is going to be AI assistant and right side is probably going to be the uh the speaker And in here I'm going to just pass in uh this AI assistant is speaking And this is the most important part so we can show feedback Okay And guys this took me forever So I really really appreciate it if you supported us so I can create more just like this Okay By liking this video and subscribing you first put these videos such highquality content on your feed And I don't know why you would want to watch the other CRUD-based applications that teach you to build something that is only going to be a part of your portfolio I am here to help web developers accomplish one thing which is never work a 9to-ive job ever again I want you guys to become SAS developers SAS business owners so you can finally make money without having to work That's my goal okay And that's why I'm giving all of this for free Even though there is a codebase link you don't have to buy it You can watch the entire course and get it completely for free And yes we are you know just motivating them as well by giving them some bonuses which are not needed It's not required but we do that just to you know encourage them as well And so if you did purchase that it's just going to help us right That's pretty much it Keeps the team going keeps us motivated We're able to help you even more And at the same time we're able to provide you with more value Okay So um with that being said please do subscribe so you get content like this on your feed so I will have the opportunity to help you And at the same time it helps us as well Okay So once the assistant's name is done the next part is we're going to show one more div right here So now we're showing the assistant Okay And um why is the assistant's name not showing Let me see guys Give me one second Where is the name supposed to show Oh that's the name itself Okay I think I created Oh yeah I think I created the assistant with the same name Okay never mind That's fine So now the next thing I want to do in here Oh I think I know what this is guys So this is the AI assistant that I think we created inside Vappy The one I created was called test user assistant right Something like that Okay Anyway doesn't matter So after this we're going to create another div here And this div is going to have um whether the assistant is speaking uh assistant is speaking or not So we can show like a circle So what I'm going to do in here is hit enter inside this And then in here we're going to essentially say assistant is speaking so we can show the animation ring We're going to show a div here like this Please follow the same syntax Okay The react fragment div and a div in here And inside this we're going to have that ring animate ring Okay And same thing here as well And then after that we're going to have a div after this And we're going to create a bot So this is a bot icon from Lucid React You can do whatever you like I'm just making it look a little cuter Okay And uh I'm going to put the following styles around it So rounded full border 4 And if they're speaking we're going to make it accent primary And here it's just going to be 50 Okay That's pretty much it Now after this if the assistant is peing I'm also going to show another element here So down here I'm going to show this Okay And it's not going to show right now but let's just see if I can set this to true So we can kind of hack around So assistant is speaking Let's set this to true Okay And let's see what that looks like There we go Looks super super cool right So um this is going to fire when the assistant is speaking And now let's go back Okay awesome And after this guys you're going to have one two three Hit enter And now is this part is for the user So I'm going to say div like this And inside that I'm going to create another div that has the following styles Okay And then inside this we're going to say is mic muted And if it is we're going to show that So if the mic is muted we're going to show mic off icon And we're going to say muted just like this And my mic is not muted So that's why I'm able to see the second icon which is this mic right here And I'm going to say user's name Daniel And obviously if the obviously if the user is speaking we're going to show that as well Now after this part here you have this div Hit enter And now we're going to show the call time indicator So I'm going to create a div here that has a clock icon with the following styles And here we're going to essentially use this format time helper function And so let's go ahead and create the former format time helper function So scroll up top all the way up top cuz we might need it somewhere else And I'm going to say const format time like this Let's close this And now you can see the timer in here Okay And all this does is it's essentially going to um pass in some of the values the seconds in here or whatever whatever time it is It's going to pass it in here And we're just using a formula to essentially reset that Okay And if you're wondering what time are we passing in we're just passing the time that is remaining which is our state right here Okay So let's go back down to right here Uh hello Okay Right there And now we after after the format time you're going to hit enter after this div So one div two divs hit enter And after format time guys we're going to show actually sorry guys not after not right after this So it's after this div here Okay because this is the only div for this So after this first div hit enter And now we're going to create another div in here And it's going to look like this And inside this div we're going to have another div here that has relative And inside this if the user is speaking we're going to show their animation Okay So user speaking and it's not muted Then we're going to show this icon right here Okay Awesome And then after this section here you're going to hit enter And then inside this you're going to create another div with the following class names Now there's so much in here So please pause the screen and type this out Okay Um let me close this first So please pause and type this div out Okay It's just going to show something like this But obviously I need to put the avatar's name the avatar's icon in here So I'm going to say avatar from avatar components UI And we need the avatar image as well So let's grab that too And for the fallback let's grab that one as well Okay Nice So now I can see the avatar in here So if you like you can pass the avatar's image coming from the webinar details right Remember attendee details So you can use that that that's insane because now you can have their information in here Okay so uh again you don't need to but you could if you want to So the next thing that we're going to do is after this avatar guys we have a div here Hit enter And if the user's mic is muted we're going to show mic off Okay And if if the user is speaking and their mic is not muted we're going to show a mic icon like this Okay So very similar to what we did for the for the for the bot And uh maybe we can go up here and let's see if we can set everything to true So we have is uh user speaking We'll set it to true And we have AI assistant is speaking Set this to true as well So this is what it kind of looks like Okay Looks really really nice And I'm going to just undo that so it's not too alarming And let's go back down Okay And () after this div where we're showing the user speaking you want to um let me actually I think this is enough guys So you have one 2 3 hit enter after these three divs And now we're going to essentially show the call status itself So the call status is connecting We're going to show this connecting icon in here And we also have like a loading uh loading spinner And I'm going to change the loader icon to use this one guys So use this loader icon So it looks a little cleaner And uh maybe you can say background primary Let's see what this looks like Oh never mind It's actually not background primary I think it is Oh we need to change the color somewhere Oh text That's what it is So text primary like this Um or accent Is it accent or is it the ring Okay there we go That's what I wanted So now we have that purple color And then after showing the connecting status we also have to do the finished Finished status Finished So I'm going to say finished here And what I'm going to do here guys is I'm going to just change this to finished And I'm going to change this to connecting And it's going to look like this Okay So let's redo that Awesome And then after the finish status down here we have a div Hit enter And now we're going to show call controls Uh so I'm just going to say div like this And inside this div I'm going to have another div just like this Okay And inside this one I'm going to show the call related information So please pause the screen and type this div with me It's just styling related stuff So what we're going to do is we're going to say div with the following class names The call status if it's active Then we're going to show the clock right And we're going to show a span here with the time All right awesome And then after that we're going to have the call actions So so here we have one two So hit enter after this one guys And you want to create a div in here And then inside this I'm going to use a button to show the mic off Okay And this is going to toggle the mic mute So in here we're going to create a button and it has an on click that has a helper called uh toggle mic mute And then in here we have the CN function that's just going to check if it's muted and we're going to show some different colors Okay so pause and type And if it's disabled that means the call status is not uh is is not equal to active Next we're going to show if it's muted mic off If not mic on So let's go ahead and create this toggle mic mute So I'm going to scroll up top okay Right here And I'm going to say toggle mute ref.curren.au audio stream We're going to go through each of them and we're going to end those Okay And we're also going to need to set this is my is mic muted to the opposite So let's go back down Okay Awesome So we now have the call muted part completed Now hit enter here And this is essentially to stop the call or end the call So I'm going to say button like this And we're going to say uh phone off icon And the user can essentially cancel or quit the call from here Okay So I'm going to say stop call So when they click on this stop call and this is the helper function that we already created And then this is the following styles we need And if it's disabled that means the call is not active Okay So right now um if I click on it it might throw an error Okay it's not That's because it's disabled I assume So okay no worries Let's just keep pushing through So next we're going to have a button here Now this is actually a bonus part that I was going to add as part of people who purchase the codebase but because you're watching so far I hope this helps you Okay So essentially this is a button where the user can buy directly from here So this is really nice because you can convince the AI by putting a prompt I mean you can put a prompt for the AI to tell the user that hey we only have 10 spots and we want to make sure we can work with you And so if you're ready to start there's only there's only two more spots left or whatever Uh go ahead and click the link that's right here and you can open up the it's going to open up a payment page and you can essentially pay for XYZ That's awesome right And right here guys sorry I got a call So right here we're going to create that checkout link Okay so we're going to say checkout link is async function like this And in here we're going to have a try catch Okay And all we're doing is if there's no price ID there's no Stripe connect ID for the presenter as well send an error Okay And if so if everything is completed if everything exists then we're going to we're going to invoke create checkout link And we're going to essentially pass in all of these values Okay Next if there's no session URL throw an error And if everything looks good boom we're just going to open it up into another page This is going to directly impact how much money your customer makes And I promise you this this feature alone just these 10 lines of code is going to make them tens and thousands of dollars Okay And this is why it was part of the bonus feature So please please do subscribe So I'll consider giving more uh more like this maybe uh more bonus features maybe inside the discord or uh maybe some other time on a live stream Okay So um now we have the buy now button So the checkout link is completed Finally I'm also going to have some information on the right side So after the button hit enter and I'm going to say div hidden on mobile device and uh MD block And we're going to say if call status is active and time remaining is less than 30 I'm going to just say call ending soon That was a lot right That was a lot And uh if I also click on this we can try Let's see what happens Hey look at that $3,000 Nice So it does take you into a different page Um and so you can purchase uh from there obviously and you can disconnect the call I mean obviously you have to disconnect the call but I'm not going to do that right now because I want this call to run Now the next thing we need is that use effect right So let's go ahead and complete that one as well So in here what we're going to do is for the use effect we're going to need two helper functions The first one is to start the call and the second one is to stop the call So first let's go ahead and create the start one So I'm going to say call start call is an async function It has a try catch and in the try block we're going to do set call status to connecting right and then we're going to check the uh we're going to essentially say vap start with this assistant ID and then we're going to say const equal a response equal await change call status and we're going to change the call status to in progress and if there's no response we're going to just show an error here Okay And the next thing that we need to do in here is uh we're just going to show a console message and show the call finished if anything happened uh any error took place Next is a call stop and the call stop is going to look like this So same thing const stop call Oh we already did the stop call I assume guys Let me take a look Okay we already completed the stop call So we're good to go So the next thing is only to establish the use effect connection Now when we first start this there might be some errors okay Because we need to get our microphone set up There's a bunch of stuff that we might need to set up And so we might need to do this once more That means we might need to create another call But this is good enough to essentially test this out Okay So let's go ahead and build this use effect So this use effect is going to look just like this So all we're going to do is say use effect start call And then on the cleanup function we're going to say return stop call The reason why I'm telling you this early on is so you can paste it as fast as possible So there we go So now the call is established And now it's going to ask me for my uh microphone I'm going to say allow while visiting the site Hi there this is test pew assistant from customer support How can I help you today Hey how are you today I'm doing great Thank you for asking How about you I'm doing How's your day going Yeah I'm doing great myself Thanks for asking That's wonderful to hear Do you have a few minutes to chat about how growth partners might be able to help your business improve its operational efficiency through custom software solutions Um yes but actually I wanted to learn more about Prodigy's University What is it Okay Okay that's pretty much it guys So now if you click on call ended it's going to call the it's going to end the call and it's going to set the time limit and just say time limit reached This is awesome guys Like take a look at this We have so many newer technologies that give us these awesome opportunities that we need to grab And I'm so glad you watched this video because my goal was to put this in front of you so that you can learn all of these things and do it yourself start your own journey start your own SAS maybe make a ton of money and hopefully then you reach out to me and let me know so we can feature you on the channel Okay Uh that's pretty much it So now we need to just do some quick um you know improvements and maybe I will show you a demo or uh maybe we will fix anything that is required to change Okay that's still required So just give me one second guys So I went ahead and recorded the demo The AI agent performed exceptionally well and uh it also closed me on the call It collected the cash It's awesome Okay the prompt we created really does work Now the first thing if you want to watch this demo just scroll all the way to the beginning because I'm going to put this video this demo as part of the project demo itself Okay that way we don't add more time to this video which is already super long So let's now move on to the most important part of your SAS which is to deploy your SAS application so you can accept real paying customers Okay So the first thing you're going to do is open up the terminal and you're going to type the command npm run build but you're not actually going to run it because I just want to give you some quick heads up So you're going to get two different type of errors The first one is using types here So we're going to create types props and remember we did something like this and we essentially passed in an empty type So it's going to say please remove this So just remove that type Then the other type of error you might find is during the is in the update server action The update agent server action So it looks like we just passed in a wrong property So please make sure to change that as well And that's pretty much it Okay You're not going to see anything else crazy It's very simple straightforward edits So once you're done clearing that up then you can continue this video So pause this video type npm run build fix all of your errors and then once you're done you should see a file that's going to I mean you should see your console show all of the static routes generated and dynamic routes and it's going to give you the bundle size all of that If you get to that page then you can proceed in this video All right there we go I ran bun run uh sorry npm run build and now I have everything in here Okay I saw this error This should not mean anything It's just a dynamic uh route that it's not able to generate But that should be okay And then if you see this error guys if you see this error it probably means that you did not pass a weight for the props Okay Nex.js has updated their documentation That means all props now have to be all props coming in from a page.tsx tsx have to be uh have to be awaited Okay So if you saw this error that's the solution All right Now once you're cleared once you've cleared all of the errors inside your terminal () you're going to go into your root directory and you're going to create a Docker file just like this Okay And if you purchase the codebase or if you did not purchase the codebase as well that's totally fine You're going to get this Docker file inside the Discord only Okay There's no other way for me to give this to you So grab the YouTube kit from the Discord There will also be two different versions the bun and npm version And I'll try my best to put it inside this readme file for uh those who purchase it Okay And the next thing is once you uh once you're done creating this docker file you're going to find this docker ignore file And this docker ignore file needs to be just like this So go ahead pause the screen and type this out And then once you're done with this we can now proceed to the next stage which is making the decision on how to deploy our services Okay So how do we deploy our application How do we get it in front of millions of people so that it scales and so that obviously it's it's cheaper on the pocket Okay We like we don't want our wallet to get hurt cuz we just started we just started our business Now there's two different ways The first one is using a cloud hosting type of service Okay So someone that's already done all of the stuff for you and all you need to do is just deploy So this is one option but this typically comes with uh costs right Obviously and it's more like a pay as you go kind of service where you pay $20 per month or you pay $30 per month and then anything on top of this you got to take care of And so if you are using some sort of a cloud service just please keep in mind you're supposed to do your own research okay Make sure that everything in your application is perfect Do not make any bugs any infinity loops because if you uh if you cause any errors on the server and there's a lot of server usage you have to pay for it Okay There's no escape And so you could get a $20 bill you could get a $10,000 bill I don't know but that's up to you So please please do all of your research All this all this stuff is free obviously but we do not take any responsibility Okay Please do your research guys So there's one other option which is my preferred way which is hosting it on our own BPS And I'm not talking about my computer Okay We're not we're not in high school all right Because it's not going to work You you're going to have a lot of traffic and you can't keep your computer up and running So one way is using a VPS but uh using a service from someone who's already purchased the server somewhere far far away and you can essentially rent that server and that makes it feel like it's a dedicated server but at the same time it's it's virtualized and you get that 101 like dedicated experience Okay So this means it's containerized you have your own uh your own environment So you can route into it with all of your commands and you can set up any type of environment You can do whatever you want You get full customization Okay so there's two different options Now if you ask me I would rather go for this first because it's very very affordable Okay it's probably like $10 or less Okay it's like $5 sometimes or $6 per month that is really affordable And uh the other thing is uh the price to value price to you know quality ratio is also awesome because VPS you get so much more customization you know functionality So () today to deploy our application we're going to be using HostingerVPS Now Hostinger was nice enough to work out a deal with us And so by using our link in the description you will get 61% discount And I'm also going to show you how you can get an additional discount on top of this already insanely lowpriced tier Okay And so we're going to be using this KVM2 plan right here which gives you plenty of resources you need to run your SAS company Now this is more than enough bandwidth even if you get dodoed your your server will still handle every single thing right And uh some of the reasons why you'd probably want to use Hostinger I think I've already brought this up first It's used by millions of people around the world Okay And obviously it's because it has super high performance It's super fast And uh they also give you plenty of resources Like I said uh a ton of network speed and um obviously you have backups snapshots you can take a look at all the awesome stuff but uh they also have some uh you know scalability options So if you want to scale your resources it's super easy to scale inside and I'll show you how to do all that stuff And uh obviously they have great support and uh most importantly they give us full route access to our server So it almost feels like you own a server It's just virtual but it feels like you own a full server Okay So use the link in the description but but please keep in mind this is a limited time deal And so go ahead click the link in the description and use this link only to purchase Okay So go ahead and click on choose plan And then we'll proceed to the next steps And don't forget once you click on that click on have a coupon and then enter the code web prodigies Okay And go ahead and apply this coupon and it's going to give you a discount on top of the discount that they already have Okay So you're going to get 10% off on top of the 61% off already And so instead of paying $431 you're only paying $150 for 24 months Okay So go ahead and u then scroll down here and you're going to find some some OS uh operating system options Click on this OS with panel and you're going to find Coolify in here Just click on Coolify and click on confirm Okay And once that's done go ahead and confirm and continue your payment and then I'll see you on the other side All right guys Great job on choosing to go with Hostinger and thank you for using my link Hope you liked the awesome discount So thanks once again to Hostinger for helping out the Prodigy's community So the first thing is once you get into your dashboard you might I mean if you have used Hostinger before then you might already have your KVM2 set up here but uh I'm assuming that this is a brand new account for you So all you have to do is click into setup and it's going to take you into a page that looks like this Okay Next go ahead and click on start now And this I think is the uh they're trying to give you like you know the uh the best uh renewable energy all that kind of stuff right So you can you can do that if you'd like and you can also select a server that's closest to you I see that they also have this So I'm just going to go ahead and select United States and then go ahead and click on continue Now this is the most important part right So click on Coolify Click on select here And then it's going to take you into this where it says it's going to install some additional stuff Go ahead and click on continue And then it's going to ask you to create a root password So go ahead and copy this root password Copy your VPS host name and uh obviously uh then go ahead and click on continue Okay And then it's going to take you into a page that looks like this Just go ahead and click on finish setup And now this is going to take maybe 10 minutes So go ahead grab some coffee take a small little break and then I'll see you in 10 minutes All right guys So everything that I'm going to share from here on is super super important So please make sure you've already grabbed your Hostinger account using my link so that you can get the discount And not only that you can follow through with me okay Even if you're not going to deploy right now and you're working out the the offer or you're trying to work out you know work out the SAS and fix the code make sure you grab the discount because that link is a limited time link only Okay So once you're done with that only then proceed further from here So what I'm going to do guys is uh it's going to once you're done with the entire process the build process it's going to take you to a page that says go back to uh to dashboard right And it's also going to give you an SSH key Copy that SSH key I don't think we're going to need it right now And just paste it somewhere else Okay Now what this is the dashboard It's going to take you into something like this Click onto VPS right here And then you're going to find this thing Okay And then make sure you click on manage and or if you're already inside this page then just go to OS panel and click on operating systems and it's going to take you in here Okay so in case you're a little confused where you are that's where you should go Next click on OS panel click on Coolify click on connect click on then I recognize that my files will be deleted whatever whatever click on uh continue and then go ahead and paste that root password that you already created All right So the reason why I'm doing this is just in case you messed up or you click something else this is essentially going to reinstall and make sure that all the Coolify stuff is already inside your your VPS Okay And then once this is done then we'll continue All right There we go And uh if you didn't do that that should be fine As long as you have Coolify in here that's okay The only reason why we did this change OS is just to make sure that in case you use something else you can uh you know just switch here And obviously we all have the same operating system Now the next thing you want to do is click on manage panel and this is going to take you to Coolify Now Coolify is just going to make it way easier for you to deploy your app and also manage () your environment variables and all that kind of stuff Okay So go ahead and sign in Create an account here and then once you're done with this I'll see you inside All right Now it's going to take you into a page that looks like this Go ahead and click on get started Click on next here And then it's going to ask you do you want to deploy to your local host or to a remote server and okay I just had to verify Just click on local host here Okay And then go ahead and click on create new project It's going to just say something here Just click on let's do it Awesome And it's going to set up some stuff for you Don't worry about this This is so alarming It's uh just notifications enabled So just go ahead accept Close that Disable this popup And there we go I actually really like the user interface for Coolify I mean the UI looks awesome Okay And the next thing you're going to do is you're going to click on projects here And you want to uh Okay So it looks like it took me in here Let's see where this takes me actually All right So we're supposed to be on this page So don't click on projects Just go back and make sure you're in this page Okay Next click on private repository with GitHub app Click on this button here And then it's going to take you in here Just click on continue Don't even read anything or anything It's going to take you in here Next click on register now And that's going to ask you to sign in to your GitHub Okay So just go ahead and sign in and then we'll continue Okay Now I have signed into GitHub It's also asking me to create a GitHub app name I'm just going to create the app right now And it's going to take a few seconds Okay And then it's going to take you back here Go ahead and click on install uh the repository and now it's asking you all or select um a specific one So obviously we want to select a specific repository and I'm going to select the repo that we just built Okay there you go I found it Web Prodigies-Spotlight Just go ahead and click on that and then install this into this uh into Coolifi All right so it's going to take you back into this page Go ahead and click on projects Now click on your first project and it's going to take you in here Now you need to add a new resource Okay And it's going to load something Okay Go ahead and click on private uh repository again It's going to show the new repo and the app that was created So click on this one And then make sure this is selected from the dropdown Okay And go ahead and load this repository And in here remember you have to select docker file Okay So select docker file and then this is set to main This is good to go So if you are maybe in a production level environment right You could probably have two different repos or two different branches and you could you could create CI/CD and I'm also going to show you how you can do that as well Maybe I'll show you how to create uh a web hook so you can rerender this uh you can redeploy this based on a push Okay And now go ahead and click on continue and it's going to take you in here And then you want to click on environment variables right here and then click on add And there's actually a better way to paste this Okay I think it's okay There we go So click on developer view and then go ahead and grab your codebase Go to your environment file and then grab everything from here and then paste it inside this in uh this variable the developer view tab Okay And then once you paste it in here save all the environment variables and then once it's saved go back to configuration and then click on deploy There we go Awesome Now you can see the debug logs and let's see what we need to do to fix any errors Now in the meantime I'm going to click on configure () I'm going to click on web hooks here and then you're going to find a web hook URL Go ahead and copy this And then you're going to open up your repository You're going to click on settings You're going to click on web hook and then you want to add a web hook in here and you're going to paste this in here And I think you're pretty much good to go Oh okay Forgot to click you got to click on you got to click on add web hook And that's going to add the web hook in here Okay So now what we're going to do is every time you make a change guys So for example I notice I had a command here which is npx and it previously it was npm run prisma generate But there's no script called npm uh run prisma generate Right So I think this should work Uh we can we can essentially try npx prisma generate and npm run build Okay And so now every time I make a a push here So every time I make a commit and I push for example I have to say get add get commit So I'm going to say changed docker file and then get push Every time I do this it's going to fire off that web hook and then coolify is going to autodeploy So in a way this is like creating a simplified CI/CD pipeline And just to show you that this is working we have a second deployment that says in progress and it was 24 seconds ago Awesome All right prodigies There you go As you can see we have successfully deployed our application Now you can take a look at the deployment logs There were a lot of failed attempts and I was just changing one or two lines just to test out things and that's why I had so many errors but it's just a few things that I had to do And don't worry about it I'm going to show you exactly what changes are needed to be made in order to fix this Okay And I'm also going to show you in here and how I debug them So I'm going to make it really quick I don't want to take too much of your time But the first thing the first error was right here So docker is uh essentially is saying run this in node 20 Now previously I don't know if I had node 20 or node 18 but uh I think it was node 20 And when I looked at my node version so you can do that by saying node-v was on a different node version And so the first problem is when you run npm run build it's going to do the TypeScript checking and ESLint checking with your version not what's inside Docker And so that's why you're probably not catching all the errors that you would see Now what are those errors that I saw inside inside this uh Docker container itself So the first error that I saw here was this vaperver uh assistance.create create and it said that it was missing this one value here which is uh where is that There we go Server messages and so all you have to do is you have to add another property right above name or right below voice called server messages and set that as an empty array Okay so I did the same thing for the second one as well and then I saved that and that pretty much solved that problem But that brought up another error and I think I was trying this multiple times and finally I solved that error but then I came across another error which was this one right which is the AI assistant ID is not a is not there it's it doesn't exist when in reality it does exist it is a part of the assistant type and so ID obviously does exist so this is just some TypeScript related stuff you don't have to worry about it because when you when I ran this locally Everything was fine Obviously ID exists or nothing's going to work right So what I did here was uh I went ahead and changed this to name and that solved the problem obviously but I didn't actually like that I mean it's fine You can keep it as name It's probably better than the solution that I implemented which I'm going to show you in just a second But uh but that was the other fix that I had to make there And here's the proof to also show you that I did assistant.name and it solved the error there But then there was another assistant ID I was so I was literally rushing through it right And so I didn't even pay attention So this was uh it's just because I'm using ID in here So what I did was uh I know for a fact that everything ran smoothly because I swapped over to my MacBook and I made sure that I was using nvm uh use 20 So that way I'm using the same version as my Docker container And then I spun it up once more And essentially it it I mean it still showed the same errors And what I did was this in here Now I do not recommend I do not recommend you do this This is just to make sure that you can deploy safely and have your application up and running But because I know it's just TypeScript errors How do I know that Because if I run the Typescript uh TypeScript command to run TypeScript on my project I can see how many Typescript errors I had Right So all I have to do is inside your next config just put this in here Again please do not do this in production This is just for learning purpose And in production you have to solve the TypeScript errors Okay And you can use AI to do that I just do not have time because this video has gone way longer than it should be Okay So go ahead and add this And the next thing uh the next error came up because our docker container right here is expecting the files to be standalone Okay And obviously this does not exist So it's uh I mean I I came to know about all of this by asking AI right So you see it says this error exists because Nex.js standalone output directory isn't being generated during the build process And Docker expects this And so all you have to do is go into your next config and add this output as standalone Okay that's pretty much it And then go ahead and push the code and because we have that awesome CI/CD web hook firing it's going to automatically redeploy And boom it's going to give you this awesome domain So go ahead and click on this link And now open it up And there we go Now we have our site ready up and running So now you can get users onto this platform You can start driving traffic directly to your SAS How awesome is this guys And just to show you that this actually works I'm going to go ahead and sign in with the exact same account It's going to redirect me into my account details And if I click on webinars I should see four or five webinars here There we go Okay Awesome And you can also see our leads page You can see our AI agent So we're getting all of the information directly from Vappy Guys this is insane We have built one of the most disruptive pieces of software in the marketing space So what () are the next steps now So the first thing I would do is grab the codebase from the description Okay Cuz when you do I'm going to put a bonus module It'll be done with my team not by me but uh they'll essentially record a Loom video and that link is going to be inside the readme file Okay And this Loom video is going to show you essentially how to set up uh how to set up resend and you can send emails uh through using resend Okay so that's one of the cool things you're going to get from the code codebase in the description down below And the second thing you're going to get obviously is all of the bonus stuff right So the website uh the web application uh is going to have the other recording feature that I mentioned So that's the other thing that's going to be a part of that uh of that codebase as well And not to forget this is on a launch discount okay So we're going to have launch period only for a little while And so since this is a limited time offer go ahead and grab the codebase right now So what you're going to get is 50% off the codebase right now And you're also going to get a free license So technically speaking you would have to just the license itself is $100 Okay And so when you grab this not only are you going to pay 5050% lesser you're also going to get this additional $100 bonus So essentially you're saving more than $150 Okay So this is an awesome uh awesome opportunity for you to get started and you know launch your SAS make some money and then hopefully we can help you out in the future Now if you believe that you're you already have all the technical skills all the technical knowledge but you lack the business knowledge that means what do I do now to launch this SAS and actually get customers to show up at my doorstep Or maybe you have some technical questions about how to build something production grade or you might want to be around people who are already successful in the field of SAS And so if you want to be around these like-minded people if you want to start your SAS if you've been you know doing the same thing for many years this is the opportunity to transform your journey So Prodigies University is a uh is essentially a program where we help SAS entrepreneurs just like yourself start run and grow a profitable SAS online Okay And this is not just the tech giving you assistance through mentorship calls because there are group weekly coaching calls as well We also give you unlimited courses and everything we ever create inside Prodigy's University and on our store is going to be completely for free for you if you join Prodigy's University Okay Now I must let you know that this is not for everybody Okay There is a very strict uh qualification criteria If you do not meet the qualification criteria I hope you get to work sometime in the future right Take some time off Maybe work on your skills uh or maybe you you might need some investments Get all of that together and only book this call with our team if you are ready to move forward because our representatives do not have time There are hundreds and hundreds of people who book calls with us We physically cannot attend to everyone right And so please keep this in mind We're only taking six entrepreneurs who want to start their business okay And so if you don't have at least $5,000 to invest into your software company this will just simply not work okay Because you need to run ads You need to hire people to do a bunch of stuff for you And so if you don't have this please just do not book the call Do not book the call with their team Uh maybe sometime in the future when you're ready to move forward I think this opportunity can be for you And that's pretty much it guys I hope you learned a ton from this video Don't forget to subscribe Not just for me but the main reason is to put such high quality projects on your feed okay And so if you don't subscribe I unfortunately lose the opportunity to help people just like you And so please do subscribe so these videos show up on your feed And the second thing is feel free to like this video if you if you think what I just gave you is a fair exchange for a like Okay That way this video can reach more people and we can help more developers quit their boring nineto-ive web development jobs and start their own SAS Okay and with that being said thank you so much Prodigies Thank you for watching and I will see you in the next