Title: Build and Deploy a Full Stack AI SaaS with Next.js 15, React, Stripe, Tailwind | Full Course (2025)

() hello my name is an and today we are going to build and deploy a complete sze business a software as a service app leveraging not only one but two AI services to create stunning beautiful concise summaries from your lendy PDFs you will also have the opportunity to convert this project into a side income or a full-fledged business we will be building an app called as someware AI that allows you to transform your PDFs into beautiful concise summary reel of your document in seconds and when I say entire SAS business I mean it by building and deploying this app you will learn how to add payments using subscriptions all the software needed to power this app design a stunning beautiful modern responsive landing page and even learn how to create that beautiful stunning image that you see when you're promoting your SAS app on social media and all of this while learning next year 15 alongside react 19 using server and client components routing groups Dynamic routes server Action Now we will cover Advanced forms using typescript Zod and server actions chat CN UI for component library for giving us those accessible react components and tailin CSS V4 which is the Revolutionary latest version of Tailwind for modern responsive UI you'll be using clerk for robust authentication and user management upload thing for secure file uploads and file management Lang chain UI for PDF parsing and text extraction as we will be dealing with a lot of different files open AI as well as Gemini AI for Smart Text generation and summary reels and postare sequels which is the world's most advanced open-source relational database which allows us to write powerful SQL queries but don't worry to make writing SQL a lot easier we will be using neon DB which is built on top of a serverless platform that allows you to shift faster and write performant and Rel reliable backend code and it is designed for a startup founder inside you that allows you to ship scalable apps and startups quickly we will also be using stripe for secure payment processing and for subscription management including learning how to handle subscription cancellations and other complex payment scenarios and I would say that this is practically a stripe course on its own this app is filled with modern and Slick animations using motion formerly known as framer motion and don't worry if you're stuck I have also created a custom Discord forums where you can ask questions and help you get your bugs resolved to follow along with me and to build and deploy this beautiful ASAS application you can download the cheat sheet for free that's located in the description below that is filled with helpful links and resources that I have shared along with visuals that you can reference as we build this AI SAS app together it also has a GitHub repository filled with comits to make it even EAS easier for you to follow along now whether you are a aspiring developer working for yourself or working in a 9 to5 job we all have this dream of building and shipping our own software and making money from it this AI SAS course will truly help you that giving you all the tools that you need at your fingertips needed to ship your own SAS applications and this entire text tack is completely free so you can ship a SAS app for $0 so let's take a look at a demo of how this will work now this is () the Beautiful landing page that your users are going to land on as they go to your SAS application which is Suare a.v. apppp now this specific app allows you to transform PDFs into concise summaries a sumare is a name that I personally gave it's a French word for summary now don't come at me if I'm unable to pronounce French words correctly but it I found that it was a really beautiful name for this specific app this SAS app allows you to transform your PDFs into concise summaries and it is in fact powered by AI you can get a beautiful summary reel of the document within seconds now if we scroll down this is a quick demo of how the app looks like and this beautiful landing page is fully responsive so even if you go on tablet to mobile you can immediately see it at the same time if you refresh the page you can also see a really cool slick animation that makes it look that makes your page look really modern so if you scroll down you will see how this specific next year course PDF document that I uploaded has been converted into this beautiful real that we can check out I try to replicate what you see on social media that is Instagram or Tik Tok for the important points about the real otherwise it gets really boring to read a really long document when you really want just a gist of a summary of the document and you can scroll to the right or to the left and it has this really slick animations as you navigate from one page to the other as well as you can navigate from the right as well it tells you all about the key highlights why it should matter the main points in the document and the pro tips it's key terms to know in the document because I personally find that in a lengthy PDF document it gets very hard to know all the jargon that people are using then it describes final thought this course transforms developers into nextjs experts so AI said that I didn't I'm glad that AI thinks that it will turn you into a nextjs expert that's awesome if you scroll down it tells you in three easy steps how this app works you can transform any PDF into a easy to digest summary in three simple steps so step one is to upload your PDF step two is for AI to analyze it and step three is to get summary as simple as that and when you you hover over it we also have this really nice animation for hovering a border around the element itself then we have pricing and anytime if I refresh the page and I'm already in this section you can sort of see how pricing slides from left to right then if you click on buy now this basically takes us to a stripe checkout experience where it is a production environment so you will be charged if you do subscribe to it and we have two pricing tables we have a basic plan as well as a pro pan all of this is powered by stripe I will teach you everything that you need to know to power stripe for your AI SAS application or for your SAS application in general then when you click on buy now then you would be able to buy this specific product as well so now we are going to go ahead and buy the product I have entered my credit card information and I'm going to go ahead and hit subscribe now the minute we do that this specific email address is going to be subscribed to a Pro Plan and as it's processing then it would redirect us to a thank you page there we go and this is a message that we have created that tells us hey thank you for trusting us now we can go to the link sare a.w. apppp and I'm going to log out because I'm already logged into one account and if I go back we get redirected back to home as we log out but between the pro and the basic plan there are two options the basic plan plan gives you five PDF summaries per month standard processing speed and email support whereas the Pro Plan gives you unlimited PDF summaries priority processing and 24/7 priority support as well as a markdown export so now if we go ahead and sign in to our application I'm going to use the email address that I just created so like the checkout experience said we need to go and sign up so let's do that let's go ahead and create an account for us there we we go now that I've done that I have been redirected to home and you can already see that it has already recognized that I am an on a Pro Plan which means I get unlimited PDF summaries now we when we go to upload a PDF we see this beautiful upload PDF page you can upload a p PDF and let AI do the magic so for instance then click on this specific cheat sheet and then upload it as it's uploading the PDF then it's showing these beautiful toast notifications to let the user know what's going on now I have gone ahead and literally processed each and every step for us step by step so the user knows what's going on along with getting all the loading States right as well because when there are multiple steps going on in the background it's really hard to know exactly what's going on so the user needs to know that now the PDF summary has been generated and we are redirected to a new page now this literally tell us how long it takes for us to read this document the original document as well that we can just go to we can also download a summary and if we take a look then it is in fact this summary which is a markdown document this specific view it's a summary viewer that is AI powered so it AI is basically telling us that okay these are all the key highlights the pro why it matters for you to read the document the main points in the document and so on and you will be able to navigate to this specific reel by going left or right that's really cool even though the name of the document is nextjs Hot Tips cheat sheet we have given it a AI generated title as well and this is in fact total of 163 words now if you go back to dashboard we will be able to see a beautiful animation and then see these card as well now we can also go ahead and delete it if you want or we can go and click on new summary and upload a brand new document but sky is a limit here because we are on a Pro Plan so we can do whatever we want now our secure authentication layer is taken care of by clerk if you click on it I can click on manage account so this entire model as well as all the authentication is clerk powered I can even go ahead and upload a photo and now I'm able to upload the photo as well I can connect a different account such as Google if I don't want to use this account and all of this is taken care of my clerk I can change my password so you don't have to worry a lot for all the authentication on top of this we are uploading all the files to a service called as upload thing it allows us to seamlessly manage our files and make file management a lot simpler now this entire page has SEO optimized ation which means that if I copy this and go to an app called as open graph and hit Check website you can see how exactly this app displays on Facebook on X and on LinkedIn as well as Discord so I can share this wherever we like and it will generate the title and description which I'm going to show you how to do it in this specific app as well and all the smartness is powered by open Ai and Gemini Ai and I know know a lot of you mentioned in my previous videos that whenever you use open AI in certain countries there's a limit don't you worry because we have a backup now if open AI does not work for you you can switch to Gemini Ai and we have a very smart way of switching from open AI to Gemini AI if you have both services in your country or if you just have one then you can also just use gini AI it's all going to work and I'm going to show you how to do all of that in the specific course now all the form manipulation so when you click on new summary there is this form now even though this form looks pretty complex which is just a upload field but file uploads can be really complicated which is why we are using upload thing but we're also using typescript as well as Zod to perform all the typescript form validation and schema validation needed so we can upload and Par the files really seamlessly once our PDF gets processed then we pass it pass that PDF to Lang chain to extract the text from the PDF so it's really fast and secure as well as it's able to extract the text exactly what the PDF has shared and pass that on to AI to generate all the AI summaries that we need and then we create this really complex react component which allows us to navigate from one page to the other but also create a beautiful reel and all of this is powered by react 19 so you will be learning react 19 hooks that you haven't used before and they are really powerful and really cool so something all righty so let's go ahead and dive in and ship this AI SAS app in this course you are going to () learn how to build and deploy your own AI SAS application and to build this app soare that transforms PDFs into beautiful summary reels of the document we would need a few key tools for you to truly understand and master this specific project now this is the text tag that I would highly recommend and has a pretty generous free plans that we will take a look at as well to build the specific AIS SAS application so when you start making money your costs are low and you would know exactly the tools that you would need in your teex stack to build and deploy your own AI SAS application and ship them and make money so the first technology that we will be using to build this specific AIS SAS application is nextjs now as it says here nextjs is the react framework for web we're going to be using nextjs and specifically the app router from nextjs which is the recommended way to build your nextjs and react applications we will be using react 19 Yes you heard it right react 19 is the latest and greatest with all the cool features and hooks that you may have heard of but you will truly learn how to use them this along with nextjs is going to give you a solid foundation to ship production ready AI SAS applications so you can focus on building your product versus worrying too much about the technology to make and build this beautiful ASAS application we are going to be using tailin CSS now tailin CSS is the CSS framework and has become the standard in their industry Tailwind really is a utility for CSS framework that is packed with classes that you could just use directly to build any design directly in your marker now if you want to use tailin CSS all you need to do is add a flex property and that will automatically convert Flex into display Flex in CSS code for you the more utilities you use from tailin is going to allow you to rapidly prototype and build the production ready AI SAS application that we are building and to top it all off we are going to be using the latest version of Tailwind which is V4 where a lot of things have changed but don't worry I will be walking you through each one of them step by step we'll also be using a component Library which frankly has become a standard in the industry today for shipping AI SAS applications or even next SS applications in general called as shat CN UI this is a component Library any production ready application does require a component Li library that allows you to beautifully design components and ship them and it's already built on top of tailin CSS and completely open source so you can pretty much just grab the components that you need for instance if you take a look at all the components that are available they have alert Avatar badge card a lot of these components we will be using in shipping our production ready AI SAS application and shaten is going to be our really close partner to help us achieve that now when it comes to our database and storing all the data that our users approach and to give us that security we'll be using postgress SQL this is the world's most ADV Advanced open-source relational database which which will allow us to write SQL queries and interact with our database but don't you worry because even though we will be using postrest SQL we won't necessarily have to deal with the intricacies and the complexity of using it for that we'll be using neon DB now neon DB has a pretty generous plan and it allows you to shift faster with postget SQL frankly it is the database you're going to love because it's built on a serverless platform so you can build reliable and scalable applications faster the pricing for Leon DB is pretty good as well because with the free plan you get $0 per month you can get S it for free and you get half a gigabyte storage along with 10 different projects as well so as your application skills you can potentially switch to the launch plan but I have launched several application on the free plan and it has served me really well so I would highly recommend you to consider using neon DB in your TCH stack because it will really allow you to ship AIS applications like this one to add the AI flavor to make our applications really smart we are not only going to use open AI that will allow us to transform our PDFs and create that beautiful summary re and add AI capabilities and the smartness to it we will also be using Gemini as well that allows us to ship really smart AI applications the AI capabilities where you would transform your PDF into AI concise summaries and create this beautiful real is only possible because of open AI as well as Gemini because we want to make sure that when we ship AIS SAS applications we are mindful of the money that we spend so open AI does have free credits but if you do run out of credits we going to fall back to Gemini AI this way we will be able to leverage the AI capabilities from not only one but two AI solutions that you could use right away on top of this to accompany our AI Solutions we will be using Lang chain that will allow us to par our PDF extract the text and chunk our documents all thanks to Lang chain and you will learn exactly how to do this in this specific course to manage our file uploads we will be using a beautiful tool called as upload thing for all our secure PDF uploads and file management this genuinely is the best tool for managing your file uploads because it creates a really thin layer on top of Amazon S3 but all the complexity is taken care of for you this is in fact built by Theo so you can you know you can truly trust it I have used it personally in a bunch of projects and I honestly love it because I don't have to think too much about my file uploads because upload thing takes care of it for me to process all our payments we are going to be using stripe we're going to use stripe for subscription ition management secure Payment Processing creating oneoff plans if need be but you can also think that this is a course on stripe as well because you're going to learn everything from creating a product in stripe creating subscription creating different web hooks inside of nextjs and managing the entire flow from allowing your user to access the application once they purchase all the way to to deleting their account or deactivating their account if they have not made their payments all of this will be taken care of for you thanks to stripe we will also be using clerk as our authentication partner clerk is frankly the most comprehensive user management platform user management can get really tricky but clerk is going to give us a complete Suite of embeddable uis flexible apis and different dashboards for us for authenticating our users managing them and it's going to take care of all the authentication complexity for us so we can focus on shipping our AI SAS application and clerk is honestly one of the best Partners they are not sponsoring this specific video I cannot recommend them enough the pricing for clerk is all also pretty generous you can get started for free no credit card required 10,000 monthly active users no charge for users who sign up but never return and so on along with that we will be able to add a custom domain as well as pre-build components but whenever we are ready to go pro we have a bunch of users for our AIS SAS application then we can truly upgrade to the pro pro plan which is is also just $25 per month having said that I'm using clerk in a bunch of my projects and clerk free plan is enough for me to get started as well as ship my AI SAS applications so truly they are a great partner for authentication while shipping your AI SAS applications or SAS applications in general and on top of that all the features are completely free to use in development mode so you will get the flavor of using them but the minute you're ready to go to production you can choose which functionality you want to enable to or toggle off to give this beautiful application some animations so that it looks pretty slick as the user Scrolls from one section to the other so they can eventually purchase your application and it creates that trust with your users we are going to use motion the motion was called as freman Motion in the past but they are completely independent now and motion is a modern animation library for your application all you need to do is use motion and create a composable component that we could use to add animation throughout our ASAS application so our application looks really slick on top of all all of this we will be using nextjs to build a production ready application which is performant it will give you realtime updates allow us to seamlessly ship a responsive application and give us a beautiful user dashboard for managing summaries we will also be adding SEO to our application so that it's easily discoverable on Google and other search engines so it's easier for users to find us nextjs is also used by some of the top companies in the world so we will be following suit and building with nextjs because everyone from Stripe from open AI Netflix all of these companies use nextjs in production so we can truly trust nextg as our trusted framework for shipping our AI Sasa to get started let () let's go ahead and head over to the next year's documentation and to the installation section where we will be looking at instructions for setting up our next year's project now remember I'm going to also show you where I'm getting the information from and not just give you the commands and spoon feed you everything because I also want you to ship your own AI SAS or even SAS applications with the technologies that we are building and I want you to be confident and shipping them on your own so I will be walking you through where I'm getting the information from so you could learn how to do it yourself as well so going to the documentation we going to copy this specific command which is a CLI tool for nextjs if we hit copy and head over to our terminal this is where we can paste it this will allow us to create our next year's project the name of the project could be anything we like but we can call this Suare we are definitely going to use typescript and we will talk about the benefits later but it allows you to create types for your object so not everything in JavaScript is just a giant object we will be using eslin as eslin truly allows us to lint your application so that it can catch any errors and allow us to ship a bug-free seamless application we will be using tailin CSS as we already talked about and we won't be necessarily using the source directory feel free to use it if you like but I just think it's a it's more of a preference then we will be using the app router which is the recommended way for building nextjs applications and yes we will be using turbo pack turbo pack is the incremental bundler and build system with nextjs that allows us to compile all our files and rapidly improve development time so 100% yes we are going to use turbo pack would you like to customize the import Alias no we are going to stick with the default and this is going to install the dependencies as well as the Dem dependencies necessary for our project all right and now as it has done that we could CD to Suare and then this is where all our projects and file live now I'm going to be using cursor as my AI code editor as it allows you to ship really good code and allows you to be really productive as it autocompletes a lot of the code you can ask questions chat with it and so on even though we won't necessarily be using the AI capabilities of cursor as much I will still be using that as a AI code editor if you like feel free to use whatever editor you prefer if we go to cursor this is where we could just go to the folder where the document lives where the next year's project lives now as I have done that I've opened up my project directly in cursor now if we zoom in a little bit let me walk you through all the files that are there set up for us now the next year CLI tool is really great for this reason because now it has given us a base foundation for shipping production ready applications so to walk you through the project we have the app directory which has a bunch of files created now next JS uses the file based routing system which means whenever you create a new file you you will be able to route to it as long as you follow the naming convention for instance we have the page. TSX file which means this is a file that's been exposed to our browser so we could just go to page. TSX since it's is the root file we could just go to Local Host 3000 and then access it right away inside our browser now keep this in mind we have not necessarily started a development server so this is not going to work so let's just go ahead and do that let's just run npm run Dev and this is going to use turbo pack to start a development server so now if we head back and go to Local Host 3000 you would be able to see the nextjs project ready to go so going back to our project we have the page. TSX and what you see right here it in Local Host 3000 is in fact displayed from whatever we have in page. TSX so if we were to get rid of of all of this data and let's just say home then you all you're going to see is home right here in the project anyways we don't need any of this so we can pretty much get rid of it then we have the layout file the layout file is where we would store our header and footer elements as it is the root file where all our application Root elements are going to be stored which only need to be called once for instance fonts also if you want to set up any metadata such as a title and description for our project then we can easily do that here now this is very important for us to do so that search engines can easily discover us so we can just rename this and call this Suare and then this is where we can just say Suare is an app for summarizing PDF documents for now so if we go back to the app that we are trying to build we can pretty much just inspect element and go to the Head tag and here we can find all these different meta tags and this in fact does get exposed through the meta data constant from layout so for instance we have the OG title which is what we can just copy go here and paste it similarly if we go to description this is what we need as a description for our application because that's the app that we are trying to build so now if we head over to some you can see the title has automatically changed here and if we go to the in if you inspect element and open up our head tag you will see not only the title but also the description that's been updated based on the metadata constant right here similarly we have the root layout as a default function and HTM and body elements are in fact exposed right here with the fonts being set up as well now the font for our project is going to be Source Sans Pro and not these fonts and because next year's font allows us to import anything from the Google font we can just import the font that we like so in this case we can just say Source Sans 3 and let's just call this as font Sans and we can just easily access it right here we don't need this font at all and this is where we can just rename this to just say Sans call this font Sans as well and now expose a property called as weight which is pretty much going to be everything from 200 to 900 because we want all of these font weights in our project now instead of using all of this we can just say font Sans do variable now along with this we also need to add font Sans and apply the variable that we created here which is do get exposed so now if you go to Local Host 3000 again and if you inspect element you can see that the font has definitely changed right here so the font has been automatically applied and that is the job of layout then we have the global. CSS file which will allow us to store all our Global CSS configuration any tweaks to HTML and body elements need to happen here then we have the public folder where we will be storing all our assets assets along with a bunch of different files that do get created such as the eslin config file that allow us to configure our any es configuration that we want we also have the next config file that allows us to configure our next year's project and update whatever we want now since this is a typescript file you can basically click on this and see everything that you can do to tweak our next year's configuration for our project we have the packet Json that's true all our dependencies and Dev dependencies and then we have the post CSS config file specifically for T CSS so CSS essentially gets transformed from Tailwind to CSS and this is the configuration for that we also have a global tailin config file which allows us to configure our tailin for the project and this is where you would set up any colors and so on but with tail V for that changes things so we need to tweak this file and pretty much get rid of it but more on that later we also have a TS config file because we are using typescript instead of JavaScript in our project and this specific file allows us to configure typescript as well further and next year CLI tool has already done a lot for us now if you hover over any of the properties you you would see what each of these properties do so that is essentially our nextjs project now let's go ahead and add Shad CN UI component library to our project so if we head over to the docs and we have an handy installation section let's pick nextjs here and this is where we can copy the command to allow us to initialize Shaden in our project now if we copy this and head over to our terminal and paste it the minute we do that it's going to ask us to install sh CN UI library and here we can pick whatever theme we want it's validating that we have tillin CSS it has found next yes in our project validating the import Alias and so on now there is more info in this specific documentation where which will guide you to a few questions to configure our project 2 which is going to go with whatever is default and later on add this button so we can copy this for now and now let's just go with the default and select all the default options that allow us to configure shatan now as you can see how would you like to proceed and we have two different options so when you use react 19 as along with next year 15 we definitely need to follow this specific guide to give us information about how to configure a Shad CN UI project but here's the thing I have done the work for us to read through the documentation and all it's saying is until all the libraries get up to date with react 19 and the latest version of nextjs we have two options to configure our project now since I have already tested our project we could just use the force that will allow us allow the libraries to force react 19 as a dependency and it pretty much works the same way it's now going to install the dependencies and now we can go back to running our development server again if you go to the project you will see we have components or Json file which has the description of satat and components and where each of the files live in our project it's mainly for shaten and we have a lip folder now with utils and this is a CN function that's pretty handy for us to use and we will use that whenever we want to merge any specific Tailwind files as well because Shen uses that so now if you paste what we copied which is the button we can use the force option here and the button has automatically created for for us so now if you run our development server let's go ahead and use the button that we just added now we have a new components folder and the UI folder within which the button component lives from chart cm and we'll walk through this in a second but let's just go ahead and use button inside of our page so if I say button let's import it from shatan and let's just say shaten button right here so now if we go back to home and go to Local Host 3000 let's close this developer tools you can see Shian button has been configured in our project which is pretty handy so now it gives us the basic styles that we need to configure our button the benefit of using a library like shaten is that it is giving us the entire code for what button looks like in here with options for different variants so different types of buttons and also different sizes of buttons buttons which we can just configure because this is a react component so we can just add props to it and configure it so for instance if I say I want the variant to be outline if we go back now the button is in fact a outline similarly if I if I say I want the size to be large and if you go back here the button is in fact a large button so we can configure our button however we like in order for you to ship this production ready a ass application it's not only important for you to follow what you should do in production but also in your codebase your codebase should be set up to scale very well and handle the complexities of a scaling project as your application grows so one of the things what we are going to do is configure our eslin and prier config so that your project matches to what I have as well and you would be able to follow along now I am using cursor as my editor of choice but curser is is just a fork of vs code so if you're using vs code then it should pretty much match to what I have so what we're going to do is in eslin we are we have a few things we need to configure first of all let's just get rid of this and paste this new object that I have added now let me walk you through what it is we have changed the compact. config and I'm extending not only core web virals and typescript but also added a new string here for prettier the plugins is going to be prettier and we are going to also add these rules now if you don't know what prettier is prettier allows you to format your code so that whenever you make any mistakes then prettier is going to take care of it as you work with multiple people this gets even more important because if you prefer single codes and someone else on your team prefers double codes maybe it's time for you to have a conversation about it anywh who if it's just yourself still it's really good as your project skills so for instance we have these things and there are two rules that we have set up we pretty much don't need this rule but this is this is a place where we would say okay if it in case of error please show error for pretty here and we don't want add ENT code so for instance if I add double codes here I don't want my code base to complain about it and this pretty much says please turn it off the other thing what we definitely need is in your extensions you would need a extension for ES lent which is this extension right here I have already installed this so you need to install and the other extension that I would highly recommend you to get is also a prettier extension which is this extension here we there's also a prettier es lint extension don't get that you would just want the prier extension as well now once you have all of this we still need one more configuration one more thing which is if I hit enter and hit save it automatically formats it and the way you could do that is by going to settings and going to vs code settings here clicking on settings Json and you want to make sure that editor. format on Save is in fact true now you could also do the same by creating a new folder called vs code and inside of that creating a new file called as settings. Json and then adding editor. format on Save is true for instance as well you could do the same but I don't necessarily need it I have I want it on for all my projects whatsoever so definitely add that too you can also add any preferences here or you could create a new prettier file and share those preferences with everyone else you are working with but these format on Save is extremely important so that whenever you hit save then it does format it accordingly so yeah that's it this is the setup that you need for your specific project and so that it's consistent with everyone es Cinder is already installed by nextjs but you would need one more plugin so if you stop the server and install npmi and you need hyphen D capital D this allows you to save it as a development dependency and you can say eslin plug-in tailin CSS now it will also allow you to remove any invalid class names as well and make writing tailin code a lot simpler so if we run a development server again we need one more thing which is and this will also allow you to add and write maintainable tailin CSS code as well as it will order your class names warn you for any invalid tailin CSS class names and so on as well so that's it that's our config for shipping the specific production ready application so make sure you set that up if you're using vs code or cursor for instance on top of this we can also head over to vs code extensions and you can already see a bunch of extensions that I have already installed I would highly recommend you to install install the es7 react Redux Snippets because I will be using those quite a bit I'm also using a theme from vs code called as Dracula and that's my that's that's a theme I really love so in case you're wondering what the theme for my editor is then definitely I love that a lot I also have a extension for color highlight because whenever you have a hex code in RGB code this color highlight will essentially tell you what the color is as well so that makes our life a lot simpler I would highly highly recommend you to get get the tailin CSS intelligence as well this way as you're about to type your tailin code it will autop populate it for instance if you go here and say Gap you can see all the different Gap properties that you can grab from here and it will also tell you what those properties are as well right here and this is possible thanks to tvin CS intelligence I also have a extension called as vscode icons now remember we are not building a dummy application we are tripping a production ready application and these things even though they are minor are extremely important for you because as your application code grows these things get really important because you now will be able to see all these different icons thanks to this VSS code icons extension this just makes it a lot simp for you to understand what the types of the files are and again as you're looking through the code right now it's small but as it grows it will make your life a lot smoother and simpler so 100% I would say to get the vs code icons extensions as well now keep in mind everything that is recommended up until this point is obviously optional it will definitely help you to build your application just like I I am and follow along as well but in case you run into some unnecessary issues please don't worry you can either leave a comment in the YouTube video and I will definitely help you as much as I can but also make sure that don't don't worry too much and don't stress too much about it because you can still proceed with the rest of the project without any of these it's not a big deal it's definitely helpful but not a big deal as well so let's go ahead and start building our application further tailin CSS has come out with a latest version called as starting from tvin V4 the things have changed quite a bit if you're using V4 in fact there are a lot of packages that have still not up to date and still using the latest dman V4 which as a result if you are using this project if you are following along as the other libraries are transitioning then definitely check out this specific section of the course for instance if you head over to documentation and just look for the upgrade guide this is where it will show us exactly what we need to do to upgrade it now this specific upgrade tool is very handy it is basically going to look at your existing project and upgrade to the latest version of Tailwind so let's just copy this and head over to our terminal so let's just paste what we copied and this is where it's telling us that hey your G repository is not clean at all now we have done quite a bit so let's just go ahead and commit all our changes so here let's just add to add and give it a really nice commit message that we could use so so far we have set up our project and also added shaten so let's do that and hit commit the minute we do that now let's rerun this command again and now it's slowly going to migrate all of this now remember I said that tailin [Music] config.sys so it has automatically just installed a package migrated a bunch of files so let's take a look at them together but before we do that let's also run the development server now as we go back here and you can see in the files changes in this tab you can see that post CSS config MJS file has a new plugin called as tillin CSS poost CSS it has gotten rid of tillin config file completely and all of those variables are in fact available inside of Base components and utilities so you can see import tailin CSS and also plugin tailin CSS animate so all of these three lines are actually replaced with this one line now import tailin CSS at the same time in previously in our tailin config file there was also a plug-in that was installed called as talin CSS animate which is now a plug-in directive that has been introduced inside of the latest version of tailin that is tailin V4 right now and it has pin at plug-in right here whoops I don't need that then we also have a custom variant for dark and the theming that is all the CSS variables are in fact added here now we did not necessarily add any of these CSS variables by default but remember when we installed shaten UI Library it created all these different CSS variables that we could readily use we also have the different layers as well that is a base layer so you can add any base Styles here that you want to tweak inside of tailin utilities would be to create specific utilities and we'll take a look at more of these things a bit later but for now all you can focus on is essentially how all these different styles have moved to Global CSS there have also been changes made to button. TSX as well which has in fact replaced a few of the styles for instance Shadow SM is now Shadow access and so on so there have been few design system changes as well that ta V4 has come up with so I'm also going to check in this file and we can say upgrade to tailman V4 and hit commit now all of this entire GitHub repository is going to be available in the cheat sheet Linked In the description below so definitely check it out as you follow along the specific course along with all the links and assets that I'm going to be using throughout this course so definitely check out the link in the description below if you haven't already to download the hand cheat sheet let's add a beautiful theme to our application right now we are just going with whatever defaults are being provided to us but let's give it a beautiful theme now as I mentioned earlier we do have quite a few CSS variables here that shaty and UI has configured since we are going to be using shaty and UI as a component Library let's just go ahead and replace all of these colors with with a theme that I have set up for us and we don't need two bases we just need one so if I undo all my changes and just get rid of this completely and paste it that's exactly what we need here so I have replaced a bunch of colors here and if you take a look at the global. CSS files a bunch of background and foreground colors that we need for creating a beautiful theme for our application so for instance if we go back to some app that we are trying to Bill our AI SAS application you will see it has this really professional looking modern UI theme and for that we need to pass in the colors necessary to make it look this good so for instance we have this hint of emerald teal color gradient but at the same time we also have this black rose palette as well that we will be using so if you take a look at this you can already see there have been some changes with hover properties change completely because of this because of these changes on top of this in global. CSS we we can get rid of body completely and replace that with a bunch of H1 H2 H3 styles that is how all our headings are going to look like as well so that when we start using these headings anywhere in our application they all look the same if we go here and refresh the page nothing's going to change here except the button although if we go to page and add a heading here and let's just call this Suare and if we go back here you can see Suare is looking so much better because of the heading styles that we just added additionally we also need to add a font sand variable as well and expose that here too and add a default value this way our font gets applied automatically as well and it also has some defaults too so you can see it is now in fact Source Sans 3 similarly this is Source Sans 3 but if it does not have Source Sans 3 then it's UI Sans serif and all the other fonts are going to be applied as well then we are going to add a utility called as container this specific utility container will give us the necessary layer out and we could use this wherever we like to give it a nice layout for our application which is pretty consistent if you think of design in general it is very important for us to have consistent colors consistent themes consistent titles headings and so on this is very important for us to do so that's it now that we have a basic theme ready for us let's go ahead and start building our application further I think it's time for me to build my editor next to the browser so you can start seeing the changes life side by side so in order for us to build our () application which is right now running on Local Host 3001 the somare app we want to make sure that we give a beautiful heading to our application this specific heading will have a logo a couple of links a few links in fact and this specific clerk model which will come a bit later but if I'm not logged in then the layout changes completely as well where we show a header just one link and another link for sign in so this is the thing that we will be building right now so for that let's just go to components and create a new folder and call this common this is where we would create a new file called as header. DSX now this header file will be something very simple which will have the header text now in order for us to show the specific header which will be consistent in all the pages of our application we need to make sure that we are storing it in a place where all the pages can access it and if you remember we talked about this earlier this was in fact in the layout file in the root layout file where we have the HTML body elements is where we would want to add the header element and here let's just go ahead and import header from common header as well now whenever we want to store anything common inside of our application then we can store that in common folder inside of components so now if we go back to home you can see header is in fact showing up here similar to header we would also want a footer as well towards the bottom of the application now you don't need to add all of these links that I'm adding as part of my app we're going to add a very simple footer but in order for us to do that we need to create a new file and call this footer. DSX similarly just like heror this will in fact be footer with a footer semantic element and now if we go to layout again let's add footer after Children Here similarly if we import footer it will in fact come from common and now let's wrap children which is all the pages inside of the main tag just like this so now if we go back here you can see header is here we have a button and towards the bottom is the foter now if you want to make sure that all the pages have consistency let's just get rid of this completely and remove the Styles and the minute we do that the Styles completely change we want want the header to the top but we always want the foot towards the bottom of the page the way we could achieve that is by going to layout we have the header and in class name let's add a class name of Flex one and let's add another div that wraps our entire application and let's just give it a class name of relative Flex min8 screen which is going to mean the Min height is 100 viewport height and and flex call the minute we do that you can already see the footer has moved all the way to the bottom of the page similarly if I go here and give it a class name of BG gray 50 for instance you can sort of see the footer here or if I say p12 you can actually see the footer show up here right here again let's not style the footer yet let's focus on the header which is going to wrap our entire application you're going to have the logo you're going to have pricing sign in when the user is not signed in and so on so let's just create a nav which is what herrer will store and now that nav could have a bunch of elements so this specific nav is going to have a class name of container and remember we created the class name container inside of global CSS which maps to this these values and then we are going to add a few semantic elements for instance we need a div for our text sare which is going to be a link component and Link component in fact does come from next link which is nextjs link component itself it extends the browser anchor element and gives us additional performance benefits as well so for instance if you do slash and then here register say Suare so now if I go back to the homepage that is Local Host 3000 we can see that Suare is in fact displayed so we can just go to page and remove sare from here because we don't want it duplicated now we have the link component for Suare similarly we need another div which is going to contain a bunch of links which is pricing and a few other links as well so here let's just add another link component and let's just say this is going to slash and pricing because eventually we are going to have a pricing section and we want to make sure that it actually just jumps to the pricing section and the way you could do that is by adding the hashtag hashtag pricing so we have the pricing section here which is what we need right in the middle and towards the end we need a signin button aign in link as well so let's give it another div and instead of pricing let's just say slash signin and this is going to be slash signin right here so now you can see we have the logo the pricing and sign in but obviously it is not align correctly let's just give it the nav Flex item Center and let's make it so that there's enough gap between all of them so now you can see by adding justify between we have given enough gap between all of them and if if we go back to desktop then it there's still that Gap as well because we have added justify between and we have a class of container now similarly we want to make sure that on a desktop device there is more padding versus on mobile and the way we could do that is by using a property called as LG colon and this will allow us to Target desktop and tablet devices now remember in t when CSS by default whenever you ad padding it always targets the smaller device but the minute you say LG the responsive design styling is to First Target on mobile and then go towards the desktop styling so for instance here we can say py4 but for large devices let's give it px8 which means horizontal padding and then give for mobile let's give it horizontal padding and then MX Auto so that it's centered as well just like that for instance similarly if I expand this you will still see it's aligned pretty well because the padding increases as per the different break points similarly here we can say flex and then on a tablet and bigger it's going to be Flex one now along with the text we also have these cute little icons that we're using throughout our application just like we have the sparkle icon the text the file text icon the pizza icon here we have a bunch of icons here for different text to explain visually what the text means and for that we're using a package called as Lucid react the Lucid react gives us those beautiful and consistent icons via react components and that's exactly what we are using so if you view all the icons these are all the different icons that we could use since if you look at file text icon that is in fact the icon that we will be using we could either copy the SVG or the jsx see it in action by seeing the different ways we could use it in different Frameworks in react way this is exactly how you can import it now luckily for us with shatan UI Lucid react is already installed in our project so we could just copy this and use it as well if we go back to header and paste it as you can see it did not complain as it already installed and here we can just say fire text and declare it as a react component and now we can give it any width or height that we like because this is simply a icon that we could use but on larger devices we want it the width to be eight and height to be eight as well let's give it a coloring of text Gray 900 with hover we want it to to rot rotate why because if you take a look it has this cute little rotation here and we could do that easily with the rotate utility from tail one let's say transform and transition and also give it a smooth transition as it rotates for us and this is this will allow us to do that now if we go back here you can see when you hover over it it immediately turns to the right turns to the left it rotates a little bit and that's exactly what we looking for but we want the link component to essentially be wrapped all the way around the icon too because a user might click on the icon and expect to go to the homepage so in that case we can just copy this and wrap it all the way around the file text as well and this time because we need it's actually in a column we need to change that and say this is going to be Flex item Center enter Gap one and by default it's going to be a row but in a larger device we want the Gap to be a bit more and let's just make sure the flex shrink is zero now as you can see even though we click here it's going to definitely be back to home now I know pricing doesn't exist but the URL did change but if I click on some It Go goes back to Local Host 3000 which is the link that we have here as well now to style sare let's just give it a span and for Suare class name let's just say font extra bold because it's a logo it's going to be a bigger size in bigger devices and let's just give it a color of Tex gray 900 all righty so now we have a beautiful looking logo that we have styled now in order for us to style the pricing we can just simply use the pricing link but let's say when the user does log in we also show a your summaries link as well so we can just copy this and paste it and here let's just say dashboard and we can just say your summaries link right here we can tweak the code later on so that this is only shown whe the user is logged in but since we have not necessarily implemented authentication yet we don't need to worry about it for now let's just enable it for everything so we're going to say it's going to be centered on larger devices Gap is going to be four on large devices Gap is 12 large items Center for instance perfect so now you can already see it is looking a lot better so we have the pricing and the dashboard links and now for sign in let's do something similar so we need Flex large is going to be just justify end again large is going to be Flex one and so on and we need another link here called as upload a PDF so we're just going to assume that the user is signed in so here let's just give it a div and give it a class name Flex Gap 2 items Center and here if the user is signed in then we also need to show a upload link as well so here we can say upload a PDF and this will just go to slash upload similarly if the user is not signed in then we want to make sure that it's in fact the signin option itself so what we could do is we could just create a constant that just says is logged in which is going to be false for now and we can just toggle it accordingly so for instance here we can say if it's logged in then show this else show this other content this way whenever is logged in is already working we have implemented authentication we can easily replace it so when the user has signed out then in that case it goes to/ signin which is a sign-in link but if not then it's going to go to upload PDF for instance at the same time there's going to be a badge of some sort to show whether it's a pro account or not for now let's just say it's Pro account and then there's also going to be a button that will redirect the user to to home and this button is basically the URL Avatar that I was talking about earlier so for now let's just keep it as is we can keep it signed out for now or let's just call this user for now similarly we only want to show dashboard when the user is logged in so let's just add that as well otherwise we don't want to show dashboard either all right so this is the non-logged in state which is looking a lot better now let's just make sure we are styling each of these links as well now because we're going to give it the same styling for every single link inside of Herer let's just create a common component and let's just call this nav link. TSX now this specific nav link component will have we will take the link for instance from next link and take it a children property which will basically wrap anything inside of it so for instance here we can give it the styling necessary for the link so we can say it's going to be transition colors text is going to be small duration is going to be 200 text Gray 600 and on Hover we want the color change to our theme which is row it's going to be 500 there we go we not using nav Link at all so what we could do is go back to header remove the link component and wherever there's link let's just add nav link right here we have nav link and nav link now remember this we also have a class name property that we need to configure inside of nav link as well which we are not doing so right now now now in order for us to do that we can just add class name whoops we can just add class name here and also take that as a prop which is going to be optional but now in order for us to make sure we are giving a if else condition in styling we could use the function from shat CN called CN that basically uses a tww merge which merges the Tailwind Styles together from the package Tailwind merge so what we could do here is do CN and close it as well so we can just going to zoom in a little bit and here let's just close the brackets there we go and give it class name here which comes from class name so if it doesn't exist it's going to be empty and nothing's going to change so now this error is gone because these class names can automatically be applied on nav link similarly let's apply nav link everywhere else as well we just have to use nav link here so nav link has been applied everywhere else we can remove link here and now you can see nav link has this beautiful styling which is what we want here too so it's looking really good and our header component is ready to go for the header if we are on the slash page or let's say if we are on a signin page it doesn't exist right now we want signin to be highlighted we want to make sure that user is aware which page they are on it's in fact pretty simple to do inside of nextjs inside of naving we could easily use a directive called as path name that allows us to tweak accordingly based on the path itself for instance here we can say path name equals to use path name and import use path name from next navig ation but the minute the minute we have to use use path name we need to convert this into a client component because this is a client specific feature the client components inside of nextjs need the browser so we need to add use client directive on top now similarly if we say is active we can say if path name is in fact H ref which is what we get from naving or if we say if Edge ref is not equal equal to slash and path name and path name dot starts with is in fact href that means it's active for instance then in that case we could easily just check if it's active then we want to add the text rows 500 now we don't want to do that on slash but if we want it do be good as well so if I remove this completely if you refresh the page and now if I go and now if I go to sign in you can see sign is sign in is in fact highlighted if I go to Suare then it is not the case anymore which is exactly the behavior that we are looking for if we want pricing to be highlighted then we need to do it something differently where we need to say that the hre is in fact something different but again we don't need to worry about that for paths that are just A- link HS we basically need a proper path such as sign in in order for that to happen so our header component is pretty much ready to go we can now () work on the rest of our homepage which is our landing page now this landing page has a few different elements if you were to take a look it has this beautiful hero section which has a H1 and H2 that is heading one and heading two which are the two most important headings on our page in our AI SAS application we have this like badge which will WAP from shat CN UI component library and then we also have this beautiful button that has this really cool animation as you hover over the button itself which is recommending us to try sare application then we have another component another section on our page which will show a quick preview of what our app is all about now I highly recommend you to add this in your SAS applications because it gives users a really good idea for what your app is all about and I think it's important for you to do that so in order for us to implement this we won't be able to do that right away why because we haven't implemented this at all in fact this is one of the core features of our application which we will Implement later on but for now we can add a placeholder for this section and then eventually replace it then we have the how it works section which has this nice little hover but we also have really slick animations as well as the user refreshes or is about to navigate to that specific section again this to tells the user in three simple steps how our application works and then we have the pricing section with two different tables a basic plan and a Pro Plan now I always recommend you to highlight the plan that you really want users to buy which is the Pro Plan and here we can have a list of all the features in the table for the Pro Plan as well as for the basic plan so we just need to tweak The Styling based on the plan we want to highlight and then towards the end we have another CTA button which again tells the user that hey are you ready to Save hours of reading time which is possible thanks to our concise summaries with the power of AI so let's go ahead and Implement each one of these sections now one of the things I like when it comes to implementing the landing page is I want to divide each section into a some completely separate component this way it's more organized and whenever I want to modify anything I would be able to right away but first come first let's just go ahead and add all these different sections so now in our application if we go back to page let's close header and layout because we no longer need it we also don't need the button component either because that is simply for verifying Shard CN installation so here let's just go ahead and add a section called as the hero section now this section does not exist but what we can do is we can just go to components and again let's create a new folder here called as home now what one pattern i' really like to implement in our application or any other application that you implement I would highly recommend you to do so is to create different folders for different features of your application now all the landing page content can actually live together inside the home folder so we could do that so now inside of home let's create a new file called as hero section. DSX now this file is going to be a simple component that returns a simple div called as hero section now we can go ahead and import it from home/ hero section and now you can see hero sections in fact rendered here similarly we could do the same for the different sections we want in our application which is going to be the demo section for instance then we are going to have the how it works section then we are going to have the pricing section we are going to have a CTA as well CTA section now we can just comment out all of this code because we don't need it right now let's focus on one thing at a time which is hero section here now when it comes to Hero section first let's just give it a relative positioning with with full and we just need this relative positioning because we are going to add a gradient to our hero section but more on that later let's focus on implementing the hero section itself now the way we would implement the hero section is in fact changing the semantics of it and calling this section because semantically this is in fact a section on our page we need a div tag now in this div tag we are going to have a few Styles so let's give it a class name but more importantly what we need is a title A H2 which is an H1 H2 and a button so let's add that so we we have an H1 we have an H2 and then we also have a button that comes from Shad cnii this is just going to be triome button for instance and anytime we want to add any Imports I always like to add at attribute this is automatically imp implemented for us VI are the create next app so we don't need to worry about it but we could import any import just like this this way if I were to move hero section to any other spot in our application it's still going to work because it doesn't map to dot dot slash which again makes it very restrictive and harder for things to move so here let's just say we want this to be the one we want a get a beautiful summary reel to be NH H2 for instance and we have a button and then we also have a component called as the badge component which is called powered by AI now in order for us to implement that we need to get the badge component from shat and UI but before we do that let's just add powered by Ai and if we go back to home you can see all all the contents of the hero section right here now in order for us to add add powered by AI for instance we also need a Sparkles component from Lucid react icon as well which comes from Lucid react and now you can just add a class name here which would be 86 W6 but then we need also need a margin right and then in order for you to change the color of the icon you need to use text colors and say row 600 and Also let's add animate pulse which is an animation that comes from tail bend that allows us to give us that pulse animation that we need so you can see how it's pulsing right now let's wrap these two elements next to each other inside of a div and let's also give it a flex so that they are aligned right next to each other so here we can say flex and now they are simply next to each other now we also have have this beautiful border right here but before we do that let's get the batch component from shatan if you take a look at the installation section we can just copy this and add the batch component and simply use it so so let's just stop the server and paste the batch component and install it and now let's just run development server now let's wrap the badge component around the powered by AI badge itself and now let's get badge from UI badge and now you can see powered by AI is just like this it's looking pretty good but we need to obviously change the styling of the badge so let's just do that so we can say relative PX 1 pixel because we need it to be a border we don't need a background we just need a border which is a gradient so let's just do that overflow hidden rounded full then we have background linear gradient which is going to be linear to R from and this is how we can add color stops with tailin CSS as well from to NVA allows us to add color stops so I'm saying from 200 rows to 500 rows two rows 800 are the three color stops I want to add so you can already see how it's looking and lastly let's also add a animate gradient X and this is a class name we need to Define so that it basically animates accordingly now if you go to Global CSS we could just simply go to utilities here or towards the bottom towards the bottom let's just paste what we copied right here we can just go inside of base and then copy what we pasted which is gradient X and now you can see how the it's already animating and instead of giving this to the badge let's just give this to a div for instance and add a badge inside of that which wraps our entire application and now for the badge itself let's just give it a relative positioning px6 py2 text is going to be base font medium BG white rounded full group hover is going to be BG gray 50 and transition colors you can already see how it's animating the border is animating but then the text is a lot better now let's just change the text color of this to be text space and the text to be text row 600 there we go so now you can already see how it's looking so much better and let's just give it a variant of secondary to the badge and now you can see that the hover is also looking pretty good so now that we have the badge let's just give it a styling to the entire page so for the section let's just say relative MX Auto let's give it a flex Flex call z0 Item Center justify Center and all of this will essentially make it so that it's all aligned to the center py 16 but then when it comes to bigger devices let's just give it py2 for large let's just give it padding bottom 28 transition all animate in large PX going to be 12 and MX W7 XL which is going to give it the width necessary and for this we can just get rid of this completely and now you can see that removing one div just fixed it all for us all right so now we have the badge that's been Center aligned which is what we want let's give H1 a styling as well which is going to be font bold py6 text Center this centers the text and looks it's already looking so much better and for H2 let's give it text large for small text Excel for large text 2 XEL text Center PX4 for large px0 large Max W4 XL which restricts the width of the subtitle and then of the H2 and let's also say 600 this way it's a little bit lighter and for the button let's wrap it up in a div and for the button itself let's just make the button look really elegant so first of all we want this button to be a link why because this specific button is just going to redirect the user and it's not going to perform any action on its own own so we definitely need to act we need the button to act as a link in order for it to act like a link we need to import next link from nextjs and use that and here we can ask this to redirect to pricing to try the Suare app now we can just give it Gap 2 item center for the button because the button also has a icon so we can just align it so that the icon is right next to it so Arrow right can be imported from Lucid react and let's make it so that it animate pulse as well we're encouraging the user to press the button now for the button itself first of all the text needs to be white because it needs to be visible but at the same time it has this beautiful gradient like you can see it has probably two color stops and that's what we want as well B it has this black or like slate color to Rose color color stop when you hover over it it take it switches so we need to just switch the order of the gradient on Hover so let's just give it a margin top of six Tex space but on small let's increase the sizing on larger devices let's increase the size of the button even more as you can see it's already looking bigger let's give it rounded full px8 but on small devices px1 large devices px12 py6 on small py7 on large py8 and again this is all making it so that it's really responsive and Catering to exactly The Styling that we need now you can already see but this button is already looking better but as you make the browser bigger it's even better so this is obviously Zoomed In which is why it's looking like this but otherwise this is how it looks like perfect now we have a few more styling here which is that we need background linear to R and this is where we need from from Slate 900 and two rows 500 and this self is going to make it look really slick but on Hover we don't want the same things we want we want for hover we want it to be 500 on how we also want to slate 900 and we want the font to be bold at the same time on Hover we don't want any underline either for instance and this is what we are looking for so you can see it has this nice looking gradient on Hover and knot let's give it a shadow large but then we also want to make sure that there is this nice animation and smoother animation as you hover as well all righty so now the buttons are looking so much better we have the H1 H2 already we just need to make sure that this specific text concise is exactly what we want let's just give it a span and let's style it separately so typically what we would do is we would give it a background and this just like the highlighted background is what we need but we also are rotating it for that reason we need to TW we The Styling a little bit so for that we need to give it a span here as well and wrap this entire text in a span and this is going to be an inline Block it's going to be relative inline block this way we can give it an additional div as we like so right after concise let's just give it a additional div which is going to be absolute positioning inser is going to be zero background rows 200 sl50 and whenever you add sl50 it automatically means that we're reducing the opacity to 50% and we are rotating it up bit rounded large transforming it skew y1 there we go now you can already see this is taking over the whole thing we don't want that we want it to be so that it's proper and we need to change the class name to be relative positioning here Z10 and then px2 and then remove summaries from here let's also give it an ARA hidden equals true and moved from PDFs into on top because we don't want this text to have any styling we just want this text to have a styling and now summaries can also be part of H1 as well there we go so now it's looking so much better because this is exactly the styling we're looking for so this is the word con size styling now if you want to extract it into a separate utility inside of tailin you could do that as well but again this is very simple we're going to only use it here so let's just keep it as is so now you can see that it's already a lot better with the styling here and we can also remove this unnecessary div that we have as well cuz we don't need it all righty so now we all we need is this beautiful background gradient for us for the styles to work accurately so now if we go to page let's just give it a div here and this specific div will essentially be Flex Flex column so it all aligns in a column and this is where let's create a new component and call this BG gradient now this component can go inside common because we'll most likely use it in other places and I'm just going to paste the gradient right here because this gradient is essentially the background gradient that I'm talking about here it's imported and now you can see there's this nice gradient that we see right here on the page and this is a radial gradient which is basically adding the different color stops and creating a custom polygon here which is a clip path and allows us to style it the way we want it to so our hero section is ready to go we can start looking into implementing the demo section because hero section is pretty much ready to go so we can move demo section right here and uncomment it we don't have a demo section yet but this is where we would store it in the home folder so this time let's just create a new folder called as demo section. TSX and then let's just again export default demo section now the demo section as well has a icon which is the pizza icon a text as well as this section right here which is a summary preview reel or something but what we need right now again let's remove this and say it's a section and what we can do is we can just give it a nice little gradient in the background now this gradient is something you can just grab it from the commits but again it gives it this nice little gradient in the next section it will definitely allow you to make your app and landing page look a lot better since if you want to add a gradient like that you also need to give it a relative positioning for the gradient to appear all right so now let's also give it a styling here let's also give it a wrapper around it too is going to be class name py12 for large it's going to P py4 Max wfxl M Auto PX4 in in smaller devices px6 larger px8 and this one is going to be the title itself which is going to be this value right here now under under this we will also have a text which is which maps to what we have here and that's what we want to add here in the wrapper itself now this wrapper can pretty much close around the entire application because we want on the entire section because we want more spacing there so we have the gradient here and now let's give another div with a pizza icon which is going to be W6 86 and text rows 500 at the same time we going to have an H3 which is going to be this text right here right now we adding The Bare Bones necessary for the section and then we we're going to focus on styling it so if you go back here you can see we have the pizza icon with the text as well so let's focus on styling it so here let's just give it a flex Flex call items center with text Center and a space y4 which gives good vertical spacing to everything you can already see the alignment is getting better for H3 we want the font to be bold text 3 XL Max W2 XL again we're restricting the width with horizontal centering PX4 and then small px6 and then we also want to make sure that for this section itself which is watch how some transforms which is right here this nextjs course PDF is something that's red in color or like guess it's a text gradient so let's just give it a span and paste it like that let's give it a class name anytime you want to give a gradient you can just say BG linear to r or whatever Direction you want the gradient to be and add color stops so we're going to have a color stop of 500 to rows 700 and then whenever you want to give it the gradient to the text then you can just say BG clip text and then do text transparent to basically align the grade to the text itself as you can see it's lighter and then it gets darker which is exactly what we have here and now let's just give proper styling to the pizza itself CU right now the pizza is not looking that great it's pretty tiny and we want to make we want to highlight it so let's just give inline Flex items Center justify Center padding two rounded to excel give it a background of 80% opacity gray backdrop blur as well of excess border and this is where we want it to be circular which is why we're giving it a border as well 500 220 and then mb4 now you can see it's looking a lot better so we have this pizza which looks a very interesting shape and that just helps for it to stand out and now let's just give it an a div to the entire H3 element which is going to be text Center and margin bottom 16 there we go so this will there's some margin bottom between what we're going to add next now we this is where we are going to add the summary but we don't have that ready yet so it's fine we're just going to align it so that when we add it it's going to be easy peasy for us so we're going to say PX4 and then large px6 and close the div here perfect now this is where we would add the summary viewer essentially so let's just add that as a comment here and inside of this we can align the item itself separately all righty so now we have the next section ready to go as well which is this section right here which is exactly what we want and let's also give it a additional padding here so we can say pd12 perfect so now our demo section our summary viewer section is also pretty ready to go we can focus on adding the how it works section so when it comes to how it works section we're going to do the exact same thing and import that from how it works and add how it works. DSX and this needs to be in home and this going to be how it works section there we go now if we take a look how it works section is visible on the page and now we can start looking at styling it again we're going to have relative overflow hidden and BG gray 50 to differentiate it from the rest of the content rest of the page I should say and this time let's just copy the wrapper that we have and let's move this inside here sometimes when you do see this red squiggly line even though you have added it just reload the window or you you can just com command Z and do it again it takes a second for the editor sometimes to realize that there has been a new file and there's a change but don't worry too much about it it just will go away unless you genuinely make a mistake so what we're going to do is we're just going to copy what we did in the hero section which is copy this value and paste it just going to be the wrapper itself so now you can already see we have a section here and this time we going to have a few things we going to have a gradient for sure so you can pretty much just copy the gradient so definitely grab it from the GitHub we're going to have class name text Center margin bottom 16 and this is where we are going to have our H2 and our H3 so H2 is going to be how it works and H3 is basically is going to be this section this text right here which is there and and lastly we are going to have a grid of elements too which is going to be grid grid calls one but in medium it's going to be grid calls 3 gap of eight and then restrict the width as well MX Auto and relative positioning there we go now if we go back to the our page you can see how it works and how this is displayed cuz none of this is style we're giving it the structure NE necessary for it and we can get rid of this styling from here so we can start styling these two titles here so we have this that needs to be all capped so we can just start doing that it's going to be font bold it's going to be text Excel and uppercase and uppercase just allows us to make it all caps for us and let's just give M4 a margin of margin bottom and text rows of 500 there we go how it works is all capitalized similarly for H3 we can say font bold text 3 Excel Max W2 xcl restricting the width again of the subtitle and MX Auto there we go you can see it's looking so much better now similarly now when it comes towards the bottom of the content we have these steps one two three steps we can just create an array of steps and then Loop through them so let's say this these are those steps for instance we can map through them and say step index and then map through the div itself and this way we would be able to essentially render the content as we need for instance as well let's just create a constant called steps these steps are going to have a type of steps of array and the type is going to be type step which is going to be icon CU every item takes in an icon a text and a description so let's just say it's going to be a react node it's going to have a label which is going to be a string and it's also going to have a description of type string as well now we have array of type steps so let's just add them so you can already see it has is autogenerating based on the types and this is something thing I find with AI editors in general that you can once you give it a type and structure it's it's a lot better at generating the text the icon here is going to be file text icon with size of 64 and stroke width of 1.5 and let's close this icon label is going to be upload your PDF description is going to be this description here so we can just copy this and paste it and import icons from Lucid react similarly we can just copy this exact same thing app structure instead of icon this is going to be a brain circuit icon and it's going to the label is going to be AI analysis and then the label is going to be just this label same thing here too we are going to have get summary as a title file output as an icon and then we are going to get the copy from here which is going to be this now that we have the steps generated we could just Loop through them now so here we can have the step generated and for the div itself we can say by default it's going to be we going to have a class name of relative P6 and at this point I almost think this could be its own component so let's just do that so we can see step item key is going to be this with this code and function step item as well which is going to have icon label description and so on now when it comes to the div this this is where we can add relative padding of six around it to Excel and you can start seeing things here but nothing is going to work here because we haven't necessarily added any text yet but you can already see how things are looking and BG white of five backdrop of excess border border white of 10 on Hover we want it to be border rows of 500/50 transition colors group them and make the width as full let's give it an H4 and this can be the label so now you can see the label has appeared then we can give it a P tag of description description has appeared and you can see that the hover has been active already and also we need an icon but obviously we need to style the icon further so let's do that so again let's give it a div class name of flex Flex call Gap 4 H full and another div of the same and let's move icon in there Flex item Center justify Center a h24 w24 MX Auto rounded 2XL BG linear to BR because we're adding the gradient again rows 500/10 to transparent and then we want a group hover because we want to make sure that we want to make sure that whenever you hover it's a group hover and not just a h hover and then for the icon color we can give it a color of text rows 500 there we go so now I can see that the icon is looking pretty good and let's move these two items inside the div here and again give it a div again right here so now the class name is going to be Flex Flex call Flex one Gap one and justify between similarly now we just going to Center the elements here it's going to be text Center font bold text Excel and same thing here too text Center text Gray 600 text small now you can see it's already centered with hover properties too and if I were to zoom out or make it bigger you can see the it's pretty much the same here as well so the how it works section is also looking pretty good because we have all these different icons but as you can see we also have these arrows as well in the middle so we need to add that too so let's move it back to how it was right here and now we can go back to the step item itself and this is where we can add a div and we can hide it for the last element and add a wrapper here as well so now let's give it a class name of relative Flex item stretch and for this one for the last item is where we would add the right element move right size is going to be 32 stroke width is going to be 1 and the color is going to be 400 there we go you can see we have the icons in all three situations in fact we don't even want to show them in Mobile doesn't make any sense so we can hide them on mobile but the minute it's on a medium device let's just show them for instance so you can say right for transform and Z10 there we go we have the relative positioning for here step item is displayed here and we are hiding it essentially as well at the same time for the last item we don't want to show this you can see it's already right here not what we want we want to position it accordingly if idx is less than steps do length minus one then show it for instance and if we show the page it still shows up here not where it needs to be so let's fix the styling for that let's just give it a absolute positioning right here now if I refresh the page you can see that the arrows are in their position and how it works section also works as intended pricing section is extremely important in a SAS application because you want to make sure your pricing makes sense now I am no pricing expert but I do think that when you make the pro pricing really enticing that does allow the user to pick that specific plan so that's exactly what I'm doing in this specific application now basic is where you display a bunch of basic features that you want to offer and this is someone who want to use this application for occasional use but when it comes to Pro you want to give them unlimited you don't want to restrict them for instance as long as you're not paying any upfront cost in that case the we want these two tables and both of them are subscription and the buy now would lead to potentially a new stripe account which is what we have so for instance if I click on B now now it does take me to my test stripe account as well so that's exactly what we'll be building now a pricing section so if we go to the pricing section let's move this up and uncommon this similar to how we had it earlier we need the pricing section inside of home so let's create pricing section. DSX pricing section and instead of Dev it needs to be a section there we go and now if I go back to Local Host 3000 you can see pricing section is right here now when it comes to pricing section we need a few things we need a consistent pricing card and we also need a section as well a section that will hold all the items so again as a wrapper if you go to demo section we need this as a wrapper for instance so we can copy this and every single time when you save a change notice how it says each child should have a key prop unique key prop so let's fix that if we go to how it work section let's give it a key prop necessary here the key prop will be right here Perfect all right so now back to the pricing section yeah we just added the wrapper let's add a div which will have an H2 and that will simply be just pricing then we can have another div which is going to be a pricing card itself now in order for us to show that we basically need two separate columns so let's add columns here but in large it's going to be a row and it's going to be item Center but large it's going to be item stretch with gap of eight what we want to do is we want to make it bigger for the Pro Plan now this is where we would need something similar we would have an ARR AR we would map through our plan and this plan is where we would display the pricing card with a key plan. ID for instance and we would spread the plan as well now we don't have any of this at all we don't have an ID we don't have an array of items and so on too so we need to create that but that's exactly what we would need to display pricing onto the page we would have two cards and those two cards will have details such as the different items and so on now what should the pricing details have what should the plans have so if I create a array of plans it should have an ID of basic and the other object will have an ID of pro for instance and we can start replacing this by saying this is going to be plans pricing card is not defined so let's just give it a we don't need to export it but let's just give it a default pricing card here this way now there are two cards displayed here and we have the two plans here as well now for the first plan the name is going to be basic the second plan the name is going to be Pro then we we are going to have a price of $9 in the second plan we are going to have a price of $19 then we are going to have items which is going to be the list of items which is five summaries per month then we are going to have a bunch of items as well so what I'm going to do is I'm going to give you the items itself for what the IDS are going to be and we can pretty much get rid of the things that are prematurely added here right now we just need to make sure that we have the structure necessary for our card so we can just remove these items cuz we can add that later we don't need it right now and this is how the plans will look like now pricing card is empty so it doesn't show anything yet which is what we need right now we need to add that so that pricing card will display information it's going to be relative W full and Max wlg there we go and now instead of pricing card it's going to have another div and in that there somewhere is going to be a P tag with name and this is where we can like get name price and different description we can have items ID payment link and so on so we're going to have name you can already see basic has been displayed here because of the name we are going to have another P which is a description for instance then in another div we are going to have price which is going to be in another P tag for instance then in another div we are going to have a link component which will link to the payment link itself for instance and this link component will come from next link and we can just say buy it says buy now so let's just say that buy now there we go lastly we also need items too so between price and and we're going to have items. map item idx and this is where we can just display a list of item which is going to be Li and it's just going to have item itself there we go so the key is going to be that now you can see all the items are displayed here too and we have not necessarily typed and added a type for pricing so let's do that so here we're going to say price type and just have the price type here which is going to be name is string price is number description string and so on so we have a base structure for pricing table so let's go ahead and add the rest of the styling right now so first let's style the name and description so first of all for name we're going to have text is going to be large but in larger devices it's going to be Excel font bold and we need to capitalize it and capitalize will make the first character of the text as capitalized if you haven't already similarly when it comes to description we are going to say text base content 80 and mt2 and here we're going to have Flex justify between item Center and Gap four obviously that's not right so let's just give it a div here as well with there we go all right so now we have the name and description we need another element that wraps the whole thing to give it the necessary border and so on so we can wrap the whole thing here and here we can say it's going to be relative Flex Flex call H full Gap four enlarge is going to be Gap 8 and then Z 10 B8 then we going to have rounded box or let just say we're going to have rounded Excel border 1 PX then border gray 500 by 20 rounded 2 Xcel there we go can get rid of rounded you you can see that how it's highlighted because it's the same value so do Exel now we can use the CN property from chatan that will allow us to merge Styles because when it comes to Pro we want to highlight it and make the border red so here we can say if ID is equal equal to Pro then we want border to be rows 500 Gap to be five and border to be two there we go so we are now coming very close to the pricing table that we're looking for so we're just going to highlight a few more things accordingly so now we have the styling for the pro container and we have added some styling for the name and the description now let's add The Styling for the price so let's just give it a class name and let's just give it a gap of Two And the reason for that is we want to make sure we are adding price so we can say text 5 Excel tracking tight font extra bold and let's add a dollar sign next to oops let's add a dollar sign next to price and then let's add another div with the P tag or and call this USD cuz we want USD to be displayed next to it and here we can say text access text base 60 or let's just get rid of this we don't need it uppercase font semi bold there we go this is going to be USD we need another P tag with Slash Monon because we want to show that it's actually SL Monon so it's like a subscription so we can say text access and that's it so now we have USD per month which is this USD per month very similar to what we have here and now let's just align the USD per month well so we can say Flex Flex call justify and MB 4px this way it's aligned properly all right so now we have USD per month and let's just give space y 2.5 leading relaxed text base Flex one there we go so now there's more space between the Alli elements to and now Flex item Center Gap 2 and then there needs to be a check icon size of 18 and then here there needs to be a span as well for the item itself so now we just need to style the button to make it look good or I guess keep the link as we want so here we are going to say space Y 2 Flex justify Center W full so now it's centered and now the link should act like a button so we can say w full rounded full Flex item Center justify Center so all that is fine for now but then let's give it a gap of Two And this is where we can start adding the gradient colors for the button so from rows 800 to to rows 500 hover from rows 500 hover to rows 800 text going to be white border 2 py2 there we go our pricing table is looking pretty sick I must say but we definitely want to encourage people to not go for the basic one and try to encourage them to go for the pro one cuz that's what we recommend so again we can say if ID equal to Pro then let's give it a styling else some other styling and for this let's just give it a CN tag that we had earlier there we go so now for pro let's say border row 900 and Border rows 100 from rows 400 to rows 500 and now you can see this is the recommended one it looks like versus the the other one not so much all right and for in terms of icons let's just give it an arrow right it's size of 18 there we go so now our pricing tables are looking so much better already we just need to style this pricing text because it's not yet styled but the tables themselves are looking pretty good so when it comes to styling the tables we just need to center it right now justify Center and anytime time you want to Center something you can just do Flex item Center justify center with full pb2 there we go and now for H2 let's just do uppercase font bold text Excel mb8 and text rows 500 there we go so now the pricing is so much simpler it is pretty cool with both of these as you can see when you hover over the card it's not there's no hover animation here so let's fix that at the same time let's give it this one a class name of relative overflow hidden and let's also give it an ID of pricing all righty so now when it comes to the card itself let's just give it a hover as well which is going to be hover scale of 105 and then we just need to say hover trans transition all duration 300 it's even smoother than what we have here for instance now you can see that the hover is looking pretty good but if I zoom out it's also looking a lot better here too with the pricing here too so pricing section is also pretty much good to go now obviously we will revisit this pricing as we come back to it a bit later when we Implement pricing but you can already see how the difference between the Pro Plan and the basic plan are so obvious and the differences between the Pro Plan and the basic plans are so obvious and now we can move on to adding the CTS section which is the last section on our site which is this one so let's do that so let's move this back to how it was go to page move CTA section here and now let's create a new file and call this CTA section. DSX exported similarly imported here too so now we have the CTA section here in the footer and for this section let's make this into turn this into a section there we go and here let's give it a class name of BG gray 50 py12 just like that there is no content yet but let's just give it the same wrapper that we did here so copy this paste it we don't don't need this and now let's give it another div it's going to be Flex Flex call Item Center justify Center space y4 text Center and then another div here with H2 and a b tag the H2 h2 tag is just going to be ready to Save hours of time just like that and then for P tag just going to be transform the documents there we go and this is how it looks ready to save so let's just give another styling which is the link component a div with a div and then a link component which goes to pricing slash hash import link from next link and then for the link component we just going to have this as a button from shat CN UI which is going to have a variant of link and then for this link component let's just say let's get started with arrow right icon class name of ml2 A4 W4 and animate pulse there we go and now let's style the button itself which is going to be W full Min 400 pixel it's going to be W Auto BG linear again the same name gradient slate 900 to rows 500 then from how it's going to be the opposite from rows 500 hover 2 slate 900 hover text white text white and then transition all duration 300 there we go you can already see it's looking a lot better and then we can just give this div a flex Flex call Gap 2 400 pixel to be Flex row justify Center and now this also needs to be a flex and then W full needs to be a flex with whatever we did here to be here there we go and this needs to be six with py as four and six as well and the size of the button here needs to be large so now we can just get rid of this additional spacing cu the size of the button has already added that and the variant could be outline or just go back to link as it is doesn't matter all right so now it's time for us to tweak The Styling for the header so we can say Space by 2 and then for H2 two it's going to be text 3 Excel font bold tracking tighter small text 4 XEL medium text 5 Exel there we go and then for the paragraph it's going to be MX Auto Max w700 pixel let's just say Excel you can add any of these values as you like so we can just say to excel for instance then we have text Gray 500 MD is going to be Excel but relaxed so it has a bit more spacing text space but also relaxed Excel is going to be text Excel but also relaxed and then in dark tone it's going to be 400 there we go so it's looking so much better already all right so now we have we're pretty much good to go we have the text here too and now if you expand this this is just ready to save time with Ready To Save hours here and then here as well as you can see like the the length is different here to here we can easily tweak that by instead of saying 2XL we can just say 700 BX and that makes it very similar all right right so now we have a beautiful looking a very beautiful looking landing page ready to go this landing page serves as a really strong foundation for us to build the rest of the pieces out so I'm really excited for the next chapter for us to focus on implement it is now time for us to add authentication to our project we add () authentication so that we only allow logged in users to check out our app upload PDFs and get beautiful concise summaries with the power of AI and for authentication and user management I should say we're going to use clerk the clerk is incredible when it comes to adding authentication like it says here it's more than just a signin box 100% because it's a complete Suite of embeddable uis that we could just use and when it comes to pricing we've already taken a look at this in the past it's $0 per month so from a SAS perspective we could totally just launch with Clerk and then as our application goes we can probably look into moving into a pro plan for now the free plan is pretty generous so what we are going to do is add authentication and use clerk to do that in our application so if we head over to the docs and if we go to the next year section this is where we want to make sure we install and follow all of these instructions to add clerk so let's do that step by step so I'm going to copy this and open this up in this specific tab so that we can follow it side by side so the first step is to install clerk SL nextjs so if we head over to that terminal let's stop our server and just install clerk nextjs it's installed and ready to go let's start our development server again now this time you want to just get the API keys from clerk so if we head back here let's just say get started and I'm just going to use my Google login to log to Google account but if you don't have an account don't worry you can create it for free you just need to sign up using Clerk and the way you would sign up if I were to show you one more time I'm going get sign out here this time if we head back to where we were in dashboard if you go to dashboard. clerk.com you could just hit sign up and then follow the same process to create an account you could either use GitHub or Google to sign in or sign up and then B pretty much sign in all right going back to logging in to my application and these are all the applications as you can see I have I've been using clerk for close to a year now and it has been incredible for me so let's just create a new application here and this time let's just say Suare now this is what you will display here the Suare application I'm just going to say Suare AI now we can pick how whatever we want here in the signin option options for instance if you want a disable email then this is how the model will look like the embeddable UI essentially you could also configure phone number username and so on in my case I'm just going to go with email and Google but feel free to toggle whatever you want based on whatever SAS you create in the future as well this time I'm just going to pick email and Google because those are the top two ones that I've seen people use now let's just go ahead and create the application and now this is where the instructions are which is exactly what we were following as well so for instance if we see we we have already installed this and the handy thing about clerk is that they have already given us the publishable key and the secret key which we can pretty much add to our n.l file now environment. Lo file is essentially our local environment file like the name indicates whenever you want to store anything that you only want to use on local then add the suffix do local so let's just copy this head over to our editor and create a new file called as n. loc and just paste this now that I have pasted this let's head back and we can just pretty much copy this so I'm just going to copy this and open this up in this specific tab here and follow the instructions here now it's time for us to create middleware now middleware in nextjs is sort of the middle person whenever any route gets accessed test this is the file that will get triggered first and this is the best spot for you for you to add authentication or add any checks because you can basically check okay is this person signed in or not whatever you want to perform you can pretty much perform in the middleware file so let's copy this and this file needs to be in the root so let's just create a middleware dots file and paste it now this has a function called cler middleware and this is the config for it which basically means that it's going to run run for all of these files but if it matches these things then pretty much middleware is going to get ski because if you want to access any HTML or any of your assets such as J jpeg webp PNG files we really don't want a middleware to run because we want anyone to access it unless we don't want that behavior but in this case we are pretty much good to go now next we need to add the clerk provider to our application and this is where we need to wrap this up in layout so if we head over to app directory and layout this is where we want to wrap the clerk provider so right above HTML let's add clerk Provider from Clerk nextjs and wrap the wrap this completely here now you can see that clerk provider has been added and now we can add sign in and sign out buttons wherever we like for instance we have the header component so let's just head to to header and let's go to home or I guess common and header and this is where we can pretty much add the signin and sign out functionality that we're looking for for instance if the user has signed out show the signin button or if the user has signed in then showed the user button so we can pretty much copy this and paste this in this spot here where we had the use the button placeholder and then when the user has signed out then add the signin button this is pretty much what this specific toggle would be where if the user is logged in or not then in that case we want to just show it but that's what we want to do so we can just disable this completely we want to show dashboard that is your summaries only when the user is signed in so we can pretty much just get rid of it and say signed in and then wrap this completely over here so now this will only be shown if the user has signed in similarly for logged in we need something similar signed in and then signed in here again and we don't need any of this here similarly since this is going to be shown when the user is signed in we could wrap this with signed out from clerk nexts so this is how it's going to work if the user is signed out show the signin button if the user has signed in then show all of these buttons and so on so now if we head back here here and refresh the page we should still see sign in button sign in functionality that we want if I click on sign in nothing really happen so let's just go ahead and create the page there so we can test out all of this functionality all right so now this is pretty much good to go now if we continue to the next yes guide this is where we can create our custom sign-in and sign out Pages now if you saw here if we go to/ signin for instance there is nothing here there's a 404 page but what we really want is this type of a page so what we can do is create a new route for that but to create a route we need to do something specific so let's just copy this thing completely and now go to our editor and create a new file and paste it this is automatically going to create these two folders with the specific page and now we can also copy the contents inside the page too similarly just like sign in we can do something similar for sign up page as well so we can just go to custom sign up page here and copy this whole thing entirely and now let's create a new file and paste the whole thing again there we go so now when we go to page let's just copy the sign up functionality and paste it here as well perfect so now we have sign in and sign up Pages if we go to this specific guide it has the sign-in functionality then we have the middleware and this is where we can add any type of custom middleware that we want here to but first and foremost let's just make sure that we are able to test out all the functionality and now you can see if you go to/ signin there is a model a custom embeddable UI from clerk so if I click to continue to Google and click on my account and sign in with Google it has redirected me back to home none of these Pages EX exist keep keep in mind but if you notice we I do see this Avatar and I can manage my account and all of these embeddable uis are provided by clerk by default which is exactly what we want and for example if I hit sign out then I'm redirected back to home if I click on sign in or if I go to sign up same thing happens we do see this embeddable UI which is exactly what we're looking for but this specific page doesn't have design yet why because we are directly just returning the sign up page from clerk we can just create a section here and paste it and press enter just do Flex justify center items Center and then for large let's just give it a Min height of 40 VH and press save now it does have a bit more layout out bit more of a centered layout and now let's just give it another div and this is the time where we are just going to go to our landing page go to demo section and if you notice we have this one like wrapper that we're using pretty much everywhere we could just go here and paste it and there we go now we have a bit more functionality here we could do pretty much the same thing copy this whole thing entirely go to sign in page and do the same except this needs to be replaced with sign in there we go so now if I sign out go to sign in it still works as expected and it has this beautiful layout as well but if you notice if we take a look we have a nice BG gradient here versus we don't necessarily are seeing it on our page because we haven't added that so we can just tweak this specific BG gradient component to taking a different color along with these colors right here now we are passing class name here but realistically we want to move this class name and move that directly in here so that we can tweak the colors whoops so that we can tweak the colors that we want here as well so for instance just going to import CN utils if you haven't already we can remove the braces the curly braces from here and keep it as is and dress everything should stay the same and then this time we can just pass in different colors that we want for the gradient there additionally we can remove the children property too because we don't need it and remove this isolate property as well so if you go back to home everything stays the same we have the gradient but if you go to sign in now we can just pass in the values necessary here too so we can say BG gradient paste that and now you can see this nice gradient copy this again go to sign up paste that too and import it there we go sign in and sign up now has this gradient but we can pass in the values that we want as well we're going to say from rows 400 via rows 300 to orange 200 same thing here we're going to copy this whole thing move go to sign in and paste it and now you can see there is this beautiful gradient here as well we have the gradient that we passed in into sign in and if we go to SL sign up this works but let's just go to our page and go to sign up it still works and we have this nice looking gradient here too as well so our author is pretty much ready to go if we go to the clerk dashboard this is how the dashboard looks like and now you can see that there's a user that is me that had recently signed up with a recent sign in as well so now you can see that the there are users in here some details about the users and I could also just go ahead and impersonate the user and so on too so for instance I could update their set their password tweak a few things for that specific user and so on so the entire user management is also done in clerk 2 I could configure clerk further to take in a username I want as well so the embeddable UI can also be tweaked but to an extent where they have allowed a lot of things by default so for instance username is completely free because the features that do need a pro account are all marked with Pro so if you do add a phone number then you need to go go sign up for a pro account and pay for it but to be honest the free features are really generous that you don't necessarily need to do that especially when you launch your SAS application as you grow further then it will you can always do that later but if you want users to set their personal information such as first and last name and so on too allow users to delete their account which in this case I really really don't want to then in that case I could do that as well in clerk all inside of Clerk and whenever we are ready to ship to production and we have a domain we could just create a production instance and literally clone the development instance so any changes that we make in development will be available in production and obviously tweak the environment variables and so on for production and use them so it's very simple and easy for us to use clerk in our application on top of that we can create o applications we can have SSO connections we can add a bunch of different restrictions such as we can only restrict signups to accounts with pre-approved identifiers for instance so if you want to add a weight list a block list whatever then you could do all of that with clerk but keep in mind if you enable features with Pro enabled that need a pro account they they will work in development but the minute you switch to production they will not but this is a really good starting point for us to start using clerk as well in our application and the like I said the free plan is quite generous it is now time for us to work on the upload your PDF feature when you click on upload a PDF () or go to your summaries and click on new summary you should be able to upload a PDF let that file be processed and then accordingly work on it so how about we first create the page for this slash upload so if we head over to our page here close everything let's go to the app directory and the first thing what we need to do is start organizing our file system here so first we are going to create a new folder and add these brackets to it and call this logged in what this means is we are grouping a bunch of routes together which are the logged in routes you could also call it o you could call it whatever you want because this specific folder path is not going to be included and exposed as a route in the browser so whatever you include here is just merely for organizing if we create a folder called upload and if we create a new page in there called page. TSX and let's just call this upload page now if we go to slash upload you can see upload page is definitely here but the fact that it was inside logged in didn't really matter because this is just for organizing and this concept in xgs is called as route groups we are we are grouping a bunch of routes together so now this is the upload page let's begin styling it further so let's just sign in here and let's go to upload your PDF and this is where we can start designing it first let's just call this a section and then let's give it a class name Min 8 screen and then let's also get the BG gradient from common because we have this same gradient here so we are going to use that directly then we can just create a div which is going to have a few elements let's just make sure we can Center the div give it a specific width so let's just add the max width give it some horizontal spacing some vertical spacing but in bigger devices let's increase the spacing and so on all right now in here what we want is are two things actually one is the header and the other one is the footer so we can say start uploading your PDFs similarly we need a form here as well so we can worry about that form for late for later but we definitely need this specific text upload your PDF and let AI do the magic and then we also have a batch component which comes from shaty and UI which is also what we're going to be using this is a Sparkles Emoji so we can just say Sparkles and give it another text here that says AI powered content creation there we go so now if we take a look at our app you can can see we have a basic very super like super basic layout ready to go so let's start designing it a bit further so first let's just add Flex Flex call Item Center and Center it further justify Center Gap six and text Center there we go now it's centered now here let's just use the badge variant as second AR this way it immediately looks like the badge we are looking for and then give it additional class names which is we need relative positioning px6 py2 text space font medium BG white rounded full and then let's do a group hover of BG gray 50 and then transition colors there we go now for Sparkles Let's just give it a specific width and height to so we can say 86 W6 margin right is two and then let's change the color to text row 600 and let's animate it and make it give it a pulse animation so now you can already see it's working and this let's just change this to a P tag instead of a span and now we can say this is just going to be text Bas there we go so now ai powered content creation is looking pretty similar we just need to give it the Border necessary for it so here let's just give it the Border necessary to the entire badge component we can say relative P 1 PX and remember this is a gradient border which is why we adding an additional div here and making it so that it's actually a gradient border itself from row row 200 V rows 500 two rows 800 animate gradient to X and group them for instance and now you can see this is way better but you can see there's this subtle animation here on this entire gradient and for that we are going to style this so let's just go to global. CSS and we have this animate gradient X which is exactly what we want here so you can see it's also adding the gradient necessary for it so luckily for us we already had that style already so we could just pretty much use that perfect similarly now we need something similar for like a div wrapper for the title as well as the ptag underneath it so here let's just give it a class name let's first of all capitalize everything if not already text 3XL let's give it make it font book bold tracking tight text Gray 900 and in small let's just make it bigger and this is where we can say okay start uploading and let's just remove H1 from here start uploading your PDFs but if you notice your PDFs has something similar to what we had in our landing page so we can pretty much just do exactly that so if we go back to our landing page and go to the hero section we did that for concise so let's just copy this whole thing the H1 here and then go to upload and paste this whole thing here now obviously the Styles have changed here so we need to tweak it we can just remove the H1 from here and now instead of transforming PDFs to concise memories we can just summaries we can say start uploading and then your PDFs could come in here and now you can see this is exactly what we want we can remove summaries Al together which is exactly what we have here perfect and now we can just simply add it add another div with the rest of the text which is to say upload your PDF and let our AI do the magic with the Sparkles emoji similarly let's give it a class name of margin top two text large leading 8 so give it a little bit of line height so if you hover over it you can see the line height text Gray 600 and give it a smaller width of 2XL and text Center so if you go back here you can already see how things are looking like and now you can see it's literally the exact same content here and now we can focus on actually working on the form itself cuz we have the page ready but as you can imagine this specific content is going to get really massive we don't want that we want to organize it just like how we organize the landing page so what we can do is we can just create a new folder inside of components and let's call that folder upload and in that folder we can H create a folder called as upload header. X and this is where we can pretty much just grab what we had here from under the wrapper all the way and call upload header here and move upload header directly in here and the couple of badges import that did not belong there anymore we can just move that here as well so what we're essentially doing is we're composing it and now if you see everything else should stay the same why because we have made it into a upload header which is what we want so similar to how we have an upload header we need a form as well so we pretty much need a upload form too so we can just create a new form called as the upload form and this is this upload form can also go in upload folder and let's just import upload form here and now you can see it's definitely not centered nor is it aligned well so let's just in it well as well so we can say Flex Flex call Item Center justify Center Gap six text Center there we go so now upload form is going to start from here with the gap of six and then we can start styling it further let's quickly take a look at this diagram to understand the () architecture of our upload service when the user does upload a PDF and after verifying that the PDF is valid and it matches the size requirements we are going to use a service called as upload thing now upload thing is a really good service for managing file uploads it is essentially a thin layer on top of Amazon S3 bucket so this makes it really easy for us to just upload files it has a really cool API to do so and it's completely compatible with react and and typescript and xjs and it makes our life really easy as a developer so when it comes to file and uploads I definitely use upload Thing Once you do what happens is upload thing is just going to give you a URL that specific URL is your uploaded file we are then going to extract and load the PDF uploaded using Lang chain now Lang chain is really cool because it allows you to basically process your PDFs using Lang chain and we can easily just load our PDFs and it's able to do that pretty seamlessly once it's able to do that then we are going to get that text from the PDF and then pass it through open Ai and give it a AI prompt which will allow us to generate a really cool summary reel using a prompt that I'm going to share with you now open AI credits can be very tricky in some countries that I've learned recently that you may not necessarily get the credits but in those countries gini is definitely available on the other hand being SAS developers and we want to ship our SAS and make money potentially and eventually we want to make sure that we are keeping our cost minimum so for that reason we are going to implement open AI as well as Gemini AI we'll first use open AI so if it's a supported in your country great and if you if you get free credits amazing then in that case definitely create an API key and I'm going to walk you through how to do that as well but let's say you do have open AI but for some reason after using a using up quite a bit you do get the rate limited exceed you get the rate limit exceeded error or a 429 error then in that case you would probably want to switch to Gemini which is what we'll be doing as as well we will be we will be learning how to do the switch elegantly if the open AI quota is exceeded and only use Gemini in that case but let's say you don't have open AI at all then you can just use Gemini as a default option it's going to work seamlessly as well but regardless the Transformer that we will be building to transform data from from the text that the user uploads to the summary that we get from AI to a real it's going to be pretty Central and seamless that you don't have to worry too much about how the UI is going to render because the summary real that we create is pretty much going to be a standard set of data that we'll be asking from AI once both of these Services run and we get the summary then we are going to save that PDF text save that summary text inside of PDF summaries stable inside our database now I know we haven't necessarily created the database yet but for now this is what you need to know we will be storing that in PDF undor summaries table and eventually we can look at how our database is going to be structured as well and we're going to store that inside of neon DV so first let's Implement all of these things first and then we can start looking at implementing our database connection as well we need a form for our upload form so let's go ahead and add that right now so what we can do is we can just add a form inside of upload form component that we created and we can just say that form is going to have a flex Flex call and a gap of six because we really want the form to be in a column format then we're going to have a input which is going to be of type file similarly we also need a button and this button is going to come from Shad CN UI which which is going to say upload your PDF now we have the button now and we have the file uploader as well now let's also make sure that this is in fact coming from at/ components now we can also need to add a onsubmit button to the form as well but before we do that this form upload form is going to have a bunch of different information such as we are going to add validation we going to going to add upload thing we're basically going to add everything that we talked about in this diagram here so for that reason we're going to just start separating the components Al together so let's create a new component here and let's call this upload form input and this is where we can add our form as well as we can add anything that we like here too so what we can do is we can just pretty much move what we added so far and just declare a upload form directly in here and return this as well and the button can come from upload form import here so we can move it move the import button and there's a typo here which we fixed just now there we go so now in this specific form we can start tweaking the form and how it looks like and the on submit could be passed in as a Handler here which is pretty much going to be handle submit and we can just say submitted for now now this thing n need to take a prop which we can just pass in and let's just declare a type here as well so we can say interface upload form inputs and move that Al together now the form itself is going to have a onsubmit which is going to be equal to onsubmit now keep this in mind this type is not accurate we are going to have have a e which is going to be react. form element and then this itself can be void for now and then we passing the onsubmit Handler to form onsubmit and so on but keep in mind the fact that this is a form and there's a handle submit it needs to be a client component we cannot have that be a server component similarly upload form also needs to be a client component so we need to add that client director because we are using forms so the minute we are using button handlers forms and so on anything that requires the browser it needs to be a client component all righty so now if we go back to our form input this is where we can start replacing the input file now we are going to use a component from shaten called as input which automatically handles a lot for us so we don't need to worry about it too much so we can copy the command head over to our terminal and paste it there we go let's start the development server again and now this time let's just add input from shaten and input is in fact going to come from components SL uiinput now in the case of input we're going to say type is file ID is also file name is also going to be file it's only going to accept application SL PDF because we don't want to upload images or anything like that it is a required property and let's also give it a class name just for now in case we want to style it further so now if I refresh the page you can see choose file no file chosen is in fact a file uploader but let's tweak the Styles a little bit because we want to make sure that we are styling the form correctly so here we can say justify end item Center and GAP is going to be 1.5 there we go so this way it's now horizontal so now you can see it actually needs to be full width but we can tweak that data so we have the form input here so here we can say class name is going to be Flex Flex call Gap 8 W full Max W2 XL and MX Auto there we go so now it's full width like we wanted the upload withd to be we're passing in the on submit as well and then in the form it looks like a simple form that we need to handle so now we need to look into processing the file itself for which we can start looking into upload thing so now we can start looking at processing the file here in the upload form right now handle submit just say submitted so first of all let's just say let's add a e it's going to be ba a event which is going to be of type form event and HTML form element and we also need to add e. prevent default so it does not refresh the page once we hit submit all right so now we have this the form element is going to have take a form data so we can say cons form data is going to be new form data and the value would be from current Target itself and we can get the file from form data by saying doget and file now remember we called this as file here which is what we need here get file and we can just type it as file as well this way typescript knows that this is a file now this is where we need to start validating the file the fields that the form has as well because if we we need to check hey is is this file valid does it also exceed the size that we have set as well what are our limitations and so on so we definitely need to do that we need to validate the fields for which we need a schema and we're going to use schema validation using Zod once the schema validation is done we are going to then upload the file to upload thing so we we're going to have to set that up and once the file has been uploaded then we can par the PDF using Lang chain then we can summarize the PDF using Ai and then lastly save the summary to the database and then redirect to the individual summary page so this is exactly what we need to do so there's a lot over here but don't worry I'm going to walk you through each one step by step so first things first let's create a schema now in order for us to create a schema we need to use Zod now Zod is a typescript for schema validation library and it basically will not allow any anyone to make a database call or proceed even a step further unless the schema has been successfully pared and which Z has become very popular in the industry and it has a bunch of functions that we could just readily use because it is a schema declaration and validation Library we will declare the schema that we need for Zod and once we do we can then use it so let's just go ahead and install it so first let's just copy npm install Zod stop the server and paste Zod and restart the server again now in page or in upload form rather we need to get Zord schema here so in order for us to define the schema we can just say schema equals Zed doob now this object can be anything and Zed is in fact going to be Zed from Zod now this schema is in fact going to be the file object that we talked about so we can say hey it's invalid file or the file must not exit specific values and so on so this is where we can start defining the schema so here we can say Zed do instance of file type and then we can get it a parameter that hey if that's not the case if it's not of not the type file then let's just say invalid file so this is the first step in the validation process for instance now that we have refined it we know this is correct this is the instance of file let's just refine it further and now say let's check the file let's check the size of the file and this needs to be refined now if the size of the file is greater than equal to is less than equal to 24 megabytes 1024 and so on then we are going to say if that's the case if it's less than equal to that then it must if it's more than that then it needs to be we need to show the message file size must be less than 24 megabytes now to be safe I'm just going to say 20 megabytes this way we can be careful just in case we run out of credits with open Ai and if the file content has has too much data then we can just be careful here because open AI only restricts us to 25 megabytes of file now again the last refinement step is going to be that it in fact starts with application.pdf as well so we can say file. type do starts with application PDF else the second parameter is going to be in fact the message which we can say file must be a PDF for instance so we can close this here every single time this is how we can handle it similarly we don't need message here the second parameter can in fact be the value itself and same thing here as well we don't need the message necessarily or I guess we do in this case so let's keep it as is all right so in the refined function we don't need the message object but in the case of instanceof we do so now we have defined a schema which is pretty solid so we can use the function which is the validation field part where we can say hey if the result equal to schema do safe pars and the file itself now safe parse is a really handy function from Zod and here we can say these fields are validated Fields now validated Fields gives us two options it gives us success ESS property and we can check if success is not true then give it give a message so for instance here we can say if validated properties. success if it's not true then we want to show a message saying that saying something along the lines of fields. error and let's flatten it and then access field errors. file again of zero otherwise invalid file for instance so what we're saying is hey like give me what the errors you get from Zod and then just return this because we don't want the user to proceed whatsoever cuz after we do proceed here that's where we want to up do all the other processing we want to perform all the other processing but we don't want to do that right now we want to make sure that the file has been validated here so let's try it out so now I'm going to upload file and let's open up our browser console as well and let's just go to console here and open it down here let's clear this and now hit upload and it has been submitted console log has been submitted and if you take a look at if you log validated fields for instance hit upload again it's refresh the page now if I go to and upload your PDF you you will see that success is in fact true and the data does have file and the file tab has all of this information the name of the file the type of the file the size of the file when was at last modified and so on we can now proceed uploading the file to upload thing () upload thing allows us to manage file uploads now if you're wondering why not just directly upload it to Amazon S3 well we can definitely do that it's way too complicated this specific layer on top really gives us a good API to interact with so we can just focus on our product versus woring too much about file uploads if you take a look at their pricing plans you have everything you need to start uploading for free it's a 2 gbyte app essentially and you can just get started the storage is shared between all the apps so if you have multiple apps and if you want more than 2 GB then definitely go for the 100 GB in this case we could just click on get started now I have already logged in but you can easily sign up as well and log in once you do that we can head over to dashboard as you can see I already am using upload thing for quite a few projects let's go ahead and create a new app now this is the free one that we want and we should care about and this time I'm going to say Suare AI is the app name now all the other options are basically defaulted for us so we don't need to worry about it and let's just go ahead and create app now that we have created an app and was that simple to create an app we can head over to files and manage our files here we could also manually upload a file but what we are looking for at this point is the API keys because we would need that for our application if you go under plans and Billings and these are all the available plans and if you want to switch to another plan you could do that as well settings would allow you to pick a region if you have upgraded to a paid plan and so on or transfer this project to a completely new team in our case we're going to focus mainly on the file section because this is where all our files would be uploaded so now let's just head over to the docs and let's look at how we can Implement upload thing in our project so first of all let's just head over to the nextjs app router documentation and let's go ahead and install upload thing so let's stop the server and just install it because this these are the two packages that we would need to upload our files now that we have done this we also need to get the upload thing token this is something we can grab from dashboard so the upload thing token would essentially be under API keys and this is where we could just get the upload thing token like it says over here so we can copy this go to our environment. local file and this is where we can just paste it as simple as that all right so now that we have the upload thing token let's proceed to the next step and we can pretty much follow exactly what this specific documentation tells us because it's pretty good the first step for us to do is to basically create an API folder and create a core file inside upload thing folder under API instead of image uploader we are going to create a file uploader so let's head over to our editor and let's just restart the server here as as well so first let's shrink all the folders here and create a new folder called as API under API we would want a file which should actually be under a folder called upload thing so we can say upload things SLC core.ts this automatically creates the folder as well and this is where we can just get the instance for upload thing so we can say create upload thing and this comes from SL server cuz remember this is under the API folder anything that you add under the API folder you can basically use that as a API and but make sure that it's not SL client it's always should be SL server because this is a server code so now that we have created an instance for upload thing let's expose a file router so we can say R file router and this is going to be the one responsible for uploading the files interacting with upload thing and giving us necessary details I'm going to call this PDF uploader we can call this whatever we like since this code of ours this app of ours is a PDF uploader which is why we need to call it that now let's just use the F instance that we created and this is where we can say I want it to be PDF and the max file size should be any of these values now if you take a look these are all the different values that we have 32 megabytes is something that is Max for us because remember that open AI restricts us for 25 files as well so what we could do is pick a number that is the closest 32 megabyte is what we are going to pick now we can call Dot middleware on top and this is where we can make it an async function just open this function up and just get request from it now here is where we want to get a user information and return that to upload thing so definitely let's get user information here but at the same time what we want to call after middleware is on upload complete and this function would essentially get called once the upload is complete and we can grab metad data as well as file information here which we can simply pass it down and figure out exactly what we need to do so here we can just log upload completed for user ID and we can say metadata. user ID similarly we can return hey what the user ID is going to be which is going to be metadata user ID and the file as well so once the file gets uploaded this is the router that will be called and lastly we want to make sure that it does satisfy file router from upload thing and this is going to be type of file router lastly let's export the type our file router equals type of let's just capitalize this one type off our file router there we go all right so now we have returned the metadata. user ID as well as the file but where does this come from well it basically is going to come from here so what we are going to do is we are going to get our user and the way we could do that is by using the clerk API we could get the user by saying await current user and again notice how the input is at clerk SL nextjs server let's do that and in case there is no user this is where we want to just throw an error because we only want to make sure that files are uploaded via if there is a user if there's a valid user let's return a upload thing error and let's just say unauthorized that's it perfect now that we have this let's just return it and say user ID is in fact going to be user. ID and if you notice this specific metadata this specific async value with metadata and file the metadata do user ID does come from the middle bear itself and it gets passed on to on upload complete now one thing we need to keep in mind is that create upload thing as well as type of file router needs to basically come from a different import alog together so we can say create upload thing should come from slash next and type of file router should also come from there which is slash next because this is a nextjs specific import that means there is some code running on upload thing that handles the next year specific stuff so we definitely need that for sure and here we can add additional console log that just says file. URL just to make sure that we have uploaded the file and then we can return the file itself over here and then instead of returning the entire file we can also just return file. URL right here perfect so now that we have the core file set up let's create a new file which is going to be the route. TS now just like how we saw inside the app router with inside the app directory whenever we want to expose a public route we need to create page. TSX file that tells nextjs that hey this is a public route similarly in order for us to expose an API route we need to create a file called as route. DS so here we are going to import create route Handler that comes from again upload things/ next and we're also going to import our file router which is what we created just now right here inside of core all right so now that we have this let's just export two values get comma post these are going to be the get and the post requests we can create the route Handler and then expose this to router and we can say Okay router is going to be our file router and that's it that's all we need to do now if you want to add additional config we could add that easily over here but this is what we are going to do we just exposing the router that we just created right here and exposing that so we can invoke it wherever we like now if you go back to the docs that's exactly what happened here we could set multiple values we get the AU from where wherever our Au is running in our case that's going to be clerk in this case we have created the file router as well and we need to create this file as well so if we go back and then create a new folder called as your inside this folder we are going to create upload thing. DS and this is where we can just say import type file router which comes from as API SL upload thing/ core and another import is generate react helpers which come from react and now we are just going to expose use upload thing hook that we are going to use inside of our nextjs code inside of a react code I should say so we can say generate react helpers and this is where we can add at the file router for instance we can just get rid of this and store it import made be realized that we made a mistake the API folder should in fact be inside the app router as well so we need to definitely add that so let's move that in here and then move this file inside of API yes there we go and now this makes sense where it's at app SL API SL upload thing/ core there we go so now that we have this let's go ahead to our upload form and start working on uploading the file to upload thing the cool thing about upload thing is that you can use their components that they provide us but in our case we are creating something different so we are going to use the use upload thing hook that we just exposed as well we can pretty much copy this whole thing move it here and inside of our form we can just expose it now use upload thing hook comes from u/ upload thing as we saw right here we created that we exposed the specific Hook from generate react helpers and in this case we are not going to have my upload thing we going to have PDF uploader and this name should match to what we created inside of core PDF uploader right here so all of this just begins to make sense now so now if we go back to route or let's go back to core in this case we can just return the entire file now that we have exposed the specific hook we have this function called start upload that we could start using to upload so we don't need an alert we can just say change that to console.log log uploaded successfully and in case of error we can say console. error we can also retrieve the error that comes in so we know what the error is as well by logging it here and now we can go back down here and say cons response equals our start upload which is the function that we just created and here we can just upload the files now we need to convert this into an async function because it's an await and we can handle it further if its response is undefined then we can just return there we go so now let's refresh this page one more time choose a file and let's go to the souso bar menu and let's just upload and you can see success is in fact true for the file but the upload has began for undefined upload successfully so now now if we head to upload thing and let's go to files you can see the menu that we uploaded is in fact in upload thing so this working perfectly which is great so now that the file has been uploaded we could look at paring the PDF using Lang chain and then summarizing the PDF using Ai and then some saving the summary to the database but this specific code is looking pretty good now what happens if things are are not working correctly right now we are just logging the errors but it would be nice to tell the user what's going on as as the user progresses from one thing to the other in order for us to achieve that let's install the toast from shat CN UI let's go to Shad CN and scroll all the way to the bottom and create a toast component as you can see this is the toast for it let's just copy this head over to our terminal and you can already see that the logs were here as well now let's just install toast from chaty and UI let's use Force now that toast has been added let's restart the server now in order for us to add toast we just need to add toaster component right here so we can say Toaster and then that's it because as you can see here it's right under meain right above the closing body tag all right so now we have a toast component so we can start using it so here we can say use toast or the other way toast equals use toast which is a hook that got created and now we can basically begin to add a toast wherever we want so in case of an error we need to let the user know that hey something went wrong so we can say title error occurred while uploading and the description could be error. message similarly if we go all the way down let's say if the fields were validated and they were not successful so we can say a cross icon and say something went wrong with a variant destructive which means that it's going to change the colors to more to be more destructive and the description is going to be literally this value that we have right there and then we can just return it at the same time we don't even need this console log because we literally doing that right here and then we can tell the user that hey by the way PDF has been processed is is processing so let's see if there's an icon for document which is this one and say processing PDF letting the user know what's going on especially when the task is really time consuming would really help them to know the process and they don't get bored and close our application our a guys reading through your document let's just add a Sparkles Emoji there we go so now that we have added processing PDF let's also add the data for if something goes wrong so if I say toast title is something went wrong and then description is going to be please use a different file because something went wrong while a uploading in upload thing so we can just ask them to use a different file if something were to go wrong in the actual file itself that we already have this error which says okay error occurred while uploading but after the file has been uploaded and still something goes wrong then the there's something wrong with the file we can be confident of that all right so now we have up once we have uploaded the file we can move this to post underneath which says processing PDF then this one could be uploading PDF and we can just say we are uploading your PDF there we go so now this is how the steps are we can remove this console log we validating the fields if they're not successful we're going to tell them what the problem is with their file then we are going to share a toast hey we loading the PDF if something were to go wrong we're going to tell them what went wrong and then we letting them know that hey we are processing your PDF after the upload this is just for our next step but this is where we can stop as well all righty so now if we refresh the page close this and close the console log as well let's just go and pick a file suur Bar menu bar menu and hit upload you can see processing PDF uploading PDF and so on and this upload was pretty instant in fact if we go back to upload thing refresh the page you can see now we have two files we can delete both of them because we're not doing much with it right now but you can see that processing PDF is also there but we want this toast to be on the top so let's just tweak that so let's just go to components UI and the toast component and here to match the styling I'm just going to give you view the code for it and we have basically just added a lot more spacing as well as move the position to top right so that's it you can grab the code for the CSS in one of the comments All right so this is the only change you're making in the toast component so you can just grab the entire thing and paste it so now we can focus on processing the PDF so going back to our diagram for upload service we have uploaded the PDF to upload thing we got the PDF URL now it's time for us to extract and load the PDF loaded using () Lang chain now Lang chain is pretty good and we would be using that to get the information using a PDF loader specifically from Lang chain load the PDF get the page content by combining all the pages and getting the text from it and then returning that to generate a summary with open Ai and even Gemini later on as well so that's exactly what we'll be focusing on now so we will be using the PDF loader from Lang chain specifically to load the PDF and then map all the pages together so if you take a look we would essentially need these packages so if we go to nbm tab let's just copy this and install it let's just stop the server paste this here and we can just copy this and open it up side by side right here there we go let's just restart the server and now what we need to do is create a new function for paring the PDF and generating it cons summary equals await generate PDF summary and this function can itself get the response from upload thing and this is where we can just simply start calling it now this specific function inside of nextjs is going to be a server action now let's first create a new file and let me explain what server actions are so let's create a new folder called actions and here let's just create a new file called as upload actions. DS anytime you want to expose a specific function as a public HTTP endpoint without having to use an API folder like we did for upload thing you would need to create a new file and add use server directive on top this would mean that any functions that get exported in this specific file are in fact server actions so for instance let's just export a function called as generate PDF summary and then return that now this specific function is what we declared here and if we import it this comes from actions SL upload actions and we can simply just call that in in a client component that's completely okay but nextjs will do its magic and convert this function because it's exported in a file called as us server to a HTTP endpoint all right so now let's just type this and we can say this is going to be a upload response which is going to be of type server data we are going to get user ID which is a string value we also have the file now if you remember we exported from upload thing we exported if only the file. URL here we want to just do the file entirely because that's exactly what we will be using here so we need the URL just a string at the same time we also need a name we need both of those things so we can even show that to the user eventually and here we can say hey if there is no upload response then we just want to return it and typically what I would like to do is we want to give the same consistent return message so whether it's successful or not so success could be true and false Boolean value at the same time the message is going to be whatever message we want to show the user so we could eventually show that in a toast message or show a error message to the user and the data property which is which will be null in this case because it's an error but if otherwise it would just be some text or an array or something like that all right so now we have this condition for error handling so now we can just retrieve the message directly from server data so here we can say we have the user ID and we have the file which is exactly what we type there so url url and the name now this is going to be equal to upload response response and upload response is in fact an array so we need to type it and now this is also going to be a array just like that there we go now URL and name could we could just rename it and Alias it to PDF URL and this could be file name this way it's more specific now if there is no PDF URL for whatever reason we want to do the same thing here like we did earlier which is the same response type where we can say success is false file upload fail and data is null all right now we can move this whole thing in a tri catch block where we can log the errors as we want so again copy and paste the same thing for now now in the TR cat block we can try to get the text for the PDF and let's create a new function for that where we can say fetch and EXT ex ract PDF text and here we can pass in the PDF URL all right and this function does not exist so let's create one now we can just extract the individual util functions into its own file so what we can do is let's create a new file Al together and let's go to maybe lib and inside of lib let's create a new file called as Lang chain dots and this is where all our Lang chain code is going to be now here we can just export async function and the name of the function is going to be Fetch and extract PDF we are going to take in the file URL which is going to be of type string there we go now let's just import that here from lib blank chain and now here is where we are going to parse it so we can take a look at the code on the right hand side where we can simply import it and then later we just want to get the loader but remember this that we need to download the file if you take a look this is a physical location so this is where we are going to use fetch to download it so here we can say a Fetch and then give it the URL that we just got then get the blob from it so again we can get that from response. blob and typically when we use fetch we get Json but we can also get a blob from Fetch as well and this is typically what is used whenever you're working with files then we can get the array buffer from it await blob. array buffer and this gives us the array buffer that we can just pass into the PDF loader now if you notice this this is a local file that they had in our case because it's a remote file which is why we need to do this so if we copy this code and paste this this path is what we need and if you take a look at PDF loader it basically takes a blob so what we can do here is we can just create a new blob object and then pass in the array buffer that we just created this way we are able to transform it the way we want it to we can get all the documents and again like it says here docs await loader. load this will load all the documents and now we can just combine all pages in this case when we combine Pages we can just map through them Doc and then this is where we can say doc. page content and then join it with sln for instance all right so now we have the text that we need so we can try to see if that's what it is so here we can just console log PDF text and in up upload form that's exactly what we're doing here we're passing the response and then checking if the summary exists now we can also just console log here as well and just say summary perfect so now if we go back and refresh the page and this time let's just pick the same file again and hit upload the minute we do that we can go to our terminal and you can see that whatever was there in that file is in fact basically appended next to each other and all the pages are in there because it's a cocktail bar and it has list of all the different options that we' get now you can see it's processing the PDF and and we can pretty much do whatever we want and now now that we have the summary we can pretty much just generate summary from open aai as well now because this this works we have the text from the PDF now it's time for us to add the power of AI to it now you can see we are on the open AI docks like I mentioned before if you don't get free credits from open AI in the country that you're based in don't worry because we're also going to use Gemini as well so you could either switch between both of them or just use one so if open ey doesn't work for you you may want to skip this section or just keep watching and go to the Gemini section which is right after this so in order for us to work with open aai we're going to start building and this is where it takes us to pretty much a documentation for open aai with all the different models now you can just sign up and then log in in my case I already have an account so I'm just going to log in for instance there we go I have logged in and the minute you do that you can just go to settings and go to API keys and you can see all the different API keys that I have used in the past but let's just create a new secret key here and let's just call this Suare AI we can just pick default project and it can can give permissions for all doesn't matter let's create the secret key copy it and then let's go to n.l file and this is where we can say open AI key equals say open AI which is one we API key paste it and that's it all right this is the documentation for open aai and what we want to do is we want to pretty much just generate the summary from open AI we already got the text from Lang chain already now it's time to just use the chat operation the chat function give it the prompt that we need and then just get the messages parse them and send it to the user so for that let's just go to text Generation section inside of open aai and this is exactly the code that we would need where we would import open aai create the new instance of open aai use the chat completions function pass in the prom that we need so there are typically two roles one is the role of a or developer and the other role is of a user user is where we would act as if we are the user and give it the prompt we would pick the model as well that we want as well and then return the message content to now let's just do that so let's just copy this code go back to our editor and just like how we created a lang chain file let's create a file called open a.s and paste this now in because we have an API key already I'm just going to say API key is in fact process. n do AI open AI keyy now we can just go to n.l copy the key name itself and paste it all right so now obviously we don't want this as a prompt we want the prompt to be something else we just want this to be a system rooll and this one we can just give it a prompt that we need now this prompt is quite interesting so let's come back to it in a second but what we need is we don't need to store it for instance and if you hover over it it will tell you if you want to store the output of this chat completion request for their use and we really don't want to do that so we can say model oops model is already selected we can just say gp4 as a model then in terms of temperature we can say 0.7 and temperature as it says means that the higher values like will make it even make the output more random while the lower values are 0.7 0.2 will make it more focused and deterministic and we want to definitely stick to a more of a lower end because we don't want it to be super random because we want consistent data then in terms of Max tokens we want to say the maximum number of tokens that can be generated in this chat completion we don't want to run out of tokens so keep that in mind so we're just going to say 1500 all right we can get rid of this and we can just return but we haven't necessarily create a function yet so let's just export that and create a function here we can say okay it's going to be generate summary from open Ai and then the parameters could be PDF text and then the string now here we can just move this entire code in here and now we can just return what we had earlier so we can say completion dot choices which is an array Dot message dot the content itself there we go and because this can return an error let's just add that do add this in a try catch block so we have a try and then also let's add a catch block with an error and this time we are going to say hey if error. status is in fact 42 and and if we take a look at HTTP code 429 let's Google that it just means too many requests it means that the client has sent too many requests to the server within a specific time frame and this is what open a mainly restricts us so we can pretty much we just add any here if we say error. status is 429 that means rate limit has been exceeded then we can just throw a new error that says rate limit exceeded we are customizing this error otherwise just throw the error and the reason why we're doing this is so that we can check on in our server action that hey has this status code been this if that's the case then let's just let's just call Gemini for instance all right we have the Lang chain code so if we go back to our server actions which is where we got the PDF text let's go ahead and call open AR so now again let's add a TR catch block and this is where we can say cons summary equals await generates PDF summary whoops generate PDF summary from open Ai and let's import that but if there is no summary then we need to handle that as well so right here we need if there is no summary then we need to handle that so let's just assign summary here and let's remove this and now we can say okay if there is no summary then let's just return success equals false and all of these values success is false and then this is where we can add the message that says failed to generate summary and data can be null all right so now we have the summary so and we are logging it already and this is where we can call Gemini code if in case there's an error for instance so we have the summary let's just try out the code and see what happens let's refresh the page choose a file again let's stick to the same file and the menu we uploading the PDF our a AI is is reading through your document and it says let's try it out if I open up and let's hit upload and it says rate limit exceeded so in fact my rate limit for openi has definitely been exceeded so there we go we definitely need to make sure that that doesn't happen anymore but at the same time there's one thing we missed adding in open AI code which is the prompt we we have no content here so so definitely we need to tweak that as well so let's give it a system prompt and this is where we can say it's going to be summary system prompt and we need to Define what this prompt is going to be in utils let's create a new file called as prompts dots and this is the prompt that you would need to give to open AI now this specific prompt does open AI that hey you are a social media contact an expert and this is the format of the document that we want and we are telling them specifically hey every single point must start with a period or like a bullet point followed by an m and space do not use number lists and so on it's very specific and this prompt is what we need to give to open a so if we take a look let's just import that from here this is () a system we are giving it Specific Instructions for that and now as a user we are going to say hey transform this document into a an engaging easy to read summary with contextually relevant emojis and proper markdown formatting and let's just say sln sln and PDF text and this needs to be converted into to a string literal so we can give it so the PDF text that we would get from the Lang chain API is what we are passing here and we literally telling open AI to create this into an engaging easy to read summary with contextually relevant emojis and proper markdown formatting and this is exact so let's try it out again if I go here and upload my PDF and hit upload and now if we head to the console we get the PDF text which is what we want and now hopefully it's AI is processing the document and it's taking a second which is why adding toast messages really help and there we go we have received our document in the format we want we have document details key highlights why it matters key terms to know and so on now this is really important here and really awesome that we have retrieved what we want from from open AI so now that we have the open AI code let's begin adding a couple things here one is that we should definitely not see the toast message once it has done processing that's one second we are not showing the loading menu nor are we resetting the form after so let's just fix that for now so if we back in the form we generating the PDF summary let's now take in the information from Ai and let's try to process it so we can say data is going to be null message is going to be null and then let's pass that from result or it's going to be empty let's call this result all right now let's just say if there's going to be data then only we want to perform the database action for instance but if if there is data. summary is when we want it so we need to definitely twe that to return a summary from the database from our action itself so we can just comment this out for now if there is data we also want to show a toast message to the user letting them know that hey by the way AI has done processing so we are saving your PDF so we can say saving PDF hang tight we are saving your summary that's it and once everything is done we can show another message and provided everything works as expected we could also just reset the form and in order for us to reset the form we need to First create a ref reference for the form itself this way we will be able to reset it after so in order for us to create the form ref we can just say form ref use ref from react this is going to be HTML form element type is going to be null and this specific ref needs to be passed into the form itself so we need to tweak this to say this is going to be form ref cuz what we need to do is we need to clear it the minute there is some data from the API so here we can say we need to change this into a function so you can say export const upload form input equals forward ref which is the react way of doing things and we can say HTML form element comma upload form input props and this is where we can pass in the data here so we can pass in onsubmit comma whatever we want and then comma ref and now we can just return this whole thing and let's get rid of this completely here we can say export default upload form input and the fact that we're getting component is not a function upload form input dot display name equals upload form input and if we take a look upload form input is right here and this itself fix that error because it somehow doesn't understand the name of the function so we need to add a display name property and lastly let's add the ref here that we passed on from our form and everything else can just stay the same now if we go back here and in the form itself and this is where we can just reset the form completely because we don't need it so we are saying ref equals form ref so form ref is what we need to reset so right after this we can say form ref do current dot reset oops let's copy this code we also want to reset the form in case of any error as well let's just put everything inside of here inside a tri catch block so right after this and right after this we can say eror and this is where we can reset the form and also say console. error error occurred and print the error as well now everything here can just go inside the tri block this way if there are any uncaught errors we can just log it and not break the form completely all righty so now we have reset the form successfully after this let's also add a loading State here which tells the user that hey something is happening and they don't necessarily upload a PDF again which is what's going on here now just say is loading set is loading and let's create a new state for that and let's just say false now the minute we have the submit data here we can say okay set is loading and to true so the minute we have the button being clicked we can say set is loading is true let's copy that and now we just want to say set is loading is false in case of any error whatsoever so we can say over here if it's it's going to be false here so that is loading is false if there is no response set is loading is false in case of any error set is loading is false and so on but if the the loading is true then again we need to pass that in as well here because we need to also just disable the button in case of loading being what it is so here we need to take in another value which says is loading is Boolean and then get that from the props and then disable certain values so we can say disable equals is loading similarly the class name would be here again let's just get CN to combine class names if it's loading opacity is 50 and cursor not allowed this this way we are telling user that hey it's not allowed similarly we can add a disabled property here then say is loading is disabled and change the text here accordingly so if it's loading then we want to show a loader so we can say this is going to be the oops this is going to be there we go so now we're saying okay if it's loading then just return a loader icon with the text processing similarly let's just give it a class name MR2 H4 W4 and animate spin this is going to spin the loader that we get from Lucid react icons which is what we imported here otherwise we're just going to see the text upload your PDF which is what we have here so let's just give it a quick test and test test out the loading I'm just going to return this right away this way none of the other AI code runs so if I submit and hit you can see processing is working as expected and because we have returned early none of the AI code has been called as well so when we're debugging you can definitely use these techniques to manage your uploads and set loading is true and false accordingly you can also save AI credits or or any paid credits through that as well you definitely need to add these barriers in development in general all right so we have the loading States good to go we also have we also have essentially implemented open AI let's just actually return the data as well for open AI because right now we are not really returning it so we get the summary but if the value is correct then we also need to do it so we can just say success is going to be true here with message as summary generated successfully and the data is going to be in fact summary and we can pass in additional data as the time comes so now you can see here how in the upload form we had added if data is summary then only saving to database that's exactly what we're looking for so if the data is data. summary does exist then we also want to handle that as well so if I say okay save summary will come later on but for now we can definitely add a toast message if we want or anything like that and if everything works successfully we can add a success message here as well but this is where we would be storing the summary to the database and that could be a separate server action Al together but for now let's focus on generating the PDF summary for Gemini if () we get an error rate limit exceeded or 429 we really need to make sure we call Gemini this way the user experience stays the same because user shouldn't care about which AI model we using which AI service we using all they care about a smart summary of their really long PDFs so that's exactly what we want to focus on right now if we go to upload actions we have this comment here saying call Gemini this is exactly where we should call it so we can just check if error is an instance of error and if error do message equals to rate limit exceeded then in that case we want to add another TR catch block that would mean to call Gemini so here I'm adding console. error and here we can say Gemini API fill after open AI Kota exceeded that's the Gemini error itself and now we can just throw new error saying that failed to generate summary with available AI providers so we're just handling the error cases if in case Gemini fails but if it doesn't and we can just assign summary and just say generate summary from Gemini I and again pass in the PDF text as well but obviously this function does not exist so we can create something similar like we did earlier let's create a new file called as Gemini ai. DS and this is where we can call this function generate PDF so we can say export cons generate summary and then paste it now this would be PDF text which is going to be string and now I want to introduce you to something very cool introducing you to T3 chat now T3 chat is essentially a wrapper on a bunch of AI models such as chat GPT 40 mini and all of these models as well I think the reason why T3 chat is superior to other platforms is because even though llms have gotten great the UI for it has not if you look go to chat gbt it's simply a chat application and I find that sometimes it's really slow and it's not where we want it to be so this specific app that is g3. chat is created by Theo and honestly it's really fast and the biggest difference is that the reason why it's like really fast is because T3 chat in fact stores all the data on our device so we own our data which is pretty awesome compared to other AI apps where it's on the cloud and we don't know what's going to happen with our data so this makes it really simple the free plan is pretty generous so you could definitely use that for this purpose that I'm going to show you but at the same time if you don't want to use T3 chat for more than just a free version then they have all these models that you can switch to if I log in it's a super simple interface but it's actually really fast for the T3 chat I'm on the Pro Plan so if I go back I do get unlimited messages and my plan is to my I get unim lied AI models whatever is available priority support and so on and I can just enable disable Cloud sync here as well if I want I'm enabling it I personally am okay with it but here is so the way we are going to use T3 chat is basically to use the AI capabilities to generate the Gemini code for us and you can do something similar as you write more code and or you find repetitive code in general as well for instance we are going to ask T3 chat that hey I have this code for open AI can you create similar code for Gemini Ai and I pasted the code for openai directly and this code is in fact this openai code here right here now the thing is it basically created a similar code but it replaced just the keyword open AI to Gemini that's not what we want we wanted to give it more context so then I said follow the link for Gemini docs and update the code and the minute I did that it was able to update the code and give me two different variations for instance not only did it create this specific chat version but it also created this single completion instead of chat and single completion is what we want just copy this whole thing go to Gemini Ai and paste it right here here now system prompt is something that can be imported gen AI is something we don't have so we can get that as well so if we go to Gemini Ai and if you go to quick start and nodejs it's saying we can install Google generative Ai and if we go back to T3 chat that's exactly what it told us as well to download the package and now let's restart the server again and we have also copy pasted the code so let's just go and update it so this is where we can just say import gen and gen comes from Google generative Ai and then we pass in the API key so just going to copy this for instance and this is what we need and then for the API key we need a Gemini API key and for that we're just going to go to Gemini API get the API key and create one here so you can basically create select a project from your existing Google projects I have a bunch of them so I'm just going to select one and then let's just copy the key go to n. loal paste the key but more importantly let's just get Gore API key equals for instance all right so now we also need to convert this function into async and let's see what happen so we have the Gen AI model we won't be using the pro model instead we would be using 1.5 hyos hyphen 002 and the way you can find out the what model is good for you is by going to the quick start document going back here and now you can see we have three different models right we have the 2.0 flash this is the newest model this is their fastest and most cost efficient one and this is the pro model and if you click on the pro model you would be able to see the state versions which is one of them so I just picked one of them now there are definitely rate limits to it so for instance you could have two two RPM and believe it's rate per limit more importantly it is quite generous and we could use it for quite a bit for example 2,000 pages of text for instance and now that we have updated the model here we also need to add a few of the parameters like we did for open AI as well which is to say temperature is going to be 0.7 and Max output tokens are going to be500 and this also will allow us to limit it to not a really giant document where we lose all our credits we don't want that all right now when it comes to the prompt itself instead of just pasting The Prompt like this let's just tweak The Prompt a little bit where we are going to save this and we can say contents and we can say role is going to be user Parts is going to be first object is going to be text with summary system prompt similar to how we had earlier and then we have another text which is going to be this text entirely so we can just copy this whole thing and get rid of this and this is what we want where we have user R parts comma and now this is the second prompt is what we are looking for so we can say just this so we have contents roll user Parts text summary prompt and text we have copy pasted the exact same thing and now we can just pass the prompt here we await the result. response and here we can check okay if there's an empty response from Gemini so we can say if no response. text then we want want to throw a error saying empty response from Gemini API otherwise just return it similarly return throw the error but if it's a 429 then return a rate limit ex exceeded but in case of Gemini AI we don't need to do that because at that point we just want to end it we just want to say okay if it's an error then that's it I just going to go into this infinite Loop that we're not looking for and now if you go to upload actions let's import Gemini AI as well and now that we have done this so now to test our code let's just replace open AI with Gemini for now and test that code just to make sure Gemini works as expected so now if we upload our PDF let's see what's going on in the terminal we do get the PDF text now it's trying to process the PDF oh we did get the prompt from Gemini as well so it works so some we did get the summary as expected but this time from Gemini is exactly what we are looking for so our Gemini as well as our open AI integration is working as expected now we can switch this back to open AI again and this way whenever there's an error from open AI about gemini or about 429 that's when Gemini AI is going to kick in We have basically completed a lot already for instance we now can upload PDF the PDF URL then gets to Lang chain and it does get extracted then we are able to generate summary using open aai as well as generate summary using Gemini too and then later on that summary goes into our database which is neon DV so this is the part we are going to implement now but before we do let's walk you through quickly how () our database schema is going to look like so we know exactly what we are doing now as you already know that we will be using postgress database postgress SQL for it and we'll be using neon DB which is a serverless platform for our application now if we take a look we are going to have three different tables we're going to have users PDF summary and payments now when it comes to users we will have an ID that autog generates so for instance this is going to be a uu ID that is going to be autogenerated and we can mark this as well if we like right here similarly this specific ID is also going to be autogenerated and so is payments ID as well so all of these are basically or IDs are uu ID which are autogenerated and uu IDs are essentially unique identifiers that will automatically get generated using a function that we have specifically in POG SQL but also just like available in neon DB as well now when it comes to users we're going to have all these fields such as ID email full name customer ID price ID status created and an updated ad you can read the name and it's really obvious what it does but to connect why we have a separate users table is only to indicate that hey this specific user has definitely paid so we are going to Only Store users that have purchased our product but otherwise users that have just browsing such as logging in and whatnot we're not going to worry about them so in the users table we're going to have ID that's autogenerated and this email is going to come from clerk full name customer ID price ID status created ad and updated ad the customer ID is something that's going to be unique for the customer price ID is something that what the customer has purchased and what their price ID is then we have a status which is essentially going to be inactive active and so on because if it's active then only we want to let them access the website but if they cancel the subscription then this specific status gets inactive so this is something we need to Mark as well it's going to be active or inactive all the status information for example then we have the fields created ad and updated ad which are pretty much common in all of them and they are mainly there to let us know when a specific field was created at and when a specific field was updated for instance so that is something important to note and this a good information for us to keep in general inside of our database where we can tell okay when was something created and when when it be updated for example and it's just going to be default to timestamp whenever user did it then this specific users table is only going to be inserted when a specific user pays for it so obviously we are going to have a payments table as well which is going to have ID that's U ID generated the amount that is how much they are they paying what's their status as well so like for example are they active or not what's their status stripe payment ID so this is something that we get from stripe price ID also like what type of plan have they subscribed to and the price ID for that user email again like this references this email in the user so they both are connected and this way we can say okay tell me this user who has paid from and we can check the payments table for that all right and then we have the PDF summaries which basically means again ID is you autogenerated with user ID which we are just storing it right now and then we also have the file URL where the file goes uploaded the summary text that is the text that we get from open AI or Gemini the status as well such as if it's completed or not if it's incomplete and so on the title of the document the name of the file and what when it was created and updated so the database schema is pretty simple I would say it is not that complex we only have three different tables and we just want to make sure that these tables are set up correctly so we can use them throughout our application now for instance if we go to Local Host 3000 and if we go to upload a PDF right now the PDF processing does occur here for instance but now the minute the last step in the process is the database upload itself for which we going to use neon DB now () when we go to login and again if you don't have an account you can just sign up over here either you can use any of these providers to log in or you could use your email I'm going to go hit log in and hit Google login now I already have so many accounts I'm using neon DB a lot you can already see the storage I'm using neon DB for and it's still free for me so if we go to new project and this is where we can say Suare AI for instance you can pick the postest version that you want if you are tied to a specific one for provider I'm just going to go with AWS Azure is also fine and this is where I can pick the region I'm in the esos so obviously I'm going to pick us esos and this is where you can just decide how much you want it to be honest for our use ke we can just keep it the default one and let's hit create project we can click on nextjs and this is exactly what we need to make SQL queries with neon DB for instance if you go to environment variable I'm I'm just going to copy the snippet and this itself is going to be the database URL and then I'm just going to get the database connection and make the SQL query write in the statement and get the data it's as simple as that in fact I did not use neon DB in one project of mine and I really regretted it because of how easy it is to work with neon um neon DB is not sponsoring my channel yet but in case you're listening neon please sponsor my channel because I have used your product quite a bit and I'm such a Hu supporter anyway let's just go to our n local file and paste what we copied for instance we have the database URL and all we need is this specific value so we can just copy the snippet and for this what we are going to do is we're going to get the database URL quite a bit we need a place where we can just store it so in lib we're going to create this file called db. DS and this file is going to be very handy for us and we're going to use it everywhere so we are going to say import neon from at neon database SLS serverless and paste it so basically what we had right and then is exactly this but we're not going to return any data or call any SQL queries here we just are simply going to check if this specific database URL doesn't exist then we just want to stop everything we don't want to make any calls and throw an error saying that neon database URL is not defined and this way we know exactly what's going on and we're going to call this function everywhere so obviously we shouldn't call this get data but instead call get DB connection and then we are going to call neon function and then just simply return SQL yeah this is the only thing we returning we can also just return directly but I want to keep it a little bit more veros here that tells me that hey this function actually returns SQL you don't have to do that you can directly return it but this is just a preference thing now the other thing we also need for neon DB is to also install neon as well they also have a CLI we could use but what we need also need is just neon DB database / serverless so let's just go to to the terminal and what we want to do here is just install it once it's installed let's restart the server again and now if you still see this quickly line you can just command p and develop a Reload window this will automatically tell your editor that hey we have a package for this all right so now we have the database connection and we can start using it now let's head over to dashboard and it gives you all the information about your dashboard but where we want toe is the SQL editor now in this case let's just create a new query now what's cool is you can also use generate with AI and I I use this specific functionality quite a bit because I can just tell neon that hey create this query for me and it just simply does but in our case I'm going to give you this really long schema.sql statement and I'm going to walk you through it as well what this does it basically creates the extension if it doesn't exist which is the uid extension it creates the users with this uid generate V4 which is available via this extension then we it also stores the PDF summaries it has the payments table everything that we talked about right here in our database schema it does that at the same time it also has a trigger function which basically updates the updated ad column as well and this automatically runs similarly the updated ad for others as well it you updated users updated ad is also updated same thing for PDF summaries as well as payments as well so we can just save this and I'm just going to say schema and you don't have you just have to run this once but let's just hit run and now you can see in separate tabs exactly what's going on and you can also hit analyze and it will tell you what's happening here as well and there was a syntax error but it I believe resolved it but if we go to now tables we do have the tables we need for instance payments we have PDF summaries as well as we have the users table as well these are the tables that are created with all the requirements that we need which Auto increments the id2 so for instance if I add a record you can see how it's a default value this means it's going to automatically create created same thing for created ad and updated ad but everything else is null in this case as well the default null or empty string and so on I don't want to create it but this is how you could do it as well you could grab this and we are going to store this in a file called as schema.sql as well so in the main project let's just add schema.sql I'm just going to paste this schema.sql as well with users table PDF summar and payments and the thing I want you to also note is how it references that means references users at email which means it just creates the reference for us for the users table so we know they're connected so this becomes the primary key which is the table ID and then this becomes the foreign key essentially as well all right so now we have the database so we can finally go ahead and insert insert and save database summary now we have returned the generated summary so now let's just go ahead and create a new function and let's call this function store we just need to store it so we can just say store PDF summary action and in this case we can store a bunch of values for now let's just keep it as is we need to make sure user is logged in and has a user ID then we also need to save the PDF summary as well which is which also needs to happen in this specific action so we need a save PDF summary function and all of this can go in a try catch block as well so that is also something we need to add now similar to how we had earlier we have this return statement but anytime we want to handle the errors let's add that as well so here we going to say we don't need to pass any data because we are storing the PDF we just need to tell the user hey it's successful so here we can just say if error is instance of error then we can just get the message else error saving PDF summary for instance now we have handled the error now we can simply just start writing our code here we need to get the user ID from Clerk and the way we could do do that is by getting user ID from o now o is in fact coming from clerk SL nextjs SLS server so anytime you want to access authentication or get a user ID on the server side you could simply just use this function now here we can again handle but if there is no user ID for some reason then in that case we want to return a object where success is false and message is going to be user not found for example and this is something that's very important for us to do to handle all the errors now similar to how we had it earlier let's just do saved summary for instance saved pdf summary and then here we can assign save PDF summary to await save PDF summary and this function does not exist yet we need to create it so in order for us to create the function let's just do to asnc function save PDF summary and then this is where the SQL statement for inserting PDF summary needs to go in here so what we can do is again track CCH block as usual and we can say console. error error saving PDF summary and then the error itself and then throw the error as well similarly in a tri block we need to get the SQL we need to get the SQL database connection that we got earlier so we got the database connection here and now we just need to get the data before says anything let's just await SQL and this is where our SQL statement can go so if I say insert into PDF summaries then I can add user ID we need to add all the values that that we have defined in PDF summaries this is default but we need all of these except create an ADD and update ad we pretty much need all of these values so at this point we can just go to T3 do chat and we can ask create a SQL query for inserting in this table and just paste it and let's see the command it comes up with that's exactly what we want so we can just copy this and go in here and paste it so instead of your table name it needs to be PDF summaries but everything else can stay the same where we have the user ID original file URL summary text status and Status can be default status we have title file name and these are all the values so let's just insert it one by one so in terms of user ID we can get that easy easily so we can say user ID then we have file URL we have summary we have title and we have file name now all of this are all of these are just going to be string values so I'm just going to type all of them to be string same thing for file name as well there we go and then rest of these values can just be populated which it can be user ID then we have file URL we have summary title and file name there we go so now in here we have save PDF summary which needs all of these values user ID is what we already have from clerk but we definitely need the others which is file URL summary title and file name and all of these values can need to be passed into the action itself so again we have the same Saga again going to copy the whole thing and paste it in here now I don't want to keep typing it over and over so I'm just going to create a interface here and let's just say PDF summary type and this whole thing can go in there there we go similarly for this as well it can go in there too for example now this is definitely going to show an error because we don't need to pass in user ID here and because we have call this exact same thing let's just call this summary and that is also taken so let's just call this saved summary and then let's just assign saved summary to await saved summary okay so now we have we're calling save PDF summary and then inserting PDF summary at the same time we are assigning saved summary here as well so we can just handle the error where if there is no saved summary then we want to just return null so here we can just say any all right so now we have the saved summary and here we can say fil to save PDF summary maybe ask them to please try again otherwise everything is working as expected we can just return success as true PDF summary saved successfully perfect so now we have a pretty simple but important action so let's just see what that looks like now if we go back to our upload form right now we are just generating the summary and if data. sum exists is where we need to call a wait and the fun action for that is store and this is where we need to give it all the values necessary so summary can be data. summary file URL is going to be response of zero server data. file. URL data. title and file name but if you notice user ID is also declared here so what we can do is Mark user ID as optional this way we don't have to do anything and then we have data which is data. title and file. name so instead of data. file name it me file. name now data. title does not exist it does not exist at all on generate PDF summary if you notice we are not returning the title either so this is where we need to return it along with summary we also need to return the file name and the way we and we can just get the file name by calling a function called as format file name as title and we can pass in the file name and this could be formatted file name there we go because even though we have file name we need to make sure we are able to format it correctly so in util let's just create a file called format .ts and paste this function that I'm giving you cuz this is going to format the file name it going to remove the file extension convert it to title case and so on so now let's just import it and then pass it on so in upload form everything is working as expected so here we can say store result equals any and then store result equals store summary update action and if everything works expected let's just give it the toast necessary so we can here here we can say summary generated this way we we are telling the user that hey your PDF has been successfully generated and saved that's exactly the message we can say successfully summarized and saved there we go and everything works as expected we can move this reset button right in here so let's just try it out because we have written a lot of code so let's just say and upload file name uploading PDF processing PDF and as it's processing let's also check the terminal so so far the Lang chain code is working then we have the AI code as well that has been generated and it looks like everything has has worked so if it did and if we go to Neon DB and refresh we do see PDF summaries which is exactly what we want now ideally this would only be inserted after the user has an account but because the user does not have an account that is completely fine we can just say hey it has for now we are uploading all the user summaries but then later on as payments get integrated we going to also enforce course payments as well but amazing this is working as expected so pretty much if you look at our diagram we are able to generate all of it so now even save PDF and PDF summaries inside of neon DB has been created so our upload service is pretty much good to go so congratulations if you're following so far this has been a huge BN for us and now we can just add in more features and make our application even better so at this point once the sub summary has been saved to the database we definitely want to redirect the user so this is where the redirect logic will come in play so we can pretty much just get rid of this and move this right here as a placeholder which we need to do we can work on that but if we go to store PDF summary action then in this case there is one more step we definitely need to perform instead of returning the PDF over here we need to in fact return it towards the end and here is why because we want to take in one more action is to revalidate our cash in nextjs a lot of the things a lot of routes are cached we need to tell nextjs that hey I have in fact inserted or updated data so you should see new data and which is why we need to tell next year that hey there's a new update in the cache and the way we can tell nextjs is by using a function called as revalidate path which in fact comes from next slash without this you are going to see stale data we can just simply call this function here and say the the route that we want it to Cache now since we don't have that route created yet that's completely fine but eventually this is the route we want to revalidate which is summaries slav summary. ID this way when we do redirect the user it does have some data so here we can just call the function redirect or let's just say router. push and router comes from nextjs router and make sure you import next SL navigation router because there's also next SL router we don't want next SL router because it's the old code so we just need to pass in slash summaries slash store result. ID and if we go here we are revalidating the path and returning success true with PDF summary is saved successfully and the same thing we want to do here which is to redirect the user to a specific ID and lastly we also want to add a finally block and set is load loading is false so that whenever there's an error that occurs it turns off the loading to false now you may argue well why not just it right here as well we could do the same here we could use redirect from next navigation and redirect here as well but since we want to show the user a toast message saying that summary has been generated we have moved the routing logic here this way we can show the user a message reset the form and then redirect the user as well so that's expected and lastly we are just calling store result. ID but we're not necessarily passing that here so what we can do is just tweak it we can say data and ID and here we can call Save summary. ID this way whenever we get an ID from the database which we are using to revalidate a cache we can return the ID here and here we can say data. ID and push the router to this specific ID as well now this page does not exist yet but it will so we are preparing for that all right moving on to the summaries page right now every time we have to check out if the files have been uploaded or not we have to go to like the dashboard select our application go to files and check out out all the files and there are way too many of these files here we don't need it we have uploaded quite a bit we don't need any of this but having said that we want to be able to see what summaries exist in our database right now if we take a look we have one and we should be able to view it now I know we have not necessarily implemented the individual summary page but we'll get to that next but for now we have to definitely look () at building these beautiful full cards and as I say card we are going to use shat CN card component for it so chatan has a beautiful card component as you can see over here and this card component is really well equipped to give us exactly what we're looking for so we're going to just use that to use the card component add this little delete icon from Lucid react so when you click on delete it has this dialogue and that dialogue component is also something we're going to get from chat Cen as well so let's add both of these when we do I add it and if I hit cancel it's gone at the same time this specific section click here to upgrade to Pro we will Implement that but the actual Logic for it will only come after we Implement payments so there's definitely things we can do now but there are things we'll do later so we'll revisit this page as well so what do we need to build this page in terms of data we need the title we need the time we also need the text and a status for completed or not so we need the summary text we also need the title we need when it was created so we can show how much time has elapsed right like one day ago 8 minutes ago and so on or and you also want to show the status as well alongside that so let's just go ahead and build this so moving on let's just shrink everything and close everything else and go to the app directory and in the logged in folder is where we're going to add another folder and call it dashboard cuz we go to dashboard to access it let's create a new page here and call it page. DSX this page is going to be simply a dashboard page so now if I go to your summaries it works because we have a dashboard page now yay so this works for sure now let's add the remaining elements to the page now again this is going to be Main and inside of main let's give it a class name of M it's screen so it doesn't go beyond a certain point and then we are going to give it a BG gradient as well so you're going to have that here and class name is going to be from Emerald 200 V are teal 200 to cyan 200 there we now let's add the class name and this time we're going to use the container class name that we set up in our Global CSS Center it give it Flex Flex call and gap4 perfect now the first thing we need to do is add an H1 just going to be just your summaries and then we also need a P tag which is going to be transform form your PDFs into concise actionable insights perfect so we have this now but obviously we need to tweak The Styling of it and also give it some spacing as well and then we also in the same block if you notice right now I am at my limit but if I let's say delete this one I also should see a new summary Button as well which we also need so let's let's add a Dev and in fact a link so let's just make it a button with is a variant of a link and inside that let's add a link that goes to slash upload and up instead of upload a PDF it's going to be new summary there we go so this is that button obviously we need to style it and it also has this plus icon too so let's add that as well plus from Lucid react and we're going to have W5 H5 Mr R2 there we go but obviously you can see how it's not Al low let's fix that let's give it a flex there we go text white nice and now we need to just item Center as well perfect and now in for the button itself we need to give it a linear gradient from rows 500 to rows 700 and then the hover is going to have from rows 600 again we want the same effect where it's the inverse of colors there we go so now when I when I hover over it it's something else as you can see and the animation for it we can also add that too so we can say hover scale 105 but then transition all and duration you can see this nice little animation and then if you take a look we don't have any underline here so we can also just say group and then hover no underline there we go it's looking so much better perfect so now if you take a look this button and this button are pretty much very similar all right so now we don't even need this div per se but we definitely need to add styling so that it's aligned better so first of all let's add The Styling let's give it another div for making it even so first let's just say px2 large then py12 and then in small py is going to be 24 it's a a lot better vertically now let's make sure there is enough Gap in all between all of them so for this one we can just say Flex Flex Flex Gap 4 mb8 and justify between there we go so now it's good but we need to Club these two together so that they stay together just like that so these two are together and this is on the end that's why there's justify between and now we can just give it Flex Flex X call Gap two there we go so now there's a bit of Gap as well now let's tile the H1 each one is going to be text 4XL font bold and then tracking tight and then let's also give it a gradient so we can say from or BG linear to R and we don't need it to be red we just need it to be Gray 600 to gray 900 BG clip text and test transparent this is so much better perfect so now you can already see how it's looking so much better similarly let's give it give the now for the P let's give it a different color let's just say text Gray 600 there we go okay so we have the styling for this that's looking pretty good now you can see that the button here is slightly smaller than the button here and personally I just prefer this button here because this one has some unnecessary padding that I'm not liking so again it's not that big of a deal with the spacings but so we're going to just stick to what we have here and next let's add another div which is pretty much going to have let give it a class name of margin bottom six and this specific div is going to have a P tag which says you have reached a the limit of let's say five uploads on the basic plan and this specific text is actually going to be small similarly for the layout of it it's going to be BG rows 50 border border rows 200 we're just giving it a border around rounded large to make the rounded Corners padding four and text rows 800 there we go so now this is looking a lot better because we want to tell users that hey you have reached the uploads you know just already and here we're just going to have an HF which goes to slash pricing so that we also giving them a link to upgrade as well so we can say upgrade to brow give it a space with arrow right and the class name for this is going to be W4 H4 inline block there we go and for this itself it can just autoc close on its own similarly let's just complete our sentence that we have it's going to be four unlimited uploads there we go so now this is so much better but it's not looking like a link the click here to upgrade so we need to definitely underline it so let's just make it so that we can do that 800 underline font medium and the offset that means how far the underline needs to be away from the text it needs to be offset of four inline flex and item Center there we go and four unlimited uploads can come right after just like that that there we go so now we have this let's also give it another spacing in the beginning as well so now when it when we click on it it goes to pricing otherwise not so this value the number five can be tweak so right for now we can just call this value upload limit which come which can just be assigned to five right here okay so now we have a upload limit as well so finally we can start adding the cards necessary so if we go back to shat CN UI we need a dialogue so let's copy this and add it paste it and then we also need a card so both of these components are added now so we can start using them so let's shring this and towards the bottom we can add another div and this div is going to be grid because if you take a look at this specific it's like three columns so if we go back to the app on desktop it's three columns in tablet it's two and then later on it's one that's exactly what we want so we can just do grid by default it's going to be one with gap four but in small it's going to be Gap six in medium device it's going to be Gap calls two in large grid calls three and again in small let's just give BX of0 the there we go nothing is visible right now because we're not necessarily using it and we can definitely give it like the card that we need here but again you can already see that the file is getting really long so let's create a new folder inside of components called dashboard or let's just call it summaries and in this case let's just give it a create a summary card. DSX now this specific summary card is very simple so we can just use it here and ideally there will be an array of items so we can just do this in summary card there we go and now you can see summary cards are displayed here and that's exactly what we want but let's give this summary card some styling and also use the card component as well so let's give it a div and then let's use the card component from Shad CN UI this card component if we take a look will have a few elements so first of all let's just give it a height of full and then the div this is where we would add the delete button and this would have absolute positioning because we want it to be on top of the content so here we can say the delete button will have its own styling and it can be a separate button Al together so we can say delete button cuz eventually this delete button is also going to have delete functionality and we don't want that we we want it to be separate because we don't want it to be in the same summary card so here we can just add delete button and again like I said you want it to be add components same thing here as well and then add the delete button from summaries little button is here you can keep it as is doesn't matter and then let's let's give it a link which goes to/ summary SL summary. ID and the summary. ID is something we can pass in for now it does not exist but it will so for now let's just give it any and the link component will come from next slash link perfect now let's close the link component and this specific link component will have a class name of block P4 and then smaller it will be P6 now this specific link component is also going to have a header which will be H3 class name text space Excel text large font semi bold text Gray 900 let's truncate the text and set a specific width otherwise it's going to go outside the card if the text is really long and here we can p say summary. title and that's just disable cursor tab here so that we don't need that autocomplete for AI and now there also be text SM and text Gray 500 and this is going to be the date so for now we can just say 2024 now clearly it's not liking that the there is no no values here so how about we give it a dummy set of value so we can just say summaries and give it a constant here called as summaries and this specific constant is going to have ID of one title call then it's going to have a description let me just call it description it's also going to have a created ad value and again the created ad value can come from neon DB so we can just get this value summary underscore text that's it so now this has the summaries so we can just spread summary and this can be summary oops there we go so now with summary or let's just instead of spreading it let's assign it to summary equals summary there we go so now we can have summary. title then we also need summary. summary txt so here we can have summary do summary text and now you can see already on the right hand side that the card is being displayed once we are happy with the layout of the file we can start feeding in real data so here we can say 600 line clam 2 text SM and small is going to be text BAS and pl is going to be two so now you can see that there's this description and in terms of the status badge itself it also has a status so we need to add that here too so status it's going to be completed so in terms of the status badge let's give it a span here and say your status is completed then it needs to be green for instance but again let's just extract this out into a separate file and even the header can be its own file as well so let's do that so we can say on summary header and then this would be file URL it will have a title and it will also have created at and all of these values would be file URL is a string title is a string or null we also have created at which is going to be a string and this itself will return Flex item start Gap two and small is going to be Gap four now let's replace before we style further so we can see it on the right hand side let's replace the title F summary header we have file URL will be summary. original file URL title will be summary. title created at will be summary. created at and let's close this entirely there we go and now inside of this let's just paste it and this can just be titled directly all right so now let's give it a file icon because right now this one has a file icon and right underneath is the created ad dat so let's do that so we can give it a file text icon and then let's give it W8 686 small W8 small h8 for 400 and one and then in terms of the div let's move H3 inside here and we're going to have the create an add functionality to which we don't we haven't added it here but let's move this inside here there we go it's aligned already and now now to give it the styling for the title layout we can say Flex one Min w0 there we go so now it's not cut off anymore and you can see exactly the entire title so this way now we have the summary header and we have the created ads here and then we also need a format file name but we can add that later let's create focus on the layout first and now inside here let's just add a div this is going to be Flex Flex call Gap three and in a small Gap four so there's some description some gap between each one of them we have added the summary text and now let's also create a separate styling for the badge so this one we also need it all the way to the bottom so let's just do that mt2 small mt4 there we go and now instead of a span let's create a status badge component separately status to be summary dot status and obviously this bat doesn't exist yet but let's create it so status badge which will have status and that status is going to be string and this one can just have a span with CN and this one we can say say PX3 py1 text EXs but more importantly let's just pass in the status here so we can see things all right so now we have that font medium rounded full capitalize so now you can see it's coming along together and now the color can be assessed based on the completion or not so if status is completed and we want one style else we want the other style so if the status is completed then we do BG green 100 text green 800 but if it's not completed we do BG yellow 100 and text whoops text yellow 800 there we go so now this is good so if status is not completed you can already see it's in fact yellow or yeah all right so now we have the status badge as well and the card component looking good delete button is not necessarily looking good so let's fix that for now in the delete button all we can add is the variant would be ghost and we can say the size will be icon because it's an icon and then the class name could be text Gray 400 but more importantly let's remove the delete itself and add a trash 2 icon from Lucid react and then we can say H4 there there we go so much better and now we can change the background color to be this then we have a nice border with border gray of 200 hover we can say it can be rows 600 and on Hover the background could be rows 50 so now you can see there's this nice hover as well the rest of the delete functionality could be implemented a bit later but for now let's focus on giving it getting the actual values from the database so in terms of retrieving the values from the database because page is in fact a server component as it does not necessarily have any sort of client functionality we need to retrieve the summaries from the database we need to get the information and then display it for the user and the way we could do that is simply by creating a function that we can use inside of lib let's create a new file called as summaries dods and in here we can export a function and let's just call this get summaries this function will basically get the summaries based on the user ID the user is logged in so we can say it will take in user ID and then maintain a database connection that we had earlier get DB connection this is why we had that function get DB connection so we could just call call it whenever and this time we're just going to have a list of summaries so we can say await SQL and the SQL command is just going to be something very simple and we can just say select star from PDF uncore summaries where user ID is equal to user ID and then we can also order by descending so the latest summary is going to be shown first based on created ad date there we go and now we can just simply return summaries that's it that's all we need to do to write queries and here instead of getting it from an array we can just say await get summaries and this time we want to get the summaries we want to get the summaries and let's first convert this into an async function but we want to get the summaries and pass in based on the user this is where we passing the user ID and the way we could get the user ID from clerk is by calling it so we can say user equals await and this is where we can just get the clerk user and let's call this function call current user and if this current user and if this function does not exist then we can just return redirect and we can just say hey redirect to sign in but if it does exist then we have it here so now user ID will be user. ID and now this can just be if no user ID and that's it this way we are covering our grounds that if the user ID does not exist then we can simply return it and this can be just and now if you see it does say that the date is an object object so we need to pass the date correctly in our summary card right now created ad is in fact shown as is so we can just say new date and close it to local string there we go now it has been converted to a proper date but that's not what we want right now so far we have the title we have the date and we have the description as expected so this card component is looking very nice so if I were to click on new summary and simply select a new document this is an ebook that I wrote so I'm just going to upload that and let's see what happens if everything works we will redirect it to a page which does not exist yet but it will work your PDF has been updated and it says that data. ID does not exist but let's worry about that later if we do go to summaries you will see that this does exist like the the leaders Playbook that I just inserted does work so that's exactly what we want so our cards are looking very nice if we go to desktop then we have a lot more room but if we go to tablet and then mobile The Styling is also looking very nice we still haven't worked on the delete functionality yet but that's something we can do that later let's focus on adding the formatting for the because we want to show 8 minutes ago versus 1 day ago 5 days ago and so on I'm also going to just refresh the page and you can see it says about 20 hours ago that's exactly the formatting we want to display here but if you take a look at it right now in our application we are just simply showing the date nothing about how much time has elapsed in order for us to implement this we are going to use a package called as dat FNS it's a modern JavaScript utility library and it provides a really good way to manipulate JavaScript dates now keep this in mind if you do it yourself it's going to be a lot more complicated and you can do it but it's definitely going to be a lot more complicated because manipulating dates is very complex so having a library for it will really make your life a lot simpler and because this date FNS module is pretty modular only the code that you need is going to be included in your JavaScript bundle so that's pretty nice nice so let's go ahead and install it so if we head over to the terminal let's go ahead and say npm install date FNS now if you go back here and go to documentation and go to installation that's exactly what we have here date FNS now let's just go ahead and restart our server and now let's go back to our code and inside the summary card is where we say new date created at along with two local strings so what we could do here is to just manipulate the date Al together so instead of saying this we could say format distance to now and this specific function does come from date FNS itself so this specific function will give us okay how much time has elapsed and we can still construct a new date pass and created at but then we also need a second parameter here right after this which says add suffix is equal to true and if you hover over it you will basically see this is what adds the X ago in local language so that's what we want now if we refresh this page and you can see about 20 hours ago about 21 hours ago is displayed now keep this in mind whenever I record these type of really long videos I try to spread out my recording so that I don't burn out so that's why you can see how it does show 20 hours ago 21 hours ago and so on so keep that in mind as well the other thing we want to tweak is also the title right now our title is simply whatever we get from our database but that's not exactly what we want we also want to make sure we are formatting the file name as well now in order for us to do that let's just create a new utils now if you go to li/ utils we already have a function that merges the different tailin so this way we are going to paste in another function here called as format file name this specific function will allow us to format the title so we can say if there is title or format file name which is going to be the file URL if we get the title great but if not the file URL that we do get let's just format it and extract the name from the file URL this way there's always a file all righty now if you're Wonder in for dat FNS this specific package wouldn't it be heavy for us to Simply use one single function because this specific package can be really heavy well luckily for us this is in fact a server component because this page is a server component is any of these packages that we are using will won't be necessarily included in that Browser Bundle which is the advantage of using server component and also reason why we extracted the delete button because button definitely needed client functionality and right now it doesn't have the use client directive because we haven't necessarily added any onclick handlers yet but next we are going to do that which means that this specific button component needs to be a client component but this code can still stay a server component so this code won't even be included in our Browser Bundle which makes our bundle really tiny and our app really performant so keep that in mind when you are architecting your code all righty so now let's focus on adding the delete button functionality now first of all to add a delete button functionality we need a Handler so let's just convert this into a client component like we talked about now that this is a client component it will be included in the Browser Bundle but what we need is an onclick Handler on the button itself but let's see what happens in the actual app if we go to the app and if you click on delete it does ask us for this dialogue are you sure you want to delete this summary and if you hit cancel then it's gone but if we do press delete then it does show a deleting message for instance if I do that deleting and now suddenly it's gone from our dashboard as well that's the functionality we want to implement and for that we need the dialogue component from shaten and remember we already added dialogue earlier along with card so we just need the code for it so what we can do is just copy this cuz this is literally what we want we want to ask hey are you sure you want to delete this or not which is the specific component are you absolutely sure and the description and what we could do is essentially pass in two buttons there which one is a cancel button and the other one would be the actual delete button and then we can handle that but there are so many more examples that we could use here here but let's just stick to the common one so let's just copy this and then go here and paste what we copied now when it comes to the button itself let's move our button inside of the footer so we have the header here so let's also add a dialogue footer and let's move that now when it comes to adding it let's just copy this and go back here and paste it these are all the Imports but we also need to add dialog footer here as well now this is a dialogue which right now does just has open as a button so we need this to be in fact here there we go I just remove this and when it comes to this styling on top what we need to do is we need to say hey this is actually a child which gets gets rid of The Styling completely this way it thinks that okay whatever is inside it is the actually the main trigger for it so the dialog trigger is going to be the trigger the dialog content will be what will be shown once we press it so if I press it you will see are you absolutely sure that does show up but that's it it just goes away what we need here is to ask us hey delete summary as well as are you sure you want to delete this summary so let's just copy this and paste it in the description so now when we press this it just has absolutely changed and this is where we are going to say delete summary and now this is also turned into a delete summary are you sure you want to delete it and all we need now is two buttons so in the footer we need two buttons which is what we're going to add here so let's just copy this button here and paste it so if you go back here we just need cancel and delete button so we have this delete icon here and here we can just say cancel and we definitely want this button to be ghost we don't necessarily need curly braces here but when it comes to the styling of it we can definitely tweak that so we can just remove this text color in terms of background color we can say bg50 border bgk border gray 100 but on Hover let's just also change it to Gray and on Hover let's also change this to gray 100 there we go which is the cancel functionality here similarly let's copy this and paste this again and this time this will be called delete now obviously these two definitely need some spacing but the variant for this is going to be destructive because it's actually a destructive thing and let's just change the styling here and let's say this is going to be BG gray 900 with hover of BG gray 600 there we go so now let's just give it the padding necessary so we can say px2 and let's remove the size equals icon because the size is going to be a regular button which is what we want here now when I hit cancel nothing happens but when I hit close it does close it so cancel and delete button needs to be hooked up now when it comes to cancel or delete we definitely need to tweak the dialogue a bit here we need to pass in a property called as open and this allows us to manipulate which elements on the dialogue will allow us to open or close a dialogue so we have these two handlers here so what we need to do is create a state call as open and set open which comes from react and this itself would be oops set open right here so open and set open are the ones that are going to man manipulate versus anything else so now if I click on it it does open but nothing really happens here so in the on click of cancel we can just say set open is equal to false versus on the on click of delete we need a different Handler Al together so if you click on this and hit cancel it does close so if you want to tweak the dialogue this is a very good idea to do so at the same time what we need is for the delete button we also want to trigger a completely new Handler a handle delete for example so we can say handle delete which is whoops and I close this remove this code and then the on click for this is also going to have handle delete now whatever gets triggered in handle delete or whatever we click whenever we click on the button handle delete is what will get triggered here so what do we need and handle delete what we essentially need is a way for us to delete the summary now ideally what we want to do here delete summary and definitely setting closing the dialogue on this as well so we need a await delete summary as well based on the summary. ID so we need to pass that in inside of the delete button let's just pass in summary ID and let's just create props here and we can say delete button props and then this can just be delete button props with summary ID and I'm missing a y here let's copy this paste it to be string so this one would actually be summary ID and now we just need to create this functionality for delete summary now if we think about it when it comes to summaries let's just create a new file here and let's call this summary actions. TS this is where all our server actions will be and anytime you have to do any sort of operations that will allow you to create update or delete you need to use a server action inside of the server component and client component model with next sh's app router and react 19 so keep that in mind so here we can just say export ASN function and delete summary and so far we know we need to pass in summary ID and this specific summary ID is going to be a string and now inside of that we are going to essentially add a TR catch block and use the same pattern that we have been using so far and the pattern is going to be return success true or false with data if it's there or not now let's think about it when you think of deleting a summary we and only think about deleting the action and letting the user know or letting the client know hey deleting is done that's all we need cuz what we need is once deleting is done this item should disappear from the list so what we can do is at some point delete from database and then we could just call the function revalidate path which deletes it from the nextjs cache as well this way we know delete has occurred successfully so the first step to do that is to call SQL which is to get the DB connection from neon for which we already have a function and then we are going to delete from database but if you take a look at schema SQL and I'm just going to copy this schema and which is why having a schema.sql file really is handy because we can always just feed it to any Ai and say hey give me the delete statement for it let's just go to 33. chat and go here and say give me a SQL statement to delete pdf summary record and here is the schema for it there we go now it has essentially said okay delete from summaries where ID is equal to whatever and we can also say Okay I want to delete summary by ID as well as by user ID so let's see what it gives us there we go that's exactly what we need we need delete it and then maybe return me the ID that got deleted as well and that's it that's the statement we need so we can just copy it go back to our summary actions and this is where we can paste it so we can say a see equal and this time paste it paste what we copied and now instead of saying with ID equals U ID or whatever let's just say ID equals summary ID and user ID is something we definitely need now if we go back to our summary card or let's just say we have the delete button right here where we need to pass in the summary ID and summary ID is going to be summary. ID that's correct but if we go back to page where summary card is being called Let's see we do have the user ID here already so how about we pass it down now another option for us to handle this is for by calling current user directly inside of delete button as well the delete button code this way we don't have to pass down props that we don't necessarily need to in summary actions is where we want it right right here this is where you can say get current user from nextjs server import and then user ID is going to be user. ID and if there is no user ID then just throw an error saying user not found but then only proceed essentially or we can just say success is false let's just throw an error and then this is where we can just get the user ID there we go let's just indent it a little bit so that it's a lot easier for us to manage and now the next step would be to basically check that hey if result. length is greater than zero then we can pretty much just revalidate path that we talked about here so we can just say revalidate path and this is where revalidate path will come from next cach and then slash dashboard and the path would p/ dashboard because that's where we want to clear the cache because there's no data now all right and then let's return success is going to be true here similarly let's return success is otherwise false if that's not the case success is also going to be false here because it's a it's an error so let's just log the error and say error deleting summary in the error itself there we go so now we have completed our action for deleting it so let's hook it up so this is where we can just say Okay await delete summary from actions and pass in the summary ID itself summary ID is just going to be this take a look that's how we pass it and now we can just say cons result equals delete the summary itself and if it's not successful which is what we said earlier if it's success is false we can just show a toast and for us to show a toast we need to import it so we can say cons toast is used toast and this is where we can say okay we want to show the toast for it so we can say title is going to be eror description is going to be fail to delete summary this way we are letting the user know that hey it's we failed and the variant is going to be destructive all righty so now now if we were to just trigger this toast and if I delete this and if I click on delete this is how it will look like failed to delete summary all right let's bring back this code now there we go we can just dismiss this for now you're deleting the summary using this action now one thing we I want to tweak is rename this to delete summary action and also go back to summary actions and say delete summary action and that's a pattern I would love to follow so that we know that this is in fact a server action and not just a regular function so if we try it out and let's say we delete it it cancel it closes if I do this and let's say we delete it it's gone you can see that easily that it's just gone so delete functionality works as expected but we can make the experience slightly better one is by showing that okay it's in fact deleting is in progress and then slowly transitioning and for that we're going to use a hook from react 19 called a start transition that L lets you render part of the UI in the background this way we not blocking the main thread so you can make this a nonblocking transition for instance it's not going to fully block our UI that is our browser just until delete happens it will just do it and we don't have to worry about it and for that we can just use this hook so over here we can just call this and this is where we can say it's pending and start transition and once we do that let's just call use transition here now use transition does come from react so that's what we did and now when we are deleting it it will be part of our action so this is what we're going to do we're going to do start transition let's make this async because it's an async functionality and we are going to close it all the way here that's it that's all we need to do and we can delete these because we have implemented it so we are starting the transition and this is going to be all part of it and then towards the end when we are saying delete here is where you can say if it's pending then just say deleting else we going to say just delete there we go so now if I refresh the page and if I say delete cancel nothing happens deleting and now it's gone so it's a lot better experience than just an Abrupt experience that we saw earlier so a delete functionality has been implemented it's working and it's pretty much good to go but notice that when there are no summaries we are not showing anything to the user we definitely need to show some sort of an experience like an empty State I should say that will let the user know that okay there there are no items here no summaries yet so for that let's just create a empty summary State component and this is where we can import it so you can export default function empty State and in this case or let's just say empty summary State and this is where we can just return a div and let's just say empty for now now let's just render it as well on the page so if you go to dashboard and right now we are just looping through the items and displaying them but in here we can say okay if summaries do length is zero then we want to display empty summary state if not we can display pretty much the rest of the content here there we go and now empty has appeared here so we can start styling it so for empty State we have a div which is going to be text Center py12 and over here let's add another div which is going to have file text from Lucid react and it's going to have a width a height and a text Gray of 400 and now you can see how what we're trying to do here we're basically going to say okay why don't you upload your first PDF to get started with AI powered summaries there we go and on top of that we could just say in an H3 tag that no summaries yet and then we can ask them okay why don't you just create a summary by adding a link component from nextjs or just rendering the button as a link so you can say variant is going to be link and a link compon component from nextjs and like I said this is going to be/ components and then this is going to have an href is going to be slash upload and we can pretty much just have just add it outside as well if you want it doesn't matter and this is where we can say create your first summary and in terms of class name mt4 the text is going to be white and then is just going to have very similar gradient that we've been adding so 500 to rows 7 100 and then hover is going to be from rows 600 hover is going to be two rows 800 there we go so we have added our summary the first summary and this is where we can say hover is going to be no underline so we have have this nice little button which also goes to slash upload as we want as you can see here now we can style the rest of the document here so we can just add a div is going to be Flex Flex call and it's going to have maybe some Gap item Center and gap of four so this just adds a gap between all the elements and this can be outside and we can get rid of this empty div that we added so this is now centered which is great and now we can style the edge3 to be text Excel font semibold text Gray 600 and this in fact could be NH H2 all right now in terms of the P tag styling we can say it's going to be text Gray 500 with a Max wmd there we go so now we have the no summaries document as well which no summaries empty State as well so that we are showing an empty State when there are no summaries and user can basically go ahead and create a new summary as they like as well because there are no summaries right now now let's just quickly demo the entire application just to see what happens so if you go to your summaries which is the dashboard page we get this empty state if I click on create your first summary we can upload a page so I'm just going to upload the ebook that route and hit upload we get these nice toast messages with disabled inputs so we unable to click it and then once the processing is completely done we would get sumary generated but if you see here it says that cannot read properties of undefined reading ID in upload form so if we go back to the application it's saying that it doesn't have data. ID so if we go to store PDF summary action and saved summary is basically save summary. ID is what we access so if save summary does not return an ID it won't work so if we go here you can see that even though our SQL query is like okay inserted it's not returning anything and that's what we should fix we can remove this and just say returning ID and also let's just return summary uncore text for instance and let let's also actually return something here so we can say saved summary equals and here let's also return saved summary there we go let's also indent this it's also just indent this so that it's a lot better to read same thing here as well there we go so now if we upload it and let's enter a bar menu option hit upload upload has been successful processing PDF and then once the PDF has been processed we also going to see more information and summary has been generated and we have been successfully redirected which is what we want Even though this space does not exist that's completely fine because it doesn't that's why it's an error but if you go to your summaries you will see that it's in fact displayed right here and if I click on it nothing really happens same thing if I click on this nothing happens but we are R getting redirected to the right page so our issue has been resolved and now we can focus on implementing this specific page () so let's create this individual summary page now this is going to be a dynamic route because every time anyone clicks on the summary card this specific ID changes the way you could create Dynamic routes inside of nextjs is Again by heading in the app directory this is a logged in experience so let's create a new folder instead of logged in and let's call it summaries because we want everyone to navigate to summaries but then the minute you want to create a dynamic route you would basically do something like ID and this box bracket makes it so that it's Dynamic and we are going to create a page. DSX in there so now if if I say summary page here and let's say let's we let's say we refresh this page and click on this you can see it's no longer a 404 not found page and in fact it is a dynamic ID page all righty so now we have a summary page as well and the thing with nextjs is that in order for us to get the ID we have to get it through pams which are available through this property called as pams but you can see these params are only available if you await them because they are going to be asynchronous so the way we could do that is first we need to convert this into an async function and then let's just call these props and then params and then it's going to return a promise with ID of string there we go now in order for us to get the dynamic params we can just say params equals ops. pams there we go and now in order for us to get the ID we can simply do ps. ID now if I just print the ID on the page you can see the ID that is entered right here in the URL is in fact displayed on the page if I go back and select some other ID which is starts with e something then that is also displayed here but what if we go to a page such as some random value now it's still returning it but we really don't want to go to a random page we only want to go to a page that has a summary for instance this page clearly this ID clearly is a random ID and it does not contain the summary so for that what we could do is get the summary by ID now the easiest way for us to do that is let's say we create a new file here and let's just call this get summary or let's just say summary do DS file now in here we can say async function get summary by ID because that's what we want to do an ID can be a string and now this returns a tri catch block which again this will return null but also print out the error which says error fetching summary by ID and let's also return an error here but in the tri block or let's say error because that's what we call error and then here let's get the SQL connection and this time let's just get the summary so the way we could do that is by just getting it so that will be a select statement so we can say select let's just say start from PDF summaries where ID equals ID there we go and now we can just return summary here and this one needs an await signature as well there we go so now if we go back here let's just say summary equals get summary by ID and that will come from components SL summaries now I don't like that we are storing the code for getting the summary inside of components in fact this needs to be probably inside lib but if we go to lib we do do have this code by user ID which is is get list of all summaries so we could just pretty much move the code there so let's just copy this delete this file all together and now paste it now this time let's just remove the import and let's get summary by ID from lip / summaries and this makes so much sense now we want to say that okay if it's there is no summary then in that case we want to just return a summary not found page for instance something like this and this does exist but if I enter a random value it gives a summary not found but better yet we can just return a four four or four not found and the way we could do that is by saying not found from next navigation and this automatically just Returns the page not found which is 404 not found page which is exactly what we want so now we have made progress for for what to do how to handle page not found now let's go ahead and set up the rest of the page now here let's just say we want the class name to be relative isolate Min H screen again BG linear to B from rows 50/40 so you can see the color is slightly different and then two white now in here we we could just give it the BG gradient component that we had so this has this nice green color so if I click on this it does have a red color a rose color so we can just say from Rose to white or let's just go to dashboard and we had these colors and these are also the same green colors so in this case let's just make it a little bit more fun and say from Rows 4 100 via rows 300 two rows I just say to Orange 200 there we go way better all right now this is what we want Here and Now under BG gradient let's give it a class name and this time let's just see how we did it for dashboard we want the exact same or similar I should say divs there we go and now in the case of px2 this is going to be PX4 and small it's going to be px6 we basically giving it horizontal spacing py6 small is going to be py 12 and then large can be py 24 all right so now we can basically code the header for it which is going to be a column so we can say Flex Flex call and here it's going to have the header and then we also need to have the info as well so for header we can just say summary. tile or just like here let's just say summary. tile so we can just get title from summary if there is a file name then let's just display file name here and the file name can also come from summary as well which is just like that over here so if you go back to your summaries this one is going to be the bar menu and this is the PDF name for it so far so good and if we go back to your summaries and go here this is exactly the page we are building so we need badge date one minute read back to dashboard link and then we also need Source we need view original download summary and this specific viewer as well so let's just start splitting them up into separate components so that it's more manageable ible for us so for the header we can call it summary header so here in summaries we can say this is going to be a summary header. DSX and we're just going to enter that summary header. DSX similarly this is literally going to be it now I'm not sure about the class name yet but let's just do H1 here and let's import summary header from components so now if we go back this is the the header similarly for file name and file URL and all the fun stuff here that is the information such as a source and this specific section alog together we could make it a separate component so as long as there is a file name we could render this and this component could be called Source info with file name data so now if I copy this whole thing go here and create Source info. DSX Source info and here it's going to be file name and now if we go back here let's import it there we go so now let's just tweak that to say file name the name needs to be Pascal case all right so now we have this this needs to be a P tag we have the source info as well obviously Source info is going to need more detail s but for now let's just keep it as is then we are going to have another div which will have a relative positioning and a lot more margin among elements and then in this case we are definitely going to have a file text icon that just says how many words and also this whole thing now for this one entirely I want to give you a gradient out of the box as well as some code that that we could just copy paste so this is the code for it we are going to import file text from the Icon and the summary viewer is going to be going to have to be created so as you can see here we are we need definitely the words from it so we can just say word count here which doesn't exist right now so we are basically giving it an really nice gradient that we could just use and then adding a file text icon along with the word count so if we go to word count which is if we go to get summary by ID this is where we need to tweak word count because word count does not exist so we can say get star from PDF summaries or we can just enter all the information we need user ID we need Title original file URL summary text word count created at updat status file name and all that fun stuff but also we can add another property which says length of summary text minus length and replace summary text with empty strings plus one as word count there we go so now if we go back here and get word count we will definitely get the word count so let's just go back here and edit it but let's just format it a bit better so we know we have ID user ID title original file URL summary text word count and instead of returning word count we can just do this and we have summary text we have status we have title which we already do in the past we already did in the previous line created at up that file name and then this is the ma this is where the magic occurs we need length summary undor text minus length replace summary _ text space replace to empty string plus one as word count and here we are returning from PDF summaries and this is where we can this is where we can copy this and go back to what we had earlier because clearly we are editing the wrong query so this is what we want and then copy this whole thing here whoops so if I copy this and just copy this whole query right here so where ID there we go and where ID is equal to ID so now if I refresh the page we do see 246 words so always be careful when the names are quite similar they will look a little different all right so now we have the word count as well now we just need summary viewer so let's create a new file called as summary viewer. DSX which is literally going to be this value let's import that and now you can already see that summary viewer does have a bunch of text we need to format it correctly but you can see how this looks so let's just work on summary header first summary header is basically going to be this header but also it's going to include the back to dashboard button that we have here and also this information how long it's going to take to read the date as well as a badge called AI summary so let's work on that so first let's just add create a div and now instead of going to disable cursor tab here and here let's just say Gap four margin bottom four and justify between CU we want the button to be on one end and the text to be on the other so let's just create another div or I guess say let's just create two divs and one will have the button component and this button component will be the back button there we go and when it comes to the back button itself let's just work on it where we can say this is going to be a a link because it just goes back to the link itself then the size of the button is going to be small because we want this to be a small button so you can see how it's coming into effect here and when it comes to the class name I'm just going to give you the Styles here which is going to basically look like this now we are also going to have a onclick Handler which pretty much goes to router dot which going to do we're going to do a router. push to back or we if you make it a link we could also just wrap it with a link component as well so we can just say next link and the HF is going to be slash dashboard and now we can just say back to dashboard right here there we go but we also have an icon here for back to dashboard so let's just fix that so for that we can say Chevron left is the icon that we need from Lucid react with these values rows 500 transition transform and then group hover is going to be this value this way you can see how it's transforming and we can we can be easily go to back now at the same time let's give it a span as well and style this further and to this we can say text access text small and text muted foreground with font medium there we go you can already see how it's coming along really well and then two dashboard could have a different styling slightly where we want to hide the text to dashboard on mobile so we can accordingly do this cuz otherwise it's going to be way too tiny we just want it to be back there we go all right all right so this is looking so much better we have the styling for it we have everything else working out for us and we can just pretty much get rid of this actually we do need the title but we have the back button ready for us and now we can work on the rest of the content let's just make sure that this entire piece of content has vertical spacing let's add a div here with a badge component from shaten and also a Sparkles icon which says AI summary there we go we just need this now we can style the batch further but I'm just going to give you the styles for it for the batch as well as Sparkles there we have it we are mainly changing the background color and all the other elements and I really want to focus on things such as the content of the page but you can grab the styling from the comments as well all right so we have the badge now let's give it another div and a calendar icon with class name H4 W4 text rows 400 and in this case just make sure to close it in this case we want to add this specific January 2025 and a one minute read code so we have the calendar icon for it but when it comes to the uh the date itself we can just say created at dot to local date string and us and then the second parameter could be year is numeric month is long and day is numeric now we just need to get created ad from the props and right now created ad does not is not passed in so let's start pass that in we can close everything else and here let's just pass create it at as a prop there we go so we have passed that in here and now you can already see January 31 has been displayed so now let's just style it so this one we can just say Gap is going to be two text SM and text muted foreground there we go now obviously we want this to be in the same row so we can just say Flex Flex wrap item Center and GAP four and this way now it's all all in the same line and lastly let's also build the functionality for one minute read which is pretty much going to be very similar so let's copy paste it but instead of calendar we're going to have clock icon and instead of a date we are going to have a reading time just going to be minute read and reading time will come from as a prop there we go and we have to also pass that in here and reading time will come from our database and then paste it here now obviously we don't have reading time which is basically going to be not from here but we need to grab reading time from using a function called math. seal and we can get that from summary count so we can do word count or zero if word count does not exist divided by 200 now we definitely making an assumption that it's going to be a specific way of reading so like there are only so many words you could read so now if let's just do reading time now we're just assuming that it's going to be basically 200 words 200 characters so we're definitely going to make an assumption here that we on average a reading speed is 200 words per minute this is just a common estimate if you think you can read faster or you think you want to show faster then you can definitely do that but I've definitely seen we read about 200 words per minute all right so now we have the reading time as well so if you see reading time back to dashboard all of this is looking pretty good now we just need to print the title The Source and all of this information so that will come from Source info for instance let's just give it some spacing here one thing that's missing on the page is the title so let's add that now so once we add the title we would know what the document is all about so here we can add title and the title is right there but obviously it's way too big we don't want that so let's just I'm going to give you the styling for it and that's what we're going to add so let's just add that and there we go we all we did was increase the font size and also change the colors here as well now we have the title for the link tag let's also give it a self start as well or let's just move this in here there we go all right so we have the title and all of this so summary header is pretty much ready to go now when it comes to Source info we have a few things we need so let's add that we need a file name we need a original file URL we need Title we need summary text we need created ad and here is why if you take a look at this it's going to be all of this information so we definitely need the source which is just with an icon here we need a view original link which will link to the original link itself we also need we also need the download summary button where we basically get the PDF here so all of this is going to be converted into text as well well so we need all of this information so first let's give it a style now I'm going to give you a basic style for this specific document because you really want to focus on implementing the actual functionality this is part of it but this will help speed us up so we have the file text icon and then we have the button Now button again can be slash components and then we also need an external link as well the minute we do that we can see source is right here and there's view original The View original simply just points to original file URL and now right underneath it we also need a download summary button now this is the this is where we're going to have a lot more fun so when we click on download summary button let's create a separate component for it because this specific component is going to be a client component as we will need handlers to download it so user needs to press it and then download it so this specific button is not just a link it's in fact a client functionality code so let's just do that but at the same time let's pass in all the values so we need all of this information in there file name and create it app so now let's just go ahead and create a new file and let's call this download summary button. DSX there we go and this is where the button code comes in play with import from slash button that's it so now if we go back here let's make sure to import it and now if we see download summary button is right there but obviously we want the download summary button to download things for us so in order for us to do that first let's just style it so so the button is going to be size small with class name of h8 PX3 BG rows 100 text rows 600 how it's going to be text rows 700 and hover is going to be BG rows 50 there we go so now it's looking a lot better as you can see right here then we have the down download icon itself so let's get that from Lucid react with this specific styling so now users can know that this is in fact a download button and now let's implement the onclick Handler as well so we can see handle download so let's just do handle download and this is where we can say okay we we want the summary content here so we can say summary content and this is the content that will essentially get downloaded so first we we are going to have a title and then we are going to have a generated summary text and generated on text and if we take a look at the text itself we literally have all of this information so generated on then the actual content and then we have original file name along with the text generated by AI summary tool that's exactly what we need here so we can say new date created app two local string then we have the rest of the summary text and then we also have this text that says original file name is file name and then it's generated by let's just say Su that's it that's the content we need and obviously the fact that it is a function it's it needs a Handler so this needs to be a used client directive and it needs to be a client component all right so now we have the summary content let's just declare it so what we need to do is basically download it in plain text format for which we'll create a blob object so we can say blob with summary content and text plane then we also going to have a URL is going to be create doob URL and then we are going to create a link which is going to be document. creat link and then we going to assign the HF for that link to be the URL and link. download will be the name so we can just say summary with hyphen and then the title but at the same time we want to replace the title too so we can just say we can give it a specific reject so it only gives us the title that we need so we have a z0 9 and let's just separate by underscore and now we can just do link. click and then URL do object URL as well as now you can remove that child as well there we go this is just cleanup code so now if I press download there's an error which says title. replace doesn't exist so let's make sure we have passed title in we have let's make sure we are passing title and all the information from Source info as well so this is where we need to pass everything in so we need to pass all of this information and then original file URL as well there we go so now if I hit download summary you can see it does come up with all the information that we need as well is exactly what we want but we also have an error that says fail to execute. remove Char so let's see what we did here we also need need to append child to remove child so we can say append Child Link and then if I download again the error is no longer there which is what we want now if you want the formatting to be to have no space we need to just do this same thing for original file as well this way there is no additional spacing and now if I download it and open it you should see that there is no additional spacing in the file which is what we want all right so our download summary button is also looking pretty good so now we can pretty much focus on so now we can pretty much focus on implementing the actual summary viewer as well it's time for us to render the summary viewer and create this beautiful reel of text now if you what to divide the text in here if you take a look this is the summary itself self that we are just rendering on the page it has a hashtag which means its titles it has these bullet points which means that it is basically a bullet point with an emoji and that's how we are rendering it and because we have asked Gemini as well as open AI to create a consistent layout for all these reels we're able to render it in a beautiful reel as well so for instance if you were to take a look at this specific image let's try to figure out what this is so first of all we have a section title so I'm going to highlight it and let's call this section title so we can just say section title then we also have a Content section which is going to be these values for instance so we have a Content section here this is going to be the content section then we have a progress bar which is essentially going to be this whole thing that's a progress bar we are also going to create that just shows okay how many elements are there in the list and accordingly display it for instance then we also have these navigation controls as well these are the navigation controls for instance so we have a section title we have a Content section a progress bar and a navigation control and that is all we are going to render in this specific section so we're going to pass the text and then accordingly divide as per different values so first come first how about we look into parsing the section but there's one more thing I want to show you if you take a look at this whole thing this card entirely this whole thing or I should say this inner thing right here that is in fact a card component from shatan so we we need to make sure we use the shatan card component as well so first come first let's do that let's get the card component from shaten and add basic values so we can just add card headed card title and content so now as you can see it's already rendered in a card component which is what we want and now let's parse the summary for instance we are parsing the summary so that we can render the title accordingly let's divide the summary in different sections so we can summary do split with sln and let's give it a hashtag space and then let's map it and say section nut trim and then let's filter out any Boolean values and then map it and then map it again and let's call it a utility called as par section now this section par section is going to be responsible for getting the content out and parsing it so we can say par section will have section and again it will be divided into by splitting it so that we get the title as well as the section so now if we just return this and print it so we say so we say sections dot let's just say json. sfy sections you will see what we see now we have literally a title and a Content value title content title content but you can see as we par the content we have even more bullet points as well so we want to render it in in a data structure that easier to understand and we also parsing all the I guess garbage values in the text as well so let's just give it a clean title so we can say clean title is going to be starts with and every clean title will have a hashtag if that's the case then I want to just get the first value and trim it and I'm going to disable cursor tab here and trim it otherwise I just want to trim the title to remove any unnecessary leading space now title can be assigned to clean title the minute we do that there is no hashtag and we can just use this as a title for the page so in order for us to render the title itself what we could do is essentially just create a state and store the value in the state so here we can store the section current section and the Set current section and then we could just store it for instance in a local state value now this specific section and current section which again should have a value of zero will be the one that will set the current section if I say this is basically going to be sections. current section. title and because we have used State we also need to mark this as used client you can see Sip and saver and sta bar is in fact rendered over here similarly as we Loop through it because this is sections current section do. tile it's going to just display everything in here as well now let's continue parsing it I just wanted to show you an end picture of how we are doing things so now that we have the title let's render the content so we can just say points is going to be a string array just we can assign it to empty and now here we can say let current point will be empty and let's map through the content and then accordingly assign the current point so keep in mind this is the point will looking at the content itself so we need to parse it accordingly so if there's a line let's just trim the line you can say line. trim add any unnecessary spaces and also let's just spread the content here so now we have the trim line if trim line dot starts with this value and we can just copy it directly from here this dot then in that case we want to just trim it accordingly so let's say if it starts with this and if it is current point then we want to push it as a point so you can say current point do trim they're creating a map of values and then current Point becomes trimmed point or trim line else if there is no trim line then we want to again do the same thing but then instead here we want to call say current point will be empty else we just want to say current point plus equal plus trim line there we go and here if we we can say if there is a current point then you just want to do points. push which is going to be current point. trim now when it comes to the content instead of returning the content let's return points and points we'll need to filter out the type title so we don't want the title at all so we can say point if there is a point then we can say if it does not start with hashtag and if it does not starts with choose cuz that's another thing that kept coming up in the in the content from Gemini and open AI so if that's the case that's great then in that case we just want to print it so here we have the title so let's also print the content as well so in terms of the content of printing sections let's print sections of current section dot points there we go and now the points have been rendered which is what we want because if you can see this is literally the point for sip saver and St bar we just want the first point to be shown and that's exactly it that's what it's shown all right so now we have a basic structure let's do the same and add the navigation controls as well so inside of card or inside of the content let's add a component and call this navigation controls and this specific component is simply going to go back and forth between different sections and for that reason I'm just going to give you the code for it wherein we are going back and forth it's literally the same same code is just that we are trying to go+ one or minus one over here as you can see here we get the navigation controls and pass in all the values so we say current section is current section we need a value for total sections which will be sections. length and then we basically pass in previous and other sections too for instance this is where we can just create a different handle we can remove this one and we can say what the handle next function is going to be so we can say handle next is going to be Set current section previous math. Min previous per one sections. length minus one similarly handle previous is going to be minus1 instead of + one and a value of zero and that's it so now we can just say on previous is going to be this on next is going to be handle next and on Section select is going to be Set current section there we go now you can already see the content being displayed with different values showing up here that's exactly what we want we have the navigation controls and the different values are getting displayed as well but obviously the card alignment is not correct so let's do that so so we can just pretty much remove all of this cuz we don't necessarily need those sections we can just do it ourselves and The Styling for the card itself is pretty much just going to be this value right here and we don't need these points we can just say it's going to be a div value and this div will be H full overflow y auto scroll bar hide padding 12 small padding top is 16 PB 20 and in small it's going to be pb24 so now it has a lot more height and here we can just say it's going to be PX4 and small is going to be PS px6 withd title is going to be H2 and title is going to be sections current section. title or it's going to be empty same thing here for for the content section itself it's going to be ul and just like that there'll be the points so as you can see this these are all the different points here that we have rendered and simply the logic for rendering the next 10 previous points are literally here we set the current section plus one and minus one and the navigation controls themselves are literally just two circular buttons with Chevron left and Chevron right and then the length is the section we render a bunch of dots we highlight the current section and so on so now we can actually work on showing the progress bar as well as focusing on how we render the title as well as the content so let's work on the progress bar so for that let's create a separate component called as progress bar which takes in all the sections and current section and in this we can just render progress bar. DSX and let's just say export default function progress bar with all of the these values now let's just import it as well over here progress bar should be displayed now in terms of the progress bar itself what we want to show is these lines it's pretty similar to what we have over here CU once we move there that's when the dots change same thing here too we once we move we want the lines to change sort of like animate differently so we're going to have position absolute top zero left zero right Z z20 BG background 80 backdrop blur access bt4 pb2 and only bottom border plus we also need a border rows 50/1 opacity all right so now there is some spacing there so we can render another div that says PX4 and flex and add gap of 1.5 and in this case what we want to do is map through the sections so as we map through the sections let's do exactly that like we have H would be 1 .5 there is no W it can be the default one and then let's give it a background BG linear we're also giving a nice BG gradient to the dots as well two rows 600 and then transition all with duration 500 and this is where we want to say if index is current section then see withd is full if current section is greater than index then we want to do withd full withd opacity 10 else we want to do with zero and let's move some Styles around here so we need another div where we will say h1.5 Flex one Dred full and then BG rows 500/10 overflow hidden and we can keep this but keep the height as full there we go so now this way we are setting the opacity accordingly based on what the selected values are and now when I go right you can see how it SL slowly moves from one spot to the other and that's all thanks to the animations that come out of the box inside of tail bin and then in terms of the sections it will be array of title and points right here and let's also add a type for par section which is simply going to be section there we go so now if you go back the type for that is also fixed all right so now when it came to summary viewer we have these sections which is which is title and points so we could just extract these this function and create a utils called as summary Helper because at this point we are going to create a bunch of helpers for our code so let's just do that so we can say export our section and import it as well as well as remove any unused Imports we don't want now let's create the section title so section title could just live here and we can say const section title is title and then let's just add a div of class name Flex Flex call then we want the title to be centered and in this a little bigger so we can just say Gap two margin bottom six sticky top zero pt2 pb4 BG background 80 we also want a backdrop blur as well of access Z10 and then let's do H2 with a title and the class name for that would be text 3 XL with large being text 4 XL and let's use that here too because we're not necessarily doing that section title and now make it font book we also want it to be text centered Flex items item Center justify Center and GAP two there we go so now it's looking so much better and now it's just time for us to render the actual content as well which is which which should be a separate component because it's actually quite long so we can say content section. DSX export default content section and at this point we can just say content section and then the rest of the values title and points and then over here we just need a div bit space y4 and then map loop through the points just like that but now things are going to get a little interesting cuz we also want to make sure that we are rendering the point accordingly so we could literally have a text which will give us an emoji point for instance so first if you notice when it came to actual content itself this is looking pretty good but as you can see in the first point there is no bullet point but the second point we have all bullet points but sometimes it's actually quite inconsistent sometimes the data that does get returned is needs to be pared correctly for us to render the exact point which is why we're going to check okay if it's the main point or if it has an emoji point and so on so we are going to have to create a component called or a function called as pars point which is going to look like this this specific pars Point component will check if it's a number if it's a main point if it has Emoji or if it's empty and this will really help us figure out exactly what to render so now here we can just check use par Point directly and then accordingly handle it so if it has Emoji or if it's main point then what we want to do and return it we have an error right now that says that each L child in a list should have a unique key property so let's just fix that and let's add index here and then let's give it an index this way it's unique and the error is gone so now we need to render the actual item so for that let's just create a div and let's replace this as a div and let's just give it some styling here it's pretty much going to be just this text The Styling where we're giving it a gradient itself and then we need to make it so that we're able to get the point as well as the text so we don't have an emoji not we have a point so let's just fix that so we said if it has emoji and if it is the main point then we can just render it so let's just render this instead over here and now obviously it has reached to this point so we have to fix it the Emoji in fact is going to be something we need to extract so we can say it's going to be bars emoji G points function which is going to take content now this function does not exist but we need to create it so let's paste this right here and we simply just parsing the Emoji from here and returning Emoji as well as text so I'm going to give you those functions here now if we go back down here then we have the point itself and now you can see that the cont content has successfully rendered we have the Emoji and then we have the text but let's see what the error is all about we are back to that error because we have not copied this area no we did so progress bar has the same issue so let's just go to progress bar and here let's just say it's going to be index perfect so now you can see we have Emoji point and let's give it a default value here and if we scroll all the way to the right you can see all the text being rendered the way we want it to we have all the values here but that is true for emoji Point what about what about if it's a regular Point what if what about if it does not have a Emoji well in that case let's create another function and do the same thing so now we can just in content section itself let's extract this out and let's call this Emoji point and let's call this Emoji point right here now paste what we copied and this is also going to have index index 2 we can get rid of Point Key from here and now you can see that emoji point is being rendered here and let's copy this whole thing again and paste it here Emoji point is all also being rendered right here but this makes sense for an emoji point and we can get rid of this from here completely and this makes sense for an emoji point but this does not so let's just render like a regular point if there is no Emoji so let's create another function here so we can say cons regular point and this is just going to be a regular Point here all right so regular Point has been rendered but notice that we need to also tweak its class names and make sure it looks good so the class name could be exactly this so we can just copy this whole thing and paste it similarly copy the point values as well so we can get say this is going to be relative text large L text large muted foreground reading relax and text left so in case there is no Emoji there's still some hope for regular point and we can render regular Point as well now we don't need to worry about his numbered because typically it doesn't show up but if it does then you may want to handle that too but for some reason if it's empty then let's just return null and return nothing because we don't want to render anything here all right so now we have the content section ready to go as well and if I refresh the page you can see that content section needs a key and and we need to add key right here the minute we do that oops we can get rid of key from here CU we don't need it similarly we don't need index here at all because of the way we have structured our code there we go the error is gone because we don't necessarily need a key in unnecessary places so now you can see that the the content is looking very nice same as this one the content is looking beautiful which is what we want so a summary page is also pretty much ready to go so we can click on this and view it we can click on the leaders Playbook ebook that I created and again same thing it's looking very nice and I'm quite happy with the changes we have made lastly let's just refactor the code because there's way too much data here and we don't need it so so if we go to summary helpers we had par section and if we go to summaries itself we have a table where we store all the components so we can pretty much copy these functions par point and Par emoji and move that to summary helpers with an export them there we go now we can just we have par section and import them there we go looking a lot better so we are ready to go our summary page the individual summary page is looking pretty nice you can see how much time it takes to read all of this documents how many words it contains and it's looking pretty good I'm very happy with the changes we have made so far it is now time for us to integrate payments in our () product now the function fun ality is already looking really good end to end once we integrate pricing then we will be able to lock our product completely and only people who pay would be able to access our product so if we head over to pricing right now we have two pricing tables one is the basic one and the pro one and we created these while we were developing the landing page now there is there are some restrictions in every plan such as 5 PDF summaries per month for basic plan and unlimited for propile plan once we have set up our pricing and stripe is integrated which is the which is a service that we will be using then we can also add these restrictions as well based on the plan that the user has paid for so for instance if we had to buy now nothing happens and ideally what we want is if we go to our actual product we want to redirect to a stripe checkout this specific checkout is hosted by stripe and stripe will take care of all the payment processing for us we just need to notify stripe exactly what we want to create the pricing for our product the name of our product and so on and stripe will take care of a lot for us now having said that some stripe apis can be really confusing so in this specific section of the course I'm going to literally walk you through every step of the way exactly what I do when I'm about to create a strip product and exactly what needs to happen in each step I'm going to give you a stepbystep guide to follow through so you would be able to do this on your own very easily but before we do that let's try to understand how stripe is going to work so if we head over to our diagram here we are this is exactly what we are going to create with stripe let's take a look at this diagram to understand how exactly we are going to integrate stripe and then we can go about setting it up so first we need to essentially create a stripe web and for that we're going to create a API route with nextjs now this specific API route would be SL API SL payments and that itself will create the stripe fabook that will be listening to all the events so for instance let's say a customer purchases cancels a subscription purchases your product updates their information there are a lot of events that stripe can notify us so for instance if we care about customer purchasing and canceled for now then will notify that and we can then filter out okay what all event we really care for and accordingly stripe will only notify us for those events so that is really important for us to know however we obviously need to tell stripe that hey I'm authorized to receive this information and that is very crucial for us because all this data that stripe is going to send us is sens sensitive information for our customers and you know in order to build trust and make sure we are not doing anything funky we really have to make sure we set up things the right way and the best way to do that is to basically this really nice handshake the secure handshake so that stripe can trust us and our customer's data is also pretty secure for instance let's say a event occurs that customer has purchased your product then stripe will notify us because we'll be creating the web hook there and and we will essentially be setting up secret key as well as webbook secret key on the stripe dashboard and this is where we will say hey I I'm authorized to receive this information please take this key and give me access to the stripe data that you're about to notify me for and stripe is going to be like okay let me verify these this key information as well as secret and if that works then go ahead proceed for instance so now stripe has has verified us it says yes you are officially authorized cuz I have the same secret key and web hook secret information then SL API payments is always going to listen to All stripe events and that is very important for us because then we can do lots of other fun things for our users to make their sign checkout process really seamless so if you don't know what a web Hook is a web Hook is something that we essentially create on stripe and that is something where we set up an API and we listen to it since our web Hook is always listening is listening to all those events then we will get notified so anytime anything occurs but it can get pretty noisy because we don't want to listen to every single type of events we also want to be mindful of cost because every single time our API will be called and we really don't want to waste time and resources on some events that we don't care about which is why we are going to filter out the events that we get from stripe these are the two events that we really care for checkout. session. completed as well as customer. subscription. deleted whenever a customer purchases this is the event that will get trigger in stripe and stripe is going to tell us that hey this customer has purchased the minute this happens we want them then create that user in the database because hey they have so we need to create them create the record update the users table as well and set the price ID so whatever plan that they signed up for it can be basic plan or Pro Plan and so on and on top of that we also need to create a new payments record because they have also paid so all of this will happen only when they have successfully completed the checkout experience and this is where stripe triggers the event so let's say the we already have that user in a database but then they decided okay I like this product for a month but I'm not using it as much as I would like so I would love to cancel the subscription in that case you could just trigger customer. subscription. deleted and this specific subscription will get triggered then stripe is going to trigger this specific event in that case what we could do is the users table will have the status as cancelled in this case the user table will have the status as active so that will instantly tell us that okay this status is cancelled so we could do more fun things on the UI such as block the user from accessing a product depending on their status so that's exactly where the UI part comes in now we have these events success customers purchase completed as well as the subscription deleted on the UI now we can basically check okay if this user has active subscriptions then only show them the dashboard otherwise show them a message that hey you don't have active subscription you need to buy similarly you also want to set limits based on the plans because remember over here if you sign up for a basic plan then you only get five PDF summaries per month but if you sign up for a Pro Plan you get unlimited now we want to also restrict that on on our UI as well where we say okay if it's a basic plan that only allow five uploads so we need to check how many uploads users have already uploaded have completed in our database and then accordingly show allow the number of uploads so if you go back here to the product that we are building we would also be showing this specific buy a plan badge as well if they don't have a plan so all of this is something that we'll be implementing next as part of our for stripe experience so now let's go ahead and sign up with stripe now since I already have an account I'm not going to necessarily show you the sign up process but signing up is pretty straightforward anyone can sign up with stripe but once you do sign up you can just head over to dashboard and log in and this is the part where I have already logged in and if I go to home this is my test dashboard now I have already gone ahead and toggled test mode mode here this way this is all the test data and you won't be able to see my production customer sensitive data so make sure you toggle this to go to test mode because in test mode we can try things we can create subscriptions delete them and so on without having actual pricing impact in production so the other cool thing is that stripe has recently come out with try sandboxes which is really awesome and you would want to basically create a Sandbox here as well so if you go ahead and create a Sandbox then you could create a Sandbox called development or production or app specific sandbox as well so I'm going to call this suar sandbox just for this course and let's create the sandbox here now that I have a sand working sandbox I could tweak how whatever we like so if we if I were to give you a quick overview of the stripe dashboard first of all anytime you want to search anything stripe search field is really good you could search whatever you want here so for instance if I say API Keys it is literally going to take me to API gys and then there's the web hook Tab and so on but let's say if I ask for web hook then it's going to take me to web books tab as well we have a product catalog where we will be creating our products but at the same time we are also going to be creating something called as payment links and what exactly are payment links well if you head over to pricing when you click on the buy now button there's a link that we get redirected to it's a test link for now but this specific link is in fact our payment link we need to create this because this entire experience is something stripe has already created for us so we just have to create the link and update the values for us to get a unique link for our plans so that's exactly what we'll be doing as well so first come first let's go ahead and create a product so if we go to add a product this is where we can say Suare Ai and the cool thing about this experience is that or test sandbox is that you can always say hey now I'm ready I'm made all the changes necessary in stripe and you can copy that to live mode so it's very easy for you to test everything and once you're good to go update that and move that to liveboard so that's also pretty handy now I'm just going to copy this text and paste it and this is something that will appear at checkout so make sure whatever you add here is something that you want the users to see you can upload an image here if you like as well so we can do that I'm not going to do it accordingly view the docu documentation and pick the best product code tax code and I'm just going to select electronically supplied Services here but make sure whenever you are shipping your SAS you follow the right guidelines and pick the right tax code then we're going to have it recurring we don't want any of this here we're not going to use it just go with all the default options and this is where we have the option to create a recurring product or a oneoff if you want to set up a subscription then definitely you want to pick recurring but if you do want if you do want to create a oneoff product then you can just select oneoff one off would be if you want to create something like a life give give them them a lifetime access then do that recurring would be okay I want to charge them every month or week or so on in our case we're going to charge $9 for the basic plan and we don't want the tax included again it totally depends on you for me I always want to add tax on top so they know it's additional for tax reasons so I'm going to keep use the default option as no and in terms of billing period you can also pick how often do you want to build them and I'm also going to pick here monthly now if you take a look at pricing options these are all the options here so I'm just going to close preview and let's go ahead and hit next the minute we do that we already have a product and we have a $9 product already now let's add another product which is the Pro Plan product now one thing I did forget with the basic plan is once you click on it you want to add a pricing description and this is something that is only mainly for us so we can manage it so let's add basic plan here let's add another plan and this is where we want to add a plan of I believe $19 month so let's just say $19 rest everything Remains the Same and in price description let's just add Pro Plan again this is not shown to customers it's mainly for us so if you hit next now we have the two plans $9 as well as $19 I'm going to make this as the default price because I really want people to go for this plan now let's go ahead and add the product all righty so we have added our product so if this is your first ever stripe product congratulations we are very close to shipping a SAS so that would be really awesome for you to build and ship the SAS but we have the SAS product ready to go which is pretty awesome now the next step is for us to go ahead and create a payment link now if we go to payment link we can create test payment link and this is where we can pretty much select the products that we created so in this ke I'm just going to first go for the basic plan product and customers cannot adjust a quantity because they only can buy this product one time so we could just say that and this time we want to basically add allow promo code so we can give them a discount code if you want to add create promotions in the future at the same time I always love to check this specific I check box which allows business customers to provide tax IDs because if they choose the option in stripe to generate an invoice as well for themselves then having this tax ID for their tax filing reasons will get really simple and this time I'm just going to say subscribe for instance and let's go ahead and create a link now this is the link for our basic plan and we have successfully created a payment link for a basic plan similarly let's just close this go back to dashboard that wasn't really working so if we go back to payment links and create a new one this time let's create one for the Pro Plan same thing as we did earlier allow promo code allow business customers to provide tax ID and then go ahead and hit payment link now if you want to modify the checkout experience further we could also do that by going in preview section and hitting edit and after let's just go to after payment and you can pretty much tweak the message that we get here just for thanks for subscribing now we can replace that with the default message but let's come back to this later if you want all righty this is the payment link for the Pro Plan so if you head over to payment links we have two payment links the $9 one and the $19 one so if you remember if we go back to our diagram we now have created the stripe product and all that so let's go ahead now so now let's go ahead and create the stripe secret key and the web hook Secret so for that let's just head over to stripe again so in stripe we could just look for API keys and the minute we go here you will see that the secret key has already been created for us so we could pretty much just use the secret key for this part where we have the strip secret key but for creating the web hook secret key we need a web hook for that and to create a web hook we could just go here to web hooks Tab and create an invent desk destion this is where our API API should be called so ideally once we create an API we can then go ahead and set it up over here and pass it a URL for our API and then set also then configure the events that we want as well and in our case it will be these two events checkout session completed and customer subscription deleted so stripe will then go ahead and Trigger this specific spefic web hook endpoint for Anytime there were there are events for instance so we could basically go ahead and add an endpoint here and stripe will trigger that endpoint or we could also test the same in a local environment as well so let's say we don't want to do the endpoint thing you cannot necessarily add Local Host so it should be something that should can be accessible by anyone on the internet which is why we can also use this tab which is test in a local environment and we can simulate stripe events as if a purchase has occurred and we can log in with stripe forward the events to the web hook and Trigger the events but truth be told here I personally find this experience the local environment experience really confusing because when you do forward the events and you trigger the events with the CLI it doesn't necessarily have all the information that we need for that payment to occur success F so your code might fail and you may think it's actually your code that's the problem but in fact in a test environment when you test in a local environment not all the fields are filled out as they would if you were to make an actual purchase so something to keep in mind as you go ahead and try out the experience further so we are going to test our experience with adding an endpoint and I will show you how you can test out the experience and expose your Local Host and create an endpoint URL here and test it out but before we do that let's just go ahead and create this endpoint so if you look to the right hand side we already have some code here they have provided code in all these different languages and we are going to select nodejs now as you can see this is exactly the code that we need to trigger an event now we are not using Express so we don't need to worry about it but we will be pretty much using a lot of the code here which will give you a gist of exactly what we building but first like it says you need to install stripe just install stripe and it has done the run the install for us now we can restart the server again and now the next thing what we want to do is create our endpoints itself and the endpoint ASP a diagram is going to be/ API SL payments let's just go back to the app directory in a project and this time under API let's create a new folder called payments and under that let's create another folder called as route. DS now remember since nextjs uses file based routing system they also go with specific conventions to expose specific routes so anytime something is under API and you want to ex to expose that through nextjs as a route then you need to create a file called as route. TS now this becomes a special route file that we could use to do whatever we want so here first come first this web Hook is going to be a post request so we can just say export cons post equals async because it's going to be an async request and request is in fact going to be next request let me import this and show you what I mean by that the request is in fact a class that extends the web request API with additional convenience meth method so nextjs essentially extends the browser request and extends that and creates next request so anytime you create an API route inside of nextjs it's in fact going to be next request and it will be next response as well so if you want to return something for us to test out then this is going to be next responsejson and now then we can say okay whatever we want I'm going to say status is success and let's just say message is going to be hello from stripe API and this is just going to be an arrow function here there we go so now we have a simple post request here so we have a API that we could point to but if you want to expose this to stripe and add a web hook URL here we need to do a few things we first need to expose our Local Host to something to a external endpoint but before we do that let's go ahead and test out the code so for that I'm going to use an application called as Yak if you don't know about this application it's essentially an API client for modern developers you can call rest API graphql grpc and so on all you need to do is download y it's really nice and I really love the interface so definitely check that out so let me just go to that application and here let's just hit new and this is where you want to select HTTP request go switch from get request to post and now we can basically do HTTP SL localhost 3,000 SL API SL payments and let's see what happens I'm going I hit send look at that we do get the status as success and message as hello from stripe API this means that our API has been created successfully now we need to tweak it so that it listens to stripe events and Trigger that as well so if we go back to our code over here we already have stripe so let's just go ahead and configure stripe further and listen to it just going to minimize this one and now in in the post request here we need a few things first we need to create a stripe instance which basically is going to take stripe secret key and let's just import Stripe from stripe here as well now that we have the stripe instance created we could start using that but first if you remember if we go back to our web hook code we essentially need to have this secret handshake here too so for that let's just get the payload request. text so this is going to be that and then we are also going to get a signature which is basically going to be stripe signature itself and this is where we are going to configure the events that says okay stripe. web hooks. construct event with a signature and a endpoint secret now this specific endpoint secret is going to be stripe. webhook secret and it's also going to come from process. n. stripe webbook secret we have not created that here but we will and let's also add a exclamation here as well now we have the event so we could basically create a simple switch event type because remember we only want to listen to checkout session completed as well as subscription deleted so we can say okay if it's event type is this and let's add a case of checkout session completed then only do whatever so we can just add add checkout session completed with event data object and logging that specific event and we also need a default case so let's just add unhand handled event type and and that's it now now here we have the next J response. Json we can basically say status is 400 and error could be invalid signature or whatever error we get as well we could just forward that too so so we can just pass the error here as well so that we know exactly what's going on if something were to go wrong and overall towards the end we could remove the message and the status can be just success 100 now we need to make sure we do have a return type otherwise this specific API request will never end so we definitely need to pass this next response. Json as status success as well and the error could be failed to trigger webook all righty so now and we can log the error as well all right so now let's it's time for us to test it out the fact that we have added so many different elements here so in order for us to test it and in order for us to give it this A endpoint URL we going to use an app called as local tunnel this allows you to make a port accessible to anyone on the internet so you need to make sure you install this so if you have head over to our terminal I'm going to open up a new tab and install this if you haven't already and this hyphen G is in fact Global which means it's going to add it globally now we have our API running on Local Host 3000 so we need to expose that through local tunnel and the way you could do that is by copying this and pasting it here so all we need to do is 3,000 is where our app is running so expose that via local tunel the minute we hit enter now it's given us a very cool API spotty bread Scamp and this means our app will be accessible here now if you want to test it out you can go to here and this way it tells us okay you're about to visit this app this website is served for free VI via local tunnel to access the website please enter the password below so you can just copy this and to get this specific tunnel password it literally says it right here you just need to head over to this specific link so when you go there it gives you this code you can simply enter that code here and click submit the minute you do that now your Local Host is in fact go back to home because that specific route does not exist and now sare is in fact available on this specific URL so that's very simple ble to expose your Local Host like that now that we have this we just need to go to stripe enter this information but this is going to be the URL where your web Hook is going to get triggered so it's going to be/ API SL payments for us and you can add any description if you want I'm going to leave it blank and in terms of the events on your account let's just select the events and this is where you want to select the events such as checkout. session. completed and subscription deleted deleted customer subscription deleted now if you see these are all the different event are like a bajillion events you can select all of them and you can already see how on the right hand side the code has changed to listen to that in the in the switch statement we don't need to do that we just need to do checkout. session. completed so we need the code we have the code here and also customer. subscription. deleted which is also the code that got updated here let's add the event and add the endpoint now this specific endpoint is going to listen to webook and stripe is going to trigger the events to this specific endpoint so for instance if you go back to the diagram anytime checkout is completed or customer is deleted or any type of stripe events stripe is going to notify to this specific endpoint like/ API payments that we just configured as long as the secret key and the web hook secret matches so so time to set that up to set get the web hook secret we need to hit reveal and copy this now do not get confused with this specific ID there's a reason why this is not called a secret and this is but in fact it can be very confusing I have definitely made that mistake before but I have but I assume that this is in fact the secret but it isn't signing secret is the secret so if we go back to our code let's just go to n.l file and here we can see stripe and now let's just paste the secret so we can just say stripe web hook secret is going to be this and then we also need a stripe secret key which we can get again if you go here and search look for API keys this secret keyy is in fact the secret key that we need for stripe so here let's just go back to that nend local file and get the secret key and just to confirm we have the stripe secret key in the web hook secret stripe web hook secret and secret key which is exactly what we want I'm going to change the order just for me to remember and in order for us to organize this code in our head as well we have the stripe secret key and then the webbook secrets so make sequencing it in environment local file also makes sense all right so now we have this so what we could do is we need to trigger the event that is we need to trigger customer has purchased or customer has cancelled event so let's add another event here that says case customer do subscription. deleted and it can be literally the same code here where we say okay this is the this is the code for it now just to make sure we can add customer session deleted completed and here customer subscription deleted so first let's just trigger this event and then the other one so if you go back to stripe and if you remember the payment link let's just go to the $19 one payment link and open it up in a new tab oops open it up in a new tab now this is a checkout experience for it so here we could essentially just generate a promo code so that we don't have to actually pay for it but remember this is in test mode so what we could do is just enter a test card so anytime you enter 4242 it's in fact the global test card so we can enter whatever values we want as long as they are after the date and it's not yesterday's date because it's expired and do whatever you want just going to enter the details and now that we have done this if everything works as expected and we have done what's needed then let's go ahead and sub hit subscribe if I hit subscribe let's go back back here it's processing and thanks for subscribing has been triggered and now you can see that we do have a code uh a log here that says checkout session has been completed with the object event object that we wanted now if we try to look for specific details about our event then we could do that as well in here so you can see my email and name that I entered is in fact here so it is it was in fact my record so if everything works as expected if we go to web Hook from this search click on this and refresh the page you can see now that checkout session completed was in fact triggered and is in fact visible here as well so congratulations that's awesome that we have been able to do that now there's one more event that we are listening to which is customer subscription deleted so if you go to customers and select the customer this is where in payments we don't have that option over here we could just hit cancel subscription and we can then choose when we want the subscription to cancel end of the period immediately let's just say immediately no refund and then hit cancel subscription the minute we do that if you go back to web Hook from here go back here and refresh the page refresh is very important customer subscription deleted did get triggered with this object so that's awesome and if we go back to our terminal and go down then we should also see customer subscription deleted there we go we see our log here with the event object that means our stripe web Hook is working really well and this is what I mean that if you were to do it not through actually going through the account and successfully checking out but let's say if you were to select the option for or testing in a local environment by doing something like this triggering checkout. payment. succeeded or checkout a session completed would mean that a lot of these values would actually be empty so if you were dependent on them in the rest of the code and that's how you're testing it it won't be reliable so you won't know what's truth and what's not like if you if you have made a mistake or if it's actually supposed to be null because it's a test environment so doing this way is the right way I think it really helps you get the actual data and you are able to replicate production which is how I would like to write my code so this is really awesome now the next step is let's focus on the checkout session completed and perform these operations but so far if we were to keep track of it we have done this let's use a sticky marker we have done this this this we're listening to all the events and now it's time to focus on this value so let's do that so if we go back to our API code right now we just log the session object itself which is very handy for us but let's just also try to retrieve information based on the object we do get as well so here what we need to do I'm going to say session is going to be and this is this can be ID cuz we just need ID from it so we can just say session ID we want to from stripe get the checkout session information and the only way to do that is to basically get the information from based on the ID based on the session ID and additionally what we need is we need to call this property and call line items from it we could essentially what and again let's remove this we don't need it so ESS what we're doing here is we are trying to retrieve more information about the session so that we could get information about the customers as well and then insert it cuz if you take a look at our terminal there's no information necessarily about the customer itself or even the price ID as well as much so we need to get information for that so if we go to lib let's create a new file here and call it payments and this is where we can store all the payment information so first let's just call this a handle checkout session completed with session and this is where we can call it and pass the session in as well so here we can just call the session and let's just add brackets around it and import it from lip / payments now if we go back to handle checkout session let's turn this into a curly brace and add the session value as well in this session the type of the session is going to be stripe Dot and let's import stripe. checkout. session so the first thing we need to do here is get the get a bunch of information about the customer and so on but before we do that I want us to focus on create what we need to create the user so first first we need to create a user in our database update the user and then create a new record in payments so let's focus on that so over here let's just create a user so we can say create or update user and based on that we can retrieve information about stripe and then we can add a TR catch block here which says error creating or updating the user and here we could just get the information but before we do that let's just get the SQL database information as well so data session or I think we call it DB session DB connection there we go and now we can add write the query here which is going to be await SQL query and we don't need to select anything first let's just see what we need to do here so first we need to select from users and check if this user exists or not so we can say select star from user users where email equal to session not email or or we need email here so let's just assign it as a constant we don't know where this email is going to come from for now then if the user does not exist then only add it so we can say okay if its length is zero then insert the user and here we can essentially just inserted so we can say insert into users and if we were to search for that in our codebase let's see if we do that at all no this is the first time that we're inserting the user so let's just insert that so we need email full name and if we go to schema.sql file we just need all of this we need email we need full name because these two values are going to be created automatically so we need email full name customer ID price ID and by default it's going to be inactive so we need to set the status to be active there we go so we need email full name customer ID price ID status and save that so we just need all of this information about the customer so just full name customer ID price ID and so on and if we take a look we did get some of that information here already which is we did get email we did get name which is the full name itself we need customer ID that we need to retrieve too so let's see where we can get all of that so we could just pass all that information in the parameter here directly and get that information directly as well so our code for creating the user is done it's completed so we are saying if it's only if the user does not exist is when we want to create the user in handle checkout session completed let's call it so we can get the customer information from session itself so we can pass that as string whoops we can say it's a string we can get the customer or I guess this is the customer ID but we can get the customer information by making another call which is going to be stripe dot customers. retrieve customer ID and this stripe value is something we need to take in and pass in directly because we create stri stripe in a different location we create stripe here as an instance so we need to pass that in all right so now we are going to get the customer information and we also need to get the price ID and price ID is available in session doline items data0 price. price ID and then we can pretty much just create or update user and pass that information there we go now when it comes comes to customer. email or customer. string or name just destructure those values from customer and pass those in here there we go we don't need to cast it we can just pass it in directly there it is and here we can just say if there is email in customer and there is price ID then only do all of this cast email and name a string all right so now we are getting all the information from the session from stripe we're getting the customer information and now we're inserting all of that and the status is in fact active which is something we also pass it in as well over here so if the user has successfully paid then we should see a record of them in the database but on top of that not only we need to create the user in the database but we also need to update the user's table to set the price ID as well we already set the price ID here but we need to check if price ID does get set sometimes I've noticed with stripe apis you need to do another call to set the price ID cuz the first time it's not going to work so we have to keep an eye on this one so in our diagram let's keep this on hold and next we need to just create a new payment that is insert payment in the database so again we can say insert payment or just create payment and we can pass in session value if you want just see what exactly we want here so we have payment information and let's add a TR cat block here as well and now we need to basically just insert into payments now if we go back to schema.sql we have all of this information we need to insert amount we need to insert status stripe payment ID price ID user email and so on so let's just do that now so we can just say await SQL insert into payments and all of this information now again all of this information does come from session so let's just pass session in here is going to be that we don't need to pass and stripe just the session and now let's just destructure all of this information from the session now instead of amount it's going to be amount total just say amount total we also need status here so let's add that too so we have the amount as amount total we have the status as status and then for instead of strip payment ID it needs to be ID then we also need to get the price ID which we already do so let's just pass that in here cuz we already have the stripe ID and we also have the user email as well so we need to pass that into there we go so now let's just go ahead and insert it so now that we have successfully created it now we need to create the payment which is just this session price ID and email so if we go down here we are retrieving all of this information now keep this in mind we're trying to get the database Connection in this function and in this function when really we can just take it in one session itself so let's pass that into so we can copy this and get the database connection here and we can also pass that in directly as well in the functions so we don't need to pass again try to retrieve a new database connection every single time can just say any here there we go so now we have passed in the SQL database connection and that's what we getting in both the spots as well perfect so now if everything works as expected then we have successfully created the user only if the user doesn't exist and we have also created the payment as well so let's just go ahead and try it out so if we go back to stripe let's close this go to customers this specific customer we could just delete it so we could reuse this customer again deleting your customer and it has the delete has been successful now let's go back to payment link go to this one the $19 One open it up in a new tab and check it out or just to a check out so me@ kobe.com again 424242 this one really doesn't matter enter whatever values you want and now just hit subscribe the minute we do that let's see what we get we have some logs here so checkout has been completed successfully and if everything works as expected if we head to users we do see me@ kobe.com which was created successfully with customer ID price ID status being active and it also has a reference to payments so it has successfully created the payments as well in the payments table which is 1900 amount status is complete and so on so we have been able to successfully insert our user create our user up the price ID and also create payments so we don't necessarily need to add a separate function for updating the price ID but I just want to throw it out there that if you notice that price ID is not being set consistently this is something you need to do as well all right so now let's move on to the next section which is the customer. subscription. deleted so if you go back here this part is also done as well so now let's focus on this one which is to once the customer subscription has been deleted we could update the table and since we already have a customer this one is going to be easy for us if you go to customers we have this so we just need to enter in here press the three dots and cancel the subscription so for that let's just go back to our code and update the value so if we go back to Route and let's just update the value here so we can keep the log here in fact that's fine but again we need a subscription we need a session ID so let's copy this and let's paste it over here we can move session ID directly on top and it says we cannot redeclare block so variable so we can just say deleted session ID for instance because the ID might in fact be different it might not be the same so let's just call it session ID deleted and we have to call another function just like we did earlier handle subscription deleted and we can pass in not SQL but in fact stripe so we need to pass in the ID which is the subscription ID so this let's just call this subscription ID and pass it in there we go so now we just have to create a new function here for that so let's close all of this and now let's just create a new function called deleted with all the information here all righty so now when it comes to deletion we need to add another TR catch block here whoops which is just going to log the error if it doesn't if it's unable to delete the subscription successfully and also throw the error as well all right so now again if you want to retrieve specific information based on the ID just like how we did here we Tred to retrieve the customers similarly we need retrieve the subscription as well so we can say subscription equals exactly this retrieve the subscription let's also try to get a database connection here for instance and this time we want to update the user so we can say whoops we can basically say update users table you want to set the status to cancelled where customer ID equals subscription ID or over here let's just say subscription do customer so if you go back to our diagram the status is in fact cancel with updating the users table like that so that's it that's all we need to do here so let's just go ahead and check it out let's import this as well so if everything works as expected then we should see custo subscription has been successfully deleted and if we want to add logs as well we could also do that such as something like this because if there's an error here it will actually be caught in the catch block so we could successfully just enter a log here all righty so now if we go back to our stripe dashboard let's refresh the page one more time just in case and this time let's just hit cancel subscription and let's just say immediately now the minute we do that we do see the log customer subscription deleted which is the log that we added I guess here so let's see if there are any errors and subscription cancelled successfully which is exactly what we have here so if we go back to our neon DB table and this is active if I refresh the page it's in fact cancelled so sub subscription is cancelled for this specific user which is exactly what we're looking for the stripe implementation is pretty much done we have been also able to work on updating the users table so now we can basically focus on displaying the UI () based on the pl users plans if they have active subscriptions or not then accordingly show a UI that set asks them to check out and pay and get a plan so they can continue their uploads we could set limits based on the plan such as allowing F uploads for basic plan but unlimited uploads for Pro Plan at the same time more importantly we could also just go ahead and update the links cuz right now buy now doesn't take you to anywhere so we also need to do that and lastly also change this from Pro to say buy a plan if they don't have a plan Pro and basic plans and so on as well so let's do all of that right now so first let's go ahead and tweak the URLs here these would be essentially two payment links which we already have so if we go back to payment links let's copy the one for 19 and then we also have to come back for basic as well so if you go to page we have the pricing section this is where we have the pricing card and pricing card essentially renders everything from basic and pro plans array so here we can just say if process. n. noden is equal to development then show something also show something else so for basic plan that's going to be the case same thing for Pro Plan as well so by default we want to always default to production so this the URL for the payment link is going to be different for production but for development this is going to be the URL similarly if we go to basic plan copy this now keep in mind you don't have to set node n to be production in production environment you only need to set node n equal to development in development environment so at n. local you want to make sure you have this value node n equals development so that this specific environment becomes development environment and this is what it always defaults to but if it this value it is not exists then it's obviously going to default to the production URL so now if you go back to home and if I hit byy now or let's just refresh the page byy now we have been redirected to buy now which is basically the payment link for basic and if I go back to buy now for pro then we see Pro Plan as well which is exactly what we want so this works but at the same time we also need to get one more value which is the price ID now we already know the price ID as well so if you take a look at product catalog and if you go to these two different plans each one of them has a price ID so if you go click on this and copy price ID that's the basic plan price ID so if we go back here and let's just paste this but similarly the price ID will be different for production as well as for as well as for development so we have to tweak that similarly let's copy this and paste it for pro as well let's change this to Pro now this specific object is going to be the one responsible for letting us must know okay what are the different IDs payment links plants items and so on so definitely something we will need to keep an eye but because this specific object is in fact in here and maybe other files might need access to it let's move it out let's go to utils and create a file called as constants dots and this is where we could just move this specific file entirely copy it paste it and now let's just export it as well export it and now similarly let's just import plants here but obviously plant is very vague so let's just call this pricing plans and whenever pricing plans now let's just call this pricing plans as well and now let's import pricing plans and plans don't exist anymore so let's just remove that so pricing Lans work as expected and constants and it has been moved to constants as well but this specific line process. n equals development is something we don't want there so again in utils let's create a new file and let's just call this helpers dots and this is where we could just create a function called called as is Dev this will just tell us that hey if this specific function if this specific constant if the specific environment is development or not so again is dev then do that same thing here too we don't need any of this we don't need any of this it can just be is Dev and oops is Dev there we go so now we have made it a lot better as well wherein we have essentially extracted it functions too so we could use is Dev somewhere else too if we like wherever you're using that for example in in layout if we need to use it to tweak the canonical URL in the future for SEO reasons then we could do that too and using the is Dev function okay so now we have the IDS for basic and Pro Plan so we could tweak this value too so right now we show buy a plan or Pro Plan or basic plan based on the price ID so let's just do that so if we go to layout and in layout we have the header component and right now we have hardcoded the pro values so let's just tweak that and call this plan badge this component does not exist but we're going to create a new one here so let's just create that in common and call this plan patch. DSX we can just return Pro for now and just import it here now if we take a look at plan badge right now it says it's maps to a Pro account but what we need is to check what is the priz ID for it what is the prize ID for it and accordingly get that so and accordingly get that so for that let's just try to get the users plan and then tweak it so we need to just get the SQL statement for the plan so inside of lib we have the we don't have any user yet so let's just say user. DS and here we can just export a new function that says get users plan and let's remove this and based on the email we're going to get the users plan itself so for instance we're going to say s SQL equal await get DB connection and here we're going to write a query that says SQL is going to be select price _ ID from users where email equals email which comes from the parameter and also we need to make sure that the status is also active because if the status is not active if it's cancelled then we want to tell them to buy a plan so now we can just return query dot 0 dot price ID or we can say it's going to return n and this needs to also be a wait there we go so now we are we have going to get the user plan from there so we can say email to get the email we need to get it from the user so for that we need to contact Clerk and say okay give me the user please so we can say current user and this needs to be a async component for that and if user is not there then return null or let's just say user. ID is not there return null but if it is there then get the email from it so we can say email is this value which again we have it we know this value this code has been repeated it quite a bit so we can definitely extract it out too again add a question mark everywhere so that we can always default to it okay so if there is an email then only let's try to get the plan here and this can simply be email now let's try to import email here and that's where the plan comes in play so now if you notice one thing here we are getting the price ID and not necessarily the email plan so let's just call that let get price ID so we can set get price ID similarly price ID here and get price ID here as well so price ID has been assigned but obviously we need to access price idid outside so let's just assign price ID to be string or null and price ID set the price ID to be get price ID and let's create a plan name here which by default is going to be buy a plan but if there is a priz ID then we're going to set it so we can just get the plan and this is where pricing plans is going to come in play where we're going to try to find the pricing plans and if you remember pricing plans is is just this and we have the priz ID here so we can just try to retrieve it so we can say okay plan if plan. price ID equals price ID then that's correct this is the plan I have and if there is a plan then I can access plan. plan name because again in pricing plans we already have a name so we could just retrieve that and return it there we go and the plan name could be just this so now if we go back to our app you should see buy a plan which is exactly what we want and that's because the price ID doesn't match or the account is cancelled because we say only give me the price ID for active accounts so in fact we can even tweak that to say for active this way we are even more specific with our function name what to call it all right so now let's try to design this application so first of all we're going to use the badge component from shat CN UI to handle this and like I always tweak it let's just do add components here and the badge component will have a variant of outline and a class name as well now let's use the CN utility to merge a bunch of styles but along with the badge we also need a crown icon from Lucid react and which is also we are going to merge it because based on the plan itself you want to tweak the colors tweak The Styling a bit so we can say W3 H3 mr1 and then by default it's going to be text Amber 600 but if there is for some reason no priz ID then in that case we are going to say text red 600 there we go and close this if we go back here it's bu a plan and again we don't need to keep switching it we also have it here so we can just go to Local Host 3000 and see the values here too so we have buy the plan right here which is what we want so by default we going to give it margin left two and then give it a nice BG gradient which is which is going to be a very light gradient 100 to Amber 200 border Amber 300 by default it's going to be hidden but we only want to show this on desktop cuz there's not a lot of room to show it in in Mobile for instance so if I were to expand this you should see it but if I Collapse it you shouldn't so we can keep it here so we can still see it and this is where we want to say okay if there is no priz ID then we want to give it a nice gradient too so two red 200 with border red 300 there we go so this is what we want buy a plan and cuz I don't have a plan it's in fact inactive and we could go all the way to saying that hey renew a plan for instance if they already have cancelled a plan and they already had a plan before but for now we can just keep it simple and say buy a plan but these are just some ideas I want to share with you so you could tweak your SAS the way you like as well and the different use cases that you might get into now there are so many specific things you could do do for your own SAS based on your liking your experience but this is what I'm going to go for so we have buy a plan here and now if I and now if we just simply go to stripe and let's just get rid of this customer Al together delete customer delete and let's say we go to go here and delete everything so we don't want any records whatsoever so let's just go to payments and delete the records similarly PDF summaries let's delete all of them users let's delete all of them now customers as well if I refresh the page customer has been deleted if I go to transactions these two let's just I guess we can keep it here doesn't matter because the customer itself has been permanently deleted so we should be fine too all right so now we have the customers here so what we can do is we can just try to make a brand new record so if I refresh the page I should see still see BU a plan if we go to your summaries we see this which we can tweak as well so let's do that before we actually make a purchase as well so if you go back to home let's just try to make a call here so let's do unlimited uploads or in fact let's just do limited one so let's do the basic plan this time and let's just use the same same email address I'm using to log in so it's my email address here this way we can match it all up email address again 42 42 42 there we go 0925 1 2 3 my name the oops Cameroon and I'm going to hit subscribe and the minute we do that we should see a new record in the database the minute it's process so now if you refresh the page we do have my account here with status as active no PDF summaries with the payment as well so now if we refresh not here sorry we go back to home and now we see a basic plan which is what we want because we bought a basic plan so if we go to your summaries obviously nothing happens because we haven't necessarily coded that but this is working this code of ours is working as expected so now we can go to your SU suies and only let the user upload a limit of five so if we go back to the code let's close this let's close all of this for instance and this time let's just go to logged in experiences summaries and not summar dashboard and Page over here and this time we can start limiting it as well so go let's go back to the user code and let's create a new function here and let's call this function has reached a upload limit for instance so you can say has reached upload limit again based on the user ID and we can try to get the upload count first so first we need to get the upload count which should tell us okay how many uploads has the specific user completed if they have reached five then obviously we want to show the message accordingly so we can just call this new function that we going to create that says get upload count and pass in the user ID now upload count will come in fact from the summaries table cuz if we go back here this is will tell us how many records the specific user has by user ID so we could go to lib and go to summaries and this is where we can just create the function get user upload count and let's try to add a try catch block here as we do and like it's it's autogenerating the code but we can see here already that this is going to be count of all from PDF summaries where user ID is that and let's just try to get it now we can just call this function here upload count from upload count and then we can say okay how many upload what should be the upload limit for instance now the upload limit is if it's a pro account then we have the upload limit of let's say 1,000 but if not we have the upload limit of five so for that we definitely need to check what type of plan does the user have so again we can say plan equals a get user plan and again based on the user ID itself we need that so let's create a function here that gives us that so we can say get user plan but we already have this here get priz ID from active user is that so we can just get price ID from active user and this is going to be the price ID and we can simply just try to filter it which is the code we already did in we already had here we try to find the plans based on it so we can copy this and paste it so we can import pricing plans here and plan. pricing ID is equal to price ID if that's the case then we need to get the ID and equ equate that to Pro and let's just rename that to Pro so for instance we can simply just pricing plans do0 do I just do pro now this is why I think it makes sense for this to be not an array that's fine all right so now is pro is what we want and if it's Pro then it's, or five now we can just return a few things so has it reached limit if upload count is greater than equal to the upload limit then yes it has reached and let's also return the upload limit as well this can be of type number and let's also return this here now we definitely get this error here that it cannot be applied which basically means that if we go here notice this we have made a mistake this needs to be as count and we can just return result and then result. count or let's just do result add a space here and now we can just directly access result. count or zero now the error is gone because the type was incorrect so always make sure that you're following typescript rules so now if we go back here and go to your summaries obviously nothing really happens here because we haven't fully integrated it but this is the function that we need to do so so now if we go back to dashboard and if you notice here we have this code which says upload limit this is where we can call it if it has reached limit and we already pass in the user ID which we do already have to and that's where we can tweak it now this we already already have the code here which says okay if based on the values based on the values we show this thing so let's just say if it has reached limit then only show this for instance obviously nothing's going to happen because it has not similarly only show this button if it has not reach the limit you only want to show the new summary button when there are still number of uploads left so we have now we can just go ahead and upload a bunch of them hit upload go back here close this again hit another file the bar menu hit upload again same thing in your summaries too let's close that upload it again let's select the first document hit upload there we go again re-enter the bar menu and enter one more time the bar menu this is the last document that we are uploading there it is so now if you go back to your summaries we see a message saying that you have reached the limit and we can no longer select the upload button either but if we go to slash upload we can still upload it so user can manually upload it so let's just lock that as well so let's just go to upload page and this is where we want to just run this Cod go to which says can make it a Sync has reached upload limit but we need the user ID so we can say user equals await get current user oops await current user and this current user comes from Clerk and if oops not user or if user ID if not user. ID then redirect to slash sign in and redirect is a function that is available from next navigation and nextjs but then let's just assign user is equal to user. ID and if the user has reached limit then redirect to/ dasboard just like that so we have all this code to and you can see it has literally been redirected as so if we go back to slash upload and we have redirected back to dashboard which is what we want Even if we click on upload again back to dashboard so that's exactly what we want here so we have locked our page here too your summaries has this Banner if you click to up upgrade to Pro we they can so this specific functionality is working as expected so now let's try to cancel the stripe plan we have the customers has refreshed the page once we cancel the plan let's go here and click on this cancel sub description immediately and now if we go back to home and refresh the page this does turn into buyer plan I've decided that I don't want the user to access my service at all so which is why we need to update this now they they can still view their existing documents and so on I really don't want that they have canceled the subscription only active people should be able to do that and for that we are going to create a UI which only is is available to us which only gets shown if the user does not have a plan and this is that page wherein we need to do something like this whenever the user doesn't have an active plan so in order for us so in order for us to implement that let's just close all of this now and now what we need to do is because we want this page to occur every single time whenever the user goes to any of the routes we could create a layout specifically for the logged in routes so anytime the user is logged in but does not have a active subscription they will see this specific message so if we go to logged in we can just create a new file and called this layout. DSX this file is will take in children which will be react children and we can just return the children so if I refresh the page still works as expected except that we could add in whatever we want so here again we can just get the user from clerk user so we can say current user and now if there is no user then obviously we want to just return redirect the user to sign in and let's whoops not from there from next navigation and let's convert this layout into async layout but let's say the user does not have subscription at all so no active subscription so we can say has active subscription equals false then we want to redirect them to a specific component so we can say if they don't have active subscription then we want to return a component called as upgrade required now this component does not exist but it will be inside of common so it will be and we have to create that inside common so we can say upgrade required and let's just import it now it just says upgrade required because obviously we have hardcoded the values and we have not necessarily updated that at all but this instead of false this is where we need to check so we can just call get subscription status and pass in the user there we go now get subscription ion status is something that does not exist yet it's not a function that exists so let's create that in user so here we can say get subscription status and if the user does have a active plan then they do have a then they do have a account for instance meaning if they do have a get price ID for and that status is active this means they do have an account for instance and that's exactly what we want on code here so we can say has subscription equals await get price ID for active user pass in user and this takes an email so we can pass in user do email addresses and this will be user in fact from clerk email addresses Z email address if that's the case then they do have an active subscription so we can just get the subscription status and pass the user in and this time if and if they don't have an active subscription then return it but we definitely have a made a mistake here we just getting the price ID from the active user but what we need if they actually have an active plan the query would be very similar but instead it would be we don't need to export it just to say do they have an active plan everything else is the same but we are going to check if it has price ID status from users where email is this active is this and we are also going to check if price ID is not null and this is where we're going to check if if there is query and query. length is greater than zero this means that they have an active plan so that's exactly what we need to twe here for instance and now if I refresh the page here and now let's just change this to has active plan and we definitely need to export this here and hit await and then we can pretty much pass in the email directly itself just like that and you can see upgrade required does come up here because they don't have an active plan the specific user so our code is working as expected so we definitely need to make sure that we create these simple utility functions so that things make a lot more sense all righty so now upgrade has is required so we can start updating the code here and let's just say this is going to be relative Minh 50 VH let's give this a BG gradient and so let's just give it a nice gradient here similar to how we have done in the past we ar rows 50 do white and now let's give it a class name of container with px8 py1 16 then let's also give it a div of flex Flex call Item Center justify Center Gap 8 text Center Max W to XL to restrict the width of it and Center it fully and this is where we need to give it another div with sparkles and also a text that says premium feature because we want to let them know that hey this is not something you can you can get easily if we go back here this is what we are trying to create subscription required with all these values so now let's just code this again and give it a flex item Center Gap two text rows 500 and then let's give it a span and then a width of six height of six and then the text should also have some styling which will be text small font medium uppercase this will make it all uppercase and tracking wider there we go you can see it's looking really nice now right underneath here let's give it an H1 that says subscription required there we have it we also need a p tag here which we can just copy there we go and towards the end we also need a button now I'm just going to give you the code for the button colors because it's pretty much the same paste it button can come from chat CN UI whoops link from next link Arrow right from Lucid react and so on nice let's fix the import here to be slash components so the button is looking very nice and now let's just tweak the border and all that too so for the H1 we're going to have text for XEL font bold tracking tight BG linear to R from Gray 900 and anytime you add a gradient text color or anything like that the design looks way better BG clip text and then text transparent so much better and this should be twoo gray there we go way better and now for the P tag we need this to have a text large and this is going to be the adding the Border as well leading eight text Gray 600 border two border rows 200 BG white 50 backrop blur SM it needs to be Xs and then border dashed with Max wxl there we go and now looking so much nicer way nicer so if you go back here it's very similar to what we have here except that the gradient is not getting applied so if you go back to gradient and see where else we have applied the BG gradient it's from Emeral from Rose so we can just copy this there we go looking way better all righty so now the subscription required code has also been implemented because the entire app is fully locked now because they don't have a plan and they need to upgrade or something like that otherwise they won't be able to access anything so that's really important for us now before we () get ready to deploy our application we are very close to wrapping it up the one last thing and that's probably going to add a lot of umph to your site is animations a lot of people ask me H how come my site looks so pretty how come a lot of the apps I build look really pretty and yes design plays a huge role but also so do animations animation really adds a beautiful last touch that really attracts a lot of users and it also helps you build trust with your users because it shows that you truly care and you have put in the extra work for it so for instance if we refresh sare you can see how beautiful everything is as you go from top to bottom so that's exactly what we going to start adding and not only there but also in a bunch of different applications too so right now you can see how all the transitions are being shown onto the page as we navigate to it that's exactly what we would be adding we would be adding animations to the entire application so for that we'll be using a library called as framer motion now framer motion is quite popular but recently framer motion is no longer part of framer which is why now it's individual it's on its own it's called motion it's a modern animation library for JavaScript and react and we just going to copy it and if you click on quick start it will show you exactly how to create it so if you click on react you can see exactly what we need to do to install call it and then to use it and that's exactly what we're going to do now now in order to add animations or motions to anything in our project we just need to change the div to motion. div or the specific element to be motion dot that element and you can then use the animate property and a few other properties that I'm going to show you to animate it so first let's just go ahead and add motion to it so we're just going to go here and then let's add nbm install motion motion has been successfully added and then we are going to create a file called as motion wrapper this is going to go inside let's shrink everything and go to components and common it's in fact going to go in common now what is this file going to have it's going to be a client component and this is going to have motion from framer motion but this is what a lot of applications are going to do they are going to tell you to install from Premier motion and you simply need to change the import to motion / react and then all you need to do is export const motion Dev equals motion. now why are we extracting it to be like this because let's say we go to app folder go to page and let's say we want to add motion to Hero section which we are going to do as well when we add motion this is in fact a server component because it doesn't have any use client directive it doesn't need the browser at all so this can be shipped as a server component but the minute you add motion from frameware motion then motion from the package motion then all of a sudden you have to make this component a client component which we don't really want to do so a pattern that you can totally avoid from ship making something a client component and having your animations be the reason for it you can use this pattern where you add a use client director and only export the element itself which adds the animation and rest everything can stay the same that's exactly what we're going to do here we're going to add animation to our hero section and then accordingly handle it and we not only going to add motion to motion. we're also going to add motion to anything that needs motion any of the elements so it will be motion. section we also going to add motion to H1 H2 H3 like all these elements need motion and we're going to add to all of them let's just keep it as is and add add more as we need it we definitely need it for span as well so we're going to add motion to span two I've seen often that a lot of people would still wrap motion div around even P or span elements you don't need to make it a div every single time you could just add motion to motion. P this will just it will just work all right so now if we go to Hero section let's change this to motion section wrapper so we can copy this and paste it similarly close it with this as well let's import that from common motion wrapper now let's go go to home oops let's just refresh this page nothing is really going to happen it now just has the capabilities of adding motion so we are going to add a few variants to it and these variants are going to be pretty standard and common in a lot of places so let's just go to utils constants and let's add more constants here so we're going to have container variants equals and these are the properties so first you're going to have it as hidden so we want it to be hidden opacity of zero then as it becomes visible we want opacity to be one and we also want to add a transition element which is going to be stagger children of 0.2 And Delay children of 0.1 again feel free to play around with these properties so you know exactly what to create now we're going to add variants to be container variants here just like like that the minute we add that again let's import it from utils initial we want it to be hidden and animate we want it to be visible so there are the properties we need the minute I do that you can see how it has added that already where it has basically just added a transition here which is what we want now let's also add it to the individual items too so we want it to be motion div but this time we want another value here and let's just wrap this up with motion div 2 we want another value and this time it's going to be an item variant so let's just make add animation to It Again by default we want hidden but then y20 when it becomes visible we want it to be opacity of one and we want it to transition it's going to be very simple like very standard of spring and transition can be a lot of different properties you can definitely check the doc damping to be 15 and you can stiffness and this needs a comma here to be 50 and set the duration to be however fast or slow you want I'm going to set it to be 0.8 now if you hover over all these properties or if you just go to the documentation you will be able to see how you could tweak it further so item variance now if I refresh the page you can see how you are able to simp simply just animated now same thing for H1 we need it to be motion div with variant equal item variant same oh and this should be H1 same thing for here motion H1 just close it and now you can see how it displays it very slowly and that's the animation we want same thing for H2 as well H2 and H2 closing two too and now you can see again same thing but when it come all comes together is when it looks really cool now when it comes to button variance we want a very different animation so let's just create a button variance and in this case let's scale it to be 1.05 transition to be type of spring stiffness to be 300 damping to be 10 and so on now when it comes to button variance this is what we want to do we want to add a motion div same thing here close it with motion div and then for variance we want to add item variants but for on Hover we want it to be button variance so now if I refresh the page you can see that it has that nice animation as well so we added it to here same thing for H2 let's add item variance here too so now you can see how it displays it one by one similarly the span should also be converted to motion span and you don't need to pass in any item variants but you can definitely pass in the button variance on Hover so now you can see how beautiful the animations are looking we could do the same for all the other sections as well if we we go to page the homepage and go to the demo section we can pretty much just repeat what we did for all the other sections so for here we can just pass in motion H3 motion H3 and The Styling for that could be a little bit different or I guess the animations y would be 20 opacity zero so you can refresh the page and you can see it has already disappeared so we want to show something like viin view we want it to be opacity one so now you can see while in view opacity becomes one but then we this is where we add the transition of 0.5 and you can see how it comes from bottom to the top so feel free to play around with animations just to see what you exactly want now for summary viewer similarly let's add a motion Dev Dr it up again same saying in what do you want the initial value to be opacity of zero then what do you want while in view opacity one and then what do you want the transition to be transition would be duration 0.5 there we go so this is what you want so you can see already how the styles are looking so much nicer now speaking of this if we go to summ summary view as well we want some sort of motion here too for the elements for example the individual elements so for that we're going to add in make this div a motion div there we go and change the import and for this specific div the key will be current section but again initial will be opacity of zero and while in view one transition of 0 point maybe two and let's add a EAS duration to and then on exit is also an animation we can add to be opacity of zero if I go to the right we need to set the minwidth here too but and that's it let's add it to the individual content section so that it displays it one by one so over here we can have motion div and then variance will be container variance this will be motion div as a wrapper and then the key could be points. join initially we wanted to hide but then while in view we want it to be visible or animate will be visible and then exit is just going to be exit so now if I refresh the page you can sort of see some animation but not a lot so let's also add animation to the Emoji Point as well as well as the regular point so for the Emoji Point again let's just make it a motion div with motion Dev and this is where you want to add the variance of item variance again you want to show them show them one by one there we go this could be that and then if I now you can see how it's displaying one by one which is what we want it has this nice animation similarly same thing motion Dev motion Dev and item variance which is why we created the object for it so we know once we happy with one type of motion we could just apply it in a lot of different places which so it looks really good all right so let's also fix the width because depending on the content it's shrinking more so for example right now if you were to take a look at the demo section itself and the structure we are pretty much closing this div over here which is the problem and these two items could be Flex call but like this has its own container so let's keep it out and now you can see it's all there it's looking really nice with all the animations as well so now we can focus on adding animations to the next section so if you go back to page we have added animations to demo section now let's add it to how it works now for how it works we can add it to H2 which will be motion H2 same thing for H3 as well let's add H3 as well let's remove the variance from here for now and going back here there's no animation yet we just added motion so it's going to be a little bit different so let's say opacity is zero Y is 20 while in while in view opacity is one y is zero and then transition is simply 0.5 and there's no need for ease in this one and let's see how that looks you can see how it looks really beautiful same thing for the bottom one too we add the exact same thing and over here let's add a delay of 0.2 so now you can see how it looks really nice first we show this title and then we basically show the transform any PDF so that's why we add the delay there okay so now we could also add a nice motion to to the actual steps as well so we can say motion div close this and for this one we want the motion div items to show up one by one so if you refresh the page you can see how it comes from bottom to the top one by one so I think we need to basically use the index property to delay it further so in that case let's copy initial while View and opacity and transition the first two can be the same because that's exactly what we want or I guess guess the Y could be a bit more but V and view could be the same but when it comes to transition we need to add a delay and for that we can use idx which is the index and say 0.2 so when idx is zero it will be still zero but idx is 1 it will be 1 into 0.2 which is 0.2 then 2 into 0.2 and so on so this will again give it that nice effect that we're looking for for but then also add the same effect for this one as well which is the right icon again we can copy all of this pretty much and paste it here but instead in this case we don't need to move the arrow at all we can just say opacity and for that we don't even need to change the Y values at all we could just change the opacity and add a delay and in this one we can just add a delay of .3 so this way you're saying okay the once the first one shows up then add the second one and so on so you can see how it displays it 1 by one very nice you can see how by structuring it a bit differently and extracting constants for item Varian container variance and so on it's already looking very nice similarly let's just copy this completely now there is this animation for button variance which is in the hero section that is also something that we using but we haven't necessarily extracted it out because we're not using it as much as the other ones so if you take a look at this it's very standard so we can leave it as is now let's look at the pricing section if you take a look at the pricing section we want it to come from the left hand side so it's no longer from bottom to top it's literally the x value that we need to tweak so let's tweak that so if we go to the pricing section let's add a motion section here just like we did earlier and then for variance let's just add container variance import and then again initial will be hidden while in view visible while in view Port is when you want to animated otherwise margin would be 00 PX now this could be motion div and variant would be item variance there we go now for the pricing card itself we are going to have motion div let's change this to motion div as well but in terms of variance we're going to have a different type which we're going to have a list variant because we want it to be displayed as a list so let's just create a constant here and let's just save list variant and this is where I was talking about where for the list variant we want X values to be tweaked so it will be minus 20 because we want wanted the item to come from left to right and for Visible this could be X zero and then transition is going to be type spring damping 20 stiffness is going to be 100 so if you go back to the pricing card that would be the list variance for the pricing card and then we're going to have while hover let's scale it to [Music] be2 and same thing for this div as well with variant to be list variant and then add motion div literally the same thing for this div two same thing here as well and same thing for this item too so now you can see how it's basically displaying very beautifully it's just going to render same thing for this card too all righty so now our landing page is looking very nice so if you were to full screen it you can see how beautiful it is something happened here we got to fix it so landing page is looking very nice so if we Center it or if we how it's very very looking very cool as well if you take a look at this it looks very nice except we need to fix this to be centered so let's do that so if we go back to demo section let's just remove this completely and now you can see how beautiful it's looking and now you can see it's going to show up step by step but if we go to mobile view or desktop view it's actually looking very nice now we could do the same for the other elements as well now now that the animation for the homepage is ready to go so for the dashboard page which is your summaries page we're going to inverse the logic so that we could see the upload page essentially if we go back to logged in layout I'm just going to say the opposite and now we can see the layout already we need definitely tweak it so let's just say too over here remove this okay so now if you go back to dashboard and Page this is where we could tweak it to add the motion necessary so here we can say motion H1 and variance is going to be I item variance and same idea initial is going to be hidden but then while in view is visible and we don't need to do the viewport thing same thing for the others twoo for this one it's going to be motion P variance will be item variance but we also going to have initial Hidden volin View visible or let's just say animate visible now if I refresh the page you already see the animations coming coming in effect same thing for here as well for the button let's add a motion div variance is item variance motion div here too so this will be while hover is going to be scale 1.05 and let's also give it a class of self start all right and we can just pretty much copy this exact same thing for this as as well and I give it a motion div here as well now if I refresh the page you can see it already so now it's time to add it to the card so that it also nicely animates it too for summary card again I'm just going to paste the same thing that we copy pasted earlier but then over here I'm just going to say while hover will be scale 1.02 transition duration 0.2 and ease ease out there we go now let's import it import it copy save it and import item variants all right so now if I refresh it's still has that nice animation as we want all right now same thing here if you click on the individual page you can see how it comes from the bottom to the top we have to do the same as well to summar page for instance add a beautiful animation there as well so here again same thing motion div to be motion Dev same idea initial is opacity is zero y 20 animate equals opacity of 1 y 0 and then transition equals duration of 0.5 there we go this is not our you can see it does come up like that and we can copy this exact same thing again for a div to be added here as well so here oops this can again be converted in motion div motion div copy paste it again over here too and let's make sure to close this div right after this one so now if we refresh the page you can see how beautiful it's looking and this one will already be animated because we already worked on the animation of it so this one is also looking pretty good now one last thing we have is the upload page animation so if we go back here to upload page again let's just add a knot here and let's go to upload and let's add a beautiful animation to the upload page as well so let's give it a motion div and this time the variance is going to be container variance hidden visible and if we refresh the page let's go to upload header and in upload header we pretty much going to add item variance to everything so again motion Dev motion div and variance equals item variance copy this paste this exact same here this can be motion Dev as well same thing here to motion Dev with motion Dev again there's no need for hidden or anything like that just simply item reads so now you can see it's already showing the animation for header so let's do the same for the form now in upload form let's do the same thing except we're also going to add another element here in the upload form input and right underneath that we are also going to just add a processing empty element so you can see right right here the minute it's in loading we're going to add that and also add a mid section here for upload title there we go so it matches to the design we have here and going back to the summer page when we refresh the page in here there's this really nice animation that goes from the bottom to the top but this one is just sort of like abrupt so let's just fix that as well for that let's add a motion div to this element two we're going to close everything and add motion div here but and then also add initial opacity 0 y20 animated and transition so now when I refresh the page it does come from the bottom to the top which is what we want which is very similar to what we have here so our animation for the summar page is also looking very nice so our app overall if I refresh the page you can see how beautiful it's looking if we were to try somewhere it takes us to pricing we can also go to upload a PDF then we we can go to summaries and look at individual items as well if we were to click on delete and then be also able to delete that specific item so if I were to delete this additional one it's gone and new summary button is back as well but and when you click on this specific item then individual elements display for instance and if we hit upload we get redirected back to dashboard because of the logic we had so since we deleted an item we could just remove the Todo that we had in our code base to remove this because we need the opposite of that so let's do that and now if I hit upload it I refresh the page we go to your summaries we also see this nice subscription required message as well doesn't matter where we go we pretty much see the same message which is the layout taking over so now again if I add to do remove this and enable it again and refresh the page and also go back to upload page and change it there as well we see the upload page back which is what we want so let's just say too remove this as well to test it out but overall our application is looking very very beautiful which is what we want whenever we try to upload a PDF for instance if we go to our app () upload a PDF and this is where let's say we press the menu we show this empty skeleton component of the summary viewer and also when we go back to summaries and if we refresh the page we also will sometimes see a empty skeleton here too so we need to generate the empty States for our app this way the user has something to see if our application is slow now as developers as SAS creators we may not see that because we are usually typically on the latest laptop the greatest Wi-Fi unfortunately that's not the case for a lot of folks so we need to fix that so here again commenting this code out completely and commenting this code out as well so that we don't keep running into issues there let's refresh the page here let's first add the upload a PDF view so let's just go to upload and let's go to upload form and this is where we could proceed to adding it now we already added the loading State and we say processing here so let's also add a loading skeleton towards the end and this specific loading skeleton does not exist yet so we can fix that so let's say loading skeleton in the upload folder and now let's just add a loading skeleton here and let's import it from loading skeleton now this specific loading skeleton is literally going to be the summary viewer itself so if we go to summary viewer it's going to be entirely the component that we want here except that we are going to render skeleton values here so for that reason I'm going to just give you the code for this and typically you can ask AI to generate this for you now skeleton is something that does not exist yet so we will be going to shaten UI and then looking for skeleton here and going to skeleton component and installing it and this is what we essentially want to show to the user so let's copy this go to the terminal and paste it now let's just restart the server here and I believe I've accident acally shut down our stripe server that we had exposed as for a web hook it's okay we can always create a new one and now let's just refresh the page here and let's just say export default there we go there we go so to walk you through the code for what we have done here is we have literally taken we had copy pasted what we had in summary viewer and generated values for it and use the skeleton instead of having the actual title in there and skeleton components is loaded completely we are using one to three to map through the items and show them so for instance if I go ahead and upload it again you will see a beautiful summary viewer skeleton which is what we want now while that's going on we can also head head over to the dashboard page and this is also where we need to add our summaries as well so for inance instance if we go all the way down we do have an empty summary State upload your PDF but let's say summaries are in progress and we need to update it then we also need to update the UI for that too now in order for us to update the UI entirely for our summaries page which is this page but this is the entire page that we want to replace and add a empty state for not just a specific SE uh selected section on the page and for that what we could do is we could use the loading so for that we could use the loading file from nextjs if we go inside of dashboard we could create another file just like how we have p. TSX that allows us to expose a route we could also create a loading file which essentially gets called when the request is in progress so this is automatically taken care of for us inside of nextjs and we could pretty much just generate anything that we want here and that is in fact is what will get loaded for the user so if I say loading and if I refresh the page let's just try to simulate a slow Network so if you go to network Tab and let's just say 3G and if I refresh the page you can see there was the loading text but because let just me tweak this a bit further div and text Gray and if you were to open it up and let's refresh it be don't see loading here but there is a UI so let's just give it maybe some style so we can see it minute screen relative loading let's also give it a BG gradient as usual like we have been doing with a class name of from Emerald 200 V teal 200 to cyan 200 and let's also give it a section which will probably have a header and let's also give this a container px10 py4 MX Auto Flex Flex call and GAP 4 and now if we expand this refresh the page we still see a gradient but we don't don't see a loading skeleton so let's keep building it further so let's create a header skeleton which will return let's say header with header skeleton right here and let's create a div which again will match to what we have here and this is where we can paste it but instead of summaries we can say array do from length three but instead of summary card let's create a summary card skeleton with key equals index and we can keep this as underscore now inside of the summary card skeleton we could have a motion Dev because we want it to animate so we can say motion Dev variance could be item variance that we have and then same thing initial values will be hidden animate will be visible and then we'll have a class name of rounded LG border BG card text card foreground and Shadow small okay now inside this let's render the skeleton component from shaty and UI with h48 W full and rounded LG there we go and we can pretty much just autoc close this so now we have a summary card skeleton with a skeleton inside it as well as a header so now if we go back here let's refresh the page and now if you go to upload a PDF and then go back to summaries you could see there was a nice little loading state so if you were to go back and simulate it go to upload a PDF but if you go back to summaries you can see that it stayed a bit more let's do 3G for now do upload it works but if we go to summaries you can again see for a second it did load it but because the application is so fast it was very hard to see for us all right so now let's also C write code for the header skeleton as well so for this one we're going to have a div and for this we can just look at the header skeleton here here which is literally this value from Flex to motion p and if we go here let's just copy it and close this div as well let's import motion p and motion H1 and instead of this specific text this is where we want to render the skeleton so we can say it's going to h10 w48 and instead of this we're going to have skeleton again the class name of 86 w96 so we are basically creating these empty skeleton elements instead of the text to give the skeleton look all right so now again we're going to have another with variance be item variance initial hidden animate visible and class name as self start and then again we're going to have a skeleton which is going to be h10 w32 so now if I go to upload PDF and come back to summaries you can see it did show the text skeleton as well which is what we want just like that so our empty skeleton code is also looking pretty nice we don't need a skeleton code for the landing page because it's we good there but definitely for upload PDF we we will show up a thing here as well so so for instance now if we upload a menu you can see processing shows up here so user can see something is going to happen and then we get redirected to a new page once the processing is complete there we go and now you can see and go through the entire document when I refresh the page it still works as expected lastly we need to also add a empty skeleton for this page as well so if we were to go back let's close all of this similar to how we added loading file we also need to add loading. TSX for this load page as well which is the individual summary page and again we could pretty much try to do something similar for instance we can say loading summary page here and we can pretty much copy a lot of the elements from here itself just copy it and paste it let's close the div import BG gradient then we also need a here as well which is this one let's copy that and even this value too so and close it there we go and then we have the header so let's give it a div here for the header so we can say Flex Flex call Gap 8 and let's call this header skeleton and we have header skeleton code here it's going to be this value let's just say header for now there we go so we have the header skeleton and right after that we also need another div inside of it which is going to be relative overflow hidden and another inside of it again we're just adding the exact same styling and we can see this code right here just copy that and close it and now comes the icon code the file text icon which is going to be this one let's get the icon from Lucid React 2 we don't need this and then right underneath it let's give a relative class name with a Content skeleton code and then we can do content skeleton here let's work on the code for Content skeleton which is going to be pretty straightforward we're going to give it a space yf4 but if we go back to the individual summary page you can see how it gets displayed there we go so you can see the replacement for it so there it is so over here we're going to have an array of six and and then map through them comma I and here we can say skeleton and this is where we can add key equals I class name will be again let's get CN from shat CN and then H oops H4 and then if I modul 2 equal to zero then let's just do W full else let's do w11 sl12 so do this we have the class name pick that and then next to that let's also give it a BG white to be ad there we go so now if I go back and go to the individual page let's also copy this and move it right here we go back and go back to the page that's where the content skeleton will show up now again a lot of this code we don't need so we can pretty much get rid of it to make it look exactly how we want it so for file text we just need top four right four and then let's just do text rows 300 / 20 we go back here same thing here too we can just give it relative p8 bgy ad background blur MD rounded and then let's just give it border and then border rows and let's get rid of everything everything else and now let's give it a gradient background just going to be absolute in set Z BG gradient to BR from rows 500 sorry 50/50 via orange 50/30 again reducing the opacity transparent opacity to rounded 3 XL there we go and we can a to close the dev so this is in fact a gradient background and this is a icon itself and this is the content skeleton and everything else can stay the same so now if I go to your summaries go back here we get navigated to this and now we can actually work on the header component now header is going to be similar to this except you're going to give it a Y6 and give it another of flex Flex wrap item Center Gap four and there will be two skeleton elements but not with these specs so it will be h8 32 rounded full BG white 80 and copy the same thing here except it would be H5 and W 40 same thing here too but H 12 W 3x4 all righty so we have the header skeleton the content skeleton and something that replicates a loading summary so now if I do this you can see how it displays it we can just render it just like that now if we also want to render the same element that we used on upload we could do that too but I'm quite happy with how we have this here so we can just show that to the user shrink this back we can pretty much look into what we had for the loading skeleton of summaries and just render that here too if you like we can see how that looks and if I refresh the page here go to summaries and you can see how it renders it I definitely prefer this more than what we had earlier but that also works if you want not every single thing should match but it should match the gist of what we're trying to create here so you can see how we have that and it does show show up very well so if I go back here there we go so I'm quite happy with this now so instead of using creating a Content skeleton ourself we can just use the loading skeleton here now if we refresh the page or if you go back to summaries and see there is this piece that has not been necessarily covered but that's completely fine too because if you go back to summaries and go back to this page it does do a job of having a skeleton but if we want to fix that for instance then we need to create the loading skeleton for this page entirely so if you were to copy this and if you were to create a loading skeleton for it so right underneath here we can keep everything as is but instead of the file name we can render the skeleton we can say it's going to be W12 instead of a button with a value again we can render a skeleton of W12 h12 same thing here as well so now if we were to go back and click on it you can see how it does have the value so we can say It's stuck here we can remove the unused Imports and instead of this file text icon we could give it a skeleton value as well we don't need any of this all right so now again we go back to summaries and go back to home we just need something for the source name here so for Source info the name came underneath file text which is this so we can say it's going to be H4 or h12 and let's give it this a skeleton value as well all right so now you can see how we are tweaking the values for it to match the skeleton but again doesn't need to be that big so we can reduce the size and tweak it accordingly again I'm just showing you how skeleton code is generated for these items this way you are able to do it on your own as well and it looks pretty seamless for what we're trying to create here so I'm quite happy with how our skeleton is looking as you go from one page to the other it's basically rendering that content so we can tweak it however we like if you don't want the color to be rose color you could tweak that as well the skeleton go is also looking very cool I'm very happy with the changes so far () now there is one more thing we need to add in the clerk middleware middleware file is sort of the middle person between your request and response for instance if we head over to our drawing board Whenever there is a request being made every single time we basically have a request and then we have a response now middleware would sort of sit in the middle here so anytime request is being sent and let's mark this by yellow and this in fact would denote the middle wear so anytime we try to Route so for example we say Local Host slash or any domain slash then then that before it goes and gives you the response verel gives you the response or nextjs rather gives you the response middleware is always being called so middleware is sort of the middle person that can do the job of helping you redirect your application whenever you need it so for instance we have a middleware here and we set up the clerk middleware so a sits in the middle so we need to also configure our o and tell clerk that okay what route are protected and what are not and accordingly redirected for instance if someone goes to slash dashboard what should happen well if someone does go to SL dashboard then ideally they should basically be able to go to slash dashboard however this depends if they are logged in or not so if they're logged in we want to definitely we definitely want them to be to go to slash dashboard but if they are not logged in then we don't we don't want them to go to slash dashboard we want them to go to sign in or sign up or whatever for instance so let's say sign in is the out we want this is very important for us because otherwise users won't be able to get redirected in the right spot and clerk can handle the route management more seamlessly so let's Implement that so over here we're going to add a function and cl take o as the first one and request as the second parameter we want to Define if the route is protected route and this is a function we will create by passing in the request then in that case we want to protect the route which is o. protect now o comes from here and protect is a function we need to call so over here we can say const is protected route and this time we going to create a function call a function called as route matcher from Clerk and anytime we want to say okay if it's slash dashboard slash whatever value so we can say slash dashboard dot asteris or if it's slash summaries then we want to make sure that we are protecting it and this one can just be called from o dot and this way we are saying that these are the protected routes but these are not and we need another protected route which is slash upload now anytime any of these routes get called then they are in fact protected and other routes are so for example home is not slash is not protected so let's just go ahead and push this change as well but on top of that there's one more bug that I also want to fix as part of this there's one more bug in the app application so when we go to plan batch component so let's go ahead and push this so let's just push this and say clerk middleware to protect routes there we go and just push it let me just quickly show you an example of what how to debug in production now our app has been successfully deployed and everything works as intended on local our database has also been switched to production everything is working fine but let's say we try and upload the service which is we upload the PDF and hit upload we are uploading the PDF and this PDF is getting processed hang tight our AI is reading through your document and once that happens it suddenly stops now if you take a look at the console it does say that the server responded with the status of 5 504 and let's try again and monitor the network just going to call this just clear this and just hit refresh now upload thing that's called and then our service that is our serverless function is going to get called as well that is the upload itself it's processing the PDF and upload is the page for instance but now this specific upload file gives you a 5 for Gateway timeout for instance if we take a look at payload we do get file name and file URL but other than that we get nothing it says function invocation timeout and this is a very common error when you're using the serverless world and you are on a flee free plan with a service now on verel the timeout is in fact 5 seconds and because it took over 5 seconds for a request to get processed this in fact failed and it gave us an error saying that 54 Gateway timeout and that's something that shouldn't happen ideally when you upgrade to a Pro Plan this is not something that you would face however how can we fix this now in our free plan that is our hobby plan you might encounter such issues especially related to upgrading to Pro for your SAS application so I want to show you how we can implemented how we can fix it so first we need to make sure that we are essentially dividing our actions so if you go to upload form right now we only have one action for starting the upload so we do get the file URL and so on the other action for generating the PDF summary so fetching and extracting the PDF text as well as generating summary from open AI formatting the file name as a title and so on so we are doing three separate things in one service so what we are going to do now is to split this up so inside of upload form once the PDF does get generated we have the data for it and we send the user the data this time we are going to call open AI so we can say call AI service for instance and then the once the AI service gives us the data is when we can save the summary to the database so this is where we're going to call another server action and every single Ser action every single function that gets exported here in a use server directive file is in fact a server action which is a separate HTTP endpoint so we just need to make sure we are going to split it this is one way to definitely solve it and we also have the same thing twice so we can get rid of that too so first let's just say get the PDF so we can say export ising function get PDF text again the map for this would be the same let's do that and now let's just again copy this paste this here so we are pretty much going to copy everything let's copy the whole thing and then delete it as intended so let's copy the whole thing move it in here the job of this function is only to extract the PDF and return it so we don't need this specific try catch block and here we can say if there is no PDF text then fail to fetch and extract PDF text for instance and then we have no PDF text and we're going to format it we don't need to format this either if there is PDF text and we can say success is true PDF text generated successfully with data as PDF text and in terms of the file name sure we can have this specific file name getting formatted here and then returned now we can get rid of this completely and now we're saying okay if there is no file URL then the file upload has failed Fetch and extract the PDF text format the file name and return it now this is something that could easily be done on the front end we don't necessarily need to do it here but but let's just keep it as is for now all righty so now we have this and this one we can say fail to fetch and extract PDF Text data is null so this is a separate instead of get PDF text it needs to be generate PDF text all right so now we can just instead of fetch we're not going to call this at all so let's remove this completely remove this completely and what this would get fed in is this now again file name could be returned here too now we are going to only generate the summary from open aai and then generate it all together if there is nothing and we can get rid of this file and the file name that we do enter would be the formatted file name here so we can keep it here everything else should stay the same and this could be failed to generate summary there we go so now we have spit it up so in here we can say const PDF text will be generate PDF text and we are going to call file URL and file name so let's just do that file URL so this is literally what we want and file name in fact if you're not using file name at all are we using it yes we're only using it to just pass it in and pass it back just copy this code move it in here import the file here and now we don't even need to pass in file name so now if we go back here let's get rid of file name completely and we just need to extract the PDF text that we get from Fetch and extract PDF text and return it and that's it now we have the formatted file name so this time we don't need to pass in for file name we can just pass in the title we can pass formatted whoops file name there we go now PDF text has been retrieved so let's call the AI service now this time we can say summary equals generate summary and this thing could be right in here there we go so now in generate summary we have PDF text and file name so that's exactly what we would need PDF text and and let's copy this value we have PDF text and file name so we're passing in the PDF text and the file name is going to be formatted file name now let's copy this and paste it in here now we really don't need this block at all so we can just move that in here there we go if data we don't need it let's get rid of that and so on perfect so now we are formatting the file name we are generating the PDF text here copy this and move it and this in fact would be result and this could be summary result and there we go now generate PDF text does return data. PDF text so let's get that so we want result. data.pdf text then similarly we have this value which is that which will be summary result here and then data. summary and generate PDF summary does return data and then it returns data our summary so let's pass that in as well so now let's copy this we are now going to generate PDF summary then after the summary result we're going to generate PDF summary and here we are going to once we are processing the PDF summary we uploading the PDF then we are processing the PDF summary which is here then we are generating the PDF summary now we are saving the PDF summary and then summary has been generated so this makes a lot more sense and we have split up our service into multiple steps so now if we not here but if we go to Local Host and let's just try it out by going to upload a PDF and and let's update it our AI is reading through the PDF it's still processing saving summary and summary generated so it still works as intended which is what we want so keep this in mind as you get that specific error from verell or any other service that you're using if it's going to take longer than 5 seconds then you really need to split it up you need some way to split that up and larger the document the more it's going to take longer the longer it's is going to take all righty so now we can just push this change and we can say split the server actions so now if we go to deployment it just got deployed and let's just go to someware Ai and refresh the page and we are also going to monitor the Lo log stab inside of our cell which will essentially tell us the issue so if I refresh the page here one more time we can always head head on to the box tab inside of verel to let us know if in case of any problems and this is in fact slow 3G we don't want any throttling all righty so now if we go here and upload the same bar menu that we have been uploading let's see what happens now upload generating PDF summary again upload has been called with a separate service alog together so it's no longer just one server function it's several and it's again yet again gave us the Gateway timeout now hopefully the error is gone but let's see what happens again our AI processing is going to take a very long time it's already taken a lot so we need to make sure we are handling this correctly it's generating the summary and it is going on for quite some time I must say it's still processing and it failed again for the same error 504 G we time out so how do we get around this well there's another way in verel we could or in nextjs we could essentially set a Max duration property which is going to be 20 so by default it's 10 seconds let's just change that to 20 and see what happens let's push this change and let's see what happens so now if we go to deployments you can see I've already pushed this change and if we go back to home let's refresh the page one more time and now the max duration has gone up so let's just select the same menu and upload it and now let's hopefully see that it's not going to time out because we have increased the Mac duration timeout now that we get the same error the timeout error how do we get around it we have already split our giant server action into several smaller parts but the call for open AI is take taking longer so how do you deal with that in the real world well you're going to create and extend the duration of your server actions now by default versel has set it to run for 10 seconds but we need to change that and increase it and the way we could do that is by creating a new file called versa. Json and in this file we are going to Define functions and those functions are going to have a property which says Mac duration is going to be 60 now we are saying anything under app directory is going to all the server actions are going to basically run for a Max duration of 60 seconds this increases the limit for our server actions for all server actions inste of app the other option to do the same thing is by adding it in here in page so let's do both let's increase the limit for Server actions execution and now let's see what happens let's refresh the page and let's click on the first one and let's review the bid logs to see make sure everything works as expected my deployment is successful so let's try it again let's refresh the page and now let's hit upload and let's see what happens we are generating the PDF summary and there we go our PDF has been generated finally so our upload service is in fact working as expected as you can see the data is there the summary has been generated for the second one we have the PDF text as intended the first one is the file URL itself so all of this data is working as intended so you can view this specific summary and view more information about the different cocktails you could get at this specific bar all righty so our service our app is fully complete so congratulations on following along so you now have learned how to handle production deployment errors that come up during production and how you can resolve them the duration or the rate limiting that we did encounter when we deploy to production is also very important and what are several ways you could increase the you can increase the execution limits on your server actions and the limitations of it as well so all these things you definitely need to account for as you deploy to production as you ship your SAS application it is finally time for us to deploy our () application to production now in order for us to do that we will be using a platform called as versel a lot of the verel team is involved in developing nextjs and it's one of the major contributors to the next xjs ecosystem so that's exactly what we'll be using they also have a pretty generous free plan as well which is the hobby tier and it does give you a lot out of the box once you do get the scale that you need with your SAS application you could look into upgrading to Pro and I have done that in in a couple of projects but right now I'm back on the hobby plan and it is completely free and I have a lot of projects on versel no complaints whatsoever that's exactly what we'll be doing now in order for verel to work as expected what verel does is it does the deployment in three different steps so if you take a look at the deployment it's pipeline the first step is is it basically run npm install this in fact installs all the dependencies and Dev dependencies in your project what it does is then tries to run npm run build now this specific run build command is going to lint your project and check for types just to make sure everything works as expected once that's completed then it's going to generate the pages using environment file so in our case it will be n. local but let's say if we don't have n. local then it's just going to try to access it any environment that we have so let's say if we have n file then it is going to use that instead that once all of this is done it's going to create a static build for our Pages essentially so any pages that could be statically built it's it's going to then build it and then you will essentially see a bunch of Json files HTML files server files inside of a folder and that folder is in fact called as the next build folder this is going to be the next build folder and if I'm not mistaken it's going to be in theore next folder now all these steps will occur and then we can basically Point our website and it's going to give us a URL a deployment URL so we in this case it could be suar demo. versel doapp and it's always going to pre suffix it with versel doapp and that's a subdomain that we get and this way it will be able to deploy everything now if there are any issues inside our build it's going to notify us and it's going to faill the build but this is all we need to do to deploy it so let's go ahead and deploy our application to verel and let's get it ready to deploy to production so let's do that so the first step is to go here and run npm run build this is going to again Run next build which is taking up our n.l file and it's creating a production build for us that's going to install the dependencies and Dev dependencies and then it's going to lint and check the validity of types now I intentionally kep this error in because this is not compatible it's a type issue but it also brings up a bigger issue as well this comes from upload thing/ core and this is the error and it say say that the types are not compatible so it's not assignable to a Json object so we need to tweak that so instead of file let's return a file URL which is going to be file. URL and also a file name which is going to be file. name now everything else can stay the same the fact that we have tweaked this specific signature we now need to head to upload form where we have upload things set up and let's go all the way to the top so we are extracting file from the data now we can extract a few other things but more importantly let's just print the data and add data over here this will be are not extracting anything but returning whatever we get upload has begun for this specific data if we scroll down we also see a function called generate PDF summary and then we are also accessing the response which is the upload response so we can rename this this to upload response whoops let's just rename this to upload response and now that this has been uploaded we know exactly what the upload things upload things response is so there instead of server data. file. URL we need to change this to file URL because that's exactly what we have returned over here file URL this can stay the same because it in fact comes from the file that we upload on top which is the form data. file so we don't need to worry about that all righty then in generate PDF summary which is one of the steps what we do is we get the upload response we extract server data and then we extract all these different fields now if we take a look for user ID we're not even using it so we don't even need to pass that in we can directly pass in the file URL and the name which is extracting here so let's just get rid of all of this and here file URL and file name and this in fact could be a string value both of them file URL and file name both of them are string all right so we don't need this anymore in fact we can say if there is no file URL which means that the upload has failed now we don't need to extract all of this we can can just get rid of this completely and instead of PDF URL which is what we call the URL we can call this file URL thing here as well everything else stays the same we don't need to change any of that stuff and now instead of passing upload response we can pretty much pass in the file URL but notice how we're using assigning and accessing file URL twice so we could just say uploaded file URL equals this and let's assign it to both the values here so file URL changes here as well as here which is what we want and we can also get rid of this console log because we don't need it and that's it so now if we go back to our build and let's run build again let's see what happens because it should no longer be a problem since we have resolved that specific type now it's linting and checking the validity of types and it has failed to load config prettier to extend from so if you have installed prer you should not see this error I'm I don't have it so I'm good but everything else is working as expected which is what we want and if you see it has generated a static pages and it's basically it has basically generated all these different routes what the size of each of these routes are the first load JavaScript bundle size and also the how they have essentially rendered it and it's server rendered on demand so now if we go back toex it wasn't uncore corex it was in fact next as a folder and this is where all the files are with all the information a bunch of Json files and server files and so on so are these three parts of our application is pretty much done so we have done this we have done this and we have also have this so now we can focus on this thing which is uploading it to verel so if we go to verel uploading it to verel so if we check our code I already have a GitHub code ready for us I've already set up and I was pushing all the commits as we were working on it so if we go and Commit This and we can say fix build issues committed so if I do get status on Branch main there's nothing else to do and now I can push it remote- V and this specific git doesn't have any remote so let's just go to GitHub and let's go ahead and create a new repository and here let's just select my name and we can say Suare eii there we go it's it's available this can be public and let's just keep it none for now and hit create repository the minute we do that all we need to do is follow these instructions on the command line since I already have an existing repo I'm going to use this but if you're creating a new repo then you may want to do something like this all right so I'm going to copy the remote and add it now when I run the same command get remote hyphen V you will see that I do have remote that it's going to push to and remote is essentially the specific URL the location of the specific GitHub reer now let's just copy it and paste it it's going to rename the branch to main if it hasn't already and it's going to push to GitHub and now if I refresh the page you can see that my is my comits have successfully been pushed and if you notice all the comments are essentially split by the feat and The Way We Were building it so please follow these comments to check the code that necessary as we were building it all right now I have already prepared a read me document for us so let's just go to read me paste this and this is essentially how we build this specific application so you not only learn nextjs 15 app router stuff but you learn react cler gp4 Lang chain shat CN UI post SQL with neon DB upload things stripe typescript tailin CSS 4 and so much more you learned to clear and to create clear structured summaries beautiful interactive summary viewer how to handle files securely protect your routes and API endpoints create flexible pling plans for your SAS application create web hooks and apis for with nextjs for stripe events create a user dashboard for managing summaries a responsible beautiful design realtime updates and path revalidation production ready deployment toast notification for all the different statuses such as upload status process processing updates error handling you learn performance optimization SEO friendly summary generation that we'll work on next and so much more all of this is done in this specific course so I'm really glad if you are able to get through so far so you should definitely be proud of yourself so now let's just go ahead and push this so I can say get add dot get commit and let's just say update read me and let's just head get push this is going to push it so now if I refresh the page our project is ready to go and I'm also going to add a the open graph image that I have already created for us so I'm just going to copy it and let's say we are going to go and paste it inside of the public folder and there we go and this is the open graph image that I have created which means that anytime anyone shares our application our URL on social media or anywhere else then they're going to see this beautiful OG image which an open graph image for our app all right so now that we have this specific image we are also going to go to the app folder go to layout and configure it as well and what we need to do is configure our app so that it's ready to be shared on social media and this is the SEO part we have already looked at title and description but now let's create a new tag called open graph let's create a array called images and this is where we're going to tell nextjs that hey please look for the open graph image over here and that's the open graph image from the public folder that we just added along with that we are also going to create a canonical URL and a origin URL and what I mean by that is what should be the default URL that is the original URL for application and also what will be the canonical URL a canonical URL essentially tells any of the search engines that what the actual URL is for your application that's what we need so let's just add those property so we're going to add meta database and here we're going to say new URL and this is where we are going to set a origin uncore URL and similarly in alternates we are going to store a canonical URL which is also going to be origin URL now this URL does not exist this so let's just head over to constants or helpers rather and this is where we are going to create a origin URL so we can say export const origin URL and we are going to say if it's going to be development then it is whatever route or whatever Port our application is on which is going to be Local Host 3000 else it's in fact the URL from verel so we're going to hold back back on this change and from pushing it but let's just import origin URL from there all righty so now let's just go ahead and deploy our application I'm going to log in with verel and log in with my GitHub if you don't have an account please sign up and now let's just click on add new add project and this is where we can just pick sare Ai and import it and this is where you can see that it's going to run npm run bill which is what I mentioned here npm run bill and the output directory can be the default one it's going to run npm install but we also need to pass in all the environment variables that we have created so far so if you go to n.l file these are all the different environment variables now keep in mind you don't want to post this one at all in versel because this is only for local but all of this can go go inside of verell so let's copy this and paste it now if you're wondering well we don't necessarily need to pass in the stripe secret key and the webbook secret for development we in fact need to do it for production well we definitely going to do that but for now let's just deploy it and then fix it so let's just go ahead and click deploy with all these different environment variables it's in fact going to create a bill which is the same command that we ran local npm run bill it's going to npm install the dependencies which is what we saw here and it's expecting a tailin CSS plugin which we don't have and I believe I accidentally might have deleted that so let's add that back there we go so let's only push the Tailwind dependency here so let's just add missing delin dependency all right let's push that so now if I go to home there was an error but if I refresh the page it did create the project so if you go to deployments tab this is where you can see it has automatically kicked off a new build and now you can see that there are certain plugins that do expect an older version of Tailwind so what we can do is let's just go to settings environment or environment variables or let's just go to General and here we want to just override it and say npm install hyphen hyphen Force because we are using the latest versions from everything and not all libraries have updated it so let's just force force it now we don't need to trigger a local build from our using a commit message we could just do that andell has these two environments production versus preview let's just do it to production for now and let's just redeploy so if you take a look at the Bild logs it's going to install it using the force command and let's see what happens now so it does warn us for the conflicting peer dependency but that's okay it has proceeded to run the build and now it's creating a production build just like we saw locally it's deploying the outputs it has server rendered on demand like we wanted deployment has been completed and hopefully soon we should get a it's ready perfect so now if I visit this we do get our Suare PDF SAS app ready to go it has successfully been deployed to production which is exactly what we want now if we click on this let's just change the domain here because we want the name to be S AI so use a domain that you wants it has actually taken the name because it was available so if I click on this I do see the app as well which is exactly what we want so if I copy this and then let's just head to stripe and let's just go to web hooks we want to change this now to be something else let's just click on update details and we just want to change the route to sare AI versal App instead of this and let's hit update endpoint because we want now the pricing to Target this URL and not the URL that we had set up locally so we want to definitely do that similarly if we go to web Hooks and let's just exit the sandbox and now I'm in production mode so let me add the same endpoint here and go to/ API SL payments let's select the two events that is checkout. session completed and customer dot subscription deleted and hit add endpoint now this secret is what we want inside of our app so let's just go to our cell go to settings environment variables and now we want this web hook secret to be updated through this one similarly let's just go to product catalog and click a new create a new product here and we might have to repeat it now unfortunately if I click on test mode and visit the sandbox go to somare sandbox if you're using sandbox payment links do get copied but this one I need to fill in the business profile for some reason to do it so we'll have to recreate the products manually so let's just go here and let's say Suare Ai and do the same thing repeat the same process that we did earlier so copy this paste it and we can say and get a beautiful summary now let's just create the first one as basic plan for pricing options let's just say this is a basic plan in the description let add another price and let's call this $19 and this is a Pro Plan hit next let's make the $19 Pro Plan as the default one and hit add product all right now product has been added so we have the two price IDs so let's copy the Pro Plan price ID go to constants and in price ID for the Pro Plan whoops this is the Pro Plan price ID and let's copy the price ID for the basic plan which is right here so we have essentially moved the prop plan price ID as well as the basic plan price ID we have created the web hook and if we go to payment links we just need to to update that too so if we go to new and let's just click on basic let's just add allow promo code allow business customers to do it and then after payment let's replace it with a default message saying thank you for trusting us now go to the Suare AI URL that we have and from verel that we got and this could be whatever UR that you set up so let's just go to project and visit this is the URL for it so we can say now go do Suare aiwl sign up and create an account and then simply sign in to access the product perfect so this will tell them to do it everything else should say the same and let's just create link now we can copy this link and go to our code base and in the payment link let's just paste it similarly let's go back to payment links and click on new and click on the Pro Plan go to advance options same thing go to payment replace with message copy the payment link and paste it in the Pro Plan all right so now let's look at the message we created for this one go to preview go to after payment and copy this message exit this go to payment links click on this and let's edit it and after payment let's just paste it and hit update link there we go if we go to the web hooks we have the web hook created too with the signing secret now I'm going to copy the secret for the stripe secret key and this is where you want to create a new secret key so let's just select the second option which is your building your own integration and create secret key just going to send a verification CR key just going to send a verification and now I have already added the stripe secret key I have pasted that key inside of versus cell as well now keep this in mind the minute you update all your environment variables you want to make sure that you are going to redeploy your application so do that and let's hit redeploy all righty so now once the application does get redeploy we can fully test it before we do that we actually need to paste one more thing we need to update all of these values and post them so let's just go ahead and push these changes in so for that we're going to say get comment Dash and we are going to say updated with broad data for stripe and SEO all right and now let's just go ahead and push it now even though we have rep push the build let's just not rely on that one let's rely on the latest build and inverse the good thing is you can always just cancel the deployment you don't need to go ahead with it this way the latest Bild will be picked up now it's building and it's going to basically take in the latest environment variables and also the environment variables from what we just pushed on stripe while this is happening let's just push update the icon in our app to now we are using this fabicon which is a versal favicon let's just go ahead and delete it we don't need it and now let's just paste this specific Suare ficon icon that I created and I I in fact used AI to do it so you can totally do that too for this favicon whatever favon you're creating in the future so now let's go to again the same metadata object under description you can just say icons and the icon would be the icon that you just created so which is icon. ICO which is what we want and now let's just do the same thing again updated favicon and hit push from here again you can use the push from here or use the push from terminal whatever works for you now our latest build if you take a look has failed so it is because it's looking to find the config prettier to extend from now prettier is a development thing not a production thing so we should just disable prettier inside of production now one way to do that is to move Mo the package esin config prettier to dependencies instead of Dev dependencies but the challenge with that is it blurs the line between what is develop and what is production you don't necessarily need es lent not prettier in a production environment you only need that in development environment so let's just disable it so the way we let's just go to next config file here and ask es Lin to be ignored so we can just say ignore during bills so this allows broad bills to successfully complete and now one more thing we can do is let's just minimize everything is to look for to-do inside of layout and remember we asked we said we're going to get rid of this so if it does they don't have an active subscription then upgrade require should be shown at the same time if remit limit has been reached then it should also redirect so let's keep that in and additionally we also need to tweak one more thing since we know now the URL is if you go to origin URL right here we can just say https SU a.v. app this way the original URL is set as well okay so now we have all of these changes that we have made so let's just push and we could say something like turn off es lint for broad bills and set origin URL along with cleanup there we go and now let's go ahead and push these changes there it is so let's just see the build that's running already so it's going to skip the linting because again we said to ignore the build errors check the validity of types and collect the page data now it's successfully generating the static Pages as we like and so far it's looking really promising and it's finally deploying so everything is working as expected which is exactly what we want and there we go we do see the check marks here so if you go back to Suare Ai and go to visit then we have our app deployed and if you click on triome and click on buy now it is in fact the produ one it's telling me that I already have a subscription so we don't need to worry about that and if I click on buy now which is again the same thing so what I could do is just go here and we could also just check out with the different email Al together and then enter the information as expected we have the promo code enabled like we talked about as well we can enter our card and this is no longer in test mode so you can actually make a purchase and get access to the account as expected now if you click on sign in this is where we are still seeing clerk in development mode and there's a reason why I kept clerk in development mode because the way you create a production instance for clerk is you can create a production instance and clone the development instance for example but I cannot add a subdomain here it needs a proper domain which I would say it's sort of its limitation because that should not happen it should not restrict us like that but if I create create instance it says ver. app domain cannot be used to deploy to production applications so it does need a proper domain so if you once you were to set that up I'm not going to do it I'm just going to use my development environment for it but once you're able to set that up you can just create instance and then go to configure and copy the environment variables as expected as you want and then add that to your environment variables in versel to configure it so clerk can still be in development mode for me I'm totally okay with that so once I do that and log in once we log in it still works as expected because we still have the same credentials of cler if we go to summaries it does tell me to sign up so I'm just going to hit sign out and let's do a end to end test here when we click on sign in let's sign in oops let's just sign in with my my other email since no account has been found so let's just create one enter that and now it's asking me to verify it and sign up so I have successfully signed up here this is my email address I can also just manage account and give it an avatar if I like as well but I'm not going to it's fine I'm happy with it if I click on upload again it says you need a subscription congratulations if you have () followed along or even followed part part of the course for helping you build and ship your SAS applications using the latest Technologies and my favorite text tack you have successfully built a production ready next year's application and know what it takes to build and deploy a SAS app as well now I have a exciting set of videos coming up on SAS so please make sure to subscribe to my channel so you learned all the latest and greatest stuff about building and shipping your SAS app I'm really excited and congratulations once again for completing this specific course now as next steps I do have a course on teaching you how to build nextjs applications more in depth and there's so much I wanted to teach about nextjs the latest version of nextjs and a lot more in depth but I just couldn't so in this specific course nextjs course. deev you can essentially build and deploy production ready applications what you saw in the AI SAS app was just the tip of the iceberg this course will teach you a lot more about it and we are going to use so many of these technologies that we did use in this AI SAS app you're also going to use it here but and also ship more in depth projects that should get you really excited to check out along with a bunch of different bonuses as well that I would highly recommend you to take advantage of if you haven't already then please sign up to the waight list I'm planning to launch the course very soon the full launch of the course will happen very soon and the weight list will get exciting discounts bonuses and stuff like that anyway congrats once again for completing this course I'll see you in the next one bye for now